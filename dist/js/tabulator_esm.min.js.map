{"version":3,"file":"tabulator_esm.min.js","sources":["../../src/js/core/CoreFeature.js","../../src/js/core/tools/Helpers.js","../../src/js/core/tools/Popup.js","../../src/js/core/Module.js","../../src/js/modules/Accessor/Accessor.js","../../src/js/modules/Accessor/defaults/accessors.js","../../src/js/modules/Ajax/defaults/urlGenerator.js","../../src/js/modules/Ajax/defaults/contentTypeFormatters.js","../../src/js/modules/Ajax/Ajax.js","../../src/js/modules/Ajax/defaults/config.js","../../src/js/modules/Ajax/defaults/loaderPromise.js","../../src/js/modules/Clipboard/Clipboard.js","../../src/js/modules/Clipboard/defaults/pasteActions.js","../../src/js/modules/Clipboard/defaults/pasteParsers.js","../../src/js/modules/ColumnCalcs/CalcComponent.js","../../src/js/core/cell/CellComponent.js","../../src/js/core/cell/Cell.js","../../src/js/core/column/ColumnComponent.js","../../src/js/core/column/defaults/options.js","../../src/js/core/column/Column.js","../../src/js/core/row/RowComponent.js","../../src/js/core/row/Row.js","../../src/js/modules/ColumnCalcs/defaults/calculations.js","../../src/js/modules/ColumnCalcs/ColumnCalcs.js","../../src/js/modules/DataTree/DataTree.js","../../src/js/modules/Download/defaults/downloaders.js","../../src/js/modules/Download/defaults/downloaders/csv.js","../../src/js/modules/Download/defaults/downloaders/json.js","../../src/js/modules/Download/defaults/downloaders/jsonLines.js","../../src/js/modules/Download/defaults/downloaders/pdf.js","../../src/js/modules/Download/defaults/downloaders/xlsx.js","../../src/js/modules/Download/defaults/downloaders/html.js","../../src/js/modules/Download/Download.js","../../src/js/modules/Edit/inputMask.js","../../src/js/modules/Edit/List.js","../../src/js/modules/Edit/defaults/editors.js","../../src/js/modules/Edit/defaults/editors/input.js","../../src/js/modules/Edit/defaults/editors/textarea.js","../../src/js/modules/Edit/defaults/editors/number.js","../../src/js/modules/Edit/defaults/editors/range.js","../../src/js/modules/Edit/defaults/editors/select.js","../../src/js/modules/Edit/defaults/editors/list.js","../../src/js/modules/Edit/defaults/editors/autocomplete.js","../../src/js/modules/Edit/defaults/editors/star.js","../../src/js/modules/Edit/defaults/editors/progress.js","../../src/js/modules/Edit/defaults/editors/tickCross.js","../../src/js/modules/Edit/Edit.js","../../src/js/modules/Export/ExportRow.js","../../src/js/modules/Export/ExportColumn.js","../../src/js/modules/Export/Export.js","../../src/js/modules/Filter/defaults/filters.js","../../src/js/modules/Filter/Filter.js","../../src/js/modules/Format/defaults/formatters.js","../../src/js/modules/Format/defaults/formatters/plaintext.js","../../src/js/modules/Format/defaults/formatters/html.js","../../src/js/modules/Format/defaults/formatters/textarea.js","../../src/js/modules/Format/defaults/formatters/money.js","../../src/js/modules/Format/defaults/formatters/link.js","../../src/js/modules/Format/defaults/formatters/image.js","../../src/js/modules/Format/defaults/formatters/tickCross.js","../../src/js/modules/Format/defaults/formatters/datetime.js","../../src/js/modules/Format/defaults/formatters/datetimediff.js","../../src/js/modules/Format/defaults/formatters/lookup.js","../../src/js/modules/Format/defaults/formatters/star.js","../../src/js/modules/Format/defaults/formatters/traffic.js","../../src/js/modules/Format/defaults/formatters/progress.js","../../src/js/modules/Format/defaults/formatters/color.js","../../src/js/modules/Format/defaults/formatters/buttonTick.js","../../src/js/modules/Format/defaults/formatters/buttonCross.js","../../src/js/modules/Format/defaults/formatters/rownum.js","../../src/js/modules/Format/defaults/formatters/handle.js","../../src/js/modules/Format/defaults/formatters/responsiveCollapse.js","../../src/js/modules/Format/defaults/formatters/rowSelection.js","../../src/js/modules/Format/Format.js","../../src/js/modules/FrozenColumns/FrozenColumns.js","../../src/js/modules/FrozenRows/FrozenRows.js","../../src/js/modules/GroupRows/GroupComponent.js","../../src/js/modules/GroupRows/Group.js","../../src/js/modules/GroupRows/GroupRows.js","../../src/js/modules/History/History.js","../../src/js/modules/History/defaults/undoers.js","../../src/js/modules/History/defaults/redoers.js","../../src/js/modules/HtmlTableImport/HtmlTableImport.js","../../src/js/modules/Import/defaults/importers.js","../../src/js/modules/Import/defaults/importers/csv.js","../../src/js/modules/Import/defaults/importers/json.js","../../src/js/modules/Import/Import.js","../../src/js/modules/Interaction/Interaction.js","../../src/js/modules/Keybindings/Keybindings.js","../../src/js/modules/Keybindings/defaults/bindings.js","../../src/js/modules/Keybindings/defaults/actions.js","../../src/js/modules/Menu/Menu.js","../../src/js/modules/MoveColumns/MoveColumns.js","../../src/js/modules/MoveRows/MoveRows.js","../../src/js/modules/Mutator/Mutator.js","../../src/js/modules/Mutator/defaults/mutators.js","../../src/js/modules/Page/defaults/pageCounters.js","../../src/js/modules/Page/defaults/pageCounters/rows.js","../../src/js/modules/Page/defaults/pageCounters/pages.js","../../src/js/modules/Page/Page.js","../../src/js/modules/Persistence/defaults/readers.js","../../src/js/modules/Persistence/defaults/writers.js","../../src/js/modules/Persistence/Persistence.js","../../src/js/modules/Popup/Popup.js","../../src/js/modules/Print/Print.js","../../src/js/modules/ReactiveData/ReactiveData.js","../../src/js/modules/ResizeColumns/ResizeColumns.js","../../src/js/modules/ResizeRows/ResizeRows.js","../../src/js/modules/ResizeTable/ResizeTable.js","../../src/js/modules/ResponsiveLayout/ResponsiveLayout.js","../../src/js/modules/SelectRow/SelectRow.js","../../src/js/modules/Sort/defaults/sorters/datetime.js","../../src/js/modules/Sort/defaults/sorters.js","../../src/js/modules/Sort/defaults/sorters/number.js","../../src/js/modules/Sort/defaults/sorters/string.js","../../src/js/modules/Sort/defaults/sorters/date.js","../../src/js/modules/Sort/defaults/sorters/time.js","../../src/js/modules/Sort/defaults/sorters/boolean.js","../../src/js/modules/Sort/defaults/sorters/array.js","../../src/js/modules/Sort/defaults/sorters/exists.js","../../src/js/modules/Sort/defaults/sorters/alphanum.js","../../src/js/modules/Sort/Sort.js","../../src/js/modules/Tooltip/Tooltip.js","../../src/js/modules/Validate/defaults/validators.js","../../src/js/modules/Validate/Validate.js","../../src/js/core/tools/OptionsList.js","../../src/js/core/rendering/Renderer.js","../../src/js/core/rendering/renderers/BasicHorizontal.js","../../src/js/core/rendering/renderers/VirtualDomHorizontal.js","../../src/js/core/ColumnManager.js","../../src/js/core/rendering/renderers/BasicVertical.js","../../src/js/core/rendering/renderers/VirtualDomVertical.js","../../src/js/core/RowManager.js","../../src/js/core/FooterManager.js","../../src/js/core/tools/InteractionMonitor.js","../../src/js/core/tools/ComponentFunctionBinder.js","../../src/js/core/tools/DataLoader.js","../../src/js/core/tools/ExternalEventBus.js","../../src/js/core/tools/InternalEventBus.js","../../src/js/core/tools/TableRegistry.js","../../src/js/modules/Layout/defaults/modes/fitDataGeneral.js","../../src/js/modules/Layout/defaults/modes.js","../../src/js/modules/Layout/defaults/modes/fitData.js","../../src/js/modules/Layout/defaults/modes/fitDataStretch.js","../../src/js/modules/Layout/defaults/modes/fitColumns.js","../../src/js/modules/Layout/Layout.js","../../src/js/modules/Localize/Localize.js","../../src/js/modules/Localize/defaults/langs.js","../../src/js/modules/Comms/Comms.js","../../src/js/core/tools/ModuleBinder.js","../../src/js/core/tools/Alert.js","../../src/js/core/Tabulator.js","../../src/js/core/defaults/options.js","../../src/js/core/TabulatorFull.js","../../src/js/core/row/PseudoRow.js"],"sourcesContent":["export default class CoreFeature{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\t}\n\n\t//////////////////////////////////////////\n\t/////////////// DataLoad /////////////////\n\t//////////////////////////////////////////\n\n\treloadData(data, silent){\n\t\treturn this.table.dataLoader.load(data, undefined, undefined, undefined, silent);\n\t}\n\n\t//////////////////////////////////////////\n\t///////////// Localization ///////////////\n\t//////////////////////////////////////////\n\n\tlangText(){\n\t\treturn this.table.modules.localize.getText(...arguments);\n\t}\n\n\tlangBind(){\n\t\treturn this.table.modules.localize.bind(...arguments);\n\t}\n\n\tlangLocale(){\n\t\treturn this.table.modules.localize.getLocale(...arguments);\n\t}\n\n\n\t//////////////////////////////////////////\n\t////////// Inter Table Comms /////////////\n\t//////////////////////////////////////////\n\n\tcommsConnections(){\n\t\treturn this.table.modules.comms.getConnections(...arguments);\n\t}\n\n\tcommsSend(){\n\t\treturn this.table.modules.comms.send(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Layout  /////////////////\n\t//////////////////////////////////////////\n\n\tlayoutMode(){\n\t\treturn this.table.modules.layout.getMode();\n\t}\n\n\tlayoutRefresh(){\n\t\treturn this.table.modules.layout.layout();\n\t}\n\n\n\t//////////////////////////////////////////\n\t/////////////// Event Bus ////////////////\n\t//////////////////////////////////////////\n\n\tsubscribe(){\n\t\treturn this.table.eventBus.subscribe(...arguments);\n\t}\n\n\tunsubscribe(){\n\t\treturn this.table.eventBus.unsubscribe(...arguments);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.table.eventBus.subscribed(key);\n\t}\n\n\tsubscriptionChange(){\n\t\treturn this.table.eventBus.subscriptionChange(...arguments);\n\t}\n\n\tdispatch(){\n\t\treturn this.table.eventBus.dispatch(...arguments);\n\t}\n\n\tchain(){\n\t\treturn this.table.eventBus.chain(...arguments);\n\t}\n\n\tconfirm(){\n\t\treturn this.table.eventBus.confirm(...arguments);\n\t}\n\n\tdispatchExternal(){\n\t\treturn this.table.externalEvents.dispatch(...arguments);\n\t}\n\n\tsubscribedExternal(key){\n\t\treturn this.table.externalEvents.subscribed(key);\n\t}\n\n\tsubscriptionChangeExternal(){\n\t\treturn this.table.externalEvents.subscriptionChange(...arguments);\n\t}\n\n\t//////////////////////////////////////////\n\t//////////////// Options /////////////////\n\t//////////////////////////////////////////\n\n\toptions(key){\n\t\treturn this.table.options[key];\n\t}\n\n\tsetOption(key, value){\n\t\tif(typeof value !== \"undefined\"){\n\t\t\tthis.table.options[key] = value;\n\t\t}\n\n\t\treturn this.table.options[key];\n\t}\n\n\n\t//////////////////////////////////////////\n\t//////////////// Modules /////////////////\n\t//////////////////////////////////////////\n\n\tmodule(key){\n\t\treturn this.table.module(key);\n\t}\n}","export default class Helpers{\n\n\tstatic elVisible(el){\n\t\treturn !(el.offsetWidth <= 0 && el.offsetHeight <= 0);\n\t}\n\n\tstatic elOffset(el){\n\t\tvar box = el.getBoundingClientRect();\n\n\t\treturn {\n\t\t\ttop: box.top + window.pageYOffset - document.documentElement.clientTop,\n\t\t\tleft: box.left + window.pageXOffset - document.documentElement.clientLeft\n\t\t};\n\t}\n\n\tstatic deepClone(obj, clone, list = []){\n\t\tvar objectProto = {}.__proto__,\n\t\tarrayProto = [].__proto__;\n\n\t\tif (!clone){\n\t\t\tclone = Object.assign(Array.isArray(obj) ? [] : {}, obj);\n\t\t}\n\n\t\tfor(var i in obj) {\n\t\t\tlet subject = obj[i],\n\t\t\tmatch, copy;\n\n\t\t\tif(subject != null && typeof subject === \"object\" && (subject.__proto__ === objectProto || subject.__proto__ === arrayProto)){\n\t\t\t\tmatch = list.findIndex((item) => {\n\t\t\t\t\treturn item.subject === subject;\n\t\t\t\t});\n\n\t\t\t\tif(match > -1){\n\t\t\t\t\tclone[i] = list[match].copy;\n\t\t\t\t}else{\n\t\t\t\t\tcopy = Object.assign(Array.isArray(subject) ? [] : {}, subject);\n\n\t\t\t\t\tlist.unshift({subject, copy});\n\n\t\t\t\t\tclone[i] = this.deepClone(subject, copy, list);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn clone;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Popup extends CoreFeature{\n    constructor(table, element, parent){\n        super(table);\n        \n        this.element = element;\n        this.container = this._lookupContainer();\n        \n        this.parent = parent;\n        \n        this.reversedX = false;\n        this.childPopup = null;\n        this.blurable = false;\n        this.blurCallback = null;\n        this.renderedCallback = null;\n        \n        this.visible = false;\n        \n        this.element.classList.add(\"tabulator-popup-container\");\n        \n        this.blurEvent = this.hide.bind(this, false);\n        this.escEvent = this._escapeCheck.bind(this);\n    }\n    \n    _lookupContainer(){\n        var container = this.table.options.popupContainer;\n        \n        if(typeof container === \"string\"){\n            container = document.querySelector(container);\n            \n            if(!container){\n                console.warn(\"Menu Error - no container element found matching selector:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n            }\n        }else if (container === true){\n            container = this.table.element;\n        }\n        \n        if(container && !this._checkContainerIsParent(container)){\n            container = false;\n            console.warn(\"Menu Error - container element does not contain this table:\",  this.table.options.popupContainer , \"(defaulting to document body)\");\n        }\n        \n        if(!container){\n            container = document.body;\n        }\n        \n        return container;\n    }\n    \n    _checkContainerIsParent(container, element = this.table.element){\n        if(container === element){\n            return true;\n        }else{\n            return element.parentNode ? this._checkContainerIsParent(container, element.parentNode) : false;\n        }\n    }\n    \n    renderCallback(callback){\n        this.renderedCallback = callback;\n    }\n    \n    containerEventCoords(e){\n        var touch = !(e instanceof MouseEvent);\n        \n        var x = touch ? e.touches[0].pageX : e.pageX;\n        var y = touch ? e.touches[0].pageY : e.pageY;\n        \n        if(this.container !== document.body){\n            let parentOffset = Helpers.elOffset(this.container);\n            \n            x -= parentOffset.left;\n            y -= parentOffset.top;\n        }\n        \n        return {x, y};\n    }\n    \n    elementPositionCoords(element, position = \"right\"){\n        var offset = Helpers.elOffset(element),\n        containerOffset, x, y;\n        \n        if(this.container !== document.body){\n            containerOffset = Helpers.elOffset(this.container);\n            \n            offset.left -= containerOffset.left;\n            offset.top -= containerOffset.top;\n        }\n        \n        switch(position){\n            case \"right\":\n            x = offset.left + element.offsetWidth;\n            y = offset.top - 1;\n            break;\n            \n            case \"bottom\":\n            x = offset.left;\n            y = offset.top + element.offsetHeight;\n            break;\n        }\n        \n        return {x, y, offset};\n    }\n    \n    show(origin, position){\n        var x, y, parentEl, parentOffset, containerOffset, coords;\n        \n        if(origin instanceof HTMLElement){\n            parentEl = origin;\n            coords = this.elementPositionCoords(origin, position);\n            \n            parentOffset = coords.offset;\n            x = coords.x;\n            y = coords.y;\n            \n        }else if(typeof origin === \"number\"){\n            parentOffset = {top:0, left:0};\n            x = origin;\n            y = position;\n        }else{\n            coords = this.containerEventCoords(origin);\n            \n            x = coords.x;\n            y = coords.y;\n            \n            this.reversedX = false;\n        }\n        \n        this.element.style.top = y + \"px\";\n        this.element.style.left = x + \"px\";\n        \n        this.container.appendChild(this.element);\n        \n        if(typeof this.renderedCallback === \"function\"){\n            this.renderedCallback();\n        }\n        \n        this._fitToScreen(x, y, parentEl, parentOffset, position);\n        \n        this.visible = true;\n        \n        return this;\n    }\n    \n    _fitToScreen(x, y, parentEl, parentOffset, position){\n        var scrollTop = this.container === document.body ? document.documentElement.scrollTop : this.container.scrollTop;\n\n        //move menu to start on right edge if it is too close to the edge of the screen\n        if((x + this.element.offsetWidth) >= this.container.offsetWidth || this.reversedX){\n            this.element.style.left = \"\";\n            \n            if(parentEl){\n                this.element.style.right = (this.container.offsetWidth - parentOffset.left) + \"px\";\n            }else{\n                this.element.style.right = (this.container.offsetWidth - x) + \"px\";\n            }\n            \n            this.reversedX = true;\n        }\n\n        //move menu to start on bottom edge if it is too close to the edge of the screen\n        if((y + this.element.offsetHeight) > Math.max(this.container.offsetHeight, scrollTop ? this.container.scrollHeight : 0)) {\n            if(parentEl){\n                switch(position){\n                    case \"bottom\":\n                    this.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight - parentEl.offsetHeight - 1) + \"px\";\n                    break;\n\n                    default:\n                    this.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight + parentEl.offsetHeight + 1) + \"px\";\n                }\n                \n            }else{\n                this.element.style.top = (parseInt(this.element.style.top) - this.element.offsetHeight) + \"px\";\n            }\n        }\n    }\n    \n    isVisible(){\n        return this.visible;\n    }\n    \n    hideOnBlur(callback){\n        this.blurable = true;\n        \n        if(this.visible){\n            setTimeout(() => {\n                this.table.rowManager.element.addEventListener(\"scroll\", this.blurEvent);\n                this.subscribe(\"cell-editing\", this.blurEvent);\n                document.body.addEventListener(\"click\", this.blurEvent);\n                document.body.addEventListener(\"contextmenu\", this.blurEvent);\n                window.addEventListener(\"resize\", this.blurEvent);\n                document.body.addEventListener(\"keydown\", this.escEvent);\n            }, 100);\n            \n            this.blurCallback = callback;\n        }\n        \n        return this;\n    }\n    \n    _escapeCheck(e){\n        if(e.keyCode == 27){\n            this.hide();\n        }\n    }\n    \n    hide(silent = false){\n        if(this.visible){\n            if(this.blurable){\n                document.body.removeEventListener(\"keydown\", this.escEvent);\n                document.body.removeEventListener(\"click\", this.blurEvent);\n                document.body.removeEventListener(\"contextmenu\", this.blurEvent);\n                window.removeEventListener(\"resize\", this.blurEvent);\n                this.table.rowManager.element.removeEventListener(\"scroll\", this.blurEvent);\n                this.unsubscribe(\"cell-editing\", this.blurEvent);\n            }\n            \n            if(this.childPopup){\n                this.childPopup.hide();\n            }\n            \n            if(this.parent){\n                this.parent.childPopup = null;\n            }\n            \n            if(this.element.parentNode){\n                this.element.parentNode.removeChild(this.element);\n            }\n\n             this.visible = false;\n\n            if(this.blurCallback && !silent){\n                this.blurCallback();\n            }\n        }\n        \n        return this;\n    }\n    \n    child(element){\n        if(this.childPopup){\n            this.childPopup.hide();\n        }\n        \n        this.childPopup = new Popup(this.table, element, this);\n        \n        return this.childPopup;\n    }\n}","import CoreFeature from './CoreFeature.js';\nimport Popup from './tools/Popup.js';\n\nclass Module extends CoreFeature{\n\n\tconstructor(table, name){\n\t\tsuper(table);\n\n\t\tthis._handler = null;\n\t}\n\n\tinitialize(){\n\t\t// setup module when table is initialized, to be overriden in module\n\t}\n\n\n\t///////////////////////////////////\n\t////// Options Registration ///////\n\t///////////////////////////////////\n\n\tregisterTableOption(key, value){\n\t\tthis.table.optionsList.register(key, value);\n\t}\n\n\tregisterColumnOption(key, value){\n\t\tthis.table.columnManager.optionsList.register(key, value);\n\t}\n\n\t///////////////////////////////////\n\t/// Public Function Registration ///\n\t///////////////////////////////////\n\n\tregisterTableFunction(name, func){\n\t\tif(typeof this.table[name] === \"undefined\"){\n\t\t\tthis.table[name] = (...args) => {\n\t\t\t\tthis.table.initGuard(name);\n\n\t\t\t\treturn func(...args);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Unable to bind table function, name already in use\", name)\n\t\t}\n\t}\n\n\tregisterComponentFunction(component, func, handler){\n\t\treturn this.table.componentFunctionBinder.bind(component, func, handler);\n\t}\n\n\t///////////////////////////////////\n\t////////// Data Pipeline //////////\n\t///////////////////////////////////\n\n\tregisterDataHandler(handler, priority){\n\t\tthis.table.rowManager.registerDataPipelineHandler(handler, priority)\n\t\tthis._handler = handler;\n\t}\n\n\tregisterDisplayHandler(handler, priority){\n\t\tthis.table.rowManager.registerDisplayPipelineHandler(handler, priority)\n\t\tthis._handler = handler;\n\t}\n\n\trefreshData(renderInPosition, handler){\n\t\tif(!handler){\n\t\t\thandler = this._handler;\n\t\t}\n\n\t\tif(handler){\n\t\t\tthis.table.rowManager.refreshActiveData(handler, false, renderInPosition);\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t//////// Footer Management ////////\n\t///////////////////////////////////\n\n\tfooterAppend(element){\n\t\treturn this.table.footerManager.append(element)\n\t}\n\n\tfooterPrepend(element){\n\t\treturn this.table.footerManager.prepend(element)\n\t}\n\n\tfooterRemove(element){\n\t\treturn this.table.footerManager.remove(element)\n\t} \n\n\t///////////////////////////////////\n\t//////// Popups Management ////////\n\t///////////////////////////////////\n\t\n\tpopup(menuEl, menuContainer){\n\t\treturn new Popup(this.table, menuEl, menuContainer);\n\t}\n\n\t///////////////////////////////////\n\t//////// Alert Management ////////\n\t///////////////////////////////////\n\n\talert(content, type){\n\t\treturn this.table.alertManager.alert(content, type);\n\t}\n\n\tclearAlert(){\n\t\treturn this.table.alertManager.clear();\n\t}\n\t\n}\n\nexport default Module;","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defautlAccessors from './defaults/accessors.js';\n\nclass Accessor extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"download\", \"clipboard\", \"print\", \"htmlOutput\"] //list of accessor types\n\n\t\tthis.registerColumnOption(\"accessor\");\n\t\tthis.registerColumnOption(\"accessorParams\");\n\t\tthis.registerColumnOption(\"accessorData\");\n\t\tthis.registerColumnOption(\"accessorDataParams\");\n\t\tthis.registerColumnOption(\"accessorDownload\");\n\t\tthis.registerColumnOption(\"accessorDownloadParams\");\n\t\tthis.registerColumnOption(\"accessorClipboard\");\n\t\tthis.registerColumnOption(\"accessorClipboardParams\");\n\t\tthis.registerColumnOption(\"accessorPrint\");\n\t\tthis.registerColumnOption(\"accessorPrintParams\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutput\");\n\t\tthis.registerColumnOption(\"accessorHtmlOutputParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-retrieve\", this.transformRow.bind(this));\n\t}\n\n\t//initialize column accessor\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\taccessor;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\taccessor = this.lookupAccessor(column.definition[key]);\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\taccessor:accessor,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.accessor = config;\n\t\t}\n\t}\n\n\tlookupAccessor(value){\n\t\tvar accessor = false;\n\n\t\t//set column accessor\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\tif(Accessor.accessors[value]){\n\t\t\t\taccessor = Accessor.accessors[value]\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Accessor Error - No such accessor found, ignoring: \", value);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\taccessor = value;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn accessor;\n\t}\n\n\t//apply accessor to row\n\ttransformRow(row, type){\n\t\tvar key = \"accessor\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\trowComponent = row.getComponent();\n\n\t\t//clone data object with deep copy to isolate internal data from returned result\n\t\tvar data = Helpers.deepClone(row.data || {});\n\n\t\tthis.table.columnManager.traverse(function(column){\n\t\t\tvar value, accessor, params, colCompnent;\n\n\t\t\tif(column.modules.accessor){\n\n\t\t\t\taccessor = column.modules.accessor[key] || column.modules.accessor.accessor || false;\n\n\t\t\t\tif(accessor){\n\t\t\t\t\tvalue = column.getFieldValue(data);\n\n\t\t\t\t\tif(value != \"undefined\"){\n\t\t\t\t\t\tcolCompnent = column.getComponent();\n\t\t\t\t\t\tparams = typeof accessor.params === \"function\" ? accessor.params(value, data, type, colCompnent, rowComponent) : accessor.params;\n\t\t\t\t\t\tcolumn.setFieldValue(data, accessor.accessor(value, data, type, params, colCompnent, rowComponent));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n}\n\n//load defaults\nAccessor.moduleName = \"accessor\";\nAccessor.accessors = defautlAccessors;\n\nexport default Accessor;","export default {}","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nfunction serializeParams(params){\n\tvar output = generateParamsList(params),\n\tencoded = [];\n\n\toutput.forEach(function(item){\n\t\tencoded.push(encodeURIComponent(item.key) + \"=\" + encodeURIComponent(item.value));\n\t});\n\n\treturn encoded.join(\"&\");\n}\n\nexport default function(url, config, params){\n\tif(url){\n\t\tif(params && Object.keys(params).length){\n\t\t\tif(!config.method || config.method.toLowerCase() == \"get\"){\n\t\t\t\tconfig.method = \"get\";\n\n\t\t\t\turl += (url.includes(\"?\") ? \"&\" : \"?\") + serializeParams(params);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn url;\n};","function generateParamsList(data, prefix){\n\tvar output = [];\n\n\tprefix = prefix || \"\";\n\n\tif(Array.isArray(data)){\n\t\tdata.forEach((item, i) => {\n\t\t\toutput = output.concat(generateParamsList(item, prefix ? prefix + \"[\" + i + \"]\" : i));\n\t\t});\n\t}else if (typeof data === \"object\"){\n\t\tfor (var key in data){\n\t\t\toutput = output.concat(generateParamsList(data[key], prefix ? prefix + \"[\" + key + \"]\" : key));\n\t\t}\n\t}else{\n\t\toutput.push({key:prefix, value:data});\n\t}\n\n\treturn output;\n}\n\nexport default {\n\t\"json\":{\n\t\theaders:{\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody:function(url, config, params){\n\t\t\treturn JSON.stringify(params);\n\t\t},\n\t},\n\t\"form\":{\n\t\theaders:{\n\t\t},\n\t\tbody:function(url, config, params){\n\n\t\t\tvar output = generateParamsList(params),\n\t\t\tform = new FormData();\n\n\t\t\toutput.forEach(function(item){\n\t\t\t\tform.append(item.key, item.value);\n\t\t\t});\n\n\t\t\treturn form;\n\t\t},\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultConfig from './defaults/config.js';\nimport defaultURLGenerator from './defaults/urlGenerator.js';\nimport defaultLoaderPromise from './defaults/loaderPromise.js';\nimport defaultContentTypeFormatters from './defaults/contentTypeFormatters.js';\n\nclass Ajax extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.config = {}; //hold config object for ajax request\n\t\tthis.url = \"\"; //request URL\n\t\tthis.urlGenerator = false;\n\t\tthis.params = false; //request parameters\n\t\t\n\t\tthis.loaderPromise = false;\n\t\t\n\t\tthis.registerTableOption(\"ajaxURL\", false); //url for ajax loading\n\t\tthis.registerTableOption(\"ajaxURLGenerator\", false);\n\t\tthis.registerTableOption(\"ajaxParams\", {});  //params for ajax loading\n\t\tthis.registerTableOption(\"ajaxConfig\", \"get\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxContentType\", \"form\"); //ajax request type\n\t\tthis.registerTableOption(\"ajaxRequestFunc\", false); //promise function\n\t\t\n\t\tthis.registerTableOption(\"ajaxRequesting\", function(){});\n\t\tthis.registerTableOption(\"ajaxResponse\", false);\n\t\t\n\t\tthis.contentTypeFormatters = Ajax.contentTypeFormatters;\n\t}\n\t\n\t//initialize setup options\n\tinitialize(){\n\t\tthis.loaderPromise = this.table.options.ajaxRequestFunc || Ajax.defaultLoaderPromise;\n\t\tthis.urlGenerator = this.table.options.ajaxURLGenerator || Ajax.defaultURLGenerator;\n\t\t\n\t\tif(this.table.options.ajaxURL){\n\t\t\tthis.setUrl(this.table.options.ajaxURL);\n\t\t}\n\n\n\t\tthis.setDefaultConfig(this.table.options.ajaxConfig);\n\t\t\n\t\tthis.registerTableFunction(\"getAjaxUrl\", this.getUrl.bind(this));\n\t\t\n\t\tthis.subscribe(\"data-loading\", this.requestDataCheck.bind(this));\n\t\tthis.subscribe(\"data-params\", this.requestParams.bind(this));\n\t\tthis.subscribe(\"data-load\", this.requestData.bind(this));\n\t}\n\t\n\trequestParams(data, config, silent, params){\n\t\tvar ajaxParams = this.table.options.ajaxParams;\n\t\t\n\t\tif(ajaxParams){\n\t\t\tif(typeof ajaxParams === \"function\"){\n\t\t\t\tajaxParams = ajaxParams.call(this.table);\n\t\t\t}\n\t\t\t\n\t\t\tparams = Object.assign(params, ajaxParams);\n\t\t}\t\t\n\t\t\n\t\treturn params;\n\t}\n\t\n\trequestDataCheck(data, params, config, silent){\n\t\treturn !!((!data && this.url) || typeof data === \"string\");\n\t}\n\t\n\trequestData(url, params, config, silent, previousData){\n\t\tvar ajaxConfig;\n\t\t\n\t\tif(!previousData && this.requestDataCheck(url)){\n\t\t\tif(url){\n\t\t\t\tthis.setUrl(url);\n\t\t\t}\n\t\t\t\n\t\t\tajaxConfig = this.generateConfig(config);\n\t\t\t\n\t\t\treturn this.sendRequest(this.url, params, ajaxConfig);\n\t\t}else{\n\t\t\treturn previousData;\n\t\t}\n\t}\n\t\n\tsetDefaultConfig(config = {}){\n\t\tthis.config = Object.assign({}, Ajax.defaultConfig);\n\n\t\tif(typeof config == \"string\"){\n\t\t\tthis.config.method = config;\n\t\t}else{\n\t\t\tObject.assign(this.config, config);\n\t\t}\n\t}\n\t\n\t//load config object\n\tgenerateConfig(config = {}){\n\t\tvar ajaxConfig = Object.assign({}, this.config)\n\t\t\n\t\tif(typeof config == \"string\"){\n\t\t\tajaxConfig.method = config;\n\t\t}else{\n\t\t\tObject.assign(ajaxConfig, config);\n\t\t}\n\t\t\n\t\treturn ajaxConfig;\n\t}\n\t\n\t//set request url\n\tsetUrl(url){\n\t\tthis.url = url;\n\t}\n\t\n\t//get request url\n\tgetUrl(){\n\t\treturn this.url;\n\t}\n\t\n\t//send ajax request\n\tsendRequest(url, params, config){\n\t\tif(this.table.options.ajaxRequesting.call(this.table, url, params) !== false){\n\t\t\treturn this.loaderPromise(url, config, params)\n\t\t\t.then((data)=>{\n\t\t\t\tif(this.table.options.ajaxResponse){\n\t\t\t\t\tdata = this.table.options.ajaxResponse.call(this.table, url, params, data);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn data;\n\t\t\t});\n\t\t}else{\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n}\n\nAjax.moduleName = \"ajax\";\n\n//load defaults\nAjax.defaultConfig = defaultConfig;\nAjax.defaultURLGenerator = defaultURLGenerator;\nAjax.defaultLoaderPromise = defaultLoaderPromise;\nAjax.contentTypeFormatters = defaultContentTypeFormatters;\n\nexport default Ajax;","export default {\n\tmethod: \"GET\",\n};","export default function(url, config, params){\n\tvar contentType;\n\n\treturn new Promise((resolve, reject) => {\n\t\t//set url\n\t\turl = this.urlGenerator.call(this.table, url, config, params);\n\n\t\t//set body content if not GET request\n\t\tif(config.method.toUpperCase() != \"GET\"){\n\t\t\tcontentType = typeof this.table.options.ajaxContentType === \"object\" ?  this.table.options.ajaxContentType : this.contentTypeFormatters[this.table.options.ajaxContentType];\n\t\t\tif(contentType){\n\n\t\t\t\tfor(var key in contentType.headers){\n\t\t\t\t\tif(!config.headers){\n\t\t\t\t\t\tconfig.headers = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof config.headers[key] === \"undefined\"){\n\t\t\t\t\t\tconfig.headers[key] = contentType.headers[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tconfig.body = contentType.body.call(this, url, config, params);\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Ajax Error - Invalid ajaxContentType value:\", this.table.options.ajaxContentType);\n\t\t\t}\n\t\t}\n\n\t\tif(url){\n\t\t\t//configure headers\n\t\t\tif(typeof config.headers === \"undefined\"){\n\t\t\t\tconfig.headers = {};\n\t\t\t}\n\n\t\t\tif(typeof config.headers.Accept === \"undefined\"){\n\t\t\t\tconfig.headers.Accept = \"application/json\";\n\t\t\t}\n\n\t\t\tif(typeof config.headers[\"X-Requested-With\"] === \"undefined\"){\n\t\t\t\tconfig.headers[\"X-Requested-With\"] = \"XMLHttpRequest\";\n\t\t\t}\n\n\t\t\tif(typeof config.mode === \"undefined\"){\n\t\t\t\tconfig.mode = \"cors\";\n\t\t\t}\n\n\t\t\tif(config.mode == \"cors\"){\n\t\t\t\tif(typeof config.headers[\"Origin\"] === \"undefined\"){\n\t\t\t\t\tconfig.headers[\"Origin\"] = window.location.origin;\n\t\t\t\t}\n        \n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'same-origin';\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(typeof config.credentials === \"undefined\"){\n\t\t\t\t\tconfig.credentials = 'include';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//send request\n\t\t\tfetch(url, config)\n\t\t\t.then((response)=>{\n\t\t\t\tif(response.ok) {\n\t\t\t\t\tresponse.json()\n\t\t\t\t\t.then((data)=>{\n\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t}).catch((error)=>{\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t\tconsole.warn(\"Ajax Load Error - Invalid JSON returned\", error);\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n\t\t\t\t\treject(response);\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error)=>{\n\t\t\t\tconsole.error(\"Ajax Load Error - Connection Error: \", error);\n\t\t\t\treject(error);\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.warn(\"Ajax Load Error - No URL Set\");\n\t\t\tresolve([]);\n\t\t}\n\t});\n};","import Module from '../../core/Module.js';\n\nimport defaultPasteActions from './defaults/pasteActions.js';\nimport defaultPasteParsers from './defaults/pasteParsers.js';\n\nclass Clipboard extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = true;\n\t\tthis.pasteParser = function(){};\n\t\tthis.pasteAction = function(){};\n\t\tthis.customSelection = false;\n\t\tthis.rowRange = false;\n\t\tthis.blocked = true; //block copy actions not originating from this command\n\n\t\tthis.registerTableOption(\"clipboard\", false); //enable clipboard\n\t\tthis.registerTableOption(\"clipboardCopyStyled\", true); //formatted table data\n\t\tthis.registerTableOption(\"clipboardCopyConfig\", false); //clipboard config\n\t\tthis.registerTableOption(\"clipboardCopyFormatter\", false); //DEPRICATED - REMOVE in 5.0\n\t\tthis.registerTableOption(\"clipboardCopyRowRange\", \"active\"); //restrict clipboard to visible rows only\n\t\tthis.registerTableOption(\"clipboardPasteParser\", \"table\"); //convert pasted clipboard data to rows\n\t\tthis.registerTableOption(\"clipboardPasteAction\", \"insert\"); //how to insert pasted data into the table\n\n\t\tthis.registerColumnOption(\"clipboard\");\n\t\tthis.registerColumnOption(\"titleClipboard\");\n\t}\n\n\tinitialize(){\n\t\tthis.mode = this.table.options.clipboard;\n\n\t\tthis.rowRange = this.table.options.clipboardCopyRowRange;\n\n\t\tif(this.mode === true || this.mode === \"copy\"){\n\t\t\tthis.table.element.addEventListener(\"copy\", (e) => {\n\t\t\t\tvar plain, html, list;\n\n\t\t\t\tif(!this.blocked){\n\t\t\t\t\te.preventDefault();\n\n\t\t\t\t\tif(this.customSelection){\n\t\t\t\t\t\tplain = this.customSelection;\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\n\t\t\t\t\t\tvar list = this.table.modules.export.generateExportList(this.table.options.clipboardCopyConfig, this.table.options.clipboardCopyStyled, this.rowRange, \"clipboard\");\n\n\t\t\t\t\t\thtml = this.table.modules.export.genereateHTMLTable(list);\n\t\t\t\t\t\tplain = html ? this.generatePlainContent(list) : \"\";\n\n\t\t\t\t\t\tif(this.table.options.clipboardCopyFormatter){\n\t\t\t\t\t\t\tplain = this.table.options.clipboardCopyFormatter(\"plain\", plain);\n\t\t\t\t\t\t\thtml = this.table.options.clipboardCopyFormatter(\"html\", html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (window.clipboardData && window.clipboardData.setData) {\n\t\t\t\t\t\twindow.clipboardData.setData('Text', plain);\n\t\t\t\t\t} else if (e.clipboardData && e.clipboardData.setData) {\n\t\t\t\t\t\te.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.setData) {\n\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/plain', plain);\n\t\t\t\t\t\tif(html){\n\t\t\t\t\t\t\te.originalEvent.clipboardData.setData('text/html', html);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchExternal(\"clipboardCopied\", plain, html);\n\n\t\t\t\t\tthis.reset();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif(this.mode === true || this.mode === \"paste\"){\n\t\t\tthis.table.element.addEventListener(\"paste\", (e) => {\n\t\t\t\tthis.paste(e);\n\t\t\t});\n\t\t}\n\n\t\tthis.setPasteParser(this.table.options.clipboardPasteParser);\n\t\tthis.setPasteAction(this.table.options.clipboardPasteAction);\n\n\t\tthis.registerTableFunction(\"copyToClipboard\", this.copy.bind(this));\n\t}\n\n\treset(){\n\t\tthis.blocked = true;\n\t\tthis.customSelection = false;\n\t}\n\n\tgeneratePlainContent (list) {\n\t\tvar output = [];\n\n\t\tlist.forEach((row) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tvar value = \"\";\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tif(row.type === \"group\"){\n\t\t\t\t\t\tcol.value = col.component.getKey();\n\t\t\t\t\t}\n\n\t\t\t\t\tif(col.value === null){\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\t\tvalue = JSON.stringify(col.value);\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tvalue = col.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowData.push(value);\n\t\t\t});\n\n\t\t\toutput.push(rowData.join(\"\\t\"));\n\t\t});\n\n\t\treturn output.join(\"\\n\");\n\t}\n\n\tcopy (range, internal) {\n\t\tvar range, sel, textRange;\n\t\tthis.blocked = false;\n\t\tthis.customSelection = false;\n\n\t\tif (this.mode === true || this.mode === \"copy\") {\n\n\t\t\tthis.rowRange = range || this.table.options.clipboardCopyRowRange;\n\n\t\t\tif (typeof window.getSelection != \"undefined\" && typeof document.createRange != \"undefined\") {\n\t\t\t\trange = document.createRange();\n\t\t\t\trange.selectNodeContents(this.table.element);\n\t\t\t\tsel = window.getSelection();\n\n\t\t\t\tif (sel.toString() && internal) {\n\t\t\t\t\tthis.customSelection = sel.toString();\n\t\t\t\t}\n\n\t\t\t\tsel.removeAllRanges();\n\t\t\t\tsel.addRange(range);\n\t\t\t} else if (typeof document.selection != \"undefined\" && typeof document.body.createTextRange != \"undefined\") {\n\t\t\t\ttextRange = document.body.createTextRange();\n\t\t\t\ttextRange.moveToElementText(this.table.element);\n\t\t\t\ttextRange.select();\n\t\t\t}\n\n\t\t\tdocument.execCommand('copy');\n\n\t\t\tif (sel) {\n\t\t\t\tsel.removeAllRanges();\n\t\t\t}\n\t\t}\n\t}\n\n\t//PASTE EVENT HANDLING\n\tsetPasteAction(action){\n\n\t\tswitch(typeof action){\n\t\t\tcase \"string\":\n\t\t\tthis.pasteAction = Clipboard.pasteActions[action];\n\n\t\t\tif(!this.pasteAction){\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste action found:\", action);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tthis.pasteAction = action;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tsetPasteParser(parser){\n\t\tswitch(typeof parser){\n\t\t\tcase \"string\":\n\t\t\tthis.pasteParser = Clipboard.pasteParsers[parser];\n\n\t\t\tif(!this.pasteParser){\n\t\t\t\tconsole.warn(\"Clipboard Error - No such paste parser found:\", parser);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tthis.pasteParser = parser;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tpaste(e){\n\t\tvar data, rowData, rows;\n\n\t\tif(this.checkPaseOrigin(e)){\n\n\t\t\tdata = this.getPasteData(e);\n\n\t\t\trowData = this.pasteParser.call(this, data);\n\n\t\t\tif(rowData){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tif(this.table.modExists(\"mutator\")){\n\t\t\t\t\trowData = this.mutateData(rowData);\n\t\t\t\t}\n\n\t\t\t\trows = this.pasteAction.call(this, rowData);\n\n\t\t\t\tthis.dispatchExternal(\"clipboardPasted\", data, rowData, rows);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"clipboardPasteError\", data);\n\t\t\t}\n\t\t}\n\t}\n\n\tmutateData(data){\n\t\tvar output = [];\n\n\t\tif(Array.isArray(data)){\n\t\t\tdata.forEach((row) => {\n\t\t\t\toutput.push(this.table.modules.mutator.transformRow(row, \"clipboard\"));\n\t\t\t});\n\t\t}else{\n\t\t\toutput = data;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\n\tcheckPaseOrigin(e){\n\t\tvar valid = true;\n\n\t\tif(e.target.tagName != \"DIV\" || this.table.modules.edit.currentCell){\n\t\t\tvalid = false;\n\t\t}\n\n\t\treturn valid;\n\t}\n\n\tgetPasteData(e){\n\t\tvar data;\n\n\t\tif (window.clipboardData && window.clipboardData.getData) {\n\t\t\tdata = window.clipboardData.getData('Text');\n\t\t} else if (e.clipboardData && e.clipboardData.getData) {\n\t\t\tdata = e.clipboardData.getData('text/plain');\n\t\t} else if (e.originalEvent && e.originalEvent.clipboardData.getData) {\n\t\t\tdata = e.originalEvent.clipboardData.getData('text/plain');\n\t\t}\n\n\t\treturn data;\n\t}\n}\n\nClipboard.moduleName = \"clipboard\";\n\n//load defaults\nClipboard.pasteActions = defaultPasteActions;\nClipboard.pasteParsers = defaultPasteParsers;\n\nexport default Clipboard;","export default {\n\treplace:function(rows){\n\t\treturn this.table.setData(rows);\n\t},\n\tupdate:function(rows){\n\t\treturn this.table.updateOrAddData(rows);\n\t},\n\tinsert:function(rows){\n\t\treturn this.table.addData(rows);\n\t},\n};","export default {\n\ttable:function(clipboard){\n\t\tvar data = [],\n\t\tsuccess = false,\n\t\theaderFindSuccess = true,\n\t\tcolumns = this.table.columnManager.columns,\n\t\tcolumnMap = [],\n\t\trows = [];\n\n\t\t//get data from clipboard into array of columns and rows.\n\t\tclipboard = clipboard.split(\"\\n\");\n\n\t\tclipboard.forEach(function(row){\n\t\t\tdata.push(row.split(\"\\t\"));\n\t\t});\n\n\t\tif(data.length && !(data.length === 1 && data[0].length < 2)){\n\t\t\tsuccess = true;\n\n\t\t\t//check if headers are present by title\n\t\t\tdata[0].forEach(function(value){\n\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\treturn value && column.definition.title && value.trim() && column.definition.title.trim() === value.trim();\n\t\t\t\t});\n\n\t\t\t\tif(column){\n\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t}else{\n\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t//check if column headers are present by field\n\t\t\tif(!headerFindSuccess){\n\t\t\t\theaderFindSuccess = true;\n\t\t\t\tcolumnMap = [];\n\n\t\t\t\tdata[0].forEach(function(value){\n\t\t\t\t\tvar column = columns.find(function(column){\n\t\t\t\t\t\treturn value && column.field && value.trim() && column.field.trim() === value.trim();\n\t\t\t\t\t});\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tcolumnMap.push(column);\n\t\t\t\t\t}else{\n\t\t\t\t\t\theaderFindSuccess = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(!headerFindSuccess){\n\t\t\t\t\tcolumnMap = this.table.columnManager.columnsByIndex;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//remove header row if found\n\t\t\tif(headerFindSuccess){\n\t\t\t\tdata.shift();\n\t\t\t}\n\n\t\t\tdata.forEach(function(item){\n\t\t\t\tvar row = {};\n\n\t\t\t\titem.forEach(function(value, i){\n\t\t\t\t\tif(columnMap[i]){\n\t\t\t\t\t\trow[columnMap[i].field] = value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\trows.push(row);\n\t\t\t});\n\n\t\t\treturn rows;\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n};","class CalcComponent{\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n}\n\nexport default CalcComponent;","//public cell object\nexport default class CellComponent {\n\n\tconstructor (cell){\n\t\tthis._cell = cell;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._cell.table.componentFunctionBinder.handle(\"cell\", target._cell, name)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetValue(){\n\t\treturn this._cell.getValue();\n\t}\n\n\tgetOldValue(){\n\t\treturn this._cell.getOldValue();\n\t}\n\n\tgetInitialValue(){\n\t\treturn this._cell.initialValue;\n\t}\n\n\tgetElement(){\n\t\treturn this._cell.getElement();\n\t}\n\n\tgetRow(){\n\t\treturn this._cell.row.getComponent();\n\t}\n\n\tgetData(){\n\t\treturn this._cell.row.getData();\n\t}\n\n\tgetField(){\n\t\treturn this._cell.column.getField();\n\t}\n\n\tgetColumn(){\n\t\treturn this._cell.column.getComponent();\n\t}\n\n\tsetValue(value, mutate){\n\t\tif(typeof mutate == \"undefined\"){\n\t\t\tmutate = true;\n\t\t}\n\n\t\tthis._cell.setValue(value, mutate);\n\t}\n\n\trestoreOldValue(){\n\t\tthis._cell.setValueActual(this._cell.getOldValue());\n\t}\n\n\trestoreInitialValue(){\n\t\tthis._cell.setValueActual(this._cell.initialValue);\n\t}\n\n\tcheckHeight(){\n\t\tthis._cell.checkHeight();\n\t}\n\n\tgetTable(){\n\t\treturn this._cell.table;\n\t}\n\n\t_getSelf(){\n\t\treturn this._cell;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport CellComponent from './CellComponent.js';\n\nexport default class Cell extends CoreFeature{\n\tconstructor(column, row){\n\t\tsuper(column.table);\n\n\t\tthis.table = column.table;\n\t\tthis.column = column;\n\t\tthis.row = row;\n\t\tthis.element = null;\n\t\tthis.value = null;\n\t\tthis.initialValue;\n\t\tthis.oldValue = null;\n\t\tthis.modules = {};\n\n\t\tthis.height = null;\n\t\tthis.width = null;\n\t\tthis.minWidth = null;\n\n\t\tthis.component = null;\n\n\t\tthis.loaded = false; //track if the cell has been added to the DOM yet\n\n\t\tthis.build();\n\t}\n\n\t//////////////// Setup Functions /////////////////\n\t//generate element\n\tbuild(){\n\t\tthis.generateElement();\n\n\t\tthis.setWidth();\n\n\t\tthis._configureCell();\n\n\t\tthis.setValueActual(this.column.getFieldValue(this.row.data));\n\n\t\tthis.initialValue = this.value;\n\t}\n\n\tgenerateElement(){\n\t\tthis.element = document.createElement('div');\n\t\tthis.element.className = \"tabulator-cell\";\n\t\tthis.element.setAttribute(\"role\", \"gridcell\");\n\t\tthis.element = this.element;\n\t}\n\n\t_configureCell(){\n\t\tvar element = this.element,\n\t\tfield = this.column.getField(),\n\t\tvertAligns = {\n\t\t\ttop:\"flex-start\",\n\t\t\tbottom:\"flex-end\",\n\t\t\tmiddle:\"center\",\n\t\t},\n\t\thozAligns = {\n\t\t\tleft:\"flex-start\",\n\t\t\tright:\"flex-end\",\n\t\t\tcenter:\"center\",\n\t\t};\n\n\t\t//set text alignment\n\t\telement.style.textAlign = this.column.hozAlign;\n\n\t\tif(this.column.vertAlign){\n\t\t\telement.style.display = \"inline-flex\";\n\n\t\t\telement.style.alignItems = vertAligns[this.column.vertAlign] || \"\";\n\n\t\t\tif(this.column.hozAlign){\n\t\t\t\telement.style.justifyContent = hozAligns[this.column.hozAlign] || \"\";\n\t\t\t}\n\t\t}\n\n\t\tif(field){\n\t\t\telement.setAttribute(\"tabulator-field\", field);\n\t\t}\n\n\t\t//add class to cell if needed\n\t\tif(this.column.definition.cssClass){\n\t\t\tvar classNames = this.column.definition.cssClass.split(\" \")\n\t\t\tclassNames.forEach((className) => {\n\t\t\t\telement.classList.add(className)\n\t\t\t});\n\t\t}\n\n\t\tthis.dispatch(\"cell-init\", this);\n\n\t\t//hide cell if not visible\n\t\tif(!this.column.visible){\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//generate cell contents\n\t_generateContents(){\n\t\tvar val;\n\n\t\tval = this.chain(\"cell-format\", this, null, () => {\n\t\t\treturn this.element.innerHTML = this.value;\n\t\t});\n\n\t\tswitch(typeof val){\n\t\t\tcase \"object\":\n\t\t\tif(val instanceof Node){\n\n\t\t\t\t//clear previous cell contents\n\t\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\t\t\tthis.element.appendChild(val);\n\t\t\t}else{\n\t\t\t\tthis.element.innerHTML = \"\";\n\n\t\t\t\tif(val != null){\n\t\t\t\t\tconsole.warn(\"Format Error - Formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", val);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\tcase \"null\":\n\t\t\tthis.element.innerHTML = \"\";\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tthis.element.innerHTML = val;\n\t\t}\n\t}\n\n\tcellRendered(){\n\t\tthis.dispatch(\"cell-rendered\", this);\n\t}\n\n\t//////////////////// Getters ////////////////////\n\tgetElement(containerOnly){\n\t\tif(!this.loaded){\n\t\t\tthis.loaded = true;\n\t\t\tif(!containerOnly){\n\t\t\t\tthis.layoutElement();\n\t\t\t}\n\t\t}\n\n\t\treturn this.element;\n\t}\n\n\tgetValue(){\n\t\treturn this.value;\n\t}\n\n\tgetOldValue(){\n\t\treturn this.oldValue;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tsetValue(value, mutate, force){\n\t\tvar changed = this.setValueProcessData(value, mutate, force);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-updated\", this);\n\n\t\t\tthis.cellRendered();\n\n\t\t\tif(this.column.definition.cellEdited){\n\t\t\t\tthis.column.definition.cellEdited.call(this.table, this.getComponent());\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"cellEdited\", this.getComponent());\n\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t}\n\t}\n\n\tsetValueProcessData(value, mutate, force){\n\t\tvar changed = false;\n\n\t\tif(this.value !== value || force){\n\n\t\t\tchanged = true;\n\n\t\t\tif(mutate){\n\t\t\t\tvalue = this.chain(\"cell-value-changing\", [this, value], null, value);\n\t\t\t}\n\t\t}\n\n\t\tthis.setValueActual(value);\n\n\t\tif(changed){\n\t\t\tthis.dispatch(\"cell-value-changed\", this);\n\t\t}\n\n\t\treturn changed;\n\t}\n\n\tsetValueActual(value){\n\t\tthis.oldValue = this.value;\n\n\t\tthis.value = value;\n\n\t\tthis.dispatch(\"cell-value-save-before\", this);\n\n\t\tthis.column.setFieldValue(this.row.data, value);\n\n\t\tthis.dispatch(\"cell-value-save-after\", this);\n\n\t\tif(this.loaded){\n\t\t\tthis.layoutElement();\n\t\t}\n\t}\n\n\tlayoutElement(){\n\t\tthis._generateContents();\n\n\t\tthis.dispatch(\"cell-layout\", this);\n\t}\n\n\tsetWidth(){\n\t\tthis.width = this.column.width;\n\t\tthis.element.style.width = this.column.widthStyled;\n\t}\n\n\tclearWidth(){\n\t\tthis.width = \"\";\n\t\tthis.element.style.width = \"\";\n\t}\n\n\tgetWidth(){\n\t\treturn this.width || this.element.offsetWidth;\n\t}\n\n\tsetMinWidth(){\n\t\tthis.minWidth = this.column.minWidth;\n\t\tthis.element.style.minWidth = this.column.minWidthStyled;\n\t}\n\n\tsetMaxWidth(){\n\t\tthis.maxWidth = this.column.maxWidth;\n\t\tthis.element.style.maxWidth = this.column.maxWidthStyled;\n\t}\n\n\tcheckHeight(){\n\t\t// var height = this.element.css(\"height\");\n\t\tthis.row.reinitializeHeight();\n\t}\n\n\tclearHeight(){\n\t\tthis.element.style.height = \"\";\n\t\tthis.height = null;\n\n\t\tthis.dispatch(\"cell-height\", this, \"\");\n\t}\n\n\tsetHeight(){\n\t\tthis.height = this.row.height;\n\t\tthis.element.style.height = this.row.heightStyled;\n\n\t\tthis.dispatch(\"cell-height\", this, this.row.heightStyled);\n\t}\n\n\tgetHeight(){\n\t\treturn this.height || this.element.offsetHeight;\n\t}\n\n\tshow(){\n\t\tthis.element.style.display = this.column.vertAlign ? \"inline-flex\" : \"\";\n\t}\n\n\thide(){\n\t\tthis.element.style.display = \"none\";\n\t}\n\n\tdelete(){\n\t\tthis.dispatch(\"cell-delete\", this);\n\n\t\tif(!this.table.rowManager.redrawBlock && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\n\t\tthis.element = false;\n\t\tthis.column.deleteCell(this);\n\t\tthis.row.deleteCell(this);\n\t\tthis.calcs = {};\n\t}\n\n\tgetIndex(){\n\t\treturn this.row.getCellIndex(this);\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new CellComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}","import Column from './Column.js';\n\n//public column object\nexport default class ColumnComponent {\n\tconstructor (column){\n\t\tthis._column = column;\n\t\tthis.type = \"ColumnComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._column.table.componentFunctionBinder.handle(\"column\", target._column, name)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetElement(){\n\t\treturn this._column.getElement();\n\t}\n\n\tgetDefinition(){\n\t\treturn this._column.getDefinition();\n\t}\n\n\tgetField(){\n\t\treturn this._column.getField();\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this._column.getTitleDownload();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._column.cells.forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tisVisible(){\n\t\treturn this._column.visible;\n\t}\n\n\tshow(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.show();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.show();\n\t\t}\n\t}\n\n\thide(){\n\t\tif(this._column.isGroup){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\tcolumn.hide();\n\t\t\t});\n\t\t}else{\n\t\t\tthis._column.hide();\n\t\t}\n\t}\n\n\ttoggle(){\n\t\tif(this._column.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\n\tdelete(){\n\t\treturn this._column.delete();\n\t}\n\n\tgetSubColumns(){\n\t\tvar output = [];\n\n\t\tif(this._column.columns.length){\n\t\t\tthis._column.columns.forEach(function(column){\n\t\t\t\toutput.push(column.getComponent());\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetParentColumn(){\n\t\treturn this._column.parent instanceof Column ? this._column.parent.getComponent() : false;\n\t}\n\n\t_getSelf(){\n\t\treturn this._column;\n\t}\n\n\tscrollTo(){\n\t\treturn this._column.table.columnManager.scrollToColumn(this._column);\n\t}\n\n\tgetTable(){\n\t\treturn this._column.table;\n\t}\n\n\tmove(to, after){\n\t\tvar toColumn = this._column.table.columnManager.findColumn(to);\n\n\t\tif(toColumn){\n\t\t\tthis._column.table.columnManager.moveColumn(this._column, toColumn, after)\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t}\n\t}\n\n\tgetNextColumn(){\n\t\tvar nextCol = this._column.nextColumn();\n\n\t\treturn nextCol ? nextCol.getComponent() : false;\n\t}\n\n\tgetPrevColumn(){\n\t\tvar prevCol = this._column.prevColumn();\n\n\t\treturn prevCol ? prevCol.getComponent() : false;\n\t}\n\n\tupdateDefinition(updates){\n\t\treturn this._column.updateDefinition(updates);\n\t}\n\n\tgetWidth(){\n\t\treturn this._column.getWidth();\n\t}\n\n\tsetWidth(width){\n\t\tvar result;\n\n\t\tif(width === true){\n\t\t\tresult =  this._column.reinitializeWidth(true);\n\t\t}else{\n\t\t\tresult =  this._column.setWidth(width);\n\t\t}\n\n\t\tthis._column.table.columnManager.renderer.rerenderColumns(true);\n\n\t\treturn result;\n\t}\n}","export default {\n\t\"title\": undefined,\n\t\"field\": undefined,\n\t\"columns\": undefined,\n\t\"visible\": undefined,\n\t\"hozAlign\": undefined,\n\t\"vertAlign\": undefined,\n\t\"width\": undefined,\n\t\"minWidth\": 40,\n\t\"maxWidth\": undefined,\n\t\"maxInitialWidth\": undefined,\n\t\"cssClass\": undefined,\n\t\"variableHeight\": undefined,\n\t\"headerVertical\": undefined,\n\t\"headerHozAlign\": undefined,\n\t\"editableTitle\": undefined,\n}","import CoreFeature from '../CoreFeature.js';\nimport ColumnComponent from './ColumnComponent.js';\nimport defaultOptions from './defaults/options.js';\n\nimport Cell from '../cell/Cell.js';\n\nclass Column extends CoreFeature{\n\n\tconstructor(def, parent){\n\t\tsuper(parent.table);\n\n\t\tthis.definition = def; //column definition\n\t\tthis.parent = parent; //hold parent object\n\t\tthis.type = \"column\"; //type of element\n\t\tthis.columns = []; //child columns\n\t\tthis.cells = []; //cells bound to this column\n\t\tthis.element = this.createElement(); //column header element\n\t\tthis.contentElement = false;\n\t\tthis.titleHolderElement = false;\n\t\tthis.titleElement = false;\n\t\tthis.groupElement = this.createGroupElement(); //column group holder element\n\t\tthis.isGroup = false;\n\t\tthis.hozAlign = \"\"; //horizontal text alignment\n\t\tthis.vertAlign = \"\"; //vert text alignment\n\n\t\t//multi dimensional filed handling\n\t\tthis.field =\"\";\n\t\tthis.fieldStructure = \"\";\n\t\tthis.getFieldValue = \"\";\n\t\tthis.setFieldValue = \"\";\n\n\t\tthis.titleDownload = null;\n\t\tthis.titleFormatterRendered = false;\n\n\t\tthis.mapDefinitions();\n\n\t\tthis.setField(this.definition.field);\n\n\t\tthis.modules = {}; //hold module variables;\n\n\t\tthis.width = null; //column width\n\t\tthis.widthStyled = \"\"; //column width prestyled to improve render efficiency\n\t\tthis.maxWidth = null; //column maximum width\n\t\tthis.maxWidthStyled = \"\"; //column maximum prestyled to improve render efficiency\n\t\tthis.maxInitialWidth = null;\n\t\tthis.minWidth = null; //column minimum width\n\t\tthis.minWidthStyled = \"\"; //column minimum prestyled to improve render efficiency\n\t\tthis.widthFixed = false; //user has specified a width for this column\n\n\t\tthis.visible = true; //default visible state\n\n\t\tthis.component = null;\n\n\t\t//initialize column\n\t\tif(this.definition.columns){\n\n\t\t\tthis.isGroup = true;\n\n\t\t\tthis.definition.columns.forEach((def, i) => {\n\t\t\t\tvar newCol = new Column(def, this);\n\t\t\t\tthis.attachColumn(newCol);\n\t\t\t});\n\n\t\t\tthis.checkColumnVisibility();\n\t\t}else{\n\t\t\tparent.registerColumnField(this);\n\t\t}\n\n\t\tthis._initialize();\n\n\t\tthis.bindModuleColumns();\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.setAttribute(\"role\", \"columnheader\");\n\t\tel.setAttribute(\"aria-sort\", \"none\");\n\n\t\treturn el;\n\t}\n\n\tcreateGroupElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-col-group-cols\");\n\n\t\treturn el;\n\t}\n\n\tmapDefinitions(){\n\t\tvar defaults = this.table.options.columnDefaults;\n\n\t\t//map columnDefaults onto column definitions\n\t\tif(defaults){\n\t\t\tfor(let key in defaults){\n\t\t\t\tif(typeof this.definition[key] === \"undefined\"){\n\t\t\t\t\tthis.definition[key] = defaults[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.definition = this.table.columnManager.optionsList.generate(Column.defaultOptionList, this.definition)\n\t}\n\n\tcheckDefinition(){\n\t\tObject.keys(this.definition).forEach((key) => {\n\t\t\tif(Column.defaultOptionList.indexOf(key) === -1){\n\t\t\t\tconsole.warn(\"Invalid column definition option in '\" + (this.field || this.definition.title) + \"' column:\", key)\n\t\t\t}\n\t\t});\n\t}\n\n\tsetField(field){\n\t\tthis.field = field;\n\t\tthis.fieldStructure = field ? (this.table.options.nestedFieldSeparator ? field.split(this.table.options.nestedFieldSeparator) : [field]) : [];\n\t\tthis.getFieldValue = this.fieldStructure.length > 1 ? this._getNestedData : this._getFlatData;\n\t\tthis.setFieldValue = this.fieldStructure.length > 1 ? this._setNestedData : this._setFlatData;\n\t}\n\n\t//register column position with column manager\n\tregisterColumnPosition(column){\n\t\tthis.parent.registerColumnPosition(column);\n\t}\n\n\t//register column position with column manager\n\tregisterColumnField(column){\n\t\tthis.parent.registerColumnField(column);\n\t}\n\n\t//trigger position registration\n\treRegisterPosition(){\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolumn.reRegisterPosition();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.registerColumnPosition(this);\n\t\t}\n\t}\n\n\t_mapDepricatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\n\t//build header element\n\t_initialize(){\n\t\tvar def = this.definition;\n\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\n\t\tif(def.headerVertical){\n\t\t\tthis.element.classList.add(\"tabulator-col-vertical\");\n\n\t\t\tif(def.headerVertical === \"flip\"){\n\t\t\t\tthis.element.classList.add(\"tabulator-col-vertical-flip\");\n\t\t\t}\n\t\t}\n\n\t\tthis.contentElement = this._bindEvents();\n\n\t\tthis.contentElement = this._buildColumnHeaderContent();\n\n\t\tthis.element.appendChild(this.contentElement);\n\n\t\tif(this.isGroup){\n\t\t\tthis._buildGroupHeader();\n\t\t}else{\n\t\t\tthis._buildColumnHeader();\n\t\t}\n\n\t\tthis.dispatch(\"column-init\", this);\n\t}\n\n\t_bindEvents(){\n\t\tvar def = this.definition,\n\t\tdblTap,\ttapHold, tap;\n\n\t\t//setup header click event bindings\n\t\tif(typeof(def.headerClick) == \"function\"){\n\t\t\tthis.element.addEventListener(\"click\", (e) => {def.headerClick(e, this.getComponent());});\n\t\t}\n\n\t\tif(typeof(def.headerDblClick) == \"function\"){\n\t\t\tthis.element.addEventListener(\"dblclick\", (e) => {def.headerDblClick(e, this.getComponent());});\n\t\t}\n\n\t\tif(typeof(def.headerContext) == \"function\"){\n\t\t\tthis.element.addEventListener(\"contextmenu\", (e) => {def.headerContext(e, this.getComponent());});\n\t\t}\n\n\t\t//setup header tap event bindings\n\t\tif(typeof(def.headerTap) == \"function\"){\n\t\t\ttap = false;\n\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\n\t\t\t\ttap = true;\n\t\t\t}, {passive: true});\n\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\n\t\t\t\tif(tap){\n\t\t\t\t\tdef.headerTap(e, this.getComponent());\n\t\t\t\t}\n\n\t\t\t\ttap = false;\n\t\t\t});\n\t\t}\n\n\t\tif(typeof(def.headerDblTap) == \"function\"){\n\t\t\tdblTap = null;\n\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\n\n\t\t\t\tif(dblTap){\n\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\tdblTap = null;\n\n\t\t\t\t\tdef.headerDblTap(e, this.getComponent());\n\t\t\t\t}else{\n\n\t\t\t\t\tdblTap = setTimeout(() => {\n\t\t\t\t\t\tclearTimeout(dblTap);\n\t\t\t\t\t\tdblTap = null;\n\t\t\t\t\t}, 300);\n\t\t\t\t}\n\n\t\t\t});\n\t\t}\n\n\t\tif(typeof(def.headerTapHold) == \"function\"){\n\t\t\ttapHold = null;\n\n\t\t\tthis.element.addEventListener(\"touchstart\", (e) => {\n\t\t\t\tclearTimeout(tapHold);\n\n\t\t\t\ttapHold = setTimeout(function(){\n\t\t\t\t\tclearTimeout(tapHold);\n\t\t\t\t\ttapHold = null;\n\t\t\t\t\ttap = false;\n\t\t\t\t\tdef.headerTapHold(e, this.getComponent());\n\t\t\t\t}, 1000);\n\n\t\t\t}, {passive: true});\n\n\t\t\tthis.element.addEventListener(\"touchend\", (e) => {\n\t\t\t\tclearTimeout(tapHold);\n\t\t\t\ttapHold = null;\n\t\t\t});\n\t\t}\n\t}\n\n\t//build header element for header\n\t_buildColumnHeader(){\n\t\tvar def = this.definition,\n\t\ttable = this.table;\n\n\t\tthis.dispatch(\"column-layout\", this);\n\n\t\t//set column visibility\n\t\tif(typeof def.visible != \"undefined\"){\n\t\t\tif(def.visible){\n\t\t\t\tthis.show(true);\n\t\t\t}else{\n\t\t\t\tthis.hide(true);\n\t\t\t}\n\t\t}\n\n\t\t//asign additional css classes to column header\n\t\tif(def.cssClass){\n\t\t\tvar classeNames = def.cssClass.split(\" \");\n\t\t\tclasseNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tif(def.field){\n\t\t\tthis.element.setAttribute(\"tabulator-field\", def.field);\n\t\t}\n\n\t\t//set min width if present\n\t\tthis.setMinWidth(parseInt(def.minWidth));\n\n\t\tif (def.maxInitialWidth) {\n\t\t\tthis.maxInitialWidth = parseInt(def.maxInitialWidth);\n\t\t}\n\t\t\n\t\tif(def.maxWidth){\n\t\t\tthis.setMaxWidth(parseInt(def.maxWidth));\n\t\t}\n\n\t\tthis.reinitializeWidth();\n\n\t\t//set orizontal text alignment\n\t\tthis.hozAlign = this.definition.hozAlign;\n\t\tthis.vertAlign = this.definition.vertAlign;\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\t}\n\n\t_buildColumnHeaderContent(){\n\t\tvar def = this.definition,\n\t\ttable = this.table;\n\n\t\tvar contentElement = document.createElement(\"div\");\n\t\tcontentElement.classList.add(\"tabulator-col-content\");\n\n\t\tthis.titleHolderElement = document.createElement(\"div\");\n\t\tthis.titleHolderElement.classList.add(\"tabulator-col-title-holder\");\n\n\t\tcontentElement.appendChild(this.titleHolderElement);\n\n\t\tthis.titleElement = this._buildColumnHeaderTitle();\n\n\t\tthis.titleHolderElement.appendChild(this.titleElement);\n\n\t\treturn contentElement;\n\t}\n\n\t//build title element of column\n\t_buildColumnHeaderTitle(){\n\t\tvar def = this.definition,\n\t\ttitle;\n\n\t\tvar titleHolderElement = document.createElement(\"div\");\n\t\ttitleHolderElement.classList.add(\"tabulator-col-title\");\n\n\t\tif(def.editableTitle){\n\t\t\tvar titleElement = document.createElement(\"input\");\n\t\t\ttitleElement.classList.add(\"tabulator-title-editor\");\n\n\t\t\ttitleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\ttitleElement.focus();\n\t\t\t});\n\n\t\t\ttitleElement.addEventListener(\"change\", () => {\n\t\t\t\tdef.title = titleElement.value;\n\t\t\t\tthis.dispatchExternal(\"columnTitleChanged\", this.getComponent());\n\t\t\t});\n\n\t\t\ttitleHolderElement.appendChild(titleElement);\n\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\ttitleElement.value = text || (def.title || \"&nbsp;\");\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\ttitleElement.value  = def.title || \"&nbsp;\";\n\t\t\t}\n\n\t\t}else{\n\t\t\tif(def.field){\n\t\t\t\tthis.langBind(\"columns|\" + def.field, (text) => {\n\t\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, text || (def.title || \"&nbsp;\"));\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tthis._formatColumnHeaderTitle(titleHolderElement, def.title || \"&nbsp;\");\n\t\t\t}\n\t\t}\n\n\t\treturn titleHolderElement;\n\t}\n\n\t_formatColumnHeaderTitle(el, title){\n\t\tvar contents = this.chain(\"column-format\", [this, title, el], null, () => {\n\t\t\treturn title;\n\t\t});\n\n\t\tswitch(typeof contents){\n\t\t\tcase \"object\":\n\t\t\tif(contents instanceof Node){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}else{\n\t\t\t\tel.innerHTML = \"\";\n\t\t\t\tconsole.warn(\"Format Error - Title formatter has returned a type of object, the only valid formatter object return is an instance of Node, the formatter returned:\", contents);\n\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"undefined\":\n\t\t\tcase \"null\":\n\t\t\tel.innerHTML = \"\";\n\t\t\tbreak;\n\t\t\tdefault:\n\t\t\tel.innerHTML = contents;\n\t\t}\n\t}\n\n\t//build header element for column group\n\t_buildGroupHeader(){\n\t\tthis.element.classList.add(\"tabulator-col-group\");\n\t\tthis.element.setAttribute(\"role\", \"columngroup\");\n\t\tthis.element.setAttribute(\"aria-title\", this.definition.title);\n\n\t\t//asign additional css classes to column header\n\t\tif(this.definition.cssClass){\n\t\t\tvar classeNames = this.definition.cssClass.split(\" \");\n\t\t\tclasseNames.forEach((className) => {\n\t\t\t\tthis.element.classList.add(className);\n\t\t\t});\n\t\t}\n\n\t\tthis.titleElement.style.textAlign = this.definition.headerHozAlign;\n\n\t\tthis.element.appendChild(this.groupElement);\n\t}\n\n\t//flat field lookup\n\t_getFlatData(data){\n\t\treturn data[this.field];\n\t}\n\n\t//nested field lookup\n\t_getNestedData(data){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length,\n\t\toutput;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tdataObj = dataObj[structure[i]];\n\n\t\t\toutput = dataObj;\n\n\t\t\tif(!dataObj){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//flat field set\n\t_setFlatData(data, value){\n\t\tif(this.field){\n\t\t\tdata[this.field] = value;\n\t\t}\n\t}\n\n\t//nested field set\n\t_setNestedData(data, value){\n\t\tvar dataObj = data,\n\t\tstructure = this.fieldStructure,\n\t\tlength = structure.length;\n\n\t\tfor(let i = 0; i < length; i++){\n\n\t\t\tif(i == length -1){\n\t\t\t\tdataObj[structure[i]] = value;\n\t\t\t}else{\n\t\t\t\tif(!dataObj[structure[i]]){\n\t\t\t\t\tif(typeof value !== \"undefined\"){\n\t\t\t\t\t\tdataObj[structure[i]] = {};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tdataObj = dataObj[structure[i]];\n\t\t\t}\n\t\t}\n\t}\n\n\t//attach column to this group\n\tattachColumn(column){\n\t\tif(this.groupElement){\n\t\t\tthis.columns.push(column);\n\t\t\tthis.groupElement.appendChild(column.getElement());\n\n\t\t\tcolumn.columnRendered();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Warning - Column being attached to another column instead of column group\");\n\t\t}\n\t}\n\n\t//vertically align header in column\n\tverticalAlign(alignment, height){\n\n\t\t//calculate height of column header and group holder element\n\t\tvar parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : (height || this.parent.getHeadersElement().clientHeight);\n\t\t// var parentHeight = this.parent.isGroup ? this.parent.getGroupElement().clientHeight : this.parent.getHeadersElement().clientHeight;\n\n\t\tthis.element.style.height = parentHeight + \"px\";\n\n\t\tthis.dispatch(\"column-height\", this, this.element.style.height);\n\n\t\tif(this.isGroup){\n\t\t\tthis.groupElement.style.minHeight = (parentHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t}\n\n\t\t//vertically align cell contents\n\t\tif(!this.isGroup && alignment !== \"top\"){\n\t\t\tif(alignment === \"bottom\"){\n\t\t\t\tthis.element.style.paddingTop = (this.element.clientHeight - this.contentElement.offsetHeight) + \"px\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.paddingTop = ((this.element.clientHeight - this.contentElement.offsetHeight) / 2) + \"px\";\n\t\t\t}\n\t\t}\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.verticalAlign(alignment);\n\t\t});\n\t}\n\n\t//clear vertical alignmenet\n\tclearVerticalAlign(){\n\t\tthis.element.style.paddingTop = \"\";\n\t\tthis.element.style.height = \"\";\n\t\tthis.element.style.minHeight = \"\";\n\t\tthis.groupElement.style.minHeight = \"\";\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.clearVerticalAlign();\n\t\t});\n\n\t\tthis.dispatch(\"column-height\", this, \"\");\n\t}\n\n\tbindModuleColumns (){\n\t\t//check if rownum formatter is being used on a column\n\t\tif(this.definition.formatter == \"rownum\"){\n\t\t\tthis.table.rowManager.rowNumColumn = this;\n\t\t}\n\t}\n\n\t//// Retreive Column Information ////\n\t//return column header element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return colunm group element\n\tgetGroupElement(){\n\t\treturn this.groupElement;\n\t}\n\n\t//return field name\n\tgetField(){\n\t\treturn this.field;\n\t}\n\n\tgetTitleDownload() {\n\t\treturn this.titleDownload;\n\t}\n\n\t//return the first column in a group\n\tgetFirstColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[0].getFirstColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return the last column in a group\n\tgetLastColumn(){\n\t\tif(!this.isGroup){\n\t\t\treturn this;\n\t\t}else{\n\t\t\tif(this.columns.length){\n\t\t\t\treturn this.columns[this.columns.length -1].getLastColumn();\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//return all columns in a group\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\n\t//return all columns in a group\n\tgetCells(){\n\t\treturn this.cells;\n\t}\n\n\t//retreive the top column in a group of columns\n\tgetTopColumn(){\n\t\tif(this.parent.isGroup){\n\t\t\treturn this.parent.getTopColumn();\n\t\t}else{\n\t\t\treturn this;\n\t\t}\n\t}\n\n\t//return column definition object\n\tgetDefinition(updateBranches){\n\t\tvar colDefs = [];\n\n\t\tif(this.isGroup && updateBranches){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tcolDefs.push(column.getDefinition(true));\n\t\t\t});\n\n\t\t\tthis.definition.columns = colDefs;\n\t\t}\n\n\t\treturn this.definition;\n\t}\n\n\t//////////////////// Actions ////////////////////\n\tcheckColumnVisibility(){\n\t\tvar visible = false;\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tif(column.visible){\n\t\t\t\tvisible = true;\n\t\t\t}\n\t\t});\n\n\t\tif(visible){\n\t\t\tthis.show();\n\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t}else{\n\t\t\tthis.hide();\n\t\t}\n\t}\n\n\t//show column\n\tshow(silent, responsiveToggle){\n\t\tif(!this.visible){\n\t\t\tthis.visible = true;\n\n\t\t\tthis.element.style.display = \"\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.show();\n\t\t\t});\n\n\t\t\tif(!this.isGroup && this.width === null){\n\t\t\t\tthis.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tthis.dispatch(\"column-show\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), true);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.renderer.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\t//hide column\n\thide(silent, responsiveToggle){\n\t\tif(this.visible){\n\t\t\tthis.visible = false;\n\n\t\t\tthis.element.style.display = \"none\";\n\n\t\t\tthis.table.columnManager.verticalAlignHeaders();\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.checkColumnVisibility();\n\t\t\t}\n\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.hide();\n\t\t\t});\n\n\t\t\tthis.dispatch(\"column-hide\", this, responsiveToggle);\n\n\t\t\tif(!silent){\n\t\t\t\tthis.dispatchExternal(\"columnVisibilityChanged\", this.getComponent(), false);\n\t\t\t}\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\n\t\t\tif(!this.silent){\n\t\t\t\tthis.table.columnManager.renderer.rerenderColumns();\n\t\t\t}\n\t\t}\n\t}\n\n\tmatchChildWidths(){\n\t\tvar childWidth = 0;\n\n\t\tif(this.contentElement && this.columns.length){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\tchildWidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.contentElement.style.maxWidth = (childWidth - 1) + \"px\";\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.matchChildWidths();\n\t\t\t}\n\t\t}\n\t}\n\n\tremoveChild(child){\n\t\tvar index = this.columns.indexOf(child);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tif(!this.columns.length){\n\t\t\tthis.delete();\n\t\t}\n\t}\n\n\tsetWidth(width){\n\t\tthis.widthFixed = true;\n\t\tthis.setWidthActual(width);\n\t}\n\n\tsetWidthActual(width){\n\t\tif(isNaN(width)){\n\t\t\twidth = Math.floor((this.table.element.clientWidth/100) * parseInt(width));\n\t\t}\n\n\t\twidth = Math.max(this.minWidth, width);\n\n\t\tif(this.maxWidth){\n\t\t\twidth = Math.min(this.maxWidth, width);\n\t\t}\n\n\t\tthis.width = width;\n\t\tthis.widthStyled = width ? width + \"px\" : \"\";\n\n\t\tthis.element.style.width = this.widthStyled;\n\n\t\tif(!this.isGroup){\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tcell.setWidth();\n\t\t\t});\n\t\t}\n\n\t\tif(this.parent.isGroup){\n\t\t\tthis.parent.matchChildWidths();\n\t\t}\n\n\t\tthis.dispatch(\"column-width\", this);\n\t}\n\n\tcheckCellHeights(){\n\t\tvar rows = [];\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tif(cell.row.heightInitialized){\n\t\t\t\tif(cell.row.getElement().offsetParent !== null){\n\t\t\t\t\trows.push(cell.row);\n\t\t\t\t\tcell.row.clearCellHeight();\n\t\t\t\t}else{\n\t\t\t\t\tcell.row.heightInitialized = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.calcHeight();\n\t\t});\n\n\t\trows.forEach(function(row){\n\t\t\trow.setCellHeight();\n\t\t});\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tif(this.isGroup){\n\t\t\tthis.columns.forEach(function(column){\n\t\t\t\tif(column.visible){\n\t\t\t\t\twidth += column.getWidth();\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\twidth = this.width;\n\t\t}\n\n\t\treturn width;\n\t}\n\n\tgetHeight(){\n\t\treturn Math.ceil(this.element.getBoundingClientRect().height);\n\t}\n\n\tsetMinWidth(minWidth){\n\t\tthis.minWidth = minWidth;\n\t\tthis.minWidthStyled = minWidth ? minWidth + \"px\" : \"\";\n\n\t\tthis.element.style.minWidth = this.minWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMinWidth();\n\t\t});\n\t}\n\n\tsetMaxWidth(maxWidth){\n\t\tthis.maxWidth = maxWidth;\n\t\tthis.maxWidthStyled = maxWidth ? maxWidth + \"px\" : \"\";\n\n\t\tthis.element.style.maxWidth = this.maxWidthStyled;\n\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setMaxWidth();\n\t\t});\n\t}\n\n\tdelete(){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar index;\n\n\t\t\tif(this.isGroup){\n\t\t\t\tthis.columns.forEach(function(column){\n\t\t\t\t\tcolumn.delete();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tthis.dispatch(\"column-delete\", this);\n\n\t\t\tvar cellCount = this.cells.length;\n\n\t\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\t\tthis.cells[0].delete();\n\t\t\t}\n\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\n\t\t\tthis.element = false;\n\t\t\tthis.contentElement = false;\n\t\t\tthis.titleElement = false;\n\t\t\tthis.groupElement = false;\n\n\t\t\tif(this.parent.isGroup){\n\t\t\t\tthis.parent.removeChild(this);\n\t\t\t}\n\n\t\t\tthis.table.columnManager.deregisterColumn(this);\n\n\t\t\tthis.table.columnManager.renderer.rerenderColumns(true);\n\n\t\t\tresolve();\n\t\t});\n\t}\n\n\tcolumnRendered(){\n\t\tif(this.titleFormatterRendered){\n\t\t\tthis.titleFormatterRendered();\n\t\t}\n\n\t\tthis.dispatch(\"column-rendered\", this);\n\t}\n\n\t//////////////// Cell Management /////////////////\n\t//generate cell for this column\n\tgenerateCell(row){\n\t\tvar cell = new Cell(this, row);\n\n\t\tthis.cells.push(cell);\n\n\t\treturn cell;\n\t}\n\n\tnextColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._nextVisibleColumn(index + 1) : false;\n\t}\n\n\t_nextVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._nextVisibleColumn(index + 1);\n\t}\n\n\tprevColumn(){\n\t\tvar index = this.table.columnManager.findColumnIndex(this);\n\t\treturn index > -1 ? this._prevVisibleColumn(index - 1) : false;\n\t}\n\n\t_prevVisibleColumn(index){\n\t\tvar column = this.table.columnManager.getColumnByIndex(index);\n\t\treturn !column || column.visible ? column : this._prevVisibleColumn(index - 1);\n\t}\n\n\treinitializeWidth(force){\n\t\tthis.widthFixed = false;\n\n\t\t//set width if present\n\t\tif(typeof this.definition.width !== \"undefined\" && !force){\n\t\t\t// maxInitialWidth ignored here as width specified\n\t\t\tthis.setWidth(this.definition.width);\n\t\t}\n\n\t\tthis.dispatch(\"column-width-fit-before\", this);\n\n\t\tthis.fitToData(force);\n\n\t\tthis.dispatch(\"column-width-fit-after\", this);\n\t}\n\n\t//set column width to maximum cell width for non group columns\n\tfitToData(force){\n\t\tif(this.isGroup){\n\t\t\treturn;\n\t\t}\n\n\t\tif(!this.widthFixed){\n\t\t\tthis.element.style.width = \"\";\n\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tcell.clearWidth();\n\t\t\t});\n\t\t}\n\n\t\tvar maxWidth = this.element.offsetWidth;\n\n\t\tif(!this.width || !this.widthFixed){\n\t\t\tthis.cells.forEach((cell) => {\n\t\t\t\tvar width = cell.getWidth();\n\n\t\t\t\tif(width > maxWidth){\n\t\t\t\t\tmaxWidth = width;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(maxWidth){\n\t\t\t\tvar setTo = maxWidth + 1;\n\t\t\t\tif (this.maxInitialWidth && !force) {\n\t\t\t\t\tsetTo = Math.min(setTo, this.maxInitialWidth);\n\t\t\t\t}\n\t\t\t\tthis.setWidthActual(setTo);\n\t\t\t}\n\t\t}\n\t}\n\n\tupdateDefinition(updates){\n\t\tvar definition;\n\n\t\tif(!this.isGroup){\n\t\t\tif(!this.parent.isGroup){\n\t\t\t\tdefinition = Object.assign({}, this.getDefinition());\n\t\t\t\tdefinition = Object.assign(definition, updates);\n\n\t\t\t\treturn this.table.columnManager.addColumn(definition, false, this)\n\t\t\t\t.then((column) => {\n\n\t\t\t\t\tif(definition.field == this.field){\n\t\t\t\t\t\tthis.field = false; //cleair field name to prevent deletion of duplicate column from arrays\n\t\t\t\t\t}\n\n\t\t\t\t\treturn this.delete()\n\t\t\t\t\t.then(() => {\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t});\n\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Column Update Error - The updateDefinition function is only available on ungrouped columns\");\n\t\t\treturn Promise.reject(\"Column Update Error - The updateDefinition function is only available on columns, not column groups\");\n\t\t}\n\t}\n\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new ColumnComponent(this);\n\t\t}\n\n\t\treturn this.component;\n\t}\n}\n\nColumn.defaultOptionList = defaultOptions;\n\nexport default Column;","//public row object\nexport default class RowComponent {\n\n\tconstructor (row){\n\t\tthis._row = row;\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._row.table.componentFunctionBinder.handle(\"row\", target._row, name)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetData(transform){\n\t\treturn this._row.getData(transform);\n\t}\n\n\tgetElement(){\n\t\treturn this._row.getElement();\n\t}\n\n\tgetCells(){\n\t\tvar cells = [];\n\n\t\tthis._row.getCells().forEach(function(cell){\n\t\t\tcells.push(cell.getComponent());\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\tgetCell(column){\n\t\tvar cell = this._row.getCell(column);\n\t\treturn cell ? cell.getComponent() : false;\n\t}\n\n\tgetIndex(){\n\t\treturn this._row.getData(\"data\")[this._row.table.options.index];\n\t}\n\n\tgetPosition(active){\n\t\treturn this._row.table.rowManager.getRowPosition(this._row, active);\n\t}\n\n\tdelete(){\n\t\treturn this._row.delete();\n\t}\n\n\tscrollTo(){\n\t\treturn this._row.table.rowManager.scrollToRow(this._row);\n\t}\n\n\tmove(to, after){\n\t\tthis._row.moveToRow(to, after);\n\t}\n\n\tupdate(data){\n\t\treturn this._row.updateData(data);\n\t}\n\n\tnormalizeHeight(){\n\t\tthis._row.normalizeHeight(true);\n\t}\n\n\t_getSelf(){\n\t\treturn this._row;\n\t}\n\n\treformat(){\n\t\treturn this._row.reinitialize();\n\t}\n\n\tgetTable(){\n\t\treturn this._row.table;\n\t}\n\n\tgetNextRow(){\n\t\tvar row = this._row.nextRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n\n\tgetPrevRow(){\n\t\tvar row = this._row.prevRow();\n\t\treturn row ? row.getComponent() : row;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport RowComponent from './RowComponent.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Row extends CoreFeature{\n\tconstructor (data, parent, type = \"row\"){\n\t\tsuper(parent.table);\n\t\t\n\t\tthis.parent = parent;\n\t\tthis.data = {};\n\t\tthis.type = type; //type of element\n\t\tthis.element = false;\n\t\tthis.modules = {}; //hold module variables;\n\t\tthis.cells = [];\n\t\tthis.height = 0; //hold element height\n\t\tthis.heightStyled = \"\"; //hold element height prestyled to improve render efficiency\n\t\tthis.manualHeight = false; //user has manually set row height\n\t\tthis.outerHeight = 0; //hold elements outer height\n\t\tthis.initialized = false; //element has been rendered\n\t\tthis.heightInitialized = false; //element has resized cells to fit\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.created = false;\n\t\t\n\t\tthis.setData(data);\n\t}\n\t\n\tcreate(){\n\t\tif(!this.created){\n\t\t\tthis.created = true;\n\t\t\tthis.generateElement();\n\t\t}\n\t}\n\t\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.setAttribute(\"role\", \"row\");\n\t\t\n\t\tthis.element = el;\n\t}\n\t\n\tgetElement(){\n\t\tthis.create();\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.createElement();\n\t\tthis.dispatch(\"row-init\", this);\n\t}\n\t\n\tgenerateCells(){\n\t\tthis.cells = this.table.columnManager.generateCells(this);\n\t}\n\t\n\t//functions to setup on first render\n\tinitialize(force){\n\t\tthis.create();\n\t\t\n\t\tif(!this.initialized || force){\n\t\t\t\n\t\t\tthis.deleteCells();\n\t\t\t\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-before\", this);\n\t\t\t\n\t\t\tthis.generateCells();\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.table.columnManager.renderer.renderRowCells(this);\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.normalizeHeight();\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout\", this);\n\t\t\t\n\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-layout-after\", this);\n\t\t}else{\n\t\t\tthis.table.columnManager.renderer.rerenderRowCells(this);\n\t\t}\n\t}\n\t\n\treinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.normalizeHeight(true);\n\t\t}\n\t}\n\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tdeinitializeHeight(){\n\t\tthis.heightInitialized = false;\n\t}\n\t\n\treinitialize(children){\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\t\n\t\tif(!this.manualHeight){\n\t\t\tthis.height = 0;\n\t\t\tthis.heightStyled = \"\";\n\t\t}\n\t\t\n\t\tif(this.element && this.element.offsetParent !== null){\n\t\t\tthis.initialize(true);\n\t\t}\n\t\t\n\t\tthis.dispatch(\"row-relayout\", this);\n\t}\n\t\n\t//get heights when doing bulk row style calcs in virtual DOM\n\tcalcHeight(force){\n\t\tvar maxHeight = 0,\n\t\tminHeight;\n\t\t\n\t\tif(this.table.options.rowHeight){\n\t\t\tthis.height = this.table.options.rowHeight;\n\t\t}else{\n\t\t\tminHeight = this.table.options.resizableRows ? this.element.clientHeight : 0;\n\t\t\t\n\t\t\tthis.cells.forEach(function(cell){\n\t\t\t\tvar height = cell.getHeight();\n\t\t\t\tif(height > maxHeight){\n\t\t\t\t\tmaxHeight = height;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(force){\n\t\t\t\tthis.height = Math.max(maxHeight, minHeight);\n\t\t\t}else{\n\t\t\t\tthis.height = this.manualHeight ? this.height : Math.max(maxHeight, minHeight);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.heightStyled = this.height ? this.height + \"px\" : \"\";\n\t\tthis.outerHeight = this.element.offsetHeight;\n\t}\n\t\n\t//set of cells\n\tsetCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.setHeight();\n\t\t});\n\t\t\n\t\tthis.heightInitialized = true;\n\t}\n\t\n\tclearCellHeight(){\n\t\tthis.cells.forEach(function(cell){\n\t\t\tcell.clearHeight();\n\t\t});\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(force){\n\t\tif(force && !this.table.options.rowHeight){\n\t\t\tthis.clearCellHeight();\n\t\t}\n\t\t\n\t\tthis.calcHeight(force);\n\t\t\n\t\tthis.setCellHeight();\n\t}\n\t\n\t//set height of rows\n\tsetHeight(height, force){\n\t\tif(this.height != height || force){\n\t\t\t\n\t\t\tthis.manualHeight = true;\n\t\t\t\n\t\t\tthis.height = height;\n\t\t\tthis.heightStyled = height ? height + \"px\" : \"\";\n\t\t\t\n\t\t\tthis.setCellHeight();\n\t\t\t\n\t\t\t// this.outerHeight = this.element.outerHeight();\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\t//return rows outer Width\n\tgetWidth(){\n\t\treturn this.element.offsetWidth;\n\t}\n\t\n\t//////////////// Cell Management /////////////////\n\tdeleteCell(cell){\n\t\tvar index = this.cells.indexOf(cell);\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.cells.splice(index, 1);\n\t\t}\n\t}\n\t\n\t//////////////// Data Management /////////////////\n\tsetData(data){\n\t\tthis.data = this.chain(\"row-data-init-before\", [this, data], undefined, data);\n\t\t\n\t\tthis.dispatch(\"row-data-init-after\", this);\n\t}\n\t\n\t//update the rows data\n\tupdateData(updatedData){\n\t\tvar visible = this.element && Helpers.elVisible(this.element),\n\t\ttempData = {},\n\t\tnewRowData;\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t\n\t\t\tif(typeof updatedData === \"string\"){\n\t\t\t\tupdatedData = JSON.parse(updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-before\", this);\n\t\t\t\n\t\t\tif(this.subscribed(\"row-data-changing\")){\n\t\t\t\ttempData = Object.assign(tempData, this.data);\n\t\t\t\ttempData = Object.assign(tempData, updatedData);\n\t\t\t}\n\t\t\t\n\t\t\tnewRowData = this.chain(\"row-data-changing\", [this, tempData, updatedData], null, updatedData);\n\t\t\t\n\t\t\t//set data\n\t\t\tfor (var attrname in newRowData) {\n\t\t\t\tthis.data[attrname] = newRowData[attrname];\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-save-after\", this);\n\t\t\t\n\t\t\t//update affected cells only\n\t\t\tfor (var attrname in updatedData) {\n\t\t\t\t\n\t\t\t\tlet columns = this.table.columnManager.getColumnsByFieldRoot(attrname);\n\t\t\t\t\n\t\t\t\tcolumns.forEach((column) => {\n\t\t\t\t\tlet cell = this.getCell(column.getField());\n\t\t\t\t\t\n\t\t\t\t\tif(cell){\n\t\t\t\t\t\tlet value = column.getFieldValue(newRowData);\n\t\t\t\t\t\tif(cell.getValue() != value){\n\t\t\t\t\t\t\tcell.setValueProcessData(value);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(visible){\n\t\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//Partial reinitialization if visible\n\t\t\tif(visible){\n\t\t\t\tthis.normalizeHeight(true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.rowFormatter){\n\t\t\t\t\tthis.table.options.rowFormatter(this.getComponent());\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.initialized = false;\n\t\t\t\tthis.height = 0;\n\t\t\t\tthis.heightStyled = \"\";\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"row-data-changed\", this, visible, updatedData);\n\t\t\t\n\t\t\t//this.reinitialize();\n\t\t\t\n\t\t\tthis.dispatchExternal(\"rowUpdated\", this.getComponent());\n\t\t\t\n\t\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\tgetData(transform){\n\t\tif(transform){\n\t\t\treturn this.chain(\"row-data-retrieve\", [this, transform], null, this.data);\n\t\t}\n\t\t\n\t\treturn this.data;\n\t}\n\t\n\tgetCell(column){\n\t\tvar match = false;\n\t\t\n\t\tcolumn = this.table.columnManager.findColumn(column);\n\t\t\n\t\tif(!this.initialized){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\tmatch = this.cells.find(function(cell){\n\t\t\treturn cell.column === column;\n\t\t});\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetCellIndex(findCell){\n\t\treturn this.cells.findIndex(function(cell){\n\t\t\treturn cell === findCell;\n\t\t});\n\t}\n\t\n\tfindCell(subject){\n\t\treturn this.cells.find((cell) => {\n\t\t\treturn cell.element === subject;\n\t\t});\n\t}\n\t\n\tgetCells(){\n\t\tif(!this.initialized){\n\t\t\tthis.generateCells();\n\t\t}\n\t\t\n\t\treturn this.cells;\n\t}\n\t\n\tnextRow(){\n\t\tvar row = this.table.rowManager.nextDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tprevRow(){\n\t\tvar row = this.table.rowManager.prevDisplayRow(this, true);\n\t\treturn row || false;\n\t}\n\t\n\tmoveToRow(to, before){\n\t\tvar toRow = this.table.rowManager.findRow(to);\n\t\t\n\t\tif(toRow){\n\t\t\tthis.table.rowManager.moveRowActual(this, toRow, !before);\n\t\t\tthis.table.rowManager.refreshActiveData(\"display\", false, true);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", to);\n\t\t}\n\t}\n\t\n\t///////////////////// Actions  /////////////////////\n\tdelete(){\n\t\tthis.dispatch(\"row-delete\", this);\n\t\t\n\t\tthis.deleteActual();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\tdeleteActual(blockRedraw){\n\t\tvar index = this.table.rowManager.getRowIndex(this);\n\t\t\n\t\tthis.detatchModules();\n\t\t\n\t\tthis.table.rowManager.deleteRow(this, blockRedraw);\n\t\t\n\t\tthis.deleteCells();\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.heightInitialized = false;\n\t\tthis.element = false;\n\t\t\n\t\tthis.dispatch(\"row-deleted\", this);\n\t}\n\t\n\tdetatchModules(){\n\t\tthis.dispatch(\"row-deleting\", this);\n\t}\n\t\n\tdeleteCells(){\n\t\tvar cellCount = this.cells.length;\n\t\t\n\t\tfor(let i = 0; i < cellCount; i++){\n\t\t\tthis.cells[0].delete();\n\t\t}\n\t}\n\t\n\twipe(){\n\t\tthis.detatchModules();\n\t\tthis.deleteCells();\n\t\t\n\t\tif(this.element){\n\t\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\t\n\t\t\tif(this.element.parentNode){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.modules = {};\n\t}\n\t\n\tgetGroup(){\n\t\treturn this.modules.group || false;\n\t}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new RowComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}","export default {\n\t\"avg\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : 2\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn Number(sum) + Number(value);\n\t\t\t});\n\n\t\t\toutput = output / values.length;\n\n\t\t\toutput = precision !== false ? output.toFixed(precision) : output;\n\t\t}\n\n\t\treturn parseFloat(output).toString();\n\t},\n\t\"max\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value > output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"min\":function(values, data, calcParams){\n\t\tvar output = null,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tvalues.forEach(function(value){\n\n\t\t\tvalue = Number(value);\n\n\t\t\tif(value < output || output === null){\n\t\t\t\toutput = value;\n\t\t\t}\n\t\t});\n\n\t\treturn output !== null ? (precision !== false ? output.toFixed(precision) : output) : \"\";\n\t},\n\t\"sum\":function(values, data, calcParams){\n\t\tvar output = 0,\n\t\tprecision = typeof calcParams.precision !== \"undefined\" ? calcParams.precision : false;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tvalue = Number(value);\n\n\t\t\t\toutput += !isNaN(value) ? Number(value) : 0;\n\t\t\t});\n\t\t}\n\n\t\treturn precision !== false ? output.toFixed(precision) : output;\n\t},\n\t\"concat\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\toutput = values.reduce(function(sum, value){\n\t\t\t\treturn String(sum) + String(value);\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n\t\"count\":function(values, data, calcParams){\n\t\tvar output = 0;\n\n\t\tif(values.length){\n\t\t\tvalues.forEach(function(value){\n\t\t\t\tif(value){\n\t\t\t\t\toutput ++;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t},\n};","import Module from '../../core/Module.js';\n\nimport CalcComponent from './CalcComponent.js';\n\nimport Cell from '../../core/cell/Cell.js';\nimport Column from '../../core/column/Column.js';\nimport Row from '../../core/row/Row.js';\n\nimport defaultCalculations from './defaults/calculations.js';\n\nclass ColumnCalcs extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topCalcs = [];\n\t\tthis.botCalcs = [];\n\t\tthis.genColumn = false;\n\t\tthis.topElement = this.createElement();\n\t\tthis.botElement = this.createElement();\n\t\tthis.topRow = false;\n\t\tthis.botRow = false;\n\t\tthis.topInitialized = false;\n\t\tthis.botInitialized = false;\n\n\t\tthis.registerTableOption(\"columnCalcs\", true);\n\n\t\tthis.registerColumnOption(\"topCalc\");\n\t\tthis.registerColumnOption(\"topCalcParams\");\n\t\tthis.registerColumnOption(\"topCalcFormatter\");\n\t\tthis.registerColumnOption(\"topCalcFormatterParams\");\n\t\tthis.registerColumnOption(\"bottomCalc\");\n\t\tthis.registerColumnOption(\"bottomCalcParams\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatter\");\n\t\tthis.registerColumnOption(\"bottomCalcFormatterParams\");\n\t}\n\n\tcreateElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-calcs-holder\");\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tthis.genColumn = new Column({field:\"value\"}, this);\n\n\t\tthis.subscribe(\"cell-value-changed\", this.cellValueChanged.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\tthis.subscribe(\"column-moved\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"column-add\", this.recalcActiveRows.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.recalcActiveRowsRefresh.bind(this));\n\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerTableFunction(\"getCalcResults\", this.getResults.bind(this));\n\t\tthis.registerTableFunction(\"recalc\", this.userRecalc.bind(this));\n\t}\n\n\ttableRedraw(force){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\n\t\tif(force){\n\t\t\tthis.redraw();\n\t\t}\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tuserRecalc(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tvisibleRows(viewable, rows){\n\t\tif(this.topRow){\n\t\t\trows.unshift(this.topRow);\n\t\t}\n\n\t\tif(this.botRow){\n\t\t\trows.push(this.botRow);\n\t\t}\n\t\n\t\treturn rows;\n\t}\n\n\trowsUpdated(row){\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.recalcRowGroup(this);\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\n\trecalcActiveRowsRefresh(){\n\t\tif(this.table.options.groupBy && this.table.options.dataTreeStartExpanded && this.table.options.dataTree){\n\t\t\tthis.recalcAll();\n\t\t}else{\n\t\t\tthis.recalcActiveRows();\n\t\t}\n\t}\n\n\trecalcActiveRows(){\n\t\tthis.recalc(this.table.rowManager.activeRows);\n\t}\n\n\tcellValueChanged(cell){\n\t\tif(cell.column.definition.topCalc || cell.column.definition.bottomCalc){\n\t\t\tif(this.table.options.groupBy){\n\t\t\t\tif(this.table.options.columnCalcs == \"table\" || this.table.options.columnCalcs == \"both\"){\n\t\t\t\t\tthis.recalcActiveRows();\n\t\t\t\t}\n\n\t\t\t\tif(this.table.options.columnCalcs != \"table\"){\n\t\t\t\t\tthis.recalcRowGroup(cell.row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumnCheck(column){\n\t\tif(column.definition.topCalc || column.definition.bottomCalc){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column calcs\n\tinitializeColumn(column){\n\t\tvar def = column.definition\n\n\t\tvar config = {\n\t\t\ttopCalcParams:def.topCalcParams || {},\n\t\t\tbotCalcParams:def.bottomCalcParams || {},\n\t\t};\n\n\t\tif(def.topCalc){\n\n\t\t\tswitch(typeof def.topCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\tif(ColumnCalcs.calculations[def.topCalc]){\n\t\t\t\t\tconfig.topCalc = ColumnCalcs.calculations[def.topCalc]\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.topCalc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\tconfig.topCalc = def.topCalc;\n\t\t\t\tbreak\n\n\t\t\t}\n\n\t\t\tif(config.topCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.topCalcs.push(column);\n\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeTopRow();\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\n\t\tif(def.bottomCalc){\n\t\t\tswitch(typeof def.bottomCalc){\n\t\t\t\tcase \"string\":\n\t\t\t\tif(ColumnCalcs.calculations[def.bottomCalc]){\n\t\t\t\t\tconfig.botCalc = ColumnCalcs.calculations[def.bottomCalc]\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Calc Error - No such calculation found, ignoring: \", def.bottomCalc);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\tconfig.botCalc = def.bottomCalc;\n\t\t\t\tbreak\n\n\t\t\t}\n\n\t\t\tif(config.botCalc){\n\t\t\t\tcolumn.modules.columnCalcs = config;\n\t\t\t\tthis.botCalcs.push(column);\n\n\t\t\t\tif(this.table.options.columnCalcs != \"group\"){\n\t\t\t\t\tthis.initializeBottomRow();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t}\n\n\t//dummy functions to handle being mock column manager\n\tregisterColumnField(){};\n\n\tremoveCalcs(){\n\t\tvar changed = false;\n\n\t\tif(this.topInitialized){\n\t\t\tthis.topInitialized = false;\n\t\t\tthis.topElement.parentNode.removeChild(this.topElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif(this.botInitialized){\n\t\t\tthis.botInitialized = false;\n\t\t\tthis.footerRemove(this.botElement);\n\t\t\tchanged = true;\n\t\t}\n\n\t\tif(changed){\n\t\t\tthis.table.rowManager.adjustTableSize();\n\t\t}\n\t}\n\n\tinitializeTopRow(){\n\t\tif(!this.topInitialized){\n\t\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\t\t\tthis.topInitialized = true;\n\t\t}\n\t}\n\n\tinitializeBottomRow(){\n\t\tif(!this.botInitialized){\n\t\t\tthis.footerPrepend(this.botElement);\n\t\t\tthis.botInitialized = true;\n\t\t}\n\t}\n\n\tscrollHorizontal(left){\n\t\tif(this.botInitialized && this.botRow){\n\t\t\tthis.botRow.getElement().style.marginLeft = (-left) + \"px\";\n\t\t}\n\t}\n\n\trecalc(rows){\n\t\tvar data, row;\n\n\t\tif(this.topInitialized || this.botInitialized){\n\t\t\tdata = this.rowsToData(rows);\n\n\t\t\tif(this.topInitialized){\n\t\t\t\tif(this.topRow){\n\t\t\t\t\tthis.topRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"top\", this.rowsToData(rows))\n\t\t\t\tthis.topRow = row;\n\t\t\t\twhile(this.topElement.firstChild) this.topElement.removeChild(this.topElement.firstChild);\n\t\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tif(this.botInitialized){\n\t\t\t\tif(this.botRow){\n\t\t\t\t\tthis.botRow.deleteCells();\n\t\t\t\t}\n\n\t\t\t\trow = this.generateRow(\"bottom\", this.rowsToData(rows))\n\t\t\t\tthis.botRow = row;\n\t\t\t\twhile(this.botElement.firstChild) this.botElement.removeChild(this.botElement.firstChild);\n\t\t\t\tthis.botElement.appendChild(row.getElement());\n\t\t\t\trow.initialize(true);\n\t\t\t}\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\t//set resizable handles\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tthis.table.modules.frozenColumns.layout();\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcRowGroup(row){\n\t\tthis.recalcGroup(this.table.modules.groupRows.getRowGroup(row));\n\t}\n\n\trecalcAll(){\n\t\tif(this.topCalcs.length || this.botCalcs.length){\n\t\t\tif(this.table.options.columnCalcs !== \"group\"){\n\t\t\t\tthis.recalcActiveRows();\n\t\t\t}\n\n\t\t\tif(this.table.options.groupBy && this.table.options.columnCalcs !== \"table\"){\n\n\t\t\t\tvar groups = this.table.modules.groupRows.getChildGroups();\n\n\t\t\t\tgroups.forEach((group) => {\n\t\t\t\t\tthis.recalcGroup(group);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\trecalcGroup(group){\n\t\tvar data, rowData;\n\n\t\tif(group){\n\t\t\tif(group.calcs){\n\t\t\t\tif(group.calcs.bottom){\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"bottom\", data);\n\n\t\t\t\t\tgroup.calcs.bottom.updateData(rowData);\n\t\t\t\t\tgroup.calcs.bottom.reinitialize();\n\t\t\t\t}\n\n\t\t\t\tif(group.calcs.top){\n\t\t\t\t\tdata = this.rowsToData(group.rows);\n\t\t\t\t\trowData = this.generateRowData(\"top\", data);\n\n\t\t\t\t\tgroup.calcs.top.updateData(rowData);\n\t\t\t\t\tgroup.calcs.top.reinitialize();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//generate top stats row\n\tgenerateTopRow(rows){\n\t\treturn this.generateRow(\"top\", this.rowsToData(rows));\n\t}\n\t//generate bottom stats row\n\tgenerateBottomRow(rows){\n\t\treturn this.generateRow(\"bottom\", this.rowsToData(rows));\n\t}\n\n\trowsToData(rows){\n\t\tvar data = [];\n\t\t\n\t\trows.forEach((row) => {\n\t\t\tdata.push(row.getData());\n\n\t\t\tif(this.table.options.dataTree && this.table.options.dataTreeChildColumnCalcs){\n\t\t\t\tif(row.modules.dataTree && row.modules.dataTree.open){\n\t\t\t\t\tvar children = this.rowsToData(this.table.modules.dataTree.getFilteredTreeChildren(row));\n\t\t\t\t\tdata = data.concat(children);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn data;\n\t}\n\n\t//generate stats row\n\tgenerateRow(pos, data){\n\t\tvar rowData = this.generateRowData(pos, data),\n\t\trow;\n\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.disable();\n\t\t}\n\n\t\trow = new Row(rowData, this, \"calc\");\n\n\t\tif(this.table.modExists(\"mutator\")){\n\t\t\tthis.table.modules.mutator.enable();\n\t\t}\n\n\t\trow.getElement().classList.add(\"tabulator-calcs\", \"tabulator-calcs-\" + pos);\n\n\t\trow.component = false;\n\n\t\trow.getComponent = () => {\n\t\t\tif(!row.component){\n\t\t\t\trow.component = new CalcComponent(row);\n\t\t\t}\n\n\t\t\treturn row.component;\n\t\t};\n\n\t\trow.generateCells = () => {\n\n\t\t\tvar cells = [];\n\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\n\t\t\t\t\t//set field name of mock column\n\t\t\t\t\tthis.genColumn.setField(column.getField());\n\t\t\t\t\tthis.genColumn.hozAlign = column.hozAlign;\n\n\t\t\t\t\tif(column.definition[pos + \"CalcFormatter\"] && this.table.modExists(\"format\")){\n\t\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(column.definition[pos + \"CalcFormatter\"]),\n\t\t\t\t\t\t\tparams: column.definition[pos + \"CalcFormatterParams\"] || {},\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.genColumn.modules.format = {\n\t\t\t\t\t\t\tformatter: this.table.modules.format.getFormatter(\"plaintext\"),\n\t\t\t\t\t\t\tparams:{}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\n\t\t\t\t\t//ensure css class defintion is replicated to calculation cell\n\t\t\t\t\tthis.genColumn.definition.cssClass = column.definition.cssClass;\n\n\t\t\t\t\t//generate cell and assign to correct column\n\t\t\t\t\tvar cell = new Cell(this.genColumn, row);\n\t\t\t\t\tcell.getElement();\n\t\t\t\t\tcell.column = column;\n\t\t\t\t\tcell.setWidth();\n\n\t\t\t\t\tcolumn.cells.push(cell);\n\t\t\t\t\tcells.push(cell);\n\n\t\t\t\t\tif(!column.visible){\n\t\t\t\t\t\tcell.hide();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\trow.cells = cells;\n\t\t};\n\n\t\treturn row;\n\t}\n\n\t//generate stats row\n\tgenerateRowData(pos, data){\n\t\tvar rowData = {},\n\t\tcalcs = pos == \"top\" ? this.topCalcs : this.botCalcs,\n\t\ttype = pos == \"top\" ? \"topCalc\" : \"botCalc\",\n\t\tparams, paramKey;\n\n\t\tcalcs.forEach(function(column){\n\t\t\tvar values = [];\n\n\t\t\tif(column.modules.columnCalcs && column.modules.columnCalcs[type]){\n\t\t\t\tdata.forEach(function(item){\n\t\t\t\t\tvalues.push(column.getFieldValue(item));\n\t\t\t\t});\n\n\t\t\t\tparamKey = type + \"Params\";\n\t\t\t\tparams = typeof column.modules.columnCalcs[paramKey] === \"function\" ? column.modules.columnCalcs[paramKey](values, data) : column.modules.columnCalcs[paramKey];\n\n\t\t\t\tcolumn.setFieldValue(rowData, column.modules.columnCalcs[type](values, data, params));\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\thasTopCalcs(){\n\t\treturn\t!!(this.topCalcs.length);\n\t}\n\n\thasBottomCalcs(){\n\t\treturn\t!!(this.botCalcs.length);\n\t}\n\n\t//handle table redraw\n\tredraw(){\n\t\tif(this.topRow){\n\t\t\tthis.topRow.normalizeHeight(true);\n\t\t}\n\t\tif(this.botRow){\n\t\t\tthis.botRow.normalizeHeight(true);\n\t\t}\n\t}\n\n\t//return the calculated\n\tgetResults(){\n\t\tvar results = {},\n\t\tgroups;\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tgroups = this.table.modules.groupRows.getGroups(true);\n\n\t\t\tgroups.forEach((group) => {\n\t\t\t\tresults[group.getKey()] = this.getGroupResults(group);\n\t\t\t});\n\t\t}else{\n\t\t\tresults = {\n\t\t\t\ttop: this.topRow ? this.topRow.getData() : {},\n\t\t\t\tbottom: this.botRow ? this.botRow.getData() : {},\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\t//get results from a group\n\tgetGroupResults(group){\n\t\tvar groupObj = group._getSelf(),\n\t\tsubGroups = group.getSubGroups(),\n\t\tsubGroupResults = {},\n\t\tresults = {};\n\n\t\tsubGroups.forEach((subgroup) => {\n\t\t\tsubGroupResults[subgroup.getKey()] = this.getGroupResults(subgroup);\n\t\t});\n\n\t\tresults = {\n\t\t\ttop: groupObj.calcs.top ? groupObj.calcs.top.getData() : {},\n\t\t\tbottom: groupObj.calcs.bottom ? groupObj.calcs.bottom.getData() : {},\n\t\t\tgroups: subGroupResults,\n\t\t}\n\n\t\treturn results;\n\t}\n}\n\nColumnCalcs.moduleName = \"columnCalcs\";\n\n//load defaults\nColumnCalcs.calculations = defaultCalculations;\n\nexport default ColumnCalcs;","import Module from '../../core/Module.js';\n\nimport Row from '../../core/row/Row.js';\n\nclass DataTree extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.indent = 10;\n\t\tthis.field = \"\";\n\t\tthis.collapseEl = null;\n\t\tthis.expandEl = null;\n\t\tthis.branchEl = null;\n\t\tthis.elementField = false;\n\n\t\tthis.startOpen = function(){};\n\n\t\tthis.displayIndex = 0;\n\n\t\tthis.registerTableOption(\"dataTree\", false); //enable data tree\n\t\tthis.registerTableOption(\"dataTreeFilter\", true); //filter child rows\n\t\tthis.registerTableOption(\"dataTreeSort\", true); //sort child rows\n\t\tthis.registerTableOption(\"dataTreeElementColumn\", false);\n\t\tthis.registerTableOption(\"dataTreeBranchElement\", true);//show data tree branch element\n\t\tthis.registerTableOption(\"dataTreeChildIndent\", 9); //data tree child indent in px\n\t\tthis.registerTableOption(\"dataTreeChildField\", \"_children\");//data tre column field to look for child rows\n\t\tthis.registerTableOption(\"dataTreeCollapseElement\", false);//data tree row collapse element\n\t\tthis.registerTableOption(\"dataTreeExpandElement\", false);//data tree row expand element\n\t\tthis.registerTableOption(\"dataTreeStartExpanded\", false);\n\t\tthis.registerTableOption(\"dataTreeChildColumnCalcs\", false);//include visible data tree rows in column calculations\n\t\tthis.registerTableOption(\"dataTreeSelectPropagate\", false);//seleccting a parent row selects its children\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"treeCollapse\", this.collapseRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeExpand\", this.expandRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"treeToggle\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeParent\", this.getTreeParent.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"getTreeChildren\", this.getRowChildren.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"addTreeChild\", this.addTreeChildRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isTreeExpanded\", this.isRowExpanded.bind(this));\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.dataTree){\n\t\t\tvar dummyEl = null,\n\t\t\toptions = this.table.options;\n\n\t\t\tthis.field = options.dataTreeChildField;\n\t\t\tthis.indent = options.dataTreeChildIndent;\n\n\t\t\tif(options.dataTreeBranchElement){\n\n\t\t\t\tif(options.dataTreeBranchElement === true){\n\t\t\t\t\tthis.branchEl = document.createElement(\"div\");\n\t\t\t\t\tthis.branchEl.classList.add(\"tabulator-data-tree-branch\");\n\t\t\t\t}else{\n\t\t\t\t\tif(typeof options.dataTreeBranchElement === \"string\"){\n\t\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\t\tdummyEl.innerHTML = options.dataTreeBranchElement;\n\t\t\t\t\t\tthis.branchEl = dummyEl.firstChild;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.branchEl = options.dataTreeBranchElement;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(options.dataTreeCollapseElement){\n\t\t\t\tif(typeof options.dataTreeCollapseElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeCollapseElement;\n\t\t\t\t\tthis.collapseEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.collapseEl = options.dataTreeCollapseElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.collapseEl = document.createElement(\"div\");\n\t\t\t\tthis.collapseEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.collapseEl.tabIndex = 0;\n\t\t\t\tthis.collapseEl.innerHTML = \"<div class='tabulator-data-tree-control-collapse'></div>\";\n\t\t\t}\n\n\t\t\tif(options.dataTreeExpandElement){\n\t\t\t\tif(typeof options.dataTreeExpandElement === \"string\"){\n\t\t\t\t\tdummyEl = document.createElement(\"div\");\n\t\t\t\t\tdummyEl.innerHTML = options.dataTreeExpandElement;\n\t\t\t\t\tthis.expandEl = dummyEl.firstChild;\n\t\t\t\t}else{\n\t\t\t\t\tthis.expandEl = options.dataTreeExpandElement;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.expandEl = document.createElement(\"div\");\n\t\t\t\tthis.expandEl.classList.add(\"tabulator-data-tree-control\");\n\t\t\t\tthis.expandEl.tabIndex = 0;\n\t\t\t\tthis.expandEl.innerHTML = \"<div class='tabulator-data-tree-control-expand'></div>\";\n\t\t\t}\n\n\n\t\t\tswitch(typeof options.dataTreeStartExpanded){\n\t\t\t\tcase \"boolean\":\n\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\treturn options.dataTreeStartExpanded;\n\t\t\t\t};\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\tthis.startOpen = options.dataTreeStartExpanded;\n\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\tthis.startOpen = function(row, index){\n\t\t\t\t\treturn options.dataTreeStartExpanded[index];\n\t\t\t\t};\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowDelete.bind(this),0);\n\t\t\tthis.subscribe(\"row-data-changed\", this.rowDataChanged.bind(this), 10);\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"edit-cancelled\", this.cellValueChanged.bind(this));\n\t\t\tthis.subscribe(\"column-moving-rows\", this.columnMoving.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.initializeElementField.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 30);\n\t\t}\n\t}\n\n\tinitializeElementField(){\n\t\tvar firstCol = this.table.columnManager.getFirstVisibleColumn();\n\n\t\tthis.elementField = this.table.options.dataTreeElementColumn || (firstCol ? firstCol.field : false);\n\t}\n\t\n\tgetRowChildren(row){\n\t\treturn this.getTreeChildren(row, true);\n\t}\n\n\tcolumnMoving(){\n\t\tvar rows = [];\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trows = rows.concat(this.getTreeChildren(row, false, true));\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\trowDataChanged(row, visible, updatedData){\n\t\tif(this.redrawNeeded(updatedData)){\n\t\t\tthis.initializeRow(row);\n\n\t\t\tif(visible){\n\t\t\t\tthis.layoutRow(row);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tcellValueChanged(cell){\n\t\tvar field = cell.column.getField();\n\n\t\tif(field === this.elementField){\n\t\t\tthis.layoutRow(cell.row);\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar childArray = row.getData()[this.field];\n\t\tvar isArray = Array.isArray(childArray);\n\n\t\tvar children = isArray || (!isArray && typeof childArray === \"object\" && childArray !== null);\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.branchEl){\n\t\t\trow.modules.dataTree.branchEl.parentNode.removeChild(row.modules.dataTree.branchEl);\n\t\t}\n\n\t\tif(!children && row.modules.dataTree && row.modules.dataTree.controlEl){\n\t\t\trow.modules.dataTree.controlEl.parentNode.removeChild(row.modules.dataTree.controlEl);\n\t\t}\n\n\t\trow.modules.dataTree = {\n\t\t\tindex: row.modules.dataTree ? row.modules.dataTree.index : 0,\n\t\t\topen: children ? (row.modules.dataTree ? row.modules.dataTree.open : this.startOpen(row.getComponent(), 0)) : false,\n\t\t\tcontrolEl: row.modules.dataTree && children ? row.modules.dataTree.controlEl : false,\n\t\t\tbranchEl: row.modules.dataTree && children ? row.modules.dataTree.branchEl : false,\n\t\t\tparent: row.modules.dataTree ? row.modules.dataTree.parent : false,\n\t\t\tchildren:children,\n\t\t};\n\t}\n\n\treinitializeRowChildren(row){\n\t\tvar children = this.getTreeChildren(row, false, true);\n\n\t\tchildren.forEach(function(child){\n\t\t\tchild.reinitialize(true);\n\t\t});\n\t}\n\n\tlayoutRow(row){\n\t\tvar cell = this.elementField ? row.getCell(this.elementField) : row.getCells()[0],\n\t\tel = cell.getElement(),\n\t\tconfig = row.modules.dataTree;\n\n\t\tif(config.branchEl){\n\t\t\tif(config.branchEl.parentNode){\n\t\t\t\tconfig.branchEl.parentNode.removeChild(config.branchEl);\n\t\t\t}\n\t\t\tconfig.branchEl = false;\n\t\t}\n\n\t\tif(config.controlEl){\n\t\t\tif(config.controlEl.parentNode){\n\t\t\t\tconfig.controlEl.parentNode.removeChild(config.controlEl);\n\t\t\t}\n\t\t\tconfig.controlEl = false;\n\t\t}\n\n\t\tthis.generateControlElement(row, el);\n\n\t\trow.getElement().classList.add(\"tabulator-tree-level-\" + config.index);\n\n\t\tif(config.index){\n\t\t\tif(this.branchEl){\n\t\t\t\tconfig.branchEl = this.branchEl.cloneNode(true);\n\t\t\t\tel.insertBefore(config.branchEl, el.firstChild);\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tconfig.branchEl.style.marginRight = (((config.branchEl.offsetWidth + config.branchEl.style.marginLeft) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tconfig.branchEl.style.marginLeft = (((config.branchEl.offsetWidth + config.branchEl.style.marginRight) * (config.index - 1)) + (config.index * this.indent)) + \"px\";\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(this.table.rtl){\n\t\t\t\t\tel.style.paddingRight = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-right')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}else{\n\t\t\t\t\tel.style.paddingLeft = parseInt(window.getComputedStyle(el, null).getPropertyValue('padding-left')) + (config.index * this.indent) + \"px\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateControlElement(row, el){\n\t\tvar config = row.modules.dataTree,\n\t\tel = el || row.getCells()[0].getElement(),\n\t\toldControl = config.controlEl;\n\n\t\tif(config.children !== false){\n\n\t\t\tif(config.open){\n\t\t\t\tconfig.controlEl = this.collapseEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.collapseRow(row);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconfig.controlEl = this.expandEl.cloneNode(true);\n\t\t\t\tconfig.controlEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\tthis.expandRow(row);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconfig.controlEl.addEventListener(\"mousedown\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\n\t\t\tif(oldControl && oldControl.parentNode === el){\n\t\t\t\toldControl.parentNode.replaceChild(config.controlEl,oldControl);\n\t\t\t}else{\n\t\t\t\tel.insertBefore(config.controlEl, el.firstChild);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetDisplayIndex (index) {\n\t\tthis.displayIndex = index;\n\t}\n\n\tgetDisplayIndex () {\n\t\treturn this.displayIndex;\n\t}\n\n\tgetRows(rows){\n\t\tvar output = [];\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar config, children;\n\n\t\t\toutput.push(row);\n\n\t\t\tif(row instanceof Row){\n\n\t\t\t\trow.create();\n\n\t\t\t\tconfig = row.modules.dataTree.children;\n\n\t\t\t\tif(!config.index && config.children !== false){\n\t\t\t\t\tchildren = this.getChildren(row);\n\n\t\t\t\t\tchildren.forEach((child) => {\n\t\t\t\t\t\tchild.create();\n\t\t\t\t\t\toutput.push(child);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetChildren(row, allChildren){\n\t\tvar config = row.modules.dataTree,\n\t\tchildren = [],\n\t\toutput = [];\n\n\t\tif(config.children !== false && (config.open || allChildren)){\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"sort\") && this.table.options.dataTreeSort){\n\t\t\t\tthis.table.modules.sort.sort(children);\n\t\t\t}\n\n\t\t\tchildren.forEach((child) => {\n\t\t\t\toutput.push(child);\n\n\t\t\t\tvar subChildren = this.getChildren(child);\n\n\t\t\t\tsubChildren.forEach((sub) => {\n\t\t\t\t\toutput.push(sub);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgenerateChildren(row){\n\t\tvar children = [];\n\n\t\tvar childArray = row.getData()[this.field];\n\n\t\tif(!Array.isArray(childArray)){\n\t\t\tchildArray = [childArray];\n\t\t}\n\n\t\tchildArray.forEach((childData) => {\n\t\t\tvar childRow = new Row(childData || {}, this.table.rowManager);\n\n\t\t\tchildRow.create();\n\n\t\t\tchildRow.modules.dataTree.index = row.modules.dataTree.index + 1;\n\t\t\tchildRow.modules.dataTree.parent = row;\n\n\t\t\tif(childRow.modules.dataTree.children){\n\t\t\t\tchildRow.modules.dataTree.open = this.startOpen(childRow.getComponent(), childRow.modules.dataTree.index);\n\t\t\t}\n\t\t\tchildren.push(childRow);\n\t\t});\n\n\t\treturn children;\n\t}\n\n\texpandRow(row, silent){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = true;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowExpanded\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\tcollapseRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tconfig.open = false;\n\n\t\t\trow.reinitialize();\n\n\t\t\tthis.refreshData(true);\n\n\t\t\tthis.dispatchExternal(\"dataTreeRowCollapsed\", row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\t}\n\n\ttoggleRow(row){\n\t\tvar config = row.modules.dataTree;\n\n\t\tif(config.children !== false){\n\t\t\tif(config.open){\n\t\t\t\tthis.collapseRow(row);\n\t\t\t}else{\n\t\t\t\tthis.expandRow(row);\n\t\t\t}\n\t\t}\n\t}\n\n\tisRowExpanded(row){\n\t\treturn row.modules.dataTree.open;\n\t}\n\n\tgetTreeParent(row){\n\t\treturn row.modules.dataTree.parent ? row.modules.dataTree.parent.getComponent() : false;\n\t}\n\n\tgetFilteredTreeChildren(row){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [], children;\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tif(this.table.modExists(\"filter\") && this.table.options.dataTreeFilter){\n\t\t\t\tchildren = this.table.modules.filter.filter(config.children);\n\t\t\t}else{\n\t\t\t\tchildren = config.children;\n\t\t\t}\n\n\t\t\tchildren.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(childRow);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\trowDelete(row){\n\t\tvar parent = row.modules.dataTree.parent,\n\t\tchildIndex;\n\n\t\tif(parent){\n\t\t\tchildIndex = this.findChildIndex(row, parent);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\tparent.data[this.field].splice(childIndex, 1);\n\t\t\t}\n\n\t\t\tif(!parent.data[this.field].length){\n\t\t\t\tdelete parent.data[this.field];\n\t\t\t}\n\n\t\t\tthis.initializeRow(parent);\n\t\t\tthis.layoutRow(parent);\n\t\t}\n\n\t\tthis.refreshData(true);\n\t}\n\n\taddTreeChildRow(row, data, top, index){\n\t\tvar childIndex = false;\n\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(!Array.isArray(row.data[this.field])){\n\t\t\trow.data[this.field] = [];\n\n\t\t\trow.modules.dataTree.open = this.startOpen(row.getComponent(), row.modules.dataTree.index);\n\t\t}\n\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tchildIndex = this.findChildIndex(index, row);\n\n\t\t\tif(childIndex !== false){\n\t\t\t\trow.data[this.field].splice((top ? childIndex : childIndex + 1), 0, data);\n\t\t\t}\n\t\t}\n\n\t\tif(childIndex === false){\n\t\t\tif(top){\n\t\t\t\trow.data[this.field].unshift(data);\n\t\t\t}else{\n\t\t\t\trow.data[this.field].push(data);\n\t\t\t}\n\t\t}\n\n\t\tthis.initializeRow(row);\n\t\tthis.layoutRow(row);\n\n\t\tthis.refreshData(true);\n\t}\n\n\tfindChildIndex(subject, parent){\n\t\tvar match = false;\n\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\tmatch = subject.data;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\tmatch = subject._getSelf().data;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\tif(parent.modules.dataTree){\n\t\t\t\t\tmatch = parent.modules.dataTree.children.find((childRow) => {\n\t\t\t\t\t\treturn childRow instanceof Row ? childRow.element === subject : false;\n\t\t\t\t\t});\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tmatch = match.data;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\n\t\t\tmatch = false\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tmatch = parent.data[this.field].find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t}\n\n\t\tif(match){\n\n\t\t\tif(Array.isArray(parent.data[this.field])){\n\t\t\t\tmatch = parent.data[this.field].indexOf(match);\n\t\t\t}\n\n\t\t\tif(match == -1){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\t//catch all for any other type of input\n\n\t\treturn match;\n\t}\n\n\tgetTreeChildren(row, component, recurse){\n\t\tvar config = row.modules.dataTree,\n\t\toutput = [];\n\n\t\tif(config.children){\n\n\t\t\tif(!Array.isArray(config.children)){\n\t\t\t\tconfig.children = this.generateChildren(row);\n\t\t\t}\n\n\t\t\tconfig.children.forEach((childRow) => {\n\t\t\t\tif(childRow instanceof Row){\n\t\t\t\t\toutput.push(component ? childRow.getComponent() : childRow);\n\n\t\t\t\t\tif(recurse){\n\t\t\t\t\t\toutput = output.concat(this.getTreeChildren(childRow, component, recurse));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tgetChildField(){\n\t\treturn this.field;\n\t}\n\n\tredrawNeeded(data){\n\t\treturn (this.field ? typeof data[this.field] !== \"undefined\" : false) || (this.elementField ? typeof data[this.elementField] !== \"undefined\" : false);\n\t}\n}\n\nDataTree.moduleName = \"dataTree\";\n\nexport default DataTree;","import csv from './downloaders/csv.js';\nimport json from './downloaders/json.js';\nimport pdf from './downloaders/pdf.js';\nimport xlsx from './downloaders/xlsx.js';\nimport html from './downloaders/html.js';\nimport jsonLines from './downloaders/jsonLines.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n\tjsonLines:jsonLines,\n\tpdf:pdf,\n\txlsx:xlsx,\n\thtml:html,\n};","export default function(list, options, setFileContents){\n\tvar delimiter = options && options.delimiter ? options.delimiter : \",\",\n\tfileContents = [],\n\theaders = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = [];\n\n\t\tswitch(row.type){\n\t\t\tcase \"group\":\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process row groups\");\n\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\tconsole.warn(\"Download Warning - CSV downloader cannot process column calculations\");\n\t\t\tbreak;\n\n\t\t\tcase \"header\":\n\t\t\trow.columns.forEach((col, i) => {\n\t\t\t\tif(col && col.depth === 1){\n\t\t\t\t\theaders[i] = typeof col.value == \"undefined\"  || col.value === null ? \"\" : ('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\trow.columns.forEach((col) => {\n\n\t\t\t\tif(col){\n\n\t\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\titem.push('\"' + String(col.value).split('\"').join('\"\"') + '\"');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfileContents.push(item.join(delimiter));\n\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(headers.length){\n\t\tfileContents.unshift(headers.join(delimiter));\n\t}\n\n\tfileContents = fileContents.join(\"\\n\");\n\n\tif(options.bom){\n\t\tfileContents = \"\\ufeff\" + fileContents;\n\t}\n\n\tsetFileContents(fileContents, \"text/csv\");\n};","export default function(list, options, setFileContents){\n\tvar fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\trow.columns.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfileContents.push(item);\n\t\t\tbreak;\n\t\t}\n\t});\n\n\tfileContents = JSON.stringify(fileContents, null, '\\t');\n\n\tsetFileContents(fileContents, \"application/json\");\n};","export default function (list, options, setFileContents) {\n\tconst fileContents = [];\n\n\tlist.forEach((row) => {\n\t\tconst item = {};\n\n\t\tswitch (row.type) {\n\t\t\tcase \"header\":\n\t\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process row groups\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\t\tconsole.warn(\"Download Warning - JSON downloader cannot process column calculations\");\n\t\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\t\trow.columns.forEach((col) => {\n\t\t\t\t\tif (col) {\n\t\t\t\t\t\titem[col.component.getTitleDownload() || col.component.getField()] = col.value;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tfileContents.push(JSON.stringify(item));\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tsetFileContents(fileContents.join(\"\\n\"), \"application/x-ndjson\");\n};","export default function(list, options, setFileContents){\n\tvar header = [],\n\tbody = [],\n\tautoTableParams = {},\n\trowGroupStyles = options.rowGroupStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 12,\n\t\tcellPadding: 6,\n\t\tfillColor: 220,\n\t},\n\trowCalcStyles = options.rowCalcStyles || {\n\t\tfontStyle: \"bold\",\n\t\tfontSize: 10,\n\t\tcellPadding: 4,\n\t\tfillColor: 232,\n\t},\n\tjsPDFParams = options.jsPDF || {},\n\ttitle = options && options.title ? options.title : \"\";\n\n\tif(!jsPDFParams.orientation){\n\t\tjsPDFParams.orientation = options.orientation || \"landscape\";\n\t}\n\n\tif(!jsPDFParams.unit){\n\t\tjsPDFParams.unit = \"pt\";\n\t}\n\n\t//parse row list\n\tlist.forEach((row) => {\n\t\tvar item = {};\n\n\t\tswitch(row.type){\n\t\t\tcase \"header\":\n\t\t\theader.push(parseRow(row));\n\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\tbody.push(parseRow(row, rowGroupStyles));\n\t\t\tbreak;\n\n\t\t\tcase \"calc\":\n\t\t\tbody.push(parseRow(row, rowCalcStyles));\n\t\t\tbreak;\n\n\t\t\tcase \"row\":\n\t\t\tbody.push(parseRow(row));\n\t\t\tbreak;\n\t\t}\n\t});\n\n\tfunction parseRow(row, styles){\n\t\tvar rowData = [];\n\n\t\trow.columns.forEach((col) =>{\n\t\t\tvar cell;\n\n\t\t\tif(col){\n\t\t\t\tswitch(typeof col.value){\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\tcol.value = JSON.stringify(col.value);\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\tcase \"null\":\n\t\t\t\t\tcol.value = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcell = {\n\t\t\t\t\tcontent:col.value,\n\t\t\t\t\tcolSpan:col.width,\n\t\t\t\t\trowSpan:col.height,\n\t\t\t\t};\n\n\t\t\t\tif(styles){\n\t\t\t\t\tcell.styles = styles;\n\t\t\t\t}\n\n\t\t\t\trowData.push(cell);\n\t\t\t}\n\t\t});\n\n\t\treturn rowData;\n\t}\n\n\n\t//configure PDF\n\tvar doc = new jspdf.jsPDF(jsPDFParams); //set document to landscape, better for most tables\n\n\tif(options && options.autoTable){\n\t\tif(typeof options.autoTable === \"function\"){\n\t\t\tautoTableParams = options.autoTable(doc) || {};\n\t\t}else{\n\t\t\tautoTableParams = options.autoTable;\n\t\t}\n\t}\n\n\tif(title){\n\t\tautoTableParams.didDrawPage = function(data) {\n\t\t\tdoc.text(title, 40, 30);\n\t\t};\n\t}\n\n\tautoTableParams.head = header;\n\tautoTableParams.body = body;\n\n\tdoc.autoTable(autoTableParams);\n\n\tif(options && options.documentProcessing){\n\t\toptions.documentProcessing(doc);\n\t}\n\n\tsetFileContents(doc.output(\"arraybuffer\"), \"application/pdf\");\n};","import CoreFeature from '../../../../core/CoreFeature.js';\n\nexport default function(list, options, setFileContents){\n\tvar self = this,\n\tsheetName = options.sheetName || \"Sheet1\",\n\tworkbook = XLSX.utils.book_new(),\n\ttableFeatures = new CoreFeature(this),\n\toutput;\n\n\tworkbook.SheetNames = [];\n\tworkbook.Sheets = {};\n\n\tfunction generateSheet(){\n\t\tvar rows = [],\n\t\tmerges = [],\n\t\tworksheet = {},\n\t\trange = {s: {c:0, r:0}, e: {c:(list[0] ? list[0].columns.reduce((a, b) => a + (b && b.width ? b.width : 1), 0) : 0), r:list.length }};\n\n\t\t//parse row list\n\t\tlist.forEach((row, i) => {\n\t\t\tvar rowData = [];\n\n\t\t\trow.columns.forEach(function(col, j){\n\n\t\t\t\tif(col){\n\t\t\t\t\trowData.push(!(col.value instanceof Date) && typeof col.value === \"object\" ? JSON.stringify(col.value) : col.value);\n\n\t\t\t\t\tif(col.width > 1 || col.height > -1){\n\t\t\t\t\t\tif(col.height > 1 || col.width > 1){\n\t\t\t\t\t\t\tmerges.push({s:{r:i,c:j},e:{r:i + col.height - 1,c:j + col.width - 1}});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\trowData.push(\"\");\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trows.push(rowData);\n\t\t});\n\n\t\t//convert rows to worksheet\n\t\tXLSX.utils.sheet_add_aoa(worksheet, rows);\n\n\t\tworksheet['!ref'] = XLSX.utils.encode_range(range);\n\n\t\tif(merges.length){\n\t\t\tworksheet[\"!merges\"] = merges;\n\t\t}\n\n\t\treturn worksheet;\n\t}\n\n\tif(options.sheetOnly){\n\t\tsetFileContents(generateSheet());\n\t\treturn;\n\t}\n\n\tif(options.sheets){\n\t\tfor(var sheet in options.sheets){\n\n\t\t\tif(options.sheets[sheet] === true){\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\t\t\t\tworkbook.Sheets[sheet] = generateSheet();\n\t\t\t}else{\n\n\t\t\t\tworkbook.SheetNames.push(sheet);\n\n\t\t\t\ttableFeatures.commsSend(options.sheets[sheet], \"download\", \"intercept\",{\n\t\t\t\t\ttype:\"xlsx\",\n\t\t\t\t\toptions:{sheetOnly:true},\n\t\t\t\t\tactive:self.active,\n\t\t\t\t\tintercept:function(data){\n\t\t\t\t\t\tworkbook.Sheets[sheet] = data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}else{\n\t\tworkbook.SheetNames.push(sheetName);\n\t\tworkbook.Sheets[sheetName] = generateSheet();\n\t}\n\n\tif(options.documentProcessing){\n\t\tworkbook = options.documentProcessing(workbook);\n\t}\n\n\t//convert workbook to binary array\n\tfunction s2ab(s) {\n\t\tvar buf = new ArrayBuffer(s.length);\n\t\tvar view = new Uint8Array(buf);\n\t\tfor (var i=0; i!=s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\n\t\t\treturn buf;\n\t}\n\n\toutput = XLSX.write(workbook, {bookType:'xlsx', bookSST:true, type: 'binary'});\n\n\tsetFileContents(s2ab(output), \"application/octet-stream\");\n};","export default function(list, options, setFileContents){\n\tif(this.modExists(\"export\", true)){\n\t\tsetFileContents(this.modules.export.genereateHTMLTable(list), \"text/html\");\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultDownloaders from './defaults/downloaders.js';\n\nclass Download extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerTableOption(\"downloadReady\", function(data, blob){return blob;}); //function to manipulate download data\n\t\tthis.registerTableOption(\"downloadConfig\", {}); //download config\n\t\tthis.registerTableOption(\"downloadRowRange\", \"active\"); //restrict download to active rows only\n\n\t\tthis.registerColumnOption(\"download\");\n\t\tthis.registerColumnOption(\"titleDownload\");\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"download\", this.download.bind(this));\n\t\tthis.registerTableFunction(\"downloadToTab\", this.downloadToTab.bind(this));\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tdownloadToTab(type, filename, options, active){\n\t\tthis.download(type, filename, options, active, true);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//trigger file download\n\tdownload(type, filename, options, range, interceptCallback){\n\t\tvar downloadFunc = false;\n\n\t\tfunction buildLink(data, mime){\n\t\t\tif(interceptCallback){\n\t\t\t\tif(interceptCallback === true){\n\t\t\t\t\tthis.triggerDownload(data, mime, type, filename, true);\n\t\t\t\t}else{\n\t\t\t\t\tinterceptCallback(data);\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tthis.triggerDownload(data, mime, type, filename);\n\t\t\t}\n\t\t}\n\n\t\tif(typeof type == \"function\"){\n\t\t\tdownloadFunc = type;\n\t\t}else{\n\t\t\tif(Download.downloaders[type]){\n\t\t\t\tdownloadFunc = Download.downloaders[type];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Download Error - No such download type found: \", type);\n\t\t\t}\n\t\t}\n\n\t\tif(downloadFunc){\n\t\t\tvar list = this.generateExportList(range);\n\n\t\t\tdownloadFunc.call(this.table, list , options || {}, buildLink.bind(this));\n\t\t}\n\t}\n\n\tgenerateExportList(range){\n\t\tvar list = this.table.modules.export.generateExportList(this.table.options.downloadConfig, false, range || this.table.options.downloadRowRange, \"download\");\n\n\t\t//assign group header formatter\n\t\tvar groupHeader = this.table.options.groupHeaderDownload;\n\n\t\tif(groupHeader && !Array.isArray(groupHeader)){\n\t\t\tgroupHeader = [groupHeader];\n\t\t}\n\n\t\tlist.forEach((row) => {\n\t\t\tvar group;\n\n\t\t\tif(row.type === \"group\"){\n\t\t\t\tgroup = row.columns[0];\n\n\t\t\t\tif(groupHeader && groupHeader[row.indent]){\n\t\t\t\t\tgroup.value = groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn list;\n\t}\n\n\ttriggerDownload(data, mime, type, filename, newTab){\n\t\tvar element = document.createElement('a'),\n\t\tblob = new Blob([data],{type:mime}),\n\t\tfilename = filename || \"Tabulator.\" + (typeof type === \"function\" ? \"txt\" : type);\n\n\t\tblob = this.table.options.downloadReady(data, blob);\n\n\t\tif(blob){\n\n\t\t\tif(newTab){\n\t\t\t\twindow.open(window.URL.createObjectURL(blob));\n\t\t\t}else{\n\t\t\t\tif(navigator.msSaveOrOpenBlob){\n\t\t\t\t\tnavigator.msSaveOrOpenBlob(blob, filename);\n\t\t\t\t}else{\n\t\t\t\t\telement.setAttribute('href', window.URL.createObjectURL(blob));\n\n\t\t\t\t\t//set file title\n\t\t\t\t\telement.setAttribute('download', filename);\n\n\t\t\t\t\t//trigger download\n\t\t\t\t\telement.style.display = 'none';\n\t\t\t\t\tdocument.body.appendChild(element);\n\t\t\t\t\telement.click();\n\n\t\t\t\t\t//remove temporary link element\n\t\t\t\t\tdocument.body.removeChild(element);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"downloadComplete\");\n\t\t}\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"intercept\":\n\t\t\tthis.download(data.type, \"\", data.options, data.active, data.intercept);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nDownload.moduleName = \"download\";\n\n//load defaults\nDownload.downloaders = defaultDownloaders;\n\nexport default Download;","export default function maskInput(el, options){\n\tvar mask = options.mask,\n\tmaskLetter = typeof options.maskLetterChar !== \"undefined\" ? options.maskLetterChar : \"A\",\n\tmaskNumber = typeof options.maskNumberChar !== \"undefined\" ? options.maskNumberChar : \"9\",\n\tmaskWildcard = typeof options.maskWildcardChar !== \"undefined\" ? options.maskWildcardChar : \"*\",\n\tsuccess = false;\n\n\tfunction fillSymbols(index){\n\t\tvar symbol = mask[index];\n\t\tif(typeof symbol !== \"undefined\" && symbol !== maskWildcard && symbol !== maskLetter && symbol !== maskNumber){\n\t\t\tel.value = el.value + \"\" + symbol;\n\t\t\tfillSymbols(index+1);\n\t\t}\n\t}\n\n\tel.addEventListener(\"keydown\", (e) => {\n\t\tvar index = el.value.length,\n\t\tchar = e.key;\n\n\t\tif(e.keyCode > 46){\n\t\t\tif(index >= mask.length){\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tsuccess = false;\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\tswitch(mask[index]){\n\t\t\t\t\tcase maskLetter:\n\t\t\t\t\tif(char.toUpperCase() == char.toLowerCase()){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskNumber:\n\t\t\t\t\tif(isNaN(char)){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase maskWildcard:\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\tif(char !== mask[index]){\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\tsuccess = false;\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tsuccess = true;\n\t\t}\n\n\t\treturn;\n\t});\n\n\tel.addEventListener(\"keyup\", (e) => {\n\t\tif(e.keyCode > 46){\n\t\t\tif(options.maskAutoFill){\n\t\t\t\tfillSymbols(el.value.length);\n\t\t\t}\n\t\t}\n\t});\n\n\n\tif(!el.placeholder){\n\t\tel.placeholder = mask;\n\t}\n\n\tif(options.maskAutoFill){\n\t\tfillSymbols(el.value.length);\n\t}\n}","import maskInput from './inputMask.js';\nimport urlBuilder from '../Ajax/defaults/urlGenerator.js';\n\nexport default class Edit{\n    constructor(editor, cell, onRendered, success, cancel, editorParams){\n        this.edit = editor;\n        this.table = editor.table;\n        this.cell = cell;\n        this.params = this._initializeParams(editorParams);\n        \n        this.data = [];\n        this.displayItems = [];\n        this.currentItems = [];\n        this.focusedItem = null;\n        \n        this.input = this._createInputElement();\n        this.listEl = this._createListElement();\n        \n        this.initialValues = null; \n        \n        this.isFilter = !cell._getSelf;\n        \n        this.filterTimeout = null;\n        this.filtered = false;\n        this.typing = false;\n        \n        this.values = []; \n        this.popup = null;  \n        \n        this.listIteration = 0;\n        \n        this.blurable = true;\n        \n        this.actions = {\n            success:success,\n            cancel:cancel\n        }\n        \n        this._deprecationCheck();\n        this._initializeValue();\n        \n        onRendered(this._onRendered.bind(this));\n    }\n    \n    _deprecationCheck(){\n        if(this.params.listItemFormatter){\n            console.warn(\"The listItemFormatter editor param has been deprecated, please see the latest editor documentation for updated options\");\n        }\n        \n        if(this.params.sortValuesList){\n            console.warn(\"The sortValuesList editor param has been deprecated, please see the latest editor documentation for updated options\");\n        }\n        \n        if(this.params.searchFunc){\n            console.warn(\"The searchFunc editor param has been deprecated, please see the latest editor documentation for updated options\");\n        }\n        \n        if(this.params.searchingPlaceholder){\n            console.warn(\"The searchingPlaceholder editor param has been deprecated, please see the latest editor documentation for updated options\");\n        }\n    }\n    \n    _initializeValue(){\n        var initialValue = this.cell.getValue();\n        \n        if(typeof initialValue === \"undefined\" && typeof this.params.defaultValue !== \"undefined\"){\n            initialValue = this.params.defaultValue;\n        }\n        \n        this.initialValues = this.params.multiselect ? initialValue : [initialValue];\n        \n        if(this.isFilter){\n            this.input.value = this.initialValues.join(\",\");\n            this.headerFilterInitialListGen();            \n        }\n    }\n    \n    _onRendered(){\n        var cellEl = this.cell.getElement();\n        \n        function clickStop(e){\n            e.stopPropagation();\n        }\n        \n        this.input.style.height = \"100%\";\n        this.input.focus({preventScroll: true});\n        \n        \n        cellEl.addEventListener(\"click\", clickStop);\n        \n        setTimeout(() => {\n            cellEl.removeEventListener(\"click\", clickStop);\n        }, 1000)\n    }\n    \n    _createListElement(){\n        var listEl = document.createElement(\"div\");\n        listEl.classList.add(\"tabulator-edit-list\");\n        \n        listEl.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n        listEl.addEventListener(\"keydown\", this._inputKeyDown.bind(this))\n        \n        return listEl;\n    }\n    \n    _setListWidth(){\n        var element = this.isFilter ? this.input : this.cell.getElement();\n        \n        this.listEl.style.minWidth = element.offsetWidth + \"px\";\n        \n        if(this.params.maxWidth){\n            if(this.params.maxWidth === true){\n                this.listEl.style.maxWidth = element.offsetWidth + \"px\";\n            }else if(typeof this.params.maxWidth === \"number\"){\n                this.listEl.style.maxWidth = this.params.maxWidth + \"px\";\n            }else{\n                this.listEl.style.maxWidth = this.params.maxWidth;\n            }\n        }\n        \n    }\n    \n    _createInputElement(){\n        var attribs = this.params.elementAttributes;\n        var input = document.createElement(\"input\");\n        \n        input.setAttribute(\"type\", this.params.clearable ? \"search\" : \"text\");\n        \n        input.style.padding = \"4px\";\n        input.style.width = \"100%\";\n        input.style.boxSizing = \"border-box\";\n        \n        if(!this.params.autocomplete){\n            input.style.cursor = \"default\";\n            input.style.caretColor = \"transparent\";\n            // input.readOnly = (this.edit.currentCell != false);\n        }\n        \n        if(attribs && typeof attribs == \"object\"){\n            for (let key in attribs){\n                if(key.charAt(0) == \"+\"){\n                    key = key.slice(1);\n                    input.setAttribute(key, input.getAttribute(key) + attribs[\"+\" + key]);\n                }else{\n                    input.setAttribute(key, attribs[key]);\n                }\n            }\n        }\n        \n        if(this.params.mask){\n            maskInput(input, this.params);\n        }\n        \n        this._bindInputEvents(input);\n        \n        return input;\n    }\n    \n    _initializeParams(params){\n        var valueKeys = [\"values\", \"valuesURL\", \"valuesLookup\"],\n        valueCheck;\n\n        params = Object.assign({}, params);\n        \n        params.verticalNavigation = params.verticalNavigation || \"editor\";\n        params.placeholderLoading = typeof params.placeholderLoading === \"undefined\" ? \"Searching ...\" : params.placeholderLoading;\n        params.placeholderEmpty = typeof params.placeholderEmpty === \"undefined\" ? \"No Results Found\" : params.placeholderEmpty;\n        params.filterDelay = typeof params.filterDelay === \"undefined\" ? 300 : params.filterDelay;\n        \n        params.emptyValue = Object.keys(params).includes(\"emptyValue\") ? params.emptyValue : \"\";\n\n        valueCheck = Object.keys(params).filter(key => valueKeys.includes(key)).length;\n\n        if(!valueCheck){\n            console.warn(\"list editor config error - either the values, valuesURL, or valuesLookup option must be set\")\n        }else if(valueCheck > 1){\n            console.warn(\"list editor config error - only one of the values, valuesURL, or valuesLookup options can be set on the same editor\")\n        }\n        \n        if(params.autocomplete){\n            if(params.multiselect){\n                params.multiselect = false;\n                console.warn(\"list editor config error - multiselect option is not available when autocomplete is enabled\")\n            }\n        }else{\n            if(params.freetext){\n                params.freetext = false;\n                console.warn(\"list editor config error - freetext option is only available when autocomplete is enabled\");\n            }\n            \n            if(params.filterFunc){\n                params.filterFunc = false;\n                console.warn(\"list editor config error - filterFunc option is only available when autocomplete is enabled\");\n            }\n            \n            if(params.filterRemote){\n                params.filterRemote = false;\n                console.warn(\"list editor config error - filterRemote option is only available when autocomplete is enabled\");\n            }\n            \n            if(params.mask){\n                params.mask = false;\n                console.warn(\"list editor config error - mask option is only available when autocomplete is enabled\");\n            }\n            \n            if(params.allowEmpty){\n                params.allowEmpty = false;\n                console.warn(\"list editor config error - allowEmpty option is only available when autocomplete is enabled\");\n            }\n            \n            if(params.listOnEmpty){\n                params.listOnEmpty = false;\n                console.warn(\"list editor config error - listOnEmpty option is only available when autocomplete is enabled\");\n            }\n        }\n        \n        if(params.filterRemote && !(typeof params.valuesLookup === \"function\" || typeof params.valuesURL)){\n            params.filterRemote = false;\n            console.warn(\"list editor config error - filterRemote option should only be used when values list is populated from a remote source\");\n        }\n        return params;\n    }\n    //////////////////////////////////////\n    ////////// Event Handling ////////////\n    //////////////////////////////////////\n    \n    _bindInputEvents(input){\n        input.addEventListener(\"focus\", this._inputFocus.bind(this))\n        input.addEventListener(\"click\", this._inputClick.bind(this))\n        input.addEventListener(\"blur\", this._inputBlur.bind(this))\n        input.addEventListener(\"keydown\", this._inputKeyDown.bind(this))\n        input.addEventListener(\"search\", this._inputSearch.bind(this))\n        \n        if(this.params.autocomplete){\n            input.addEventListener(\"keyup\", this._inputKeyUp.bind(this))\n        }\n    }\n    \n    \n    _inputFocus(e){\n        this.rebuildOptionsList();\n    }\n    \n    _filter(){\n        if(this.params.filterRemote){\n            clearTimeout(this.filterTimeout);\n            \n            this.filterTimeout = setTimeout(() => {\n                this.rebuildOptionsList();\n            }, this.params.filterDelay);\n        }else{\n            this._filterList();\n        }\n    }\n    \n    _inputClick(e){\n        e.stopPropagation();\n    }\n    \n    _inputBlur(e){\n        if(this.blurable && this.popup){\n            this.popup.hide();\n        }\n    }\n    \n    _inputSearch(){\n        this._clearChoices();\n    }\n    \n    _inputKeyDown(e){\n        switch(e.keyCode){\n            \n            case 38: //up arrow\n            this._keyUp(e);\n            break\n            \n            case 40: //down arrow\n            this._keyDown(e);\n            break;\n            \n            case 37: //left arrow\n            case 39: //right arrow\n            this._keySide(e);\n            break;\n            \n            case 13: //enter\n            this._keyEnter();\n            break;\n            \n            case 27: //escape\n            this._keyEsc();\n            break;\n            \n            case 36: //home\n            case 35: //end\n            this._keyHomeEnd(e);\n            break;\n            \n            case 9: //tab\n            break;\n            \n            default:\n            this._keySelectLetter(e);\n        }\n    }\n    \n    _inputKeyUp(e){\n        switch(e.keyCode){\n            case 38: //up arrow\n            case 37: //left arrow\n            case 39: //up arrow\n            case 40: //right arrow\n            case 13: //enter\n            case 27: //escape\n            break;\n            \n            default:\n            this._keyAutoCompLetter(e);\n        }\n    }\n    \n    _preventBlur(){\n        this.blurable = false;\n        \n        setTimeout(function(){\n            this.blurable = true;\n        }, 10);\n    }\n    \n    //////////////////////////////////////\n    //////// Keyboard Navigation /////////\n    //////////////////////////////////////\n    \n    _keyUp(e){\n        var index = this.displayItems.indexOf(this.focusedItem);\n        \n        if(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index)){\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n            \n            if(index > 0){\n                this._focusItem(this.displayItems[index - 1]);\n            }\n        }\n    }\n    \n    _keyDown(e){\n        var index = this.displayItems.indexOf(this.focusedItem);\n        \n        if(this.params.verticalNavigation == \"editor\" || (this.params.verticalNavigation == \"hybrid\" && index < this.displayItems.length - 1)){\n            e.stopImmediatePropagation();\n            e.stopPropagation();\n            e.preventDefault();\n            \n            if(index < this.displayItems.length - 1){\n                if(index == -1){\n                    this._focusItem(this.displayItems[0]);\n                }else{\n                    this._focusItem(this.displayItems[index + 1]);\n                }\n            }\n        }\n    }\n    \n    _keySide(e){\n        e.stopImmediatePropagation();\n        e.stopPropagation();\n        e.preventDefault();\n    }\n    \n    _keyEnter(e){\n        if(this.focusedItem){\n            this._chooseItem(this.focusedItem);\n        }else{\n            this._cancel();\n        }\n    }\n    \n    _keyEsc(e){\n        this._cancel();\n    }\n    \n    _keyHomeEnd(e){\n        if(this.params.autocomplete){\n            //prevent table navigation while using input element\n            e.stopImmediatePropagation();\n        }\n    }\n    \n    _keySelectLetter(e){\n        if(!this.params.autocomplete){\n            // if(this.edit.currentCell === false){\n            e.preventDefault();\n            // }\n            \n            if(e.keyCode >= 38 && e.keyCode <= 90){\n                this._scrollToValue(e.keyCode);\n            }\n        }\n    }\n    \n    _keyAutoCompLetter(e){\n        this._filter();\n        this.typing = true;\n    }\n    \n    \n    _scrollToValue(char){\n        clearTimeout(this.filterTimeout);\n        \n        var character = String.fromCharCode(char).toLowerCase();\n        this.filterTerm += character.toLowerCase();\n        \n        var match = this.displayItems.find((item) => {\n            return typeof item.label !== \"undefined\" && item.label.toLowerCase().startsWith(this.filterTerm);\n        });\n        \n        if(match){\n            this._focusItem(match);\n        }\n        \n        this.filterTimeout = setTimeout(() => {\n            this.filterTerm = \"\";\n        }, 800)\n    }\n    \n    _focusItem(item){\n        if(this.focusedItem && this.focusedItem.element){\n            this.focusedItem.element.classList.remove(\"focused\");\n        }\n        \n        this.focusedItem = item;\n        \n        if(item && item.element){\n            item.element.classList.add(\"focused\");\n            item.element.scrollIntoView({behavior: 'smooth', block: 'nearest', inline: 'start'});\n        }\n    }\n    \n    \n    //////////////////////////////////////\n    /////// Data List Generation /////////\n    //////////////////////////////////////\n    headerFilterInitialListGen(){\n        this._generateOptions(true);\n    }\n    \n    rebuildOptionsList(){\n        this._generateOptions()\n        .then(this._sortOptions.bind(this))\n        .then(this._buildList.bind(this))\n        .then(this._showList.bind(this))\n        .catch((e) => {\n            if(!Number.isInteger(e)){\n                console.error(\"List generation error\", e);\n            }\n        })\n    }\n    \n    _filterList(){\n        this._buildList(this._filterOptions());\n        this._showList();\n    }\n    \n    _generateOptions(silent){\n        var values = [];\n        var itteration = ++ this.listIteration;\n        \n        this.filtered = false;\n        \n        if(this.params.values){\n            values = this.params.values;\n        }else if (this.params.valuesURL){\n            values = this._ajaxRequest(this.params.valuesURL, this.input.value);\n        }else{\n            if(typeof this.params.valuesLookup === \"function\"){\n                values = this.params.valuesLookup(cell, this.input.value);\n            }else if(this.params.valuesLookup){\n                values = this._uniqueColumnValues(this.params.valuesLookupField);\n            }\n        }\n        \n        if(values instanceof Promise){\n            if(!silent){\n                this._addPlaceholder(this.params.placeholderLoading);\n            }\n            \n            return values.then()\n            .then((responseValues) => {\n                if(this.listIteration === itteration){\n                    return this._parseList(responseValues);\n                }else{\n                    return Promise.reject(itteration);\n                }\n            });\n        }else{\n            return Promise.resolve(this._parseList(values))\n        }\n    }\n    \n    _addPlaceholder(contents){\n        var placeholder = document.createElement(\"div\");\n        \n        if(typeof contents === \"function\"){\n            contents = contents(cell.getComponent(), this.listEl);\n        }\n        \n        if(contents){\n            this._clearList();\n            \n            if(contents instanceof HTMLElement){\n                placeholder = contents;\n            }else{\n                placeholder.classList.add(\"tabulator-edit-list-placeholder\")\n                placeholder.innerHTML = contents;\n            }\n            \n            this.listEl.appendChild(placeholder);\n            \n            this._showList();\n        }\n    }\n    \n    _ajaxRequest(url, term){\n        var params = this.params.filterRemote ? {term:term} : {};\n        url = urlBuilder(url, {}, params);\n        \n        return fetch(url)\n        .then((response)=>{\n            if(response.ok) {\n                return response.json()\n                .catch((error)=>{\n                    console.warn(\"List Ajax Load Error - Invalid JSON returned\", error);\n                    return Promise.reject(error);\n                });\n            }else{\n                console.error(\"List Ajax Load Error - Connection Error: \" + response.status, response.statusText);\n                return Promise.reject(response);\n            }\n        })\n        .catch((error)=>{\n            console.error(\"List Ajax Load Error - Connection Error: \", error);\n            return Promise.reject(error);\n        });\n    }\n    \n    _uniqueColumnValues(field){\n        var output = {},\n        data = this.table.getData(this.params.valuesLookup),\n        column;\n        \n        if(field){\n            column = this.table.columnManager.getColumnByField(field);\n        }else{\n            column = this.cell.getColumn()._getSelf();\n        }\n        \n        if(column){\n            data.forEach((row) => {\n                var val = column.getFieldValue(row);\n                \n                if(val !== null && typeof val !== \"undefined\" && val !== \"\"){\n                    output[val] = true;\n                }\n            });\n        }else{\n            console.warn(\"unable to find matching column to create select lookup list:\", field);\n            output = [];\n        }\n        \n        return Object.keys(output);\n    }\n    \n    \n    _parseList(inputValues){\n        var data = [];\n        \n        if(!Array.isArray(inputValues)){\n            inputValues = Object.entries(inputValues).map(([key, value]) => {\n                return {\n                    label:value,\n                    value:key,\n                };\n            });\n        }\n        \n        inputValues.forEach((value) => {\n            if(typeof value !== \"object\"){\n                value = {\n                    label:value,\n                    value:value,\n                };\n            }\n            \n            this._parseListItem(value, data, 0);\n        });\n        \n        this.data = data;\n        \n        return data;    \n    }\n    \n    _parseListItem(option, data, level){\n        var item = {};\n        \n        if(option.options){\n            item = this._parseListGroup(option, level + 1);\n        }else{\n            item = {\n                label:option.label,\n                value:option.value,\n                itemParams:option.itemParams,\n                elementAttributes: option.elementAttributes,\n                element:false,\n                selected:false,\n                visible:true,\n                level:level,\n                original:option,\n            };\n            \n            if(this.initialValues && this.initialValues.indexOf(option.value) > -1){\n                this._chooseItem(item, true);\n            }\n        }\n        \n        data.push(item);\n    }\n    \n    _parseListGroup(option, level){\n        var item = {\n            label:option.label,\n            group:true,\n            itemParams:option.itemParams,\n            elementAttributes:option.elementAttributes,\n            element:false,\n            visible:true,\n            level:level,\n            options:[],\n            original:option,\n        };\n        \n        option.options.forEach((child) => {\n            this._parseListItem(child, item.options, level);\n        });\n        \n        return item;\n    }\n    \n    _sortOptions(options){\n        var sorter;\n        \n        if(this.params.sort){\n            sorter = typeof this.params.sort === \"function\" ? this.params.sort : this._defaultSortFunction.bind(this);\n            \n            this._sortGroup(sorter, options);\n        }\n        \n        return options;\n    }\n    \n    _sortGroup(sorter, options){\n        options.sort((a,b) => {\n            return sorter(a.label, b.label, a.value, b.value, a.original, b.original);\n        });\n        \n        options.forEach((option) => {\n            if(option.group){\n                this._sortGroup(sorter, option.options);\n            }\n        })\n    }\n    \n    _defaultSortFunction(as, bs){\n        var a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n        var emptyAlign = 0;\n        \n        if(this.params.sort === \"desc\"){\n            [as, bs] = [bs, as];\n        }\n        \n        //handle empty values\n        if(!as && as!== 0){\n            emptyAlign =  !bs && bs!== 0 ? 0 : -1;\n        }else if(!bs && bs!== 0){\n            emptyAlign =  1;\n        }else{\n            if(isFinite(as) && isFinite(bs)) return as - bs;\n            a = String(as).toLowerCase();\n            b = String(bs).toLowerCase();\n            if(a === b) return 0;\n            if(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n            a = a.match(rx);\n            b = b.match(rx);\n            L = a.length > b.length ? b.length : a.length;\n            while(i < L){\n                a1= a[i];\n                b1= b[i++];\n                if(a1 !== b1){\n                    if(isFinite(a1) && isFinite(b1)){\n                        if(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n                        if(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n                        return a1 - b1;\n                    }\n                    else return a1 > b1 ? 1 : -1;\n                }\n            }\n            \n            return a.length > b.length;\n        }\n        \n        return emptyAlign;\n    }\n    \n    _filterOptions(){\n        var filterFunc = this.params.filterFunc || this._defaultFilterFunc;\n        var term = this.input.value;\n        var results = [];\n        \n        if(term){\n            this.filtered = true;\n            \n            this.data.forEach((item) => {\n                this._filterItem(filterFunc, term, item);\n            });\n        }else{\n            this.filtered = false;\n        }\n        \n        return this.data;\n    }\n    \n    _filterItem(func, term, item){\n        var matches = false;\n        \n        if(!item.group){\n            item.visible = func(term, item.label, item.value, item.original);\n        }else{\n            item.options.forEach((option) => {\n                if(this._filterItem(func, term, option)){\n                    matches = true;\n                }\n            });\n            \n            item.visible = matches;\n        }\n        \n        return item.visible;\n    }\n    \n    _defaultFilterFunc(term, label, value, item){\n        var term = String(term).toLowerCase();\n        \n        if(label !== null || typeof label !== \"undefined\"){\n            if(String(label).toLowerCase().indexOf(term) > -1 || String(value).toLowerCase(term).indexOf() > -1){\n                return true;\n            }\n        }\n        \n        return false;\n    }\n    \n    //////////////////////////////////////\n    /////////// Display List /////////////\n    //////////////////////////////////////\n    \n    _clearList(){\n        while(this.listEl.firstChild) this.listEl.removeChild(this.listEl.firstChild);\n        \n        this.displayItems = [];\n    }\n    \n    _buildList(data){\n        this._clearList();\n        \n        data.forEach((option) => {\n            this._buildItem(option);\n        });\n        \n        if(!this.displayItems.length){\n            this._addPlaceholder(this.params.placeholderEmpty);\n        }  \n    }\n    \n    _buildItem(item){\n        var el = item.element,\n        contents;\n        \n        if(!this.filtered || item.visible){\n            \n            if(!el){\n                el = document.createElement(\"div\");\n                el.tabIndex = 0;\n                \n                contents = this.params.itemFormatter ? this.params.itemFormatter(item.label, item.value, item.original, el) : item.label;\n                \n                if(contents instanceof HTMLElement){\n                    el.appendChild(contents)\n                }else{\n                    el.innerHTML = contents;\n                }\n                \n                if(item.group){\n                    el.classList.add(\"tabulator-edit-list-group\");\n                }else{\n                    el.classList.add(\"tabulator-edit-list-item\");\n                }\n                \n                el.classList.add(\"tabulator-edit-list-group-level-\" + item.level);\n                \n                if(item.elementAttributes && typeof item.elementAttributes == \"object\"){\n                    for (let key in item.elementAttributes){\n                        if(key.charAt(0) == \"+\"){\n                            key = key.slice(1);\n                            el.setAttribute(key, this.input.getAttribute(key) + item.elementAttributes[\"+\" + key]);\n                        }else{\n                            el.setAttribute(key, item.elementAttributes[key]);\n                        }\n                    }\n                }\n                \n                if(item.group){\n                    el.addEventListener(\"click\", this._groupClick.bind(this, item));\n                }else{\n                    el.addEventListener(\"click\", this._itemClick.bind(this, item));\n                }\n                \n                el.addEventListener(\"mousedown\", this._preventBlur.bind(this));\n                \n                item.element = el;\n            }\n            \n            this._styleItem(item);\n            \n            this.listEl.appendChild(el);\n            \n            if(item.group){\n                item.options.forEach((option) => {\n                    this._buildItem(option);\n                });\n            }else{\n                this.displayItems.push(item);\n            }\n        }\n    }\n    \n    _showList(){\n        var startVis = this.popup && this.popup.isVisible();\n        \n        if(this.input.parentNode){\n            if(this.params.autocomplete && this.input.value === \"\" && !this.params.listOnEmpty){\n                if(this.popup){\n                    this.popup.hide(true);\n                    return;\n                }\n            }\n            \n            this._setListWidth();\n            \n            if(!this.popup){\n                this.popup = this.edit.popup(this.listEl);\n            }\n            \n            this.popup.show(this.cell.getElement(), \"bottom\")\n            \n            if(!startVis){\n                this.popup.hideOnBlur(this._resolveValue.bind(this, true));\n            }\n        }\n    }\n    \n    _styleItem(item){\n        if(item && item.element){\n            if(item.selected){\n                item.element.classList.add(\"active\");\n            }else{\n                item.element.classList.remove(\"active\");\n            }\n        }\n    }\n    \n    //////////////////////////////////////\n    ///////// User Interaction ///////////\n    //////////////////////////////////////\n    \n    _itemClick(item, e){\n        e.stopPropagation();\n        \n        this._chooseItem(item);\n    }\n    \n    _groupClick(item, e){\n        e.stopPropagation();\n    }\n    \n    \n    //////////////////////////////////////\n    ////// Current Item Management ///////\n    //////////////////////////////////////\n    \n    _cancel(){\n        this.popup.hide(true);\n        this.actions.cancel();\n    }\n    \n    _clearChoices(){\n        this.typing = true;\n        \n        this.currentItems.forEach((item) => {\n            item.selected = false;\n            this._styleItem(item);\n        });\n        \n        this.currentItems = [];\n        \n        this.focusedItem = null;\n    }\n    \n    _chooseItem(item, silent){\n        var index;\n        \n        this.typing = false;\n        \n        if(this.params.multiselect){\n            index = this.currentItems.indexOf(item);\n            \n            if(index > -1){\n                this.currentItems.splice(index, 1);\n                item.selected = false;\n            }else{\n                this.currentItems.push(item);\n                item.selected = true;\n            }\n            \n            this.input.value = this.currentItems.map(item => item.label).join(\",\");\n            \n            this._styleItem(item);\n            \n        }else{\n            this.currentItems = [item];\n            item.selected = true;\n            \n            this.input.value = item.label;\n            \n            this._styleItem(item);\n            \n            if(!silent){\n                this._resolveValue();\n            }\n        }\n        \n        this._focusItem(item);\n    }\n    \n    _resolveValue(blur){\n        var output, initialValue;\n        \n        this.popup.hide(true);\n        \n        if(this.params.multiselect){\n            output = this.currentItems.map(item => item.value);\n        }else{\n            if(blur && this.params.autocomplete && this.typing){\n                if(this.params.freetext || (this.params.allowEmpty && this.input.value === \"\")){\n                    output = this.input.value;\n                }else{\n                    this.actions.cancel();\n                    return;\n                }\n            }else{\n                if(this.currentItems[0]){\n                    output = this.currentItems[0].value;\n                }else{\n                    initialValue = this.initialValues[0];\n                    \n                    if(initialValue === null || typeof initialValue === \"undefined\" || initialValue === \"\"){\n                        output = initialValue;\n                    }else{\n                        output = this.params.emptyValue;\n                    }\n                }\n                \n            }\n        }\n        \n        if(output === \"\"){\n            output = this.params.emptyValue;\n        }\n        \n        this.actions.success(output);\n        \n        if(this.isFilter){\n            this.initialValues = output && !Array.isArray[output] ? [output] : output;\n        }\n    }\n    \n}","import input from './editors/input.js';\nimport textarea from './editors/textarea.js';\nimport number from './editors/number.js';\nimport range from './editors/range.js';\nimport select from './editors/select.js';\nimport list from './editors/list.js';\nimport autocomplete from './editors/autocomplete.js';\nimport star from './editors/star.js';\nimport progress from './editors/progress.js';\nimport tickCross from './editors/tickCross.js';\n\nexport default {\n\tinput:input,\n\ttextarea:textarea,\n    number:number,\n    range:range,\n\tselect:select,\n\tlist:list,\n\tautocomplete:autocomplete,\n\tstar:star,\n\tprogress:progress,\n\ttickCross:tickCross,\n};","import maskInput from '../../inputMask.js';\n\n//input element\nexport default function(cell, onRendered, success, cancel, editorParams){\n\t//create and style input\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", editorParams.search ? \"search\" : \"text\");\n\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = typeof cellValue !== \"undefined\" ? cellValue : \"\";\n\n\tonRendered(function(){\n\t\tinput.focus({preventScroll: true});\n\t\tinput.style.height = \"100%\";\n\n\t\tif(editorParams.selectContents){\n\t\t\tinput.select();\n\t\t}\n\t});\n\n\tfunction onChange(e){\n\t\tif(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\t\t\tif(success(input.value)){\n\t\t\t\tcellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur or change\n\tinput.addEventListener(\"change\", onChange);\n\tinput.addEventListener(\"blur\", onChange);\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\t// case 9:\n\t\t\tcase 13:\n\t\t\tonChange(e);\n\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\tcancel();\n\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\te.stopPropagation();\n\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n};","import maskInput from '../../inputMask.js';\n\n//resizable text area element\nexport default function(cell, onRendered, success, cancel, editorParams){\n    var self = this,\n    cellValue = cell.getValue(),\n    vertNav = editorParams.verticalNavigation || \"hybrid\",\n    value = String(cellValue !== null && typeof cellValue !== \"undefined\"  ? cellValue : \"\"),\n    count = (value.match(/(?:\\r\\n|\\r|\\n)/g) || []).length + 1,\n    input = document.createElement(\"textarea\"),\n    scrollHeight = 0;\n\n    //create and style input\n    input.style.display = \"block\";\n    input.style.padding = \"2px\";\n    input.style.height = \"100%\";\n    input.style.width = \"100%\";\n    input.style.boxSizing = \"border-box\";\n    input.style.whiteSpace = \"pre-wrap\";\n    input.style.resize = \"none\";\n\n    if(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n        for (let key in editorParams.elementAttributes){\n            if(key.charAt(0) == \"+\"){\n                key = key.slice(1);\n                input.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n            }else{\n                input.setAttribute(key, editorParams.elementAttributes[key]);\n            }\n        }\n    }\n\n    input.value = value;\n\n    onRendered(function(){\n        input.focus({preventScroll: true});\n        input.style.height = \"100%\";\n\n        input.scrollHeight;\n        input.style.height = input.scrollHeight + \"px\";\n        cell.getRow().normalizeHeight();\n\n        if(editorParams.selectContents){\n\t\t\tinput.select();\n\t\t}\n    });\n\n    function onChange(e){\n\n        if(((cellValue === null || typeof cellValue === \"undefined\") && input.value !== \"\") || input.value !== cellValue){\n\n            if(success(input.value)){\n                cellValue = input.value; //persist value if successfully validated incase editor is used as header filter\n            }\n\n            setTimeout(function(){\n                cell.getRow().normalizeHeight();\n            },300)\n        }else{\n            cancel();\n        }\n    }\n\n    //submit new value on blur or change\n    input.addEventListener(\"change\", onChange);\n    input.addEventListener(\"blur\", onChange);\n\n    input.addEventListener(\"keyup\", function(){\n\n        input.style.height = \"\";\n\n        var heightNow = input.scrollHeight;\n\n        input.style.height = heightNow + \"px\";\n\n        if(heightNow != scrollHeight){\n            scrollHeight = heightNow;\n            cell.getRow().normalizeHeight();\n        }\n    });\n\n    input.addEventListener(\"keydown\", function(e){\n\n        switch(e.keyCode){\n            case 27:\n            cancel();\n            break;\n\n            case 38: //up arrow\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart)){\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n            }\n\n            break;\n\n            case 40: //down arrow\n            if(vertNav == \"editor\" || (vertNav == \"hybrid\" && input.selectionStart !== input.value.length)){\n                e.stopImmediatePropagation();\n                e.stopPropagation();\n            }\n            break;\n\n            case 35:\n            case 36:\n            e.stopPropagation();\n            break;\n        }\n    });\n\n    if(editorParams.mask){\n        maskInput(input, editorParams);\n    }\n\n    return input;\n};","import maskInput from '../../inputMask.js';\n\n//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tvertNav = editorParams.verticalNavigation || \"editor\",\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"number\");\n\n\tif(typeof editorParams.max != \"undefined\"){\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif(typeof editorParams.min != \"undefined\"){\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif(typeof editorParams.step != \"undefined\"){\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tvar blurFunc = function(e){\n\t\tonChange();\n\t};\n\n\tonRendered(function () {\n\t\t//submit new value on blur\n\t\tinput.removeEventListener(\"blur\", blurFunc);\n\n\t\tinput.focus({preventScroll: true});\n\t\tinput.style.height = \"100%\";\n\n\t\t//submit new value on blur\n\t\tinput.addEventListener(\"blur\", blurFunc);\n\n\t\tif(editorParams.selectContents){\n\t\t\tinput.select();\n\t\t}\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value !== cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\tonChange();\n\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\tcancel();\n\t\t\tbreak;\n\n\t\t\tcase 38: //up arrow\n\t\t\tcase 40: //down arrow\n\t\t\tif(vertNav == \"editor\"){\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase 35:\n\t\t\tcase 36:\n\t\t\te.stopPropagation();\n\t\t\tbreak;\n\t\t}\n\t});\n\n\tif(editorParams.mask){\n\t\tmaskInput(input, editorParams);\n\t}\n\n\treturn input;\n};","//input element with type of number\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar cellValue = cell.getValue(),\n\tinput = document.createElement(\"input\");\n\n\tinput.setAttribute(\"type\", \"range\");\n\n\tif (typeof editorParams.max != \"undefined\") {\n\t\tinput.setAttribute(\"max\", editorParams.max);\n\t}\n\n\tif (typeof editorParams.min != \"undefined\") {\n\t\tinput.setAttribute(\"min\", editorParams.min);\n\t}\n\n\tif (typeof editorParams.step != \"undefined\") {\n\t\tinput.setAttribute(\"step\", editorParams.step);\n\t}\n\n\t//create and style input\n\tinput.style.padding = \"4px\";\n\tinput.style.width = \"100%\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = cellValue;\n\n\tonRendered(function () {\n\t\tinput.focus({preventScroll: true});\n\t\tinput.style.height = \"100%\";\n\t});\n\n\tfunction onChange(){\n\t\tvar value = input.value;\n\n\t\tif(!isNaN(value) && value !==\"\"){\n\t\t\tvalue = Number(value);\n\t\t}\n\n\t\tif(value != cellValue){\n\t\t\tif(success(value)){\n\t\t\t\tcellValue = value; //persist value if successfully validated incase editor is used as header filter\n\t\t\t}\n\t\t}else{\n\t\t\tcancel();\n\t\t}\n\t}\n\n\t//submit new value on blur\n\tinput.addEventListener(\"blur\", function(e){\n\t\tonChange();\n\t});\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 13:\n\t\t\t// case 9:\n\t\t\tonChange();\n\t\t\tbreak;\n\n\t\t\tcase 27:\n\t\t\tcancel();\n\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn input;\n};","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\t console.warn(\"The select editor has been deprecated, please use the new list editor\");\n\n    var list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n    return list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n    var list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n    return list.input;\n}","import List from '../../List.js';\n\nexport default function(cell, onRendered, success, cancel, editorParams){\n\n\tconsole.warn(\"The autocomplete editor has been deprecated, please use the new list editor with the 'autocomplete' editorParam\");\n\n\teditorParams.autocomplete = true;\n\n    var list = new List(this, cell, onRendered, success, cancel, editorParams);\n\n    return list.input;\n}","//star rating\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar self = this,\n\telement = cell.getElement(),\n\tvalue = cell.getValue(),\n\tmaxStars = element.getElementsByTagName(\"svg\").length || 5,\n\tsize = element.getElementsByTagName(\"svg\")[0] ? element.getElementsByTagName(\"svg\")[0].getAttribute(\"width\") : 14,\n\tstars = [],\n\tstarsHolder = document.createElement(\"div\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\");\n\n\n\t//change star type\n\tfunction starChange(val){\n\t\tstars.forEach(function(star, i){\n\t\t\tif(i < val){\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-active\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-inactive\", \"tabulator-star-active\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#488CE9\" stroke=\"#014AAE\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}else{\n\t\t\t\tif(self.table.browser == \"ie\"){\n\t\t\t\t\tstar.setAttribute(\"class\", \"tabulator-star-inactive\");\n\t\t\t\t}else{\n\t\t\t\t\tstar.classList.replace(\"tabulator-star-active\", \"tabulator-star-inactive\");\n\t\t\t\t}\n\n\t\t\t\tstar.innerHTML = '<polygon fill=\"#010155\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\t\t\t}\n\t\t});\n\t}\n\n\t//build stars\n\tfunction buildStar(i){\n\n\t\tvar starHolder =  document.createElement(\"span\");\n\t\tvar nextStar = star.cloneNode(true);\n\n\t\tstars.push(nextStar);\n\n\t\tstarHolder.addEventListener(\"mouseenter\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tstarChange(i);\n\t\t});\n\n\t\tstarHolder.addEventListener(\"mousemove\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t});\n\n\t\tstarHolder.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\t\t\tsuccess(i);\n\t\t\telement.blur();\n\t\t});\n\n\t\tstarHolder.appendChild(nextStar);\n\t\tstarsHolder.appendChild(starHolder);\n\n\t}\n\n\t//handle keyboard navigation value change\n\tfunction changeValue(val){\n\t\tvalue = val;\n\t\tstarChange(val);\n\t}\n\n\t//style cell\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\t//style holding element\n\tstarsHolder.style.verticalAlign = \"middle\";\n\tstarsHolder.style.display = \"inline-block\";\n\tstarsHolder.style.padding = \"4px\";\n\n\t//style star\n\tstar.setAttribute(\"width\", size);\n\tstar.setAttribute(\"height\", size);\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tstarsHolder.setAttribute(key, starsHolder.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tstarsHolder.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//create correct number of stars\n\tfor(var i=1;i<= maxStars;i++){\n\t\tbuildStar(i);\n\t}\n\n\t//ensure value does not exceed number of stars\n\tvalue = Math.min(parseInt(value), maxStars);\n\n\t// set initial styling of stars\n\tstarChange(value);\n\n\tstarsHolder.addEventListener(\"mousemove\", function(e){\n\t\tstarChange(0);\n\t});\n\n\tstarsHolder.addEventListener(\"click\", function(e){\n\t\tsuccess(0);\n\t});\n\n\telement.addEventListener(\"blur\", function(e){\n\t\tcancel();\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\tchangeValue(value + 1);\n\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\tchangeValue(value - 1);\n\t\t\tbreak;\n\n\t\t\tcase 13: //enter\n\t\t\tsuccess(value);\n\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\tcancel();\n\t\t\tbreak;\n\t\t}\n\t});\n\n\treturn starsHolder;\n};","//draggable progress bar\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar element = cell.getElement(),\n\tmax = typeof editorParams.max === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"max\")) || 100) : editorParams.max,\n\tmin = typeof editorParams.min === \"undefined\" ? ((element.getElementsByTagName(\"div\")[0] && element.getElementsByTagName(\"div\")[0].getAttribute(\"min\")) || 0) : editorParams.min,\n\tpercent = (max - min) / 100,\n\tvalue = cell.getValue() || 0,\n\thandle = document.createElement(\"div\"),\n\tbar = document.createElement(\"div\"),\n\tmouseDrag, mouseDragWidth;\n\n\t//set new value\n\tfunction updateValue(){\n\t\tvar style = window.getComputedStyle(element, null);\n\n\t\tvar calcVal = (percent * Math.round(bar.offsetWidth / ((element.clientWidth - parseInt(style.getPropertyValue(\"padding-left\")) - parseInt(style.getPropertyValue(\"padding-right\")))/100))) + min;\n\t\tsuccess(calcVal);\n\t\telement.setAttribute(\"aria-valuenow\", calcVal);\n\t\telement.setAttribute(\"aria-label\", value);\n\t}\n\n\t//style handle\n\thandle.style.position = \"absolute\";\n\thandle.style.right = \"0\";\n\thandle.style.top = \"0\";\n\thandle.style.bottom = \"0\";\n\thandle.style.width = \"5px\";\n\thandle.classList.add(\"tabulator-progress-handle\");\n\n\t//style bar\n\tbar.style.display = \"inline-block\";\n\tbar.style.position = \"relative\";\n\t// bar.style.top = \"8px\";\n\t// bar.style.bottom = \"8px\";\n\t// bar.style.left = \"4px\";\n\t// bar.style.marginRight = \"4px\";\n\tbar.style.height = \"100%\";\n\tbar.style.backgroundColor = \"#488CE9\";\n\tbar.style.maxWidth = \"100%\";\n\tbar.style.minWidth = \"0%\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tbar.setAttribute(key, bar.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tbar.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//style cell\n\telement.style.padding = \"4px 4px\";\n\n\t//make sure value is in range\n\tvalue = Math.min(parseFloat(value), max);\n\tvalue = Math.max(parseFloat(value), min);\n\n\t//workout percentage\n\tvalue = Math.round((value - min) / percent);\n\t// bar.style.right = value + \"%\";\n\tbar.style.width = value + \"%\";\n\n\telement.setAttribute(\"aria-valuemin\", min);\n\telement.setAttribute(\"aria-valuemax\", max);\n\n\tbar.appendChild(handle);\n\n\thandle.addEventListener(\"mousedown\", function(e){\n\t\tmouseDrag = e.screenX;\n\t\tmouseDragWidth = bar.offsetWidth;\n\t});\n\n\thandle.addEventListener(\"mouseover\", function(){\n\t\thandle.style.cursor = \"ew-resize\";\n\t});\n\n\telement.addEventListener(\"mousemove\", function(e){\n\t\tif(mouseDrag){\n\t\t\tbar.style.width = (mouseDragWidth + e.screenX - mouseDrag) + \"px\";\n\t\t}\n\t});\n\n\telement.addEventListener(\"mouseup\", function(e){\n\t\tif(mouseDrag){\n\t\t\te.stopPropagation();\n\t\t\te.stopImmediatePropagation();\n\n\t\t\tmouseDrag = false;\n\t\t\tmouseDragWidth = false;\n\n\t\t\tupdateValue();\n\t\t}\n\t});\n\n\t//allow key based navigation\n\telement.addEventListener(\"keydown\", function(e){\n\t\tswitch(e.keyCode){\n\t\t\tcase 39: //right arrow\n\t\t\te.preventDefault();\n\t\t\tbar.style.width = (bar.clientWidth + element.clientWidth/100) + \"px\";\n\t\t\tbreak;\n\n\t\t\tcase 37: //left arrow\n\t\t\te.preventDefault();\n\t\t\tbar.style.width = (bar.clientWidth - element.clientWidth/100) + \"px\";\n\t\t\tbreak;\n\n\t\t\tcase 9: //tab\n\t\t\tcase 13: //enter\n\t\t\tupdateValue();\n\t\t\tbreak;\n\n\t\t\tcase 27: //escape\n\t\t\tcancel();\n\t\t\tbreak;\n\n\t\t}\n\t});\n\n\telement.addEventListener(\"blur\", function(){\n\t\tcancel();\n\t});\n\n\treturn bar;\n};","//checkbox\nexport default function(cell, onRendered, success, cancel, editorParams){\n\tvar value = cell.getValue(),\n\tinput = document.createElement(\"input\"),\n\ttristate = editorParams.tristate,\n\tindetermValue = typeof editorParams.indeterminateValue === \"undefined\" ? null : editorParams.indeterminateValue,\n\tindetermState = false,\n\ttrueValueSet = Object.keys(editorParams).includes(\"trueValue\"),\n\tfalseValueSet = Object.keys(editorParams).includes(\"falseValue\");\n\n\tinput.setAttribute(\"type\", \"checkbox\");\n\tinput.style.marginTop = \"5px\";\n\tinput.style.boxSizing = \"border-box\";\n\n\tif(editorParams.elementAttributes && typeof editorParams.elementAttributes == \"object\"){\n\t\tfor (let key in editorParams.elementAttributes){\n\t\t\tif(key.charAt(0) == \"+\"){\n\t\t\t\tkey = key.slice(1);\n\t\t\t\tinput.setAttribute(key, input.getAttribute(key) + editorParams.elementAttributes[\"+\" + key]);\n\t\t\t}else{\n\t\t\t\tinput.setAttribute(key, editorParams.elementAttributes[key]);\n\t\t\t}\n\t\t}\n\t}\n\n\tinput.value = value;\n\n\tif(tristate && (typeof value === \"undefined\" || value === indetermValue || value === \"\")){\n\t\tindetermState = true;\n\t\tinput.indeterminate = true;\n\t}\n\n\tif(this.table.browser != \"firefox\"){ //prevent blur issue on mac firefox\n\t\tonRendered(function(){\n\t\t\tinput.focus({preventScroll: true});\n\t\t});\n\t}\n\n\tinput.checked = trueValueSet ? value === editorParams.trueValue : (value === true || value === \"true\" || value === \"True\" || value === 1);\n\n\tonRendered(function(){\n\t\tinput.focus();\n\t});\n\n\tfunction setValue(blur){\n\t\tvar checkedValue = input.checked;\n\n\t\tif(trueValueSet && checkedValue){\n\t\t\tcheckedValue = editorParams.trueValue;\n\t\t}else if(falseValueSet && !checkedValue){\n\t\t\tcheckedValue = editorParams.falseValue;\n\t\t}else{\n\t\t\tcheckedValue = checkedValue;\n\t\t}\n\n\t\tif(tristate){\n\t\t\tif(!blur){\n\t\t\t\tif(input.checked && !indetermState){\n\t\t\t\t\tinput.checked = false;\n\t\t\t\t\tinput.indeterminate = true;\n\t\t\t\t\tindetermState = true;\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\tindetermState = false;\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(indetermState){\n\t\t\t\t\treturn indetermValue;\n\t\t\t\t}else{\n\t\t\t\t\treturn checkedValue;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\treturn checkedValue;\n\t\t}\n\t}\n\n\t//submit new value on blur\n\tinput.addEventListener(\"change\", function(e){\n\t\tsuccess(setValue());\n\t});\n\n\tinput.addEventListener(\"blur\", function(e){\n\t\tsuccess(setValue(true));\n\t});\n\n\t//submit new value on enter\n\tinput.addEventListener(\"keydown\", function(e){\n\t\tif(e.keyCode == 13){\n\t\t\tsuccess(setValue());\n\t\t}\n\t\tif(e.keyCode == 27){\n\t\t\tcancel();\n\t\t}\n\t});\n\n\treturn input;\n};","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultEditors from './defaults/editors.js';\n\nclass Edit extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.currentCell = false; //hold currently editing cell\n\t\tthis.mouseClick = false; //hold mousedown state to prevent click binding being overriden by editor opening\n\t\tthis.recursionBlock = false; //prevent focus recursion\n\t\tthis.invalidEdit = false;\n\t\tthis.editedCells = [];\n\n\t\tthis.editors = Edit.editors;\n\n\t\tthis.registerColumnOption(\"editable\");\n\t\tthis.registerColumnOption(\"editor\");\n\t\tthis.registerColumnOption(\"editorParams\");\n\n\t\tthis.registerColumnOption(\"cellEditing\");\n\t\tthis.registerColumnOption(\"cellEdited\");\n\t\tthis.registerColumnOption(\"cellEditCancelled\");\n\n\t\tthis.registerTableFunction(\"getEditedCells\", this.getEditedCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellEdited\", this.clearCellEdited.bind(this));\n\t\tthis.registerTableFunction(\"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerTableFunction(\"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerTableFunction(\"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerTableFunction(\"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerTableFunction(\"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerTableFunction(\"navigateDown\", this.navigateDown.bind(this));\n\n\t\tthis.registerComponentFunction(\"cell\", \"isEdited\", this.cellisEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearEdited\", this.clearEdited.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"edit\", this.editCell.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"cancelEdit\", this.cellCancelEdit.bind(this));\n\n\t\tthis.registerComponentFunction(\"cell\", \"navigatePrev\", this.navigatePrev.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateNext\", this.navigateNext.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateLeft\", this.navigateLeft.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateRight\", this.navigateRight.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateUp\", this.navigateUp.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"navigateDown\", this.navigateDown.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-init\", this.bindEditor.bind(this));\n\t\tthis.subscribe(\"cell-delete\", this.clearEdited.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.columnDeleteCheck.bind(this));\n\t\tthis.subscribe(\"row-deleting\", this.rowDeleteCheck.bind(this));\n\t\tthis.subscribe(\"data-refreshing\", this.cancelEdit.bind(this));\n\n\t\tthis.subscribe(\"keybinding-nav-prev\", this.navigatePrev.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-next\", this.keybindingNavigateNext.bind(this));\n\t\tthis.subscribe(\"keybinding-nav-left\", this.navigateLeft.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-right\", this.navigateRight.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-up\", this.navigateUp.bind(this, undefined));\n\t\tthis.subscribe(\"keybinding-nav-down\", this.navigateDown.bind(this, undefined));\n\t}\n\n\n\t///////////////////////////////////\n\t////// Keybinding Functions ///////\n\t///////////////////////////////////\n\n\tkeybindingNavigateNext(e){\n\t\tvar cell = this.currentCell,\n\t\tnewRow = this.options(\"tabEndNewRow\");\n\n\t\tif(cell){\n\t\t\tif(!this.navigateNext(cell, e)){\n\t\t\t\tif(newRow){\n\t\t\t\t\tcell.getElement().firstChild.blur();\n\n\t\t\t\t\tif(newRow === true){\n\t\t\t\t\t\tnewRow = this.table.addRow({})\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(typeof newRow == \"function\"){\n\t\t\t\t\t\t\tnewRow = this.table.addRow(newRow(cell.row.getComponent()))\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRow = this.table.addRow(Object.assign({}, newRow));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tnewRow.then(() => {\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tcell.getComponent().navigateNext();\n\t\t\t\t\t\t})\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Cell Functions //////////\n\t///////////////////////////////////\n\n\tcellisEdited(cell){\n\t\treturn !! cell.modules.edit && cell.modules.edit.edited;\n\t}\n\n\tcellCancelEdit(cell){\n\t\tif(cell === this.currentCell){\n\t\t\tthis.table.modules.edit.cancelEdit();\n\t\t}else{\n\t\t\tconsole.warn(\"Cancel Editor Error - This cell is not currently being edited \");\n\t\t}\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\tclearCellEdited(cells){\n\t\tif(!cells){\n\t\t\tcells = this.table.modules.edit.getEditedCells();\n\t\t}\n\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\n\t\tcells.forEach((cell) => {\n\t\t\tthis.table.modules.edit.clearEdited(cell._getSelf());\n\t\t});\n\t}\n\n\tnavigatePrev(cell = this.currentCell, e){\n\t\tvar nextCell, prevRow;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tnextCell = this.navigateLeft();\n\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tprevRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\n\t\t\t\tif(prevRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(prevRow, prevRow.cells.length);\n\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tnavigateNext(cell = this.currentCell, e){\n\t\tvar nextCell, nextRow;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tnextCell = this.navigateRight();\n\n\t\t\tif(nextCell){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\n\t\t\t\tif(nextRow){\n\t\t\t\t\tnextCell = this.findNextEditableCell(nextRow, -1);\n\n\t\t\t\t\tif(nextCell){\n\t\t\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tnavigateLeft(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findPrevEditableCell(cell.row, index);\n\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tnavigateRight(cell = this.currentCell, e){\n\t\tvar index, nextCell;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tindex = cell.getIndex();\n\t\t\tnextCell = this.findNextEditableCell(cell.row, index);\n\n\t\t\tif(nextCell){\n\t\t\t\tnextCell.getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tnavigateUp(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.prevDisplayRow(cell.row, true);\n\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tnavigateDown(cell = this.currentCell, e){\n\t\tvar index, nextRow;\n\n\t\tif(cell){\n\n\t\t\tif(e){\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tindex = cell.getIndex();\n\t\t\tnextRow = this.table.rowManager.nextDisplayRow(cell.row, true);\n\n\t\t\tif(nextRow){\n\t\t\t\tnextRow.cells[index].getComponent().edit();\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfindNextEditableCell(row, index){\n\t\tvar nextCell = false;\n\n\t\tif(index < row.cells.length-1){\n\t\t\tfor(var i = index+1; i < row.cells.length; i++){\n\t\t\t\tlet cell = row.cells[i];\n\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tlet allowEdit = true;\n\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tnextCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn nextCell;\n\t}\n\n\tfindPrevEditableCell(row, index){\n\t\tvar prevCell = false;\n\n\t\tif(index > 0){\n\t\t\tfor(var i = index-1; i >= 0; i--){\n\t\t\t\tlet cell = row.cells[i],\n\t\t\t\tallowEdit = true;\n\n\t\t\t\tif(cell.column.modules.edit && Helpers.elVisible(cell.getElement())){\n\t\t\t\t\tif(typeof cell.column.modules.edit.check == \"function\"){\n\t\t\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\t\t}\n\n\t\t\t\t\tif(allowEdit){\n\t\t\t\t\t\tprevCell = cell;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn prevCell;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.editor !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\tcolumnDeleteCheck(column){\n\t\tif(this.currentCell && this.currentCell.column === column){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\trowDeleteCheck(row){\n\t\tif(this.currentCell && this.currentCell.row === row){\n\t\t\tthis.cancelEdit();\n\t\t}\n\t}\n\n\t//initialize column editor\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {\n\t\t\teditor:false,\n\t\t\tblocked:false,\n\t\t\tcheck:column.definition.editable,\n\t\t\tparams:column.definition.editorParams || {}\n\t\t};\n\n\t\t//set column editor\n\t\tswitch(typeof column.definition.editor){\n\t\t\tcase \"string\":\n\t\t\tif(this.editors[column.definition.editor]){\n\t\t\t\tconfig.editor = this.editors[column.definition.editor];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Editor Error - No such editor found: \", column.definition.editor);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tconfig.editor = column.definition.editor;\n\t\t\tbreak;\n\n\t\t\tcase \"boolean\":\n\t\t\tif(column.definition.editor === true){\n\t\t\t\tif(typeof column.definition.formatter !== \"function\"){\n\t\t\t\t\tif(this.editors[column.definition.formatter]){\n\t\t\t\t\t\tconfig.editor = this.editors[column.definition.formatter];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconfig.editor = this.editors[\"input\"];\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Editor Error - Cannot auto lookup editor for a custom formatter: \", column.definition.formatter);\n\t\t\t\t}\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\n\t\tif(config.editor){\n\t\t\tcolumn.modules.edit = config;\n\t\t}\n\t}\n\n\tgetCurrentCell(){\n\t\treturn this.currentCell ? this.currentCell.getComponent() : false;\n\t}\n\n\tclearEditor(cancel){\n\t\tvar cell = this.currentCell,\n\t\tcellEl;\n\n\t\tthis.invalidEdit = false;\n\n\t\tif(cell){\n\t\t\tthis.currentCell = false;\n\n\t\t\tcellEl = cell.getElement();\n\n\t\t\tthis.dispatch(\"edit-editor-clear\", cell, cancel);\n\n\t\t\tcellEl.classList.remove(\"tabulator-editing\");\n\n\t\t\twhile(cellEl.firstChild) cellEl.removeChild(cellEl.firstChild);\n\n\t\t\tcell.row.getElement().classList.remove(\"tabulator-row-editing\");\n\t\t}\n\t}\n\n\tcancelEdit(){\n\t\tif(this.currentCell){\n\t\t\tvar cell = this.currentCell;\n\t\t\tvar component = this.currentCell.getComponent();\n\n\t\t\tthis.clearEditor(true);\n\t\t\tcell.setValueActual(cell.getValue());\n\t\t\tcell.cellRendered();\n\n\t\t\tif(cell.column.definition.editor == \"textarea\" || cell.column.definition.variableHeight){\n\t\t\t\tcell.row.normalizeHeight(true);\n\t\t\t}\n\n\t\t\tif(cell.column.definition.cellEditCancelled){\n\t\t\t\tcell.column.definition.cellEditCancelled.call(this.table, component);\n\t\t\t}\n\n\t\t\tthis.dispatch(\"edit-cancelled\", cell);\n\t\t\tthis.dispatchExternal(\"cellEditCancelled\", component);\n\t\t}\n\t}\n\n\t//return a formatted value for a cell\n\tbindEditor(cell){\n\t\tif(cell.column.modules.edit){\n\t\t\tvar self = this,\n\t\t\telement = cell.getElement(true);\n\n\t\t\telement.setAttribute(\"tabindex\", 0);\n\n\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\tif(!element.classList.contains(\"tabulator-editing\")){\n\t\t\t\t\telement.focus({preventScroll: true});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif (e.button === 2) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t}else{\n\t\t\t\t\tself.mouseClick = true;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\telement.addEventListener(\"focus\", function(e){\n\t\t\t\tif(!self.recursionBlock){\n\t\t\t\t\tself.edit(cell, e, false);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tfocusCellNoEvent(cell, block){\n\t\tthis.recursionBlock = true;\n\n\t\tif(!(block && this.table.browser === \"ie\")){\n\t\t\tcell.getElement().focus({preventScroll: true});\n\t\t}\n\n\t\tthis.recursionBlock = false;\n\t}\n\n\teditCell(cell, forceEdit){\n\t\tthis.focusCellNoEvent(cell);\n\t\tthis.edit(cell, false, forceEdit);\n\t}\n\n\tfocusScrollAdjust(cell){\n\t\tif(this.table.rowManager.getRenderMode() == \"virtual\"){\n\t\t\tvar topEdge = this.table.rowManager.element.scrollTop,\n\t\t\tbottomEdge = this.table.rowManager.element.clientHeight + this.table.rowManager.element.scrollTop,\n\t\t\trowEl = cell.row.getElement(),\n\t\t\toffset = rowEl.offsetTop;\n\n\t\t\tif(rowEl.offsetTop < topEdge){\n\t\t\t\tthis.table.rowManager.element.scrollTop -= (topEdge - rowEl.offsetTop);\n\t\t\t}else{\n\t\t\t\tif(rowEl.offsetTop + rowEl.offsetHeight  > bottomEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollTop += (rowEl.offsetTop + rowEl.offsetHeight - bottomEdge);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar leftEdge = this.table.rowManager.element.scrollLeft,\n\t\t\trightEdge = this.table.rowManager.element.clientWidth + this.table.rowManager.element.scrollLeft,\n\t\t\tcellEl = cell.getElement(),\n\t\t\toffset = cellEl.offsetLeft;\n\n\t\t\tif(this.table.modExists(\"frozenColumns\")){\n\t\t\t\tleftEdge += parseInt(this.table.modules.frozenColumns.leftMargin);\n\t\t\t\trightEdge -= parseInt(this.table.modules.frozenColumns.rightMargin);\n\t\t\t}\n\n\t\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\t\tleftEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t\trightEdge -= parseInt(this.table.columnManager.renderer.vDomPadLeft);\n\t\t\t}\n\n\t\t\tif(cellEl.offsetLeft < leftEdge){\n\n\t\t\t\tthis.table.rowManager.element.scrollLeft -= (leftEdge - cellEl.offsetLeft);\n\t\t\t}else{\n\t\t\t\tif(cellEl.offsetLeft + cellEl.offsetWidth  > rightEdge){\n\t\t\t\t\tthis.table.rowManager.element.scrollLeft += (cellEl.offsetLeft + cellEl.offsetWidth - rightEdge);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tedit(cell, e, forceEdit){\n\t\tvar self = this,\n\t\tallowEdit = true,\n\t\trendered = function(){},\n\t\telement = cell.getElement(),\n\t\tcellEditor, component, params;\n\n\t\t//prevent editing if another cell is refusing to leave focus (eg. validation fail)\n\t\tif(this.currentCell){\n\t\t\tif(!this.invalidEdit){\n\t\t\t\tthis.cancelEdit();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\t//handle successful value change\n\t\tfunction success(value){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tvar valid = self.chain(\"edit-success\", [cell, value], true, true);\n\n\t\t\t\tif(valid === true || self.table.options.validationMode === \"highlight\"){\n\t\t\t\t\tself.clearEditor();\n\n\n\t\t\t\t\tif(!cell.modules.edit){\n\t\t\t\t\t\tcell.modules.edit = {};\n\t\t\t\t\t}\n\n\t\t\t\t\tcell.modules.edit.edited = true;\n\n\t\t\t\t\tif(self.editedCells.indexOf(cell) == -1){\n\t\t\t\t\t\tself.editedCells.push(cell);\n\t\t\t\t\t}\n\n\t\t\t\t\tcell.setValue(value, true);\n\n\t\t\t\t\treturn valid === true;\n\t\t\t\t}else{\n\t\t\t\t\tself.invalidEdit = true;\n\t\t\t\t\tself.focusCellNoEvent(cell, true);\n\t\t\t\t\trendered();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call success on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){\n\t\t\tif(self.currentCell === cell){\n\t\t\t\tself.cancelEdit();\n\t\t\t}else{\n\t\t\t\t// console.warn(\"Edit Success Error - cannot call cancel on a cell that is no longer being edited\");\n\t\t\t}\n\t\t}\n\n\t\tfunction onRendered(callback){\n\t\t\trendered = callback;\n\t\t}\n\n\t\tif(!cell.column.modules.edit.blocked){\n\t\t\tif(e){\n\t\t\t\te.stopPropagation();\n\t\t\t}\n\n\t\t\tswitch(typeof cell.column.modules.edit.check){\n\t\t\t\tcase \"function\":\n\t\t\t\tallowEdit = cell.column.modules.edit.check(cell.getComponent());\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\tallowEdit = cell.column.modules.edit.check;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(allowEdit || forceEdit){\n\n\t\t\t\tself.cancelEdit();\n\n\t\t\t\tself.currentCell = cell;\n\n\t\t\t\tthis.focusScrollAdjust(cell);\n\n\t\t\t\tcomponent = cell.getComponent();\n\n\t\t\t\tif(this.mouseClick){\n\t\t\t\t\tthis.mouseClick = false;\n\n\t\t\t\t\tif(cell.column.definition.cellClick){\n\t\t\t\t\t\tcell.column.definition.cellClick.call(this.table, e, component);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(cell.column.definition.cellEditing){\n\t\t\t\t\tcell.column.definition.cellEditing.call(this.table, component);\n\t\t\t\t}\n\n\t\t\t\tthis.dispatch(\"cell-editing\", cell);\n\t\t\t\tthis.dispatchExternal(\"cellEditing\", component);\n\n\t\t\t\tparams = typeof cell.column.modules.edit.params === \"function\" ? cell.column.modules.edit.params(component) : cell.column.modules.edit.params;\n\n\t\t\t\tcellEditor = cell.column.modules.edit.editor.call(self, component, onRendered, success, cancel, params);\n\n\t\t\t\t//if editor returned, add to DOM, if false, abort edit\n\t\t\t\tif(cellEditor !== false){\n\n\t\t\t\t\tif(cellEditor instanceof Node){\n\t\t\t\t\t\telement.classList.add(\"tabulator-editing\");\n\t\t\t\t\t\tcell.row.getElement().classList.add(\"tabulator-row-editing\");\n\t\t\t\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\t\t\t\telement.appendChild(cellEditor);\n\n\t\t\t\t\t\t//trigger onRendered Callback\n\t\t\t\t\t\trendered();\n\n\t\t\t\t\t\t//prevent editing from triggering rowClick event\n\t\t\t\t\t\tvar children = element.children;\n\n\t\t\t\t\t\tfor (var i = 0; i < children.length; i++) {\n\t\t\t\t\t\t\tchildren[i].addEventListener(\"click\", function(e){\n\t\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Edit Error - Editor should return an instance of Node, the editor returned:\", cellEditor);\n\t\t\t\t\t\telement.blur();\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\telement.blur();\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tthis.mouseClick = false;\n\t\t\t\telement.blur();\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.mouseClick = false;\n\t\t\telement.blur();\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tgetEditedCells(){\n\t\tvar output = [];\n\n\t\tthis.editedCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tclearEdited(cell){\n\t\tvar editIndex;\n\n\t\tif(cell.modules.edit && cell.modules.edit.edited){\n\t\t\tcell.modules.edit.edited = false;\n\n\t\t\tthis.dispatch(\"edit-edited-clear\", cell);\n\t\t}\n\n\t\teditIndex = this.editedCells.indexOf(cell);\n\n\t\tif(editIndex > -1){\n\t\t\tthis.editedCells.splice(editIndex, 1);\n\t\t}\n\t}\n}\n\nEdit.moduleName = \"edit\";\n\n//load defaults\nEdit.editors = defaultEditors;\n\n\nexport default Edit;\n","class ExportRow{\n\tconstructor(type, columns, component, indent){\n\t\tthis.type = type;\n\t\tthis.columns = columns;\n\t\tthis.component = component || false;\n\t\tthis.indent = indent || 0;\n\t}\n}\n\nexport default ExportRow;","class ExportColumn{\n\tconstructor(value, component, width, height, depth){\n\t\tthis.value = value;\n\t\tthis.component = component || false;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.depth = depth;\n\t}\n}\n\nexport default ExportColumn;","import Module from '../../core/Module.js';\n\nimport ExportRow from './ExportRow.js';\nimport ExportColumn from './ExportColumn.js';\n\nclass Export extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.config = {};\n\t\tthis.cloneTableStyle = true;\n\t\tthis.colVisProp = \"\";\n\n\t\tthis.registerTableOption(\"htmlOutputConfig\", false); //html outypu config\n\n\t\tthis.registerColumnOption(\"htmlOutput\");\n\t\tthis.registerColumnOption(\"titleHtmlOutput\");\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"getHtml\", this.getHtml.bind(this));\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tgenerateExportList(config, style, range, colVisProp){\n\t\tthis.cloneTableStyle = style;\n\t\tthis.config = config || {};\n\t\tthis.colVisProp = colVisProp;\n\n\t\tvar headers = this.config.columnHeaders !== false ? this.headersToExportRows(this.generateColumnGroupHeaders()) : [];\n\t\tvar body = this.bodyToExportRows(this.rowLookup(range));\n\n\t\treturn headers.concat(body);\n\t}\n\n\tgenereateTable(config, style, range, colVisProp){\n\t\tvar list = this.generateExportList(config, style, range, colVisProp);\n\n\t\treturn this.genereateTableElement(list);\n\t}\n\n\trowLookup(range){\n\t\tvar rows = [];\n\n\t\tif(typeof range == \"function\"){\n\t\t\trange.call(this.table).forEach((row) =>{\n\t\t\t\trow = this.table.rowManager.findRow(row);\n\n\t\t\t\tif(row){\n\t\t\t\t\trows.push(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tswitch(range){\n\t\t\t\tcase true:\n\t\t\t\tcase \"visible\":\n\t\t\t\trows = this.table.rowManager.getVisibleRows(false, true);\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"all\":\n\t\t\t\trows = this.table.rowManager.rows;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"selected\":\n\t\t\t\trows = this.table.modules.selectRow.selectedRows;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"active\":\n\t\t\t\tdefault:\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows(this.table.rowManager.displayRows.length - 2);\n\t\t\t\t}else{\n\t\t\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Object.assign([], rows);\n\t}\n\n\tgenerateColumnGroupHeaders(){\n\t\tvar output = [];\n\n\t\tvar columns = this.config.columnGroups !== false ? this.table.columnManager.columns : this.table.columnManager.columnsByIndex;\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar colData = this.processColumnGroup(column);\n\n\t\t\tif(colData){\n\t\t\t\toutput.push(colData);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tprocessColumnGroup(column){\n\t\tvar subGroups = column.columns,\n\t\tmaxDepth = 0,\n\t\ttitle = column.definition[\"title\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))] || column.definition.title;\n\n\t\tvar groupData = {\n\t\t\ttitle:title,\n\t\t\tcolumn:column,\n\t\t\tdepth:1,\n\t\t};\n\n\t\tif(subGroups.length){\n\t\t\tgroupData.subGroups = [];\n\t\t\tgroupData.width = 0;\n\n\t\t\tsubGroups.forEach((subGroup) => {\n\t\t\t\tvar subGroupData = this.processColumnGroup(subGroup);\n\n\t\t\t\tif(subGroupData){\n\t\t\t\t\tgroupData.width += subGroupData.width;\n\t\t\t\t\tgroupData.subGroups.push(subGroupData);\n\n\t\t\t\t\tif(subGroupData.depth > maxDepth){\n\t\t\t\t\t\tmaxDepth = subGroupData.depth;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tgroupData.depth += maxDepth;\n\n\t\t\tif(!groupData.width){\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.columnVisCheck(column)){\n\t\t\t\tgroupData.width = 1;\n\t\t\t}else{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\treturn groupData;\n\t}\n\n\tcolumnVisCheck(column){\n\t\treturn column.definition[this.colVisProp] !== false && (column.visible || (!column.visible && column.definition[this.colVisProp]));\n\t}\n\n\theadersToExportRows(columns){\n\t\tvar headers = [],\n\t\theaderDepth = 0,\n\t\texportRows = [];\n\n\t\tfunction parseColumnGroup(column, level){\n\n\t\t\tvar depth = headerDepth - level;\n\n\t\t\tif(typeof headers[level] === \"undefined\"){\n\t\t\t\theaders[level] = [];\n\t\t\t}\n\n\t\t\tcolumn.height = column.subGroups ? 1 : (depth - column.depth) + 1;\n\n\t\t\theaders[level].push(column);\n\n\t\t\tif(column.height > 1){\n\t\t\t\tfor(let i = 1; i < column.height; i ++){\n\n\t\t\t\t\tif(typeof headers[level + i] === \"undefined\"){\n\t\t\t\t\t\theaders[level + i] = [];\n\t\t\t\t\t}\n\n\t\t\t\t\theaders[level + i].push(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(column.width > 1){\n\t\t\t\tfor(let i = 1; i < column.width; i ++){\n\t\t\t\t\theaders[level].push(false);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(column.subGroups){\n\t\t\t\tcolumn.subGroups.forEach(function(subGroup){\n\t\t\t\t\tparseColumnGroup(subGroup, level+1);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//calculate maximum header debth\n\t\tcolumns.forEach(function(column){\n\t\t\tif(column.depth > headerDepth){\n\t\t\t\theaderDepth = column.depth;\n\t\t\t}\n\t\t});\n\n\t\tcolumns.forEach(function(column){\n\t\t\tparseColumnGroup(column,0);\n\t\t});\n\n\t\theaders.forEach((header) => {\n\t\t\tvar columns = [];\n\n\t\t\theader.forEach((col) => {\n\t\t\t\tif(col){\n\t\t\t\t\tlet title = typeof col.title === \"undefined\" ? \"\" : col.title;\n\t\t\t\t\tcolumns.push(new ExportColumn(title, col.column.getComponent(), col.width, col.height, col.depth));\n\t\t\t\t}else{\n\t\t\t\t\tcolumns.push(null);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\texportRows.push(new ExportRow(\"header\", columns));\n\t\t});\n\n\t\treturn exportRows;\n\t}\n\n\tbodyToExportRows(rows){\n\n\t\tvar columns = [];\n\t\tvar exportRows = [];\n\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif (this.columnVisCheck(column)) {\n\t\t\t\tcolumns.push(column.getComponent());\n\t\t\t}\n\t\t});\n\n\t\tif(this.config.columnCalcs !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized){\n\t\t\t\trows.unshift(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\n\t\t\tif(this.table.modules.columnCalcs.botInitialized){\n\t\t\t\trows.push(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t}\n\n\t\trows = rows.filter((row) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\treturn this.config.rowGroups !== false;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\treturn this.config.columnCalcs !== false;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\treturn !(this.table.options.dataTree && this.config.dataTree === false && row.modules.dataTree.parent);\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t});\n\n\t\trows.forEach((row, i) => {\n\t\t\tvar rowData = row.getData(this.colVisProp);\n\t\t\tvar exportCols = [];\n\t\t\tvar indent = 0;\n\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"group\":\n\t\t\t\tindent = row.level;\n\t\t\t\texportCols.push(new ExportColumn(row.key, row.getComponent(), columns.length, 1));\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\" :\n\t\t\t\tcase \"row\" :\n\t\t\t\tcolumns.forEach((col) => {\n\t\t\t\t\texportCols.push(new ExportColumn(col._column.getFieldValue(rowData), col, 1, 1));\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tindent = row.modules.dataTree.index;\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\texportRows.push(new ExportRow(row.type, exportCols, row.getComponent(), indent));\n\t\t});\n\n\t\treturn exportRows;\n\t}\n\n\tgenereateTableElement(list){\n\t\tvar table = document.createElement(\"table\"),\n\t\theaderEl = document.createElement(\"thead\"),\n\t\tbodyEl = document.createElement(\"tbody\"),\n\t\tstyles = this.lookupTableStyles(),\n\t\trowFormatter = this.table.options[\"rowFormatter\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))],\n\t\tsetup = {};\n\n\t\tsetup.rowFormatter = rowFormatter !== null ? rowFormatter : this.table.options.rowFormatter;\n\n\t\tif(this.table.options.dataTree &&this.config.dataTree !== false && this.table.modExists(\"columnCalcs\")){\n\t\t\tsetup.treeElementField = this.table.modules.dataTree.elementField;\n\t\t}\n\n\t\t//assign group header formatter\n\t\tsetup.groupHeader = this.table.options[\"groupHeader\" + (this.colVisProp.charAt(0).toUpperCase() + this.colVisProp.slice(1))];\n\n\t\tif(setup.groupHeader && !Array.isArray(setup.groupHeader)){\n\t\t\tsetup.groupHeader = [setup.groupHeader];\n\t\t}\n\n\t\ttable.classList.add(\"tabulator-print-table\");\n\n\t\tthis.mapElementStyles(this.table.columnManager.getHeadersElement(), headerEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\n\n\t\tif(list.length > 1000){\n\t\t\tconsole.warn(\"It may take a long time to render an HTML table with more than 1000 rows\");\n\t\t}\n\n\t\tlist.forEach((row, i) => {\n\t\t\tswitch(row.type){\n\t\t\t\tcase \"header\":\n\t\t\t\theaderEl.appendChild(this.genereateHeaderElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"group\":\n\t\t\t\tbodyEl.appendChild(this.genereateGroupElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"calc\":\n\t\t\t\tbodyEl.appendChild(this.genereateCalcElement(row, setup, styles));\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"row\":\n\t\t\t\tlet rowEl = this.genereateRowElement(row, setup, styles);\n\t\t\t\tthis.mapElementStyles(((i % 2) && styles.evenRow) ? styles.evenRow : styles.oddRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\t\t\tbodyEl.appendChild(rowEl);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\n\t\tif(headerEl.innerHTML){\n\t\t\ttable.appendChild(headerEl);\n\t\t}\n\n\t\ttable.appendChild(bodyEl);\n\n\n\t\tthis.mapElementStyles(this.table.element, table, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\"]);\n\t\treturn table;\n\t}\n\n\tlookupTableStyles(){\n\t\tvar styles = {};\n\n\t\t//lookup row styles\n\t\tif(this.cloneTableStyle && window.getComputedStyle){\n\t\t\tstyles.oddRow = this.table.element.querySelector(\".tabulator-row-odd:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.evenRow = this.table.element.querySelector(\".tabulator-row-even:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.calcRow = this.table.element.querySelector(\".tabulator-row.tabulator-calcs\");\n\t\t\tstyles.firstRow = this.table.element.querySelector(\".tabulator-row:not(.tabulator-group):not(.tabulator-calcs)\");\n\t\t\tstyles.firstGroup = this.table.element.getElementsByClassName(\"tabulator-group\")[0];\n\n\t\t\tif(styles.firstRow){\n\t\t\t\tstyles.styleCells = styles.firstRow.getElementsByClassName(\"tabulator-cell\");\n\t\t\t\tstyles.firstCell = styles.styleCells[0];\n\t\t\t\tstyles.lastCell = styles.styleCells[styles.styleCells.length - 1];\n\t\t\t}\n\t\t}\n\n\t\treturn styles;\n\t}\n\n\tgenereateHeaderElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\n\t\trow.columns.forEach((column) => {\n\t\t\tif(column){\n\t\t\t\tvar cellEl = document.createElement(\"th\");\n\t\t\t\tvar classNames = column.component._column.definition.cssClass ? column.component._column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\tcellEl.colSpan = column.width;\n\t\t\t\tcellEl.rowSpan = column.height;\n\n\t\t\t\tcellEl.innerHTML = column.value;\n\n\t\t\t\tif(this.cloneTableStyle){\n\t\t\t\t\tcellEl.style.boxSizing = \"border-box\";\n\t\t\t\t}\n\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\n\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"text-align\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"background-color\", \"color\", \"font-weight\", \"font-family\", \"font-size\"]);\n\t\t\t\tthis.mapElementStyles(column.component._column.contentElement, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\t\t\tif(column.component._column.visible){\n\t\t\t\t\tthis.mapElementStyles(column.component.getElement(), cellEl, [\"width\"]);\n\t\t\t\t}else{\n\t\t\t\t\tif(column.component._column.definition.width){\n\t\t\t\t\t\tcellEl.style.width = column.component._column.definition.width + \"px\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(column.component._column.parent){\n\t\t\t\t\tthis.mapElementStyles(column.component._column.parent.groupElement, cellEl, [\"border-top\"]);\n\t\t\t\t}\n\n\t\t\t\trowEl.appendChild(cellEl);\n\t\t\t}\n\t\t});\n\n\t\treturn rowEl;\n\t}\n\n\tgenereateGroupElement(row, setup, styles){\n\n\t\tvar rowEl = document.createElement(\"tr\"),\n\t\tcellEl = document.createElement(\"td\"),\n\t\tgroup = row.columns[0];\n\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\t\tif(setup.groupHeader && setup.groupHeader[row.indent]){\n\t\t\tgroup.value = setup.groupHeader[row.indent](group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t}else{\n\t\t\tif(setup.groupHeader === false){\n\t\t\t\tgroup.value = group.value;\n\t\t\t}else{\n\t\t\t\tgroup.value = row.component._group.generator(group.value, row.component._group.getRowCount(), row.component._group.getData(), row.component);\n\t\t\t}\n\t\t}\n\n\t\tcellEl.colSpan = group.width;\n\t\tcellEl.innerHTML = group.value;\n\n\t\trowEl.classList.add(\"tabulator-print-table-group\");\n\t\trowEl.classList.add(\"tabulator-group-level-\" + row.indent);\n\n\t\tif(group.component.isVisible()){\n\t\t\trowEl.classList.add(\"tabulator-group-visible\");\n\t\t}\n\n\t\tthis.mapElementStyles(styles.firstGroup, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\t\tthis.mapElementStyles(styles.firstGroup, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\"]);\n\n\t\trowEl.appendChild(cellEl);\n\n\t\treturn rowEl;\n\t}\n\n\tgenereateCalcElement(row, setup, styles){\n\t\tvar rowEl = this.genereateRowElement(row, setup, styles);\n\n\t\trowEl.classList.add(\"tabulator-print-table-calcs\");\n\t\tthis.mapElementStyles(styles.calcRow, rowEl, [\"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"background-color\"]);\n\n\t\treturn rowEl;\n\t}\n\n\tgenereateRowElement(row, setup, styles){\n\t\tvar rowEl = document.createElement(\"tr\");\n\n\t\trowEl.classList.add(\"tabulator-print-table-row\");\n\n\t\trow.columns.forEach((col) => {\n\t\t\tif(col){\n\t\t\t\tvar cellEl = document.createElement(\"td\"),\n\t\t\t\tcolumn = col.component._column,\n\t\t\t\tindex = this.table.columnManager.findColumnIndex(column),\n\t\t\t\tvalue = col.value;\n\n\t\t\t\tvar cellWrapper = {\n\t\t\t\t\tmodules:{},\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn value;\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn cellEl;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\treturn row.component.getData();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn row.component;\n\t\t\t\t\t},\n\t\t\t\t\tgetComponent:function(){\n\t\t\t\t\t\treturn cellWrapper;\n\t\t\t\t\t},\n\t\t\t\t\tcolumn:column,\n\t\t\t\t};\n\n\t\t\t\tvar classNames = column.definition.cssClass ? column.definition.cssClass.split(\" \") : [];\n\n\t\t\t\tclassNames.forEach(function(className) {\n\t\t\t\t\tcellEl.classList.add(className);\n\t\t\t\t});\n\n\t\t\t\tif(this.table.modExists(\"format\") && this.config.formatCells !== false){\n\t\t\t\t\tvalue = this.table.modules.format.formatExportValue(cellWrapper, this.colVisProp);\n\t\t\t\t}else{\n\t\t\t\t\tswitch(typeof value){\n\t\t\t\t\t\tcase \"object\":\n\t\t\t\t\t\tvalue = JSON.stringify(value);\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\t\tcase \"null\":\n\t\t\t\t\t\tvalue = \"\";\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\tvalue = value;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(value instanceof Node){\n\t\t\t\t\tcellEl.appendChild(value);\n\t\t\t\t}else{\n\t\t\t\t\tcellEl.innerHTML = value;\n\t\t\t\t}\n\n\t\t\t\tif(styles.styleCells[index] || styles.firstCell){\n\t\t\t\t\tthis.mapElementStyles(styles.styleCells[index] || styles.firstCell, cellEl, [\"padding-top\", \"padding-left\", \"padding-right\", \"padding-bottom\", \"border-top\", \"border-left\", \"border-right\", \"border-bottom\", \"color\", \"font-weight\", \"font-family\", \"font-size\", \"text-align\"]);\n\n\t\t\t\t\tif(column.definition.align){\n\t\t\t\t\t\tcellEl.style.textAlign = column.definition.align;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(this.table.options.dataTree && this.config.dataTree !== false){\n\t\t\t\t\tif((setup.treeElementField && setup.treeElementField == column.field) || (!setup.treeElementField && i == 0)){\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.controlEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.controlEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif(row.component._row.modules.dataTree.branchEl){\n\t\t\t\t\t\t\tcellEl.insertBefore(row.component._row.modules.dataTree.branchEl.cloneNode(true), cellEl.firstChild);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\trowEl.appendChild(cellEl);\n\n\t\t\t\tif(cellWrapper.modules.format && cellWrapper.modules.format.renderedCallback){\n\t\t\t\t\tcellWrapper.modules.format.renderedCallback();\n\t\t\t\t}\n\n\t\t\t\tif(setup.rowFormatter && this.config.formatCells !== false){\n\t\t\t\t\tsetup.rowFormatter(row.component);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn rowEl;\n\t}\n\n\tgenereateHTMLTable(list){\n\t\tvar holder = document.createElement(\"div\");\n\n\t\tholder.appendChild(this.genereateTableElement(list));\n\n\t\treturn holder.innerHTML;\n\t}\n\n\tgetHtml(visible, style, config, colVisProp){\n\t\tvar list = this.generateExportList(config || this.table.options.htmlOutputConfig, style, visible, colVisProp || \"htmlOutput\");\n\n\t\treturn this.genereateHTMLTable(list);\n\t}\n\n\tmapElementStyles(from, to, props){\n\t\tif(this.cloneTableStyle && from && to){\n\n\t\t\tvar lookup = {\n\t\t\t\t\"background-color\" : \"backgroundColor\",\n\t\t\t\t\"color\" : \"fontColor\",\n\t\t\t\t\"width\" : \"width\",\n\t\t\t\t\"font-weight\" : \"fontWeight\",\n\t\t\t\t\"font-family\" : \"fontFamily\",\n\t\t\t\t\"font-size\" : \"fontSize\",\n\t\t\t\t\"text-align\" : \"textAlign\",\n\t\t\t\t\"border-top\" : \"borderTop\",\n\t\t\t\t\"border-left\" : \"borderLeft\",\n\t\t\t\t\"border-right\" : \"borderRight\",\n\t\t\t\t\"border-bottom\" : \"borderBottom\",\n\t\t\t\t\"padding-top\" : \"paddingTop\",\n\t\t\t\t\"padding-left\" : \"paddingLeft\",\n\t\t\t\t\"padding-right\" : \"paddingRight\",\n\t\t\t\t\"padding-bottom\" : \"paddingBottom\",\n\t\t\t};\n\n\t\t\tif(window.getComputedStyle){\n\t\t\t\tvar fromStyle = window.getComputedStyle(from);\n\n\t\t\t\tprops.forEach(function(prop){\n\t\t\t\t\tto.style[lookup[prop]] = fromStyle.getPropertyValue(prop);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n}\n\nExport.moduleName = \"export\";\n\nexport default Export;\n","export default {\n\n\t//equal to\n\t\"=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal == filterVal ? true : false;\n\t},\n\n\t//less than\n\t\"<\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal < filterVal ? true : false;\n\t},\n\n\t//less than or equal to\n\t\"<=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal <= filterVal ? true : false;\n\t},\n\n\t//greater than\n\t\">\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal > filterVal ? true : false;\n\t},\n\n\t//greater than or equal to\n\t\">=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal >= filterVal ? true : false;\n\t},\n\n\t//not equal to\n\t\"!=\":function(filterVal, rowVal, rowData, filterParams){\n\t\treturn rowVal != filterVal ? true : false;\n\t},\n\n\t\"regex\":function(filterVal, rowVal, rowData, filterParams){\n\n\t\tif(typeof filterVal == \"string\"){\n\t\t\tfilterVal = new RegExp(filterVal);\n\t\t}\n\n\t\treturn filterVal.test(rowVal);\n\t},\n\n\t//contains the string\n\t\"like\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().indexOf(filterVal.toLowerCase()) > -1;\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//contains the keywords\n\t\"keywords\":function(filterVal, rowVal, rowData, filterParams){\n\t\tvar keywords = filterVal.toLowerCase().split(typeof filterParams.separator === \"undefined\" ? \" \" : filterParams.separator),\n\t\tvalue = String(rowVal === null || typeof rowVal === \"undefined\" ? \"\" : rowVal).toLowerCase(),\n\t\tmatches = [];\n\n\t\tkeywords.forEach((keyword) =>{\n\t\t\tif(value.includes(keyword)){\n\t\t\t\tmatches.push(true);\n\t\t\t}\n\t\t});\n\n\t\treturn filterParams.matchAll ? matches.length === keywords.length : !!matches.length;\n\t},\n\n\t//starts with the string\n\t\"starts\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().startsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//ends with the string\n\t\"ends\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(filterVal === null || typeof filterVal === \"undefined\"){\n\t\t\treturn rowVal === filterVal ? true : false;\n\t\t}else{\n\t\t\tif(typeof rowVal !== 'undefined' && rowVal !== null){\n\t\t\t\treturn String(rowVal).toLowerCase().endsWith(filterVal.toLowerCase());\n\t\t\t}\n\t\t\telse{\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t},\n\n\t//in array\n\t\"in\":function(filterVal, rowVal, rowData, filterParams){\n\t\tif(Array.isArray(filterVal)){\n\t\t\treturn filterVal.length ? filterVal.indexOf(rowVal) > -1 : true;\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - filter value is not an array:\", filterVal);\n\t\t\treturn false;\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultFilters from './defaults/filters.js';\n\nclass Filter extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.filterList = []; //hold filter list\n\t\tthis.headerFilters = {}; //hold column filters\n\t\tthis.headerFilterColumns = []; //hold columns that use header filters\n\n\t\tthis.prevHeaderFilterChangeCheck = \"\";\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.changed = false; //has filtering changed since last render\n\t\tthis.tableInitialized = false;\n\n\t\tthis.registerTableOption(\"filterMode\", \"local\"); //local or remote filtering\n\n\t\tthis.registerTableOption(\"initialFilter\", false); //initial filtering criteria\n\t\tthis.registerTableOption(\"initialHeaderFilter\", false); //initial header filtering criteria\n\t\tthis.registerTableOption(\"headerFilterLiveFilterDelay\", 300); //delay before updating column after user types in header filter\n\n\t\tthis.registerColumnOption(\"headerFilter\");\n\t\tthis.registerColumnOption(\"headerFilterPlaceholder\");\n\t\tthis.registerColumnOption(\"headerFilterParams\");\n\t\tthis.registerColumnOption(\"headerFilterEmptyCheck\");\n\t\tthis.registerColumnOption(\"headerFilterFunc\");\n\t\tthis.registerColumnOption(\"headerFilterFuncParams\");\n\t\tthis.registerColumnOption(\"headerFilterLiveFilter\");\n\n\t\tthis.registerTableFunction(\"searchRows\", this.searchRows.bind(this));\n\t\tthis.registerTableFunction(\"searchData\", this.searchData.bind(this));\n\n\t\tthis.registerTableFunction(\"setFilter\", this.userSetFilter.bind(this));\n\t\tthis.registerTableFunction(\"refreshFilter\", this.userRefreshFilter.bind(this));\n\t\tthis.registerTableFunction(\"addFilter\", this.userAddFilter.bind(this));\n\t\tthis.registerTableFunction(\"getFilters\", this.getFilters.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterFocus\", this.userSetHeaderFilterFocus.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilterValue\", this.userGetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"setHeaderFilterValue\", this.userSetHeaderFilterValue.bind(this));\n\t\tthis.registerTableFunction(\"getHeaderFilters\", this.getHeaderFilters.bind(this));\n\t\tthis.registerTableFunction(\"removeFilter\", this.userRemoveFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearFilter\", this.userClearFilter.bind(this));\n\t\tthis.registerTableFunction(\"clearHeaderFilter\", this.userClearHeaderFilter.bind(this));\n\n\t\tthis.registerComponentFunction(\"column\", \"headerFilterFocus\", this.setHeaderFilterFocus.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"reloadHeaderFilter\", this.reloadHeaderFilter.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"getHeaderFilterValue\", this.getHeaderFilterValue.bind(this));\n\t\tthis.registerComponentFunction(\"column\", \"setHeaderFilterValue\", this.setHeaderFilterValue.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"column-init\", this.initializeColumnHeaderFilter.bind(this));\n\t\tthis.subscribe(\"column-width-fit-before\", this.hideHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"column-width-fit-after\", this.showHeaderFilterElements.bind(this));\n\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\n\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\tthis.subscribe(\"data-params\", this.remoteFilterParams.bind(this));\n\t\t}\n\n\t\tthis.registerDataHandler(this.filter.bind(this), 10);\n\t}\n\n\ttableBuilt(){\n\t\tif(this.table.options.initialFilter){\n\t\t\tthis.setFilter(this.table.options.initialFilter);\n\t\t}\n\n\t\tif(this.table.options.initialHeaderFilter){\n\t\t\tthis.table.options.initialHeaderFilter.forEach((item) => {\n\n\t\t\t\tvar column = this.table.columnManager.findColumn(item.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tthis.setHeaderFilterValue(column, item.value);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", item.field);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tthis.tableInitialized = true;\n\t}\n\n\tremoteFilterParams(data, config, silent, params){\n\t\tparams.filter = this.getFilters(true, true);\n\t\treturn params;\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t//set standard filters\n\tuserSetFilter(field, type, value, params){\n\t\tthis.setFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\t//set standard filters\n\tuserRefreshFilter(){\n\t\tthis.refreshFilter();\n\t}\n\n\t//add filter to array\n\tuserAddFilter(field, type, value, params){\n\t\tthis.addFilter(field, type, value, params);\n\t\tthis.refreshFilter();\n\t}\n\n\tuserSetHeaderFilterFocus(field){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterFocus(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tuserGetHeaderFilterValue(field) {\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\treturn this.getHeaderFilterValue(column);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t}\n\t}\n\n\tuserSetHeaderFilterValue(field, value){\n\t\tvar column = this.table.columnManager.findColumn(field);\n\n\t\tif(column){\n\t\t\tthis.setHeaderFilterValue(column, value);\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//remove filter from array\n\tuserRemoveFilter(field, type, value){\n\t\tthis.removeFilter(field, type, value);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear filters\n\tuserClearFilter(all){\n\t\tthis.clearFilter(all);\n\t\tthis.refreshFilter();\n\t}\n\n\t//clear header filters\n\tuserClearHeaderFilter(){\n\t\tthis.clearHeaderFilter();\n\t\tthis.refreshFilter();\n\t}\n\n\n\t//search for specific row components\n\tsearchRows(field, type, value){\n\t\treturn this.search(\"rows\", field, type, value);\n\t}\n\n\t//search for specific data\n\tsearchData(field, type, value){\n\t\treturn this.search(\"data\", field, type, value);\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumnHeaderFilter(column){\n\t\tvar def = column.definition;\n\n\t\tif(def.headerFilter){\n\n\t\t\tif(typeof def.headerFilterPlaceholder !== \"undefined\" && def.field){\n\t\t\t\tthis.module(\"localize\").setHeaderFilterColumnPlaceholder(def.field, def.headerFilterPlaceholder);\n\t\t\t}\n\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\n\t//initialize column header filter\n\tinitializeColumn(column, value){\n\t\tvar self = this,\n\t\tfield = column.getField(),\n\t\tparams;\n\n\t\t//handle successfull value change\n\t\tfunction success(value){\n\t\t\tvar filterType = (column.modules.filter.tagType == \"input\" && column.modules.filter.attrType == \"text\") || column.modules.filter.tagType == \"textarea\" ? \"partial\" : \"match\",\n\t\t\ttype = \"\",\n\t\t\tfilterChangeCheck = \"\",\n\t\t\tfilterFunc;\n\n\t\t\tif(typeof column.modules.filter.prevSuccess === \"undefined\" || column.modules.filter.prevSuccess !== value){\n\n\t\t\t\tcolumn.modules.filter.prevSuccess = value;\n\n\t\t\t\tif(!column.modules.filter.emptyFunc(value)){\n\t\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\t\tswitch(typeof column.definition.headerFilterFunc){\n\t\t\t\t\t\tcase \"string\":\n\t\t\t\t\t\tif(Filter.filters[column.definition.headerFilterFunc]){\n\t\t\t\t\t\t\ttype = column.definition.headerFilterFunc;\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\t\treturn Filter.filters[column.definition.headerFilterFunc](value, fieldVal, data, params);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tconsole.warn(\"Header Filter Error - Matching filter function not found: \", column.definition.headerFilterFunc);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase \"function\":\n\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\tvar params = column.definition.headerFilterFuncParams || {};\n\t\t\t\t\t\t\tvar fieldVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\tparams = typeof params === \"function\" ? params(value, fieldVal, data) : params;\n\n\t\t\t\t\t\t\treturn column.definition.headerFilterFunc(value, fieldVal, data, params);\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\ttype = filterFunc;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!filterFunc){\n\t\t\t\t\t\tswitch(filterType){\n\t\t\t\t\t\t\tcase \"partial\":\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\tvar colVal = column.getFieldValue(data);\n\n\t\t\t\t\t\t\t\tif(typeof colVal !== 'undefined' && colVal !== null){\n\t\t\t\t\t\t\t\t\treturn String(colVal).toLowerCase().indexOf(String(value).toLowerCase()) > -1;\n\t\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\ttype = \"like\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\t\t\treturn column.getFieldValue(data) == value;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\ttype = \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tself.headerFilters[field] = {value:value, func:filterFunc, type:type, params:params || {}};\n\t\t\t\t}else{\n\t\t\t\t\tdelete self.headerFilters[field];\n\t\t\t\t}\n\n\t\t\t\tcolumn.modules.filter.value = value;\n\n\t\t\t\tfilterChangeCheck = JSON.stringify(self.headerFilters);\n\n\t\t\t\tif(self.prevHeaderFilterChangeCheck !== filterChangeCheck){\n\t\t\t\t\tself.prevHeaderFilterChangeCheck = filterChangeCheck;\n\n\t\t\t\t\tself.trackChanges();\n\t\t\t\t\tself.refreshFilter();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\tcolumn.modules.filter = {\n\t\t\tsuccess:success,\n\t\t\tattrType:false,\n\t\t\ttagType:false,\n\t\t\temptyFunc:false,\n\t\t};\n\n\t\tthis.generateHeaderFilterElement(column);\n\t}\n\n\tgenerateHeaderFilterElement(column, initialValue, reinitialize){\n\t\tvar self = this,\n\t\tsuccess = column.modules.filter.success,\n\t\tfield = column.getField(),\n\t\tfilterElement, editor, editorElement, cellWrapper, typingTimer, searchTrigger, params;\n\n\t\tcolumn.modules.filter.value = initialValue;\n\n\t\t//handle aborted edit\n\t\tfunction cancel(){}\n\n\t\tif(column.modules.filter.headerElement && column.modules.filter.headerElement.parentNode){\n\t\t\tcolumn.contentElement.removeChild(column.modules.filter.headerElement.parentNode);\n\t\t}\n\n\t\tif(field){\n\n\t\t\t//set empty value function\n\t\t\tcolumn.modules.filter.emptyFunc = column.definition.headerFilterEmptyCheck || function(value){\n\t\t\t\treturn !value && value !== \"0\" && value !== 0;\n\t\t\t};\n\n\t\t\tfilterElement = document.createElement(\"div\");\n\t\t\tfilterElement.classList.add(\"tabulator-header-filter\");\n\n\t\t\t//set column editor\n\t\t\tswitch(typeof column.definition.headerFilter){\n\t\t\t\tcase \"string\":\n\t\t\t\tif(self.table.modules.edit.editors[column.definition.headerFilter]){\n\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.headerFilter];\n\n\t\t\t\t\tif((column.definition.headerFilter === \"tick\" || column.definition.headerFilter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot build header filter, No such editor found: \", column.definition.editor);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\teditor = column.definition.headerFilter;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"boolean\":\n\t\t\t\tif(column.modules.edit && column.modules.edit.editor){\n\t\t\t\t\teditor = column.modules.edit.editor;\n\t\t\t\t}else{\n\t\t\t\t\tif(column.definition.formatter && self.table.modules.edit.editors[column.definition.formatter]){\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[column.definition.formatter];\n\n\t\t\t\t\t\tif((column.definition.formatter === \"tick\" || column.definition.formatter === \"tickCross\") && !column.definition.headerFilterEmptyCheck){\n\t\t\t\t\t\t\tcolumn.modules.filter.emptyFunc = function(value){\n\t\t\t\t\t\t\t\treturn value !== true && value !== false;\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\teditor = self.table.modules.edit.editors[\"input\"];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(editor){\n\n\t\t\t\tcellWrapper = {\n\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\treturn typeof initialValue !== \"undefined\" ? initialValue : \"\";\n\t\t\t\t\t},\n\t\t\t\t\tgetField:function(){\n\t\t\t\t\t\treturn column.definition.field;\n\t\t\t\t\t},\n\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\treturn filterElement;\n\t\t\t\t\t},\n\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t},\n\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tnormalizeHeight:function(){\n\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tparams = column.definition.headerFilterParams || {};\n\n\t\t\t\tparams = typeof params === \"function\" ? params.call(self.table, cellWrapper) : params;\n\n\t\t\t\teditorElement = editor.call(this.table.modules.edit, cellWrapper, function(){}, success, cancel, params);\n\n\t\t\t\tif(!editorElement){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor returned a value of false\");\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif(!(editorElement instanceof Node)){\n\t\t\t\t\tconsole.warn(\"Filter Error - Cannot add filter to \" + field + \" column, editor should return an instance of Node, the editor returned:\", editorElement);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t//set Placeholder Text\n\t\t\t\tif(field){\n\t\t\t\t\tself.langBind(\"headerFilters|columns|\" + column.definition.field, function(value){\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", typeof value !== \"undefined\" && value ? value : self.langText(\"headerFilters|default\"));\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tself.langBind(\"headerFilters|default\", function(value){\n\t\t\t\t\t\teditorElement.setAttribute(\"placeholder\", value);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\t//focus on element on click\n\t\t\t\teditorElement.addEventListener(\"click\", function(e){\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\teditorElement.focus();\n\t\t\t\t});\n\n\t\t\t\teditorElement.addEventListener(\"focus\", (e) => {\n\t\t\t\t\tvar left = this.table.columnManager.element.scrollLeft;\n\n\t\t\t\t\tvar headerPos = this.table.rowManager.element.scrollLeft + parseInt(this.table.columnManager.element.style.marginLeft);\n\n\t\t\t\t\tif(left !== headerPos){\n\t\t\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\t\t\tthis.table.columnManager.scrollHorizontal(left);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t//live update filters as user types\n\t\t\t\ttypingTimer = false;\n\n\t\t\t\tsearchTrigger = function(e){\n\t\t\t\t\tif(typingTimer){\n\t\t\t\t\t\tclearTimeout(typingTimer);\n\t\t\t\t\t}\n\n\t\t\t\t\ttypingTimer = setTimeout(function(){\n\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t},self.table.options.headerFilterLiveFilterDelay);\n\t\t\t\t};\n\n\t\t\t\tcolumn.modules.filter.headerElement = editorElement;\n\t\t\t\tcolumn.modules.filter.attrType = editorElement.hasAttribute(\"type\") ? editorElement.getAttribute(\"type\").toLowerCase() : \"\" ;\n\t\t\t\tcolumn.modules.filter.tagType = editorElement.tagName.toLowerCase();\n\n\t\t\t\tif(column.definition.headerFilterLiveFilter !== false){\n\n\t\t\t\t\tif (\n\t\t\t\t\t\t!(\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'autocomplete' ||\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === 'tickCross' ||\n\t\t\t\t\t\t\t((column.definition.editor === 'autocomplete' ||\n\t\t\t\t\t\t\t\tcolumn.definition.editor === 'tickCross') &&\n\t\t\t\t\t\t\tcolumn.definition.headerFilter === true)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t) {\n\t\t\t\t\t\teditorElement.addEventListener(\"keyup\", searchTrigger);\n\t\t\t\t\teditorElement.addEventListener(\"search\", searchTrigger);\n\n\n\t\t\t\t\t//update number filtered columns on change\n\t\t\t\t\tif(column.modules.filter.attrType == \"number\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"change\", function(e){\n\t\t\t\t\t\t\tsuccess(editorElement.value);\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t//change text inputs to search inputs to allow for clearing of field\n\t\t\t\t\tif(column.modules.filter.attrType == \"text\" && this.table.browser !== \"ie\"){\n\t\t\t\t\t\teditorElement.setAttribute(\"type\", \"search\");\n\t\t\t\t\t\t// editorElement.off(\"change blur\"); //prevent blur from triggering filter and preventing selection click\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t\t//prevent input and select elements from propegating click to column sorters etc\n\t\t\t\t\tif(column.modules.filter.tagType == \"input\" || column.modules.filter.tagType == \"select\" || column.modules.filter.tagType == \"textarea\"){\n\t\t\t\t\t\teditorElement.addEventListener(\"mousedown\",function(e){\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfilterElement.appendChild(editorElement);\n\n\t\t\t\tcolumn.contentElement.appendChild(filterElement);\n\n\t\t\t\tif(!reinitialize){\n\t\t\t\t\tself.headerFilterColumns.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Filter Error - Cannot add header filter, column has no field set:\", column.definition.title);\n\t\t}\n\t}\n\n\t//hide all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\thideHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = 'none';\n\t\t\t}\n\t\t});\n\t}\n\n\t//show all header filter elements (used to ensure correct column widths in \"fitData\" layout mode)\n\tshowHeaderFilterElements(){\n\t\tthis.headerFilterColumns.forEach(function(column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tcolumn.modules.filter.headerElement.style.display = '';\n\t\t\t}\n\t\t});\n\t}\n\n\t//programatically set focus of header filter\n\tsetHeaderFilterFocus(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\tcolumn.modules.filter.headerElement.focus();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Filter Focus Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programmatically get value of header filter\n\tgetHeaderFilterValue(column){\n\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\treturn column.modules.filter.value;\n\t\t} else {\n\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t}\n\t}\n\n\t//programatically set value of header filter\n\tsetHeaderFilterValue(column, value){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, value, true);\n\t\t\t\tcolumn.modules.filter.success(value);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\treloadHeaderFilter(column){\n\t\tif (column){\n\t\t\tif(column.modules.filter && column.modules.filter.headerElement){\n\t\t\t\tthis.generateHeaderFilterElement(column, column.modules.filter.value, true);\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Column Filter Error - No header filter set on column:\", column.getField());\n\t\t\t}\n\t\t}\n\t}\n\n\trefreshFilter(){\n\t\tif(this.tableInitialized){\n\t\t\tif(this.table.options.filterMode === \"remote\"){\n\t\t\t\tthis.reloadData();\n\t\t\t}else{\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the filters has changed since last use\n\ttrackChanges(){\n\t\tthis.changed = true;\n\t\tthis.dispatch(\"filter-changed\");\n\t}\n\n\t//check if the filters has changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//set standard filters\n\tsetFilter(field, type, value, params){\n\t\tthis.filterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tthis.addFilter(field);\n\t}\n\n\t//add filter to array\n\taddFilter(field, type, value, params){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value, params:params}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tthis.filterList.push(filter);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t});\n\n\t\tif(changed){\n\t\t\tthis.trackChanges();\n\t\t}\n\t}\n\n\tfindFilter(filter){\n\t\tvar column;\n\n\t\tif(Array.isArray(filter)){\n\t\t\treturn this.findSubFilters(filter);\n\t\t}\n\n\t\tvar filterFunc = false;\n\n\t\tif(typeof filter.field == \"function\"){\n\t\t\tfilterFunc = function(data){\n\t\t\t\treturn filter.field(data, filter.type || {})// pass params to custom filter function\n\t\t\t};\n\t\t}else{\n\n\t\t\tif(Filter.filters[filter.type]){\n\n\t\t\t\tcolumn = this.table.columnManager.getColumnByField(filter.field);\n\n\t\t\t\tif(column){\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, column.getFieldValue(data), data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}else{\n\t\t\t\t\tfilterFunc = function(data){\n\t\t\t\t\t\treturn Filter.filters[filter.type](filter.value, data[filter.field], data, filter.params || {});\n\t\t\t\t\t};\n\t\t\t\t}\n\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No such filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t}\n\n\t\tfilter.func = filterFunc;\n\n\t\treturn filter.func ? filter : false;\n\t}\n\n\tfindSubFilters(filters){\n\t\tvar output = [];\n\n\t\tfilters.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\toutput.push(filter);\n\t\t\t}\n\t\t});\n\n\t\treturn output.length ? output : false;\n\t}\n\n\t//get all filters\n\tgetFilters(all, ajax){\n\t\tvar output = [];\n\n\t\tif(all){\n\t\t\toutput = this.getHeaderFilters();\n\t\t}\n\n\t\tif(ajax){\n\t\t\toutput.forEach(function(item){\n\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\titem.type = \"function\";\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\toutput = output.concat(this.filtersToArray(this.filterList, ajax));\n\n\t\treturn output;\n\t}\n\n\t//filter to Object\n\tfiltersToArray(filterList, ajax){\n\t\tvar output = [];\n\n\t\tfilterList.forEach((filter) => {\n\t\t\tvar item;\n\n\t\t\tif(Array.isArray(filter)){\n\t\t\t\toutput.push(this.filtersToArray(filter, ajax));\n\t\t\t}else{\n\t\t\t\titem = {field:filter.field, type:filter.type, value:filter.value}\n\n\t\t\t\tif(ajax){\n\t\t\t\t\tif(typeof item.type == \"function\"){\n\t\t\t\t\t\titem.type = \"function\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\toutput.push(item);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get all filters\n\tgetHeaderFilters(){\n\t\tvar output = [];\n\n\t\tfor(var key in this.headerFilters){\n\t\t\toutput.push({field:key, type:this.headerFilters[key].type, value:this.headerFilters[key].value});\n\t\t}\n\n\t\treturn output;\n\t}\n\n\t//remove filter from array\n\tremoveFilter(field, type, value){\n\t\tvar changed = false;\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tvar index = -1;\n\n\t\t\tif(typeof filter.field == \"object\"){\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter === element;\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tindex = this.filterList.findIndex((element) => {\n\t\t\t\t\treturn filter.field === element.field && filter.type === element.type  && filter.value === element.value;\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.filterList.splice(index, 1);\n\t\t\t\tchanged = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Filter Error - No matching filter type found, ignoring: \", filter.type);\n\t\t\t}\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear filters\n\tclearFilter(all){\n\t\tthis.filterList = [];\n\n\t\tif(all){\n\t\t\tthis.clearHeaderFilter();\n\t\t}\n\n\t\tthis.trackChanges();\n\t}\n\n\t//clear header filters\n\tclearHeaderFilter(){\n\t\tthis.headerFilters = {};\n\t\tthis.prevHeaderFilterChangeCheck = \"{}\";\n\n\t\tthis.headerFilterColumns.forEach((column) => {\n\t\t\tif(typeof column.modules.filter.value !== \"undefined\"){\n\t\t\t\tdelete column.modules.filter.value;\n\t\t\t}\n\t\t\tcolumn.modules.filter.prevSuccess = undefined;\n\t\t\tthis.reloadHeaderFilter(column);\n\t\t});\n\n\t\tthis.trackChanges();\n\t}\n\n\t//search data and return matching rows\n\tsearch (searchType, field, type, value){\n\t\tvar activeRows = [],\n\t\tfilterList = [];\n\n\t\tif(!Array.isArray(field)){\n\t\t\tfield = [{field:field, type:type, value:value}];\n\t\t}\n\n\t\tfield.forEach((filter) => {\n\t\t\tfilter = this.findFilter(filter);\n\n\t\t\tif(filter){\n\t\t\t\tfilterList.push(filter);\n\t\t\t}\n\t\t});\n\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\tvar match = true;\n\n\t\t\tfilterList.forEach((filter) => {\n\t\t\t\tif(!this.filterRecurse(filter, row.getData())){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tactiveRows.push(searchType === \"data\" ? row.getData(\"data\") : row.getComponent());\n\t\t\t}\n\n\t\t});\n\n\t\treturn activeRows;\n\t}\n\n\t//filter row array\n\tfilter(rowList, filters){\n\t\tvar activeRows = [],\n\t\tactiveRowComponents = [];\n\n\t\tif(this.subscribedExternal(\"dataFiltering\")){\n\t\t\tthis.dispatchExternal(\"dataFiltering\", this.getFilters(true));\n\t\t}\n\n\t\tif(this.table.options.filterMode !== \"remote\" && (this.filterList.length || Object.keys(this.headerFilters).length)){\n\n\t\t\trowList.forEach((row) => {\n\t\t\t\tif(this.filterRow(row)){\n\t\t\t\t\tactiveRows.push(row);\n\t\t\t\t}\n\t\t\t});\n\n\t\t}else{\n\t\t\tactiveRows = rowList.slice(0);\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataFiltered\")){\n\n\t\t\tactiveRows.forEach((row) => {\n\t\t\t\tactiveRowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataFiltered\", this.getFilters(true), activeRowComponents);\n\t\t}\n\n\t\treturn activeRows;\n\t}\n\n\t//filter individual row\n\tfilterRow(row, filters){\n\t\tvar match = true,\n\t\tdata = row.getData();\n\n\t\tthis.filterList.forEach((filter) => {\n\t\t\tif(!this.filterRecurse(filter, data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\n\n\t\tfor(var field in this.headerFilters){\n\t\t\tif(!this.headerFilters[field].func(data)){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t}\n\n\t\treturn match;\n\t}\n\n\tfilterRecurse(filter, data){\n\t\tvar match = false;\n\n\t\tif(Array.isArray(filter)){\n\t\t\tfilter.forEach((subFilter) => {\n\t\t\t\tif(this.filterRecurse(subFilter, data)){\n\t\t\t\t\tmatch = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tmatch = filter.func(data);\n\t\t}\n\n\t\treturn match;\n\t}\n}\n\nFilter.moduleName = \"filter\";\n\n//load defaults\nFilter.filters = defaultFilters;\n\nexport default Filter;","import plaintext from './formatters/plaintext.js';\nimport html from './formatters/html.js';\nimport textarea from './formatters/textarea.js';\nimport money from './formatters/money.js';\nimport link from './formatters/link.js';\nimport image from './formatters/image.js';\nimport tickCross from './formatters/tickCross.js';\nimport datetime from './formatters/datetime.js';\nimport datetimediff from './formatters/datetimediff.js';\nimport lookup from './formatters/lookup.js';\nimport star from './formatters/star.js';\nimport traffic from './formatters/traffic.js';\nimport progress from './formatters/progress.js';\nimport color from './formatters/color.js';\nimport buttonTick from './formatters/buttonTick.js';\nimport buttonCross from './formatters/buttonCross.js';\nimport rownum from './formatters/rownum.js';\nimport handle from './formatters/handle.js';\nimport responsiveCollapse from './formatters/responsiveCollapse.js';\nimport rowSelection from './formatters/rowSelection.js';\n\nexport default {\n\tplaintext:plaintext,\n\thtml:html,\n\ttextarea:textarea,\n\tmoney:money,\n\tlink:link,\n\timage:image,\n\ttickCross:tickCross,\n\tdatetime:datetime,\n\tdatetimediff:datetimediff,\n\tlookup:lookup,\n\tstar:star,\n\ttraffic:traffic,\n\tprogress:progress,\n\tcolor:color,\n\tbuttonTick:buttonTick,\n\tbuttonCross:buttonCross,\n\trownum:rownum,\n\thandle:handle,\n\tresponsiveCollapse:responsiveCollapse,\n\trowSelection:rowSelection,\n};","export default function(cell, formatterParams, onRendered){\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n};","export default function(cell, formatterParams, onRendered){\n\treturn cell.getValue();\n};","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.whiteSpace = \"pre-wrap\";\n\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n};","export default function(cell, formatterParams, onRendered){\n\tvar floatVal = parseFloat(cell.getValue()),\n\tsign = \"\",\n\tnumber, integer, decimal, rgx;\n\n\tvar decimalSym = formatterParams.decimal || \".\";\n\tvar thousandSym = formatterParams.thousand || \",\";\n\tvar negativeSign = formatterParams.negativeSign || \"-\";\n\tvar symbol = formatterParams.symbol || \"\";\n\tvar after = !!formatterParams.symbolAfter;\n\tvar precision = typeof formatterParams.precision !== \"undefined\" ? formatterParams.precision : 2;\n\n\tif(isNaN(floatVal)){\n\t\treturn this.emptyToSpace(this.sanitizeHTML(cell.getValue()));\n\t}\n\n\tif(floatVal < 0){\n\t\tfloatVal = Math.abs(floatVal);\n\t\tsign = negativeSign;\n\t}\n\n\tnumber = precision !== false ? floatVal.toFixed(precision) : floatVal;\n\tnumber = String(number).split(\".\");\n\n\tinteger = number[0];\n\tdecimal = number.length > 1 ? decimalSym + number[1] : \"\";\n\n\tif (formatterParams.thousand !== false) {\n\t\trgx = /(\\d+)(\\d{3})/;\n\n\t\twhile (rgx.test(integer)){\n\t\t\tinteger = integer.replace(rgx, \"$1\" + thousandSym + \"$2\");\n\t\t}\n\t}\n\n\treturn after ? sign + integer + decimal + symbol : sign + symbol + integer + decimal;\n};","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\turlPrefix = formatterParams.urlPrefix || \"\",\n\tdownload = formatterParams.download,\n\tlabel = value,\n\tel = document.createElement(\"a\"),\n\tdata;\n\n\tfunction labelTraverse(path, data){\n\t\tvar item = path.shift(),\n\t\tvalue = data[item];\n\t\t\n\t\tif(path.length && typeof value === \"object\"){\n\t\t\treturn labelTraverse(path, value);\n\t\t}\n\n\t\treturn value;\n\t};\n\n\tif(formatterParams.labelField){\n\t\tdata = cell.getData();\n\t\tlabel = labelTraverse(formatterParams.labelField.split(this.table.options.nestedFieldSeparator), data);\n\t}\n\n\tif(formatterParams.label){\n\t\tswitch(typeof formatterParams.label){\n\t\t\tcase \"string\":\n\t\t\tlabel = formatterParams.label;\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tlabel = formatterParams.label(cell);\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(label){\n\t\tif(formatterParams.urlField){\n\t\t\tdata = cell.getData();\n\t\t\tvalue = data[formatterParams.urlField];\n\t\t}\n\n\t\tif(formatterParams.url){\n\t\t\tswitch(typeof formatterParams.url){\n\t\t\t\tcase \"string\":\n\t\t\t\tvalue = formatterParams.url;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\tvalue = formatterParams.url(cell);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tel.setAttribute(\"href\", urlPrefix + value);\n\n\t\tif(formatterParams.target){\n\t\t\tel.setAttribute(\"target\", formatterParams.target);\n\t\t}\n\n\t\tif(formatterParams.download){\n\n\t\t\tif(typeof download == \"function\"){\n\t\t\t\tdownload = download(cell);\n\t\t\t}else{\n\t\t\t\tdownload = download === true ? \"\" : download;\n\t\t\t}\n\n\t\t\tel.setAttribute(\"download\", download);\n\t\t}\n\n\t\tel.innerHTML = this.emptyToSpace(this.sanitizeHTML(label));\n\n\t\treturn el;\n\t}else{\n\t\treturn \"&nbsp;\";\n\t}\n};","export default function(cell, formatterParams, onRendered){\n\tvar el = document.createElement(\"img\"),\n\tsrc = cell.getValue();\n\n\tif(formatterParams.urlPrefix){\n\t\tsrc = formatterParams.urlPrefix + cell.getValue();\n\t}\n\n\tif(formatterParams.urlSuffix){\n\t\tsrc = src + formatterParams.urlSuffix;\n\t}\n\n\tel.setAttribute(\"src\", src);\n\n\tswitch(typeof formatterParams.height){\n\t\tcase \"number\":\n\t\tel.style.height = formatterParams.height + \"px\";\n\t\tbreak;\n\n\t\tcase \"string\":\n\t\tel.style.height = formatterParams.height;\n\t\tbreak;\n\t}\n\n\tswitch(typeof formatterParams.width){\n\t\tcase \"number\":\n\t\tel.style.width = formatterParams.width + \"px\";\n\t\tbreak;\n\n\t\tcase \"string\":\n\t\tel.style.width = formatterParams.width;\n\t\tbreak;\n\t}\n\n\tel.addEventListener(\"load\", function(){\n\t\tcell.getRow().normalizeHeight();\n\t});\n\n\treturn el;\n};","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tempty = formatterParams.allowEmpty,\n\ttruthy = formatterParams.allowTruthy,\n\ttrueValueSet = Object.keys(formatterParams).includes(\"trueValue\"),\n\ttick = typeof formatterParams.tickElement !== \"undefined\" ? formatterParams.tickElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>',\n\tcross = typeof formatterParams.crossElement !== \"undefined\" ? formatterParams.crossElement : '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\"  viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n\n\tif((trueValueSet && value === formatterParams.trueValue) || (!trueValueSet && ((truthy && value) || (value === true || value === \"true\" || value === \"True\" || value === 1 || value === \"1\")))){\n\t\telement.setAttribute(\"aria-checked\", true);\n\t\treturn tick || \"\";\n\t}else{\n\t\tif(empty && (value === \"null\" || value === \"\" || value === null || typeof value === \"undefined\")){\n\t\t\telement.setAttribute(\"aria-checked\", \"mixed\");\n\t\t\treturn \"\";\n\t\t}else{\n\t\t\telement.setAttribute(\"aria-checked\", false);\n\t\t\treturn cross || \"\";\n\t\t}\n\t}\n};","export default function(cell, formatterParams, onRendered){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar\toutputFormat = formatterParams.outputFormat || \"dd/MM/yyyy HH:mm:ss\";\n\tvar\tinvalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\t newDatetime = value;\n\t\t }else if(inputFormat === \"iso\"){\n\t\t\t newDatetime = DT.fromISO(String(value));\n\t\t }else{\n\t\t\t newDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t }\n\n\t\tif(newDatetime.isValid){\n\t\t\tif(formatterParams.timezone){\n\t\t\t\tnewDatetime = newDatetime.setZone(formatterParams.timezone);\n\t\t\t}\n\n\t\t\treturn newDatetime.toFormat(outputFormat);\n\t\t}else{\n\t\t\tif(invalid === true || !value){\n\t\t\t\treturn value;\n\t\t\t}else if(typeof invalid === \"function\"){\n\t\t\t\treturn invalid(value);\n\t\t\t}else{\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetime' formatter is dependant on luxon.js\");\n\t}\n};","export default function (cell, formatterParams, onRendered) {\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar inputFormat = formatterParams.inputFormat || \"yyyy-MM-dd HH:mm:ss\";\n\tvar invalid = typeof formatterParams.invalidPlaceholder !== \"undefined\" ? formatterParams.invalidPlaceholder : \"\";\n\tvar suffix = typeof formatterParams.suffix !== \"undefined\" ? formatterParams.suffix : false;\n\tvar unit = typeof formatterParams.unit !== \"undefined\" ? formatterParams.unit : \"days\";\n\tvar humanize = typeof formatterParams.humanize !== \"undefined\" ? formatterParams.humanize : false;\n\tvar date = typeof formatterParams.date !== \"undefined\" ? formatterParams.date : DT.now();\n\tvar value = cell.getValue();\n\n\tif(typeof DT != \"undefined\"){\n\t\tvar newDatetime;\n\n\t\tif(DT.isDateTime(value)){\n\t\t\t newDatetime = value;\n\t\t }else if(inputFormat === \"iso\"){\n\t\t\t newDatetime = DT.fromISO(String(value));\n\t\t }else{\n\t\t\t newDatetime = DT.fromFormat(String(value), inputFormat);\n\t\t }\n\n\t\tif (newDatetime.isValid){\n\t\t\tif(humanize){\n\t\t\t\treturn newDatetime.diff(date, unit).toHuman()  + (suffix ? \" \" + suffix : \"\");\n\t\t\t}else{\n\t\t\t\treturn parseInt(newDatetime.diff(date, unit)[unit]) + (suffix ? \" \" + suffix : \"\");\n\t\t\t}\n\t\t} else {\n\n\t\t\tif (invalid === true) {\n\t\t\t\treturn value;\n\t\t\t} else if (typeof invalid === \"function\") {\n\t\t\t\treturn invalid(value);\n\t\t\t} else {\n\t\t\t\treturn invalid;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tconsole.error(\"Format Error - 'datetimediff' formatter is dependant on luxon.js\");\n\t}\n};","export default function (cell, formatterParams, onRendered) {\n\tvar value = cell.getValue();\n\n\tif (typeof formatterParams[value] === \"undefined\") {\n\t\tconsole.warn('Missing display value for ' + value);\n\t\treturn value;\n\t}\n\n\treturn formatterParams[value];\n};","export default function(cell, formatterParams, onRendered){\n\tvar value = cell.getValue(),\n\telement = cell.getElement(),\n\tmaxStars = formatterParams && formatterParams.stars ? formatterParams.stars : 5,\n\tstars = document.createElement(\"span\"),\n\tstar = document.createElementNS('http://www.w3.org/2000/svg', \"svg\"),\n\tstarActive = '<polygon fill=\"#FFEA00\" stroke=\"#C1AB60\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>',\n\tstarInactive = '<polygon fill=\"#D2D2D2\" stroke=\"#686868\" stroke-width=\"37.6152\" stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-miterlimit=\"10\" points=\"259.216,29.942 330.27,173.919 489.16,197.007 374.185,309.08 401.33,467.31 259.216,392.612 117.104,467.31 144.25,309.08 29.274,197.007 188.165,173.919 \"/>';\n\n\t//style stars holder\n\tstars.style.verticalAlign = \"middle\";\n\n\t//style star\n\tstar.setAttribute(\"width\", \"14\");\n\tstar.setAttribute(\"height\", \"14\");\n\tstar.setAttribute(\"viewBox\", \"0 0 512 512\");\n\tstar.setAttribute(\"xml:space\", \"preserve\");\n\tstar.style.padding = \"0 1px\";\n\n\tvalue = value && !isNaN(value) ? parseInt(value) : 0;\n\n\tvalue = Math.max(0, Math.min(value, maxStars));\n\n\tfor(var i=1;i<= maxStars;i++){\n\t\tvar nextStar = star.cloneNode(true);\n\t\tnextStar.innerHTML = i <= value ? starActive : starInactive;\n\n\t\tstars.appendChild(nextStar);\n\t}\n\n\telement.style.whiteSpace = \"nowrap\";\n\telement.style.overflow = \"hidden\";\n\telement.style.textOverflow = \"ellipsis\";\n\n\telement.setAttribute(\"aria-label\", value);\n\n\treturn stars;\n};","export default function(cell, formatterParams, onRendered){\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\tel = document.createElement(\"span\"),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tcolors = formatterParams && typeof formatterParams.color !== \"undefined\" ? formatterParams.color : [\"red\", \"orange\", \"green\"],\n\tcolor = \"#666666\",\n\tpercent, percentValue;\n\n\tif(isNaN(value) || typeof cell.getValue() === \"undefined\"){\n\t\treturn;\n\t}\n\n\tel.classList.add(\"tabulator-traffic-light\");\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set color\n\tswitch(typeof colors){\n\t\tcase \"string\":\n\t\tcolor = colors;\n\t\tbreak;\n\t\tcase \"function\":\n\t\tcolor = colors(value);\n\t\tbreak;\n\t\tcase \"object\":\n\t\tif(Array.isArray(colors)){\n\t\t\tvar unit = 100 / colors.length;\n\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\tindex = Math.min(index, colors.length - 1);\n\t\t\tindex = Math.max(index, 0);\n\t\t\tcolor = colors[index];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tel.style.backgroundColor = color;\n\n\treturn el;\n};","import CellComponent from '../../../../core/cell/CellComponent.js';\n\nexport default function(cell, formatterParams, onRendered){ //progress bar\n\tvar value = this.sanitizeHTML(cell.getValue()) || 0,\n\telement = cell.getElement(),\n\tmax = formatterParams && formatterParams.max ? formatterParams.max : 100,\n\tmin = formatterParams && formatterParams.min ? formatterParams.min : 0,\n\tlegendAlign = formatterParams && formatterParams.legendAlign ? formatterParams.legendAlign : \"center\",\n\tpercent, percentValue, color, legend, legendColor, top, left, right, bottom;\n\n\t//make sure value is in range\n\tpercentValue = parseFloat(value) <= max ? parseFloat(value) : max;\n\tpercentValue = parseFloat(percentValue) >= min ? parseFloat(percentValue) : min;\n\n\t//workout percentage\n\tpercent = (max - min) / 100;\n\tpercentValue = Math.round((percentValue - min) / percent);\n\n\t//set bar color\n\tswitch(typeof formatterParams.color){\n\t\tcase \"string\":\n\t\tcolor = formatterParams.color;\n\t\tbreak;\n\t\tcase \"function\":\n\t\tcolor = formatterParams.color(value);\n\t\tbreak;\n\t\tcase \"object\":\n\t\tif(Array.isArray(formatterParams.color)){\n\t\t\tvar unit = 100 / formatterParams.color.length;\n\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\tindex = Math.min(index, formatterParams.color.length - 1);\n\t\t\tindex = Math.max(index, 0);\n\t\t\tcolor = formatterParams.color[index];\n\t\t\tbreak;\n\t\t}\n\t\tdefault:\n\t\tcolor = \"#2DC214\";\n\t}\n\n\t//generate legend\n\tswitch(typeof formatterParams.legend){\n\t\tcase \"string\":\n\t\tlegend = formatterParams.legend;\n\t\tbreak;\n\t\tcase \"function\":\n\t\tlegend = formatterParams.legend(value);\n\t\tbreak;\n\t\tcase \"boolean\":\n\t\tlegend = value;\n\t\tbreak;\n\t\tdefault:\n\t\tlegend = false;\n\t}\n\n\t//set legend color\n\tswitch(typeof formatterParams.legendColor){\n\t\tcase \"string\":\n\t\tlegendColor = formatterParams.legendColor;\n\t\tbreak;\n\t\tcase \"function\":\n\t\tlegendColor = formatterParams.legendColor(value);\n\t\tbreak;\n\t\tcase \"object\":\n\t\tif(Array.isArray(formatterParams.legendColor)){\n\t\t\tvar unit = 100 / formatterParams.legendColor.length;\n\t\t\tvar index = Math.floor(percentValue / unit);\n\n\t\t\tindex = Math.min(index, formatterParams.legendColor.length - 1);\n\t\t\tindex = Math.max(index, 0);\n\t\t\tlegendColor = formatterParams.legendColor[index];\n\t\t}\n\t\tbreak;\n\t\tdefault:\n\t\tlegendColor = \"#000\";\n\t}\n\n\telement.style.minWidth = \"30px\";\n\telement.style.position = \"relative\";\n\n\telement.setAttribute(\"aria-label\", percentValue);\n\n\tvar barEl = document.createElement(\"div\");\n\tbarEl.style.display = \"inline-block\";\n\tbarEl.style.position = \"absolute\";\n\tbarEl.style.width = percentValue + \"%\";\n\tbarEl.style.backgroundColor = color;\n\tbarEl.style.height = \"100%\";\n\n\tbarEl.setAttribute('data-max', max);\n\tbarEl.setAttribute('data-min', min);\n\n\tvar barContainer = document.createElement(\"div\");\n\tbarContainer.style.position = \"relative\";\n\tbarContainer.style.width = \"100%\";\n\tbarContainer.style.height = \"100%\";\n\n\tif(legend){\n\t\tvar legendEl = document.createElement(\"div\");\n\t\tlegendEl.style.position = \"absolute\";\n\t\tlegendEl.style.top = 0;\n\t\tlegendEl.style.left = 0;\n\t\tlegendEl.style.textAlign = legendAlign;\n\t\tlegendEl.style.width = \"100%\";\n\t\tlegendEl.style.color = legendColor;\n\t\tlegendEl.innerHTML = legend;\n\t}\n\n\tonRendered(function(){\n\n\t\t//handle custom element needed if formatter is to be included in printed/downloaded output\n\t\tif(!(cell instanceof CellComponent)){\n\t\t\tvar holderEl = document.createElement(\"div\");\n\t\t\tholderEl.style.position = \"absolute\";\n\t\t\tholderEl.style.top = \"4px\";\n\t\t\tholderEl.style.bottom = \"4px\";\n\t\t\tholderEl.style.left = \"4px\";\n\t\t\tholderEl.style.right = \"4px\";\n\n\t\t\telement.appendChild(holderEl);\n\n\t\t\telement = holderEl;\n\t\t}\n\n\t\telement.appendChild(barContainer);\n\t\tbarContainer.appendChild(barEl);\n\n\t\tif(legend){\n\t\t\tbarContainer.appendChild(legendEl);\n\t\t}\n\t});\n\n\treturn \"\";\n};","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().style.backgroundColor = this.sanitizeHTML(cell.getValue());\n\treturn \"\";\n};","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#2DC214\" clip-rule=\"evenodd\" d=\"M21.652,3.211c-0.293-0.295-0.77-0.295-1.061,0L9.41,14.34  c-0.293,0.297-0.771,0.297-1.062,0L3.449,9.351C3.304,9.203,3.114,9.13,2.923,9.129C2.73,9.128,2.534,9.201,2.387,9.351  l-2.165,1.946C0.078,11.445,0,11.63,0,11.823c0,0.194,0.078,0.397,0.223,0.544l4.94,5.184c0.292,0.296,0.771,0.776,1.062,1.07  l2.124,2.141c0.292,0.293,0.769,0.293,1.062,0l14.366-14.34c0.293-0.294,0.293-0.777,0-1.071L21.652,3.211z\" fill-rule=\"evenodd\"/></svg>';\n};","export default function(cell, formatterParams, onRendered){\n\treturn '<svg enable-background=\"new 0 0 24 24\" height=\"14\" width=\"14\" viewBox=\"0 0 24 24\" xml:space=\"preserve\" ><path fill=\"#CE1515\" d=\"M22.245,4.015c0.313,0.313,0.313,0.826,0,1.139l-6.276,6.27c-0.313,0.312-0.313,0.826,0,1.14l6.273,6.272  c0.313,0.313,0.313,0.826,0,1.14l-2.285,2.277c-0.314,0.312-0.828,0.312-1.142,0l-6.271-6.271c-0.313-0.313-0.828-0.313-1.141,0  l-6.276,6.267c-0.313,0.313-0.828,0.313-1.141,0l-2.282-2.28c-0.313-0.313-0.313-0.826,0-1.14l6.278-6.269  c0.313-0.312,0.313-0.826,0-1.14L1.709,5.147c-0.314-0.313-0.314-0.827,0-1.14l2.284-2.278C4.308,1.417,4.821,1.417,5.135,1.73  L11.405,8c0.314,0.314,0.828,0.314,1.141,0.001l6.276-6.267c0.312-0.312,0.826-0.312,1.141,0L22.245,4.015z\"/></svg>';\n};","export default function(cell, formatterParams, onRendered){\n\treturn this.table.rowManager.activeRows.indexOf(cell.getRow()._getSelf()) + 1 || \"\";\n};","export default function(cell, formatterParams, onRendered){\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\treturn \"<div class='tabulator-row-handle-box'><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div><div class='tabulator-row-handle-bar'></div></div>\";\n};","export default function(cell, formatterParams, onRendered){\n\tvar open = false,\n\tel = document.createElement(\"div\"),\n\tconfig = cell.getRow()._row.modules.responsiveLayout;\n\n\tel.classList.add(\"tabulator-responsive-collapse-toggle\");\n\tel.innerHTML = \"<span class='tabulator-responsive-collapse-toggle-open'>+</span><span class='tabulator-responsive-collapse-toggle-close'>-</span>\";\n\n\tcell.getElement().classList.add(\"tabulator-row-handle\");\n\n\tfunction toggleList(isOpen){\n\t\tvar collapseEl = config.element;\n\n\t\tconfig.open = isOpen;\n\n\t\tif(collapseEl){\n\n\t\t\tif(config.open){\n\t\t\t\tel.classList.add(\"open\");\n\t\t\t\tcollapseEl.style.display = '';\n\t\t\t}else{\n\t\t\t\tel.classList.remove(\"open\");\n\t\t\t\tcollapseEl.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tel.addEventListener(\"click\", function(e){\n\t\te.stopImmediatePropagation();\n\t\ttoggleList(!config.open);\n\t});\n\n\ttoggleList(config.open);\n\n\treturn el;\n};","import RowComponent from '../../../../core/row/RowComponent.js';\n\nexport default function(cell, formatterParams, onRendered){\n\tvar checkbox = document.createElement(\"input\");\n\tvar blocked = false;\n\n\tcheckbox.type = 'checkbox';\n\n\tcheckbox.setAttribute(\"aria-label\", \"Select Row\");\n\t\n\tif(this.table.modExists(\"selectRow\", true)){\n\n\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(typeof cell.getRow == 'function'){\n\t\t\tvar row = cell.getRow();\n\n\t\t\tif(row instanceof RowComponent){\n\n\t\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\t\tif(!blocked){\n\t\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tblocked = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\trow.toggleSelect();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(this.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\tcheckbox.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\tblocked = true;\n\t\t\t\t\t\tthis.table.modules.selectRow.handleComplexRowClick(row._row, e);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tcheckbox.checked = row.isSelected && row.isSelected();\n\t\t\t\tthis.table.modules.selectRow.registerRowSelectCheckbox(row, checkbox);\n\t\t\t}else{\n\t\t\t\tcheckbox = \"\";\n\t\t\t}\n\t\t}else {\n\t\t\tcheckbox.addEventListener(\"change\", (e) => {\n\t\t\t\tif(this.table.modules.selectRow.selectedRows.length){\n\t\t\t\t\tthis.table.deselectRow();\n\t\t\t\t}else {\n\t\t\t\t\tthis.table.selectRow(formatterParams.rowRange);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.modules.selectRow.registerHeaderSelectCheckbox(checkbox);\n\t\t}\n\t}\n\n\treturn checkbox;\n};","import Module from '../../core/Module.js';\n\nimport defaultFormatters from './defaults/formatters.js';\n\nclass Format extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.registerColumnOption(\"formatter\");\n\t\tthis.registerColumnOption(\"formatterParams\");\n\n\t\tthis.registerColumnOption(\"formatterPrint\");\n\t\tthis.registerColumnOption(\"formatterPrintParams\");\n\t\tthis.registerColumnOption(\"formatterClipboard\");\n\t\tthis.registerColumnOption(\"formatterClipboardParams\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutput\");\n\t\tthis.registerColumnOption(\"formatterHtmlOutputParams\");\n\t\tthis.registerColumnOption(\"titleFormatter\");\n\t\tthis.registerColumnOption(\"titleFormatterParams\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-format\", this.formatValue.bind(this));\n\t\tthis.subscribe(\"cell-rendered\", this.cellRendered.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-format\", this.formatHeader.bind(this));\n\t}\n\n\t//initialize column formatter\n\tinitializeColumn(column){\n\t\tcolumn.modules.format = this.lookupFormatter(column, \"\");\n\n\t\tif(typeof column.definition.formatterPrint !== \"undefined\"){\n\t\t\tcolumn.modules.format.print = this.lookupFormatter(column, \"Print\");\n\t\t}\n\n\t\tif(typeof column.definition.formatterClipboard !== \"undefined\"){\n\t\t\tcolumn.modules.format.clipboard = this.lookupFormatter(column, \"Clipboard\");\n\t\t}\n\n\t\tif(typeof column.definition.formatterHtmlOutput !== \"undefined\"){\n\t\t\tcolumn.modules.format.htmlOutput = this.lookupFormatter(column, \"HtmlOutput\");\n\t\t}\n\t}\n\n\tlookupFormatter(column, type){\n\t\tvar config = {params:column.definition[\"formatter\" + type + \"Params\"] || {}},\n\t\tformatter = column.definition[\"formatter\" + type];\n\n\t\t//set column formatter\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\tif(Format.formatters[formatter]){\n\t\t\t\tconfig.formatter = Format.formatters[formatter];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tconfig.formatter = formatter;\n\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\tconfig.formatter = Format.formatters.plaintext;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn config;\n\t}\n\n\tcellRendered(cell){\n\t\tif(cell.modules.format && cell.modules.format.renderedCallback && !cell.modules.format.rendered){\n\t\t\tcell.modules.format.renderedCallback();\n\t\t\tcell.modules.format.rendered = true;\n\t\t}\n\t}\n\n\t//return a formatted value for a column header\n\tformatHeader(column, title, el){\n\t\tvar formatter, params, onRendered, mockCell;\n\n\t\tif(column.definition.titleFormatter){\n\t\t\tformatter = this.getFormatter(column.definition.titleFormatter);\n\n\t\t\tonRendered = (callback) => {\n\t\t\t\tcolumn.titleFormatterRendered = callback;\n\t\t\t};\n\n\t\t\tmockCell = {\n\t\t\t\tgetValue:function(){\n\t\t\t\t\treturn title;\n\t\t\t\t},\n\t\t\t\tgetElement:function(){\n\t\t\t\t\treturn el;\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tparams = column.definition.titleFormatterParams || {};\n\n\t\t\tparams = typeof params === \"function\" ? params() : params;\n\n\t\t\treturn formatter.call(this, mockCell, params, onRendered);\n\t\t}else{\n\t\t\treturn title;\n\t\t}\n\t}\n\n\n\t//return a formatted value for a cell\n\tformatValue(cell){\n\t\tvar component = cell.getComponent(),\n\t\tparams = typeof cell.column.modules.format.params === \"function\" ? cell.column.modules.format.params(component) : cell.column.modules.format.params;\n\n\t\tfunction onRendered(callback){\n\t\t\tif(!cell.modules.format){\n\t\t\t\tcell.modules.format = {};\n\t\t\t}\n\n\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\tcell.modules.format.rendered = false;\n\t\t}\n\n\t\treturn cell.column.modules.format.formatter.call(this, component, params, onRendered);\n\t}\n\n\tformatExportValue(cell, type){\n\t\tvar formatter = cell.column.modules.format[type],\n\t\tparams;\n\n\t\tif(formatter){\n\t\t\tparams = typeof formatter.params === \"function\" ? formatter.params(component) : formatter.params;\n\n\t\t\tfunction onRendered(callback){\n\t\t\t\tif(!cell.modules.format){\n\t\t\t\t\tcell.modules.format = {};\n\t\t\t\t}\n\n\t\t\t\tcell.modules.format.renderedCallback = callback;\n\t\t\t\tcell.modules.format.rendered = false;\n\t\t\t}\n\n\t\t\treturn formatter.formatter.call(this, cell.getComponent(), params, onRendered);\n\n\t\t}else{\n\t\t\treturn this.formatValue(cell);\n\t\t}\n\t}\n\n\tsanitizeHTML(value){\n\t\tif(value){\n\t\t\tvar entityMap = {\n\t\t\t\t'&': '&amp;',\n\t\t\t\t'<': '&lt;',\n\t\t\t\t'>': '&gt;',\n\t\t\t\t'\"': '&quot;',\n\t\t\t\t\"'\": '&#39;',\n\t\t\t\t'/': '&#x2F;',\n\t\t\t\t'`': '&#x60;',\n\t\t\t\t'=': '&#x3D;'\n\t\t\t};\n\n\t\t\treturn String(value).replace(/[&<>\"'`=\\/]/g, function (s) {\n\t\t\t\treturn entityMap[s];\n\t\t\t});\n\t\t}else{\n\t\t\treturn value;\n\t\t}\n\t}\n\n\temptyToSpace(value){\n\t\treturn value === null || typeof value === \"undefined\" || value === \"\" ? \"&nbsp;\" : value;\n\t}\n\n\t//get formatter for cell\n\tgetFormatter(formatter){\n\t\tvar formatter;\n\n\t\tswitch(typeof formatter){\n\t\t\tcase \"string\":\n\t\t\tif(Format.formatters[formatter]){\n\t\t\t\tformatter = Format.formatters[formatter]\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Formatter Error - No such formatter found: \", formatter);\n\t\t\t\tformatter = Format.formatters.plaintext;\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tformatter = formatter;\n\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\tformatter = Format.formatters.plaintext;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn formatter;\n\t}\n}\n\nFormat.moduleName = \"format\";\n\n//load defaults\nFormat.formatters = defaultFormatters;\n\nexport default Format;","import Module from '../../core/Module.js';\n\nclass FrozenColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightPadding = 0;\n\t\tthis.initializationMode = \"left\";\n\t\tthis.active = false;\n\t\tthis.scrollEndTimer = false;\n\t\tthis.blocked = true;\n\t\t\n\t\tthis.registerColumnOption(\"frozen\");\n\t}\n\t\n\t//reset initial state\n\treset(){\n\t\tthis.initializationMode = \"left\";\n\t\tthis.leftColumns = [];\n\t\tthis.rightColumns = [];\n\t\tthis.leftMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.rightMargin = 0;\n\t\tthis.active = false;\n\t\t\n\t\tthis.table.columnManager.headersElement.style.marginLeft = 0;\n\t\tthis.table.columnManager.element.style.paddingRight = 0;\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-layout\", this.layoutCell.bind(this));\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"column-width\", this.layout.bind(this));\n\t\tthis.subscribe(\"row-layout-after\", this.layoutRow.bind(this));\n\t\tthis.subscribe(\"table-layout\", this.layout.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t\tthis.subscribe(\"columns-loading\", this.reset.bind(this));\n\n\t\tthis.subscribe(\"column-add\", this.reinitializeColumns.bind(this));\n\t\tthis.subscribe(\"column-delete\", this.reinitializeColumns.bind(this));\n\n\t\tthis.subscribe(\"table-redraw\", this.layout.bind(this));\n\t\tthis.subscribe(\"layout-refreshing\", this.blockLayout.bind(this));\n\t\tthis.subscribe(\"layout-refreshed\", this.unblockLayout.bind(this));\n\t}\n\t\n\tblockLayout(){\n\t\tthis.blocked = true;\n\t}\n\t\n\tunblockLayout(){\n\t\tthis.blocked = false;\n\t}\n\t\n\tlayoutCell(cell){\n\t\tthis.layoutElement(cell.element, cell.column)\n\t}\n\n\treinitializeColumns(){\n\t\tthis.reset();\n\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tthis.initializeColumn(column);\n\t\t});\n\t}\n\t\n\t//initialize specific column\n\tinitializeColumn(column){\n\t\tvar config = {margin:0, edge:false};\n\t\t\n\t\tif(!column.isGroup){\n\t\t\t\n\t\t\tif(this.frozenCheck(column)){\n\t\t\t\t\n\t\t\t\tconfig.position = this.initializationMode;\n\t\t\t\t\n\t\t\t\tif(this.initializationMode == \"left\"){\n\t\t\t\t\tthis.leftColumns.push(column);\n\t\t\t\t}else{\n\t\t\t\t\tthis.rightColumns.unshift(column);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.active = true;\n\t\t\t\t\n\t\t\t\tcolumn.modules.frozen = config;\n\t\t\t}else{\n\t\t\t\tthis.initializationMode = \"right\";\n\t\t\t}\n\t\t}\n\t}\n\t\n\tfrozenCheck(column){\n\t\tif(column.parent.isGroup && column.definition.frozen){\n\t\t\tconsole.warn(\"Frozen Column Error - Parent column group must be frozen, not individual columns or sub column groups\");\n\t\t}\n\t\t\n\t\tif(column.parent.isGroup){\n\t\t\treturn this.frozenCheck(column.parent);\n\t\t}else{\n\t\t\treturn column.definition.frozen;\n\t\t}\n\t}\n\t\n\t//quick layout to smooth horizontal scrolling\n\tscrollHorizontal(){\n\t\tvar rows;\n\t\t\n\t\tif(this.active){\n\t\t\tclearTimeout(this.scrollEndTimer);\n\n\t\t\trows = this.table.rowManager.getVisibleRows();\n\t\t\t\n\t\t\tthis.calcMargins(true);\n\t\t\t\n\t\t\tthis.layoutColumnPosition();\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t\t\n\t\t\trows.forEach((row) => {\n\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\tthis.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\t//calculate margins for rows\n\tcalcMargins(scroll){\n\t\t\n\t\tif(!scroll){\n\t\t\tthis.leftMargin = this._calcSpace(this.leftColumns, this.leftColumns.length) + \"px\";\t\t\t\n\t\t\tthis.rightMargin = this._calcSpace(this.rightColumns, this.rightColumns.length) + \"px\";\t\n\t\t\tthis.table.rowManager.tableElement.style.marginRight = this.rightMargin;\n\t\t}\n\t\n\t\t//calculate right frozen columns\n\t\tthis.rightPadding = this.table.rowManager.element.clientWidth + this.table.columnManager.scrollLeft;\n\t}\n\t\n\t//layout calculation rows\n\tlayoutCalcRows(){\n\t\tif(this.table.modExists(\"columnCalcs\")){\n\t\t\tif(this.table.modules.columnCalcs.topInitialized && this.table.modules.columnCalcs.topRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.topRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modules.columnCalcs.botInitialized && this.table.modules.columnCalcs.botRow){\n\t\t\t\tthis.layoutRow(this.table.modules.columnCalcs.botRow);\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.modExists(\"groupRows\")){\n\t\t\t\tthis.layoutGroupCalcs(this.table.modules.groupRows.getGroups())\n\t\t\t}\n\t\t}\n\t}\n\t\n\tlayoutGroupCalcs(groups){\n\t\tgroups.forEach((group) => {\n\t\t\tif(group.calcs.top){\n\t\t\t\tthis.layoutRow(group.calcs.top);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.calcs.bottom){\n\t\t\t\tthis.layoutRow(group.calcs.bottom);\n\t\t\t}\n\t\t\t\n\t\t\tif(group.groupList && group.groupList.length){\n\t\t\t\tthis.layoutGroupCalcs(group.groupList && group.groupList);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//calculate column positions and layout headers\n\tlayoutColumnPosition(allCells){\n\t\tvar leftParents = [];\n\t\t\n\t\tvar leftMargin = 0;\n\t\tvar rightMargin = 0;\n\t\t\n\t\tthis.table.columnManager.headersElement.style.marginLeft = this.leftMargin;\n\t\tthis.table.columnManager.element.style.paddingRight = this.rightMargin;\n\n\t\tthis.leftColumns.forEach((column, i) => {\t\n\t\t\tcolumn.modules.frozen.margin = (leftMargin + this.table.columnManager.scrollLeft) + \"px\";\n\n\t\t\tif(column.visible){\n\t\t\t\tleftMargin += column.getWidth();\n\t\t\t}\n\t\t\t\n\t\t\tif(i == this.leftColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tvar parentEl = this.getColGroupParentElement(column);\n\t\t\t\tif(!leftParents.includes(parentEl)){\n\t\t\t\t\tthis.layoutElement(parentEl, column);\n\t\t\t\t\tleftParents.push(parentEl);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(column.modules.frozen.edge){\n\t\t\t\t\tparentEl.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column, i) => {\n\n\t\t\tif(column.visible){\n\t\t\t\trightMargin += column.getWidth();\n\t\t\t}\n\n\t\t\tcolumn.modules.frozen.margin = (this.rightPadding - rightMargin) + \"px\";\n\t\t\t\n\t\t\tif(i == this.rightColumns.length - 1){\n\t\t\t\tcolumn.modules.frozen.edge = true;\n\t\t\t}else{\n\t\t\t\tcolumn.modules.frozen.edge = false;\n\t\t\t}\n\t\t\t\n\t\t\t\n\t\t\tif(column.parent.isGroup){\n\t\t\t\tthis.layoutElement(this.getColGroupParentElement(column), column);\n\t\t\t}else{\n\t\t\t\tthis.layoutElement(column.getElement(), column);\n\t\t\t}\n\t\t\t\n\t\t\tif(allCells){\n\t\t\t\tcolumn.cells.forEach((cell) => {\n\t\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\t\n\tgetColGroupParentElement(column){\n\t\treturn column.parent.isGroup ? this.getColGroupParentElement(column.parent) : column.getElement();\n\t}\n\t\n\t//layout columns appropriately\n\tlayout(){\n\t\tvar visibleRows = [],\n\t\totherRows = [];\n\n\t\tif(this.active && !this.blocked){\n\t\t\t//calculate row padding\n\t\t\tthis.calcMargins();\n\n\t\t\t//calculate left columns\n\t\t\tthis.layoutColumnPosition();\n\n\t\t\tvisibleRows = this.table.rowManager.getVisibleRows();\n\t\t\totherRows = this.table.rowManager.getDisplayRows().filter(row => !visibleRows.includes(row));\n\n\t\t\totherRows.forEach((row) =>{\n\t\t\t\trow.deinitialize();\n\t\t\t});\n\n\t\t\tvisibleRows.forEach((row) =>{\n\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\tthis.layoutRow(row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.layoutCalcRows();\n\t\t\t\n\n\t\t}\n\t}\n\t\n\tlayoutRow(row){\n\t\t// console.trace(\"row\")\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\trowEl.style.paddingLeft = this.leftMargin;\n\t\t\n\t\tif(this.table.options.layout === \"fitDataFill\" && this.rightColumns.length){\n\t\t\tthis.table.rowManager.getTableElement().style.minWidth = \"calc(100% - \" + this.rightMargin + \")\";\n\t\t}\n\t\t\n\t\tthis.leftColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.rightColumns.forEach((column) => {\n\t\t\tvar cell = row.getCell(column);\n\t\t\t\n\t\t\tif(cell){\n\t\t\t\tthis.layoutElement(cell.getElement(true), column);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tlayoutElement(element, column){\n\t\t\n\t\tif(column.modules.frozen){\n\t\t\telement.style.position = \"absolute\";\n\t\t\telement.style.left = column.modules.frozen.margin;\n\t\t\t\n\t\t\telement.classList.add(\"tabulator-frozen\");\n\t\t\t\n\t\t\tif(column.modules.frozen.edge){\n\t\t\t\telement.classList.add(\"tabulator-frozen-\" + column.modules.frozen.position);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_calcSpace(columns, index){\n\t\tvar width = 0;\n\t\t\n\t\tfor (let i = 0; i < index; i++){\n\t\t\tif(columns[i].visible){\n\t\t\t\twidth += columns[i].getWidth();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn width;\n\t}\n}\n\nFrozenColumns.moduleName = \"frozenColumns\";\n\nexport default FrozenColumns;","import Module from '../../core/Module.js';\n\nclass FrozenRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.topElement = document.createElement(\"div\");\n\t\tthis.rows = [];\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"freeze\", this.freezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"unfreeze\", this.unfreezeRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isFrozen\", this.isRowFrozen.bind(this));\n\t}\n\n\tinitialize(){\n\t\tthis.rows = [];\n\n\t\tthis.topElement.classList.add(\"tabulator-frozen-rows-holder\");\n\n\t\t// this.table.columnManager.element.append(this.topElement);\n\t\tthis.table.columnManager.getElement().insertBefore(this.topElement, this.table.columnManager.headersElement.nextSibling);\n\n\t\tthis.subscribe(\"row-deleting\", this.detachRow.bind(this));\n\t\tthis.subscribe(\"rows-visible\", this.visibleRows.bind(this));\n\n\t\tthis.registerDisplayHandler(this.getRows.bind(this), 10);\n\t}\n\n\tisRowFrozen(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\treturn index > -1;\n\t}\n\n\tisFrozen(){\n\t\treturn !!this.rows.length;\n\t}\n\n\tvisibleRows(viewable, rows){\n\t\tthis.rows.forEach((row) => {\n\t\t\trows.push(row);\n\t\t});\n\n\t\treturn rows;\n\t}\n\n\t//filter frozen rows out of display data\n\tgetRows(rows){\n\t\tvar self = this,\n\t\tfrozen = [],\n\t\toutput = rows.slice(0);\n\n\t\tthis.rows.forEach(function(row){\n\t\t\tvar index = output.indexOf(row);\n\n\t\t\tif(index > -1){\n\t\t\t\toutput.splice(index, 1);\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tfreezeRow(row){\n\t\tif(!row.modules.frozen){\n\t\t\trow.modules.frozen = true;\n\t\t\tthis.topElement.appendChild(row.getElement());\n\t\t\trow.initialize();\n\t\t\trow.normalizeHeight();\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.rows.push(row);\n\n\t\t\tthis.refreshData(false, \"display\")\n\n\t\t\tthis.styleRows();\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already frozen\");\n\t\t}\n\t}\n\n\tunfreezeRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(row.modules.frozen){\n\n\t\t\trow.modules.frozen = false;\n\n\t\t\tthis.detachRow(row);\n\n\t\t\tthis.table.rowManager.adjustTableSize();\n\n\t\t\tthis.refreshData(false, \"display\")\n\n\t\t\tif(this.rows.length){\n\t\t\t\tthis.styleRows();\n\t\t\t}\n\n\t\t}else{\n\t\t\tconsole.warn(\"Freeze Error - Row is already unfrozen\");\n\t\t}\n\t}\n\n\tdetachRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t}\n\n\tstyleRows(row){\n\t\tthis.rows.forEach((row, i) => {\n\t\t\tthis.table.rowManager.styleRow(row, i);\n\t\t});\n\t}\n}\n\nFrozenRows.moduleName = \"frozenRows\";\n\nexport default FrozenRows;","//public group object\nclass GroupComponent {\n\tconstructor (group){\n\t\tthis._group = group;\n\t\tthis.type = \"GroupComponent\";\n\n\t\treturn new Proxy(this, {\n\t\t\tget: function(target, name, receiver) {\n\t\t\t\tif (typeof target[name] !== \"undefined\") {\n\t\t\t\t\treturn target[name];\n\t\t\t\t}else{\n\t\t\t\t\treturn target._group.groupManager.table.componentFunctionBinder.handle(\"row\", target._group, name)\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t}\n\n\tgetKey(){\n\t\treturn this._group.key;\n\t}\n\n\tgetField(){\n\t\treturn this._group.field;\n\t}\n\n\tgetElement(){\n\t\treturn this._group.element;\n\t}\n\n\tgetRows(){\n\t\treturn this._group.getRows(true);\n\t}\n\n\tgetSubGroups(){\n\t\treturn this._group.getSubGroups(true);\n\t}\n\n\tgetParentGroup(){\n\t\treturn this._group.parent ? this._group.parent.getComponent() : false;\n\t}\n\n\tisVisible(){\n\t\treturn this._group.visible;\n\t}\n\n\tshow(){\n\t\tthis._group.show();\n\t}\n\n\thide(){\n\t\tthis._group.hide();\n\t}\n\n\ttoggle(){\n\t\tthis._group.toggleVisibility();\n\t}\n\n\t_getSelf(){\n\t\treturn this._group;\n\t}\n\n\tgetTable(){\n\t\treturn this._group.groupManager.table;\n\t}\n}\n\nexport default GroupComponent;","import Helpers from '../../core/tools/Helpers.js';\nimport GroupComponent from './GroupComponent.js';\n\n//Group functions\nclass Group{\n\t\n\tconstructor(groupManager, parent, level, key, field, generator, oldGroup){\n\t\tthis.groupManager = groupManager;\n\t\tthis.parent = parent;\n\t\tthis.key = key;\n\t\tthis.level = level;\n\t\tthis.field = field;\n\t\tthis.hasSubGroups = level < (groupManager.groupIDLookups.length - 1);\n\t\tthis.addRow = this.hasSubGroups ? this._addRowToGroup : this._addRow;\n\t\tthis.type = \"group\"; //type of element\n\t\tthis.old = oldGroup;\n\t\tthis.rows = [];\n\t\tthis.groups = [];\n\t\tthis.groupList = [];\n\t\tthis.generator = generator;\n\t\tthis.element = false;\n\t\tthis.elementContents = false;\n\t\tthis.height = 0;\n\t\tthis.outerHeight = 0;\n\t\tthis.initialized = false;\n\t\tthis.calcs = {};\n\t\tthis.initialized = false;\n\t\tthis.modules = {};\n\t\tthis.arrowElement = false;\n\t\t\n\t\tthis.visible = oldGroup ? oldGroup.visible : (typeof groupManager.startOpen[level] !== \"undefined\" ? groupManager.startOpen[level] : groupManager.startOpen[0]);\n\t\t\n\t\tthis.component = null;\n\t\t\n\t\tthis.createElements();\n\t\tthis.addBindings();\n\t\t\n\t\tthis.createValueGroups();\n\t}\n\t\n\twipe(){\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tgroup.wipe();\n\t\t\t});\n\t\t}else{\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\tif(row.modules){\n\t\t\t\t\tdelete row.modules.group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tthis.element = false;\n\t\tthis.arrowElement = false;\n\t\tthis.elementContents = false;\n\t}\n\t\n\tcreateElements(){\n\t\tvar arrow = document.createElement(\"div\");\n\t\tarrow.classList.add(\"tabulator-arrow\");\n\t\t\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-row\");\n\t\tthis.element.classList.add(\"tabulator-group\");\n\t\tthis.element.classList.add(\"tabulator-group-level-\" + this.level);\n\t\tthis.element.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\tthis.arrowElement = document.createElement(\"div\");\n\t\tthis.arrowElement.classList.add(\"tabulator-group-toggle\");\n\t\tthis.arrowElement.appendChild(arrow);\n\t\t\n\t\t//setup movable rows\n\t\tif(this.groupManager.table.options.movableRows !== false && this.groupManager.table.modExists(\"moveRow\")){\n\t\t\tthis.groupManager.table.modules.moveRow.initializeGroupHeader(this);\n\t\t}\n\t}\n\t\n\tcreateValueGroups(){\n\t\tvar level = this.level + 1;\n\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\tthis.groupManager.allowedValues[level].forEach((value) => {\n\t\t\t\tthis._createGroup(value, level);\n\t\t\t});\n\t\t}\n\t}\n\t\n\taddBindings(){\n\t\tvar toggleElement;\n\t\t\n\t\tif(this.groupManager.table.options.groupToggleElement){\n\t\t\ttoggleElement = this.groupManager.table.options.groupToggleElement == \"arrow\" ? this.arrowElement : this.element;\n\t\t\t\n\t\t\ttoggleElement.addEventListener(\"click\", (e) => {\n\t\t\t\te.stopPropagation();\n\t\t\t\te.stopImmediatePropagation();\n\t\t\t\tthis.toggleVisibility();\n\t\t\t});\n\t\t}\n\t}\n\t\n\t_createGroup(groupID, level){\n\t\tvar groupKey = level + \"_\" + groupID;\n\t\tvar group = new Group(this.groupManager, this, level, groupID,  this.groupManager.groupIDLookups[level].field, this.groupManager.headerGenerator[level] || this.groupManager.headerGenerator[0], this.old ? this.old.groups[groupKey] : false);\n\t\t\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\t\n\t_addRowToGroup(row){\n\t\t\n\t\tvar level = this.level + 1;\n\t\t\n\t\tif(this.hasSubGroups){\n\t\t\tvar groupID = this.groupManager.groupIDLookups[level].func(row.getData()),\n\t\t\tgroupKey = level + \"_\" + groupID;\n\t\t\t\n\t\t\tif(this.groupManager.allowedValues && this.groupManager.allowedValues[level]){\n\t\t\t\tif(this.groups[groupKey]){\n\t\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(!this.groups[groupKey]){\n\t\t\t\t\tthis._createGroup(groupID, level);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.groups[groupKey].addRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t_addRow(row){\n\t\tthis.rows.push(row);\n\t\trow.modules.group = this;\n\t}\n\t\n\tinsertRow(row, to, after){\n\t\tvar data = this.conformRowData({});\n\t\t\n\t\trow.updateData(data);\n\t\t\n\t\tvar toIndex = this.rows.indexOf(to);\n\t\t\n\t\tif(toIndex > -1){\n\t\t\tif(after){\n\t\t\t\tthis.rows.splice(toIndex+1, 0, row);\n\t\t\t}else{\n\t\t\t\tthis.rows.splice(toIndex, 0, row);\n\t\t\t}\n\t\t}else{\n\t\t\tif(after){\n\t\t\t\tthis.rows.push(row);\n\t\t\t}else{\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\trow.modules.group = this;\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t}\n\t\t\n\t\tthis.groupManager.updateGroupRows(true);\n\t}\n\t\n\tscrollHeader(left){\n\t\tif(this.arrowElement){\n\t\t\tthis.arrowElement.style.marginLeft = left;\n\t\t\t\n\t\t\tthis.groupList.forEach(function(child){\n\t\t\t\tchild.scrollHeader(left);\n\t\t\t});\n\t\t}\n\t}\n\t\n\tgetRowIndex(row){}\n\t\n\t//update row data to match grouping contraints\n\tconformRowData(data){\n\t\tif(this.field){\n\t\t\tdata[this.field] = this.key;\n\t\t}else{\n\t\t\tconsole.warn(\"Data Conforming Error - Cannot conform row data to match new group as groupBy is a function\");\n\t\t}\n\t\t\n\t\tif(this.parent){\n\t\t\tdata = this.parent.conformRowData(data);\n\t\t}\n\t\t\n\t\treturn data;\n\t}\n\t\n\tremoveRow(row){\n\t\tvar index = this.rows.indexOf(row);\n\t\tvar el = row.getElement();\n\t\t\n\t\t\n\t\tif(index > -1){\n\t\t\tthis.rows.splice(index, 1);\n\t\t}\n\t\t\n\t\tif(!this.groupManager.table.options.groupValues && !this.rows.length){\n\t\t\tif(this.parent){\n\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t}else{\n\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}else{\n\t\t\t\n\t\t\tif(el.parentNode){\n\t\t\t\tel.parentNode.removeChild(el);\n\t\t\t}\n\t\t\t\n\t\t\tthis.generateGroupHeaderContents();\n\t\t\t\n\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\tthis.groupManager.table.modules.columnCalcs.recalcGroup(this);\n\t\t\t}\n\t\t\t\n\t\t}\n\t}\n\t\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\t\t\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\t\t\t\n\t\t\tindex = this.groupList.indexOf(group);\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t\t\n\t\t\tif(!this.groupList.length){\n\t\t\t\tif(this.parent){\n\t\t\t\t\tthis.parent.removeGroup(this);\n\t\t\t\t}else{\n\t\t\t\t\tthis.groupManager.removeGroup(this);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetHeadersAndRows(noCalc){\n\t\tvar output = [];\n\t\t\n\t\toutput.push(this);\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\t\toutput = output.concat(group.getHeadersAndRows(noCalc));\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" && this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\tif(this.calcs.top){\n\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\toutput = output.concat(this.rows);\n\t\t\t\t\n\t\t\t\tif(!noCalc && this.groupManager.table.options.columnCalcs != \"table\" &&  this.groupManager.table.modExists(\"columnCalcs\") && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\tif(this.calcs.bottom){\n\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.groupList.length && this.groupManager.table.options.columnCalcs != \"table\"){\n\t\t\t\t\n\t\t\t\tif(this.groupManager.table.modExists(\"columnCalcs\")){\n\t\t\t\t\t\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasTopCalcs()){\n\t\t\t\t\t\tif(this.calcs.top){\n\t\t\t\t\t\t\tthis.calcs.top.detachElement();\n\t\t\t\t\t\t\tthis.calcs.top.deleteCells();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.top = this.groupManager.table.modules.columnCalcs.generateTopRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.top);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(!noCalc && this.groupManager.table.modules.columnCalcs.hasBottomCalcs()){\n\t\t\t\t\t\tif(this.calcs.bottom){\n\t\t\t\t\t\t\tthis.calcs.bottom.detachElement();\n\t\t\t\t\t\t\tthis.calcs.bottom.deleteCells();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.groupManager.table.options.groupClosedShowCalcs){\n\t\t\t\t\t\t\tthis.calcs.bottom = this.groupManager.table.modules.columnCalcs.generateBottomRow(this.rows);\n\t\t\t\t\t\t\toutput.push(this.calcs.bottom);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetData(visible, transform){\n\t\tvar output = [];\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(!visible || (visible && this.visible)){\n\t\t\tthis.rows.forEach((row) => {\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRowCount(){\n\t\tvar count = 0;\n\t\t\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\tcount += group.getRowCount();\n\t\t\t});\n\t\t}else{\n\t\t\tcount = this.rows.length;\n\t\t}\n\t\treturn count;\n\t}\n\t\n\ttoggleVisibility(){\n\t\tif(this.visible){\n\t\t\tthis.hide();\n\t\t}else{\n\t\t\tthis.show();\n\t\t}\n\t}\n\t\n\thide(){\n\t\tthis.visible = false;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\t\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\trow.detachElement();\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\t\t\t\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t\t\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), false);\n\t}\n\t\n\tshow(){\n\t\tthis.visible = true;\n\t\t\n\t\tif(this.groupManager.table.rowManager.getRenderMode() == \"classic\" && !this.groupManager.table.options.pagination){\n\t\t\t\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t\t\n\t\t\tvar prev = this.generateElement();\n\t\t\t\n\t\t\tif(this.groupList.length){\n\t\t\t\tthis.groupList.forEach((group) => {\n\t\t\t\t\tvar rows = group.getHeadersAndRows();\n\t\t\t\t\t\n\t\t\t\t\trows.forEach((row) => {\n\t\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\t\trow.initialize();\n\t\t\t\t\t\tprev = rowEl;\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tthis.rows.forEach((row) => {\n\t\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\t\tprev.parentNode.insertBefore(rowEl, prev.nextSibling);\n\t\t\t\t\trow.initialize();\n\t\t\t\t\tprev = rowEl;\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis.groupManager.table.rowManager.setDisplayRows(this.groupManager.updateGroupRows(), this.groupManager.getDisplayIndex());\n\t\t\t\n\t\t\tthis.groupManager.table.rowManager.checkClassicModeGroupHeaderWidth();\n\t\t}else{\n\t\t\tthis.groupManager.updateGroupRows(true);\n\t\t}\n\t\t\n\t\tthis.groupManager.table.externalEvents.dispatch(\"groupVisibilityChanged\", this.getComponent(), true);\n\t}\n\t\n\t_visSet(){\n\t\tvar data = [];\n\t\t\n\t\tif(typeof this.visible == \"function\"){\n\t\t\t\n\t\t\tthis.rows.forEach(function(row){\n\t\t\t\tdata.push(row.getData());\n\t\t\t});\n\t\t\t\n\t\t\tthis.visible = this.visible(this.key, this.getRowCount(), data, this.getComponent());\n\t\t}\n\t}\n\t\n\tgetRowGroup(row){\n\t\tvar match = false;\n\t\tif(this.groupList.length){\n\t\t\tthis.groupList.forEach(function(group){\n\t\t\t\tvar result = group.getRowGroup(row);\n\t\t\t\t\n\t\t\t\tif(result){\n\t\t\t\t\tmatch = result;\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tif(this.rows.find(function(item){\n\t\t\t\treturn item === row;\n\t\t\t})){\n\t\t\t\tmatch = this;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn match;\n\t}\n\t\n\tgetSubGroups(component){\n\t\tvar output = [];\n\t\t\n\t\tthis.groupList.forEach(function(child){\n\t\t\toutput.push(component ? child.getComponent() : child);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetRows(compoment){\n\t\tvar output = [];\n\t\t\n\t\tthis.rows.forEach(function(row){\n\t\t\toutput.push(compoment ? row.getComponent() : row);\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgenerateGroupHeaderContents(){\n\t\tvar data = [];\n\t\t\n\t\tthis.rows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\tthis.elementContents = this.generator(this.key, this.getRowCount(), data, this.getComponent());\n\t\t\n\t\twhile(this.element.firstChild) this.element.removeChild(this.element.firstChild);\n\t\t\n\t\tif(typeof this.elementContents === \"string\"){\n\t\t\tthis.element.innerHTML = this.elementContents;\n\t\t}else{\n\t\t\tthis.element.appendChild(this.elementContents);\n\t\t}\n\t\t\n\t\tthis.element.insertBefore(this.arrowElement, this.element.firstChild);\n\t}\n\t\n\tgetPath(path = []) {\n\t\tpath.unshift(this.key);\n\t\tif(this.parent) {\n\t\t\tthis.parent.getPath(path);\n\t\t}\n\t\treturn path;\n\t}\n\t\n\t////////////// Standard Row Functions //////////////\n\t\n\tgetElement(){\n\t\treturn this.elementContents ? this.element : this.generateElement();\n\t}\n\t\n\tgenerateElement(){\n\t\tthis.addBindings = false;\n\t\t\n\t\tthis._visSet();\n\t\t\n\t\tif(this.visible){\n\t\t\tthis.element.classList.add(\"tabulator-group-visible\");\n\t\t}else{\n\t\t\tthis.element.classList.remove(\"tabulator-group-visible\");\n\t\t}\n\t\t\n\t\tfor(var i = 0; i < this.element.childNodes.length; ++i){\n\t\t\tthis.element.childNodes[i].parentNode.removeChild(this.element.childNodes[i]);\n\t\t}\n\t\t\n\t\tthis.generateGroupHeaderContents();\n\t\t\n\t\t// this.addBindings();\n\t\t\n\t\treturn this.element;\n\t}\n\t\n\tdetachElement(){\n\t\tif (this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t}\n\t}\n\t\n\t//normalize the height of elements in the row\n\tnormalizeHeight(){\n\t\tthis.setHeight(this.element.clientHeight);\n\t}\n\t\n\tinitialize(force){\n\t\tif(!this.initialized || force){\n\t\t\tthis.normalizeHeight();\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\treinitialize(){\n\t\tthis.initialized = false;\n\t\tthis.height = 0;\n\t\t\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.initialize(true);\n\t\t}\n\t}\n\t\n\tsetHeight(height){\n\t\tif(this.height != height){\n\t\t\tthis.height = height;\n\t\t\tthis.outerHeight = this.element.offsetHeight;\n\t\t}\n\t}\n\t\n\t//return rows outer height\n\tgetHeight(){\n\t\treturn this.outerHeight;\n\t}\n\t\n\tgetGroup(){\n\t\treturn this;\n\t}\n\t\n\treinitializeHeight(){}\n\t\n\tcalcHeight(){}\n\t\n\tsetCellHeight(){}\n\t\n\tclearCellHeight(){}\n\t\n\tdeinitializeHeight(){}\n\t\n\t//////////////// Object Generation /////////////////\n\tgetComponent(){\n\t\tif(!this.component){\n\t\t\tthis.component = new GroupComponent(this);\n\t\t}\n\t\t\n\t\treturn this.component;\n\t}\n}\n\nexport default Group;","import Module from '../../core/Module.js';\n\nimport GroupComponent from './GroupComponent.js';\nimport Group from './Group.js';\n\nclass GroupRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.groupIDLookups = false; //enable table grouping and set field to group by\n\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\tthis.groupList = []; //ordered list of groups\n\t\tthis.allowedValues = false;\n\t\tthis.groups = {}; //hold row groups\n\t\tthis.displayIndex = 0; //index in display pipeline\n\n\t\tthis.displayHandler = this.getRows.bind(this);\n\n\t\t//register table options\n\t\tthis.registerTableOption(\"groupBy\", false); //enable table grouping and set field to group by\n\t\tthis.registerTableOption(\"groupStartOpen\", true); //starting state of group\n\t\tthis.registerTableOption(\"groupValues\", false);\n\t\tthis.registerTableOption(\"groupUpdateOnCellEdit\", false);\n\t\tthis.registerTableOption(\"groupHeader\", false); //header generation function\n\t\tthis.registerTableOption(\"groupHeaderPrint\", null);\n\t\tthis.registerTableOption(\"groupHeaderClipboard\", null);\n\t\tthis.registerTableOption(\"groupHeaderHtmlOutput\", null);\n\t\tthis.registerTableOption(\"groupHeaderDownload\", null);\n\t\tthis.registerTableOption(\"groupToggleElement\", \"arrow\");\n\t\tthis.registerTableOption(\"groupClosedShowCalcs\", false);\n\n\t\t//register table functions\n\t\tthis.registerTableFunction(\"setGroupBy\", this.setGroupBy.bind(this));\n\t\tthis.registerTableFunction(\"setGroupValues\", this.setGroupValues.bind(this));\n\t\tthis.registerTableFunction(\"setGroupStartOpen\", this.setGroupStartOpen.bind(this));\n\t\tthis.registerTableFunction(\"setGroupHeader\", this.setGroupHeader.bind(this));\n\t\tthis.registerTableFunction(\"getGroups\", this.userGetGroups.bind(this));\n\t\tthis.registerTableFunction(\"getGroupedData\", this.userGetGroupedData.bind(this));\n\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"getGroup\", this.rowGetGroup.bind(this));\n\t}\n\n\t//initialize group configuration\n\tinitialize(){\n\t\tif(this.table.options.groupBy){\n\n\t\t\tif(this.table.options.groupUpdateOnCellEdit){\n\t\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\t\tthis.subscribe(\"row-data-changed\", this.reassignRowToGroup.bind(this), 0);\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.configureGroupSetup.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleting.bind(this));\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHeaders.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.wipe.bind(this));\n\t\t\tthis.subscribe(\"rows-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-moving\", this.rowMoving.bind(this));\n\t\t\tthis.subscribe(\"row-adding-index\", this.rowAddingIndex.bind(this));\n\n\t\t\tthis.subscribe(\"rows-sample\", this.rowSample.bind(this));\n\n\t\t\tthis.subscribe(\"render-virtual-fill\", this.virtualRenderFill.bind(this));\n\n\t\t\tthis.registerDisplayHandler(this.displayHandler, 20);\n\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\n\tconfigureGroupSetup(){\n\t\tif(this.table.options.groupBy){\n\t\t\tvar groupBy = this.table.options.groupBy,\n\t\t\tstartOpen = this.table.options.groupStartOpen,\n\t\t\tgroupHeader = this.table.options.groupHeader;\n\n\t\t\tthis.allowedValues = this.table.options.groupValues;\n\n\t\t\tif(Array.isArray(groupBy) && Array.isArray(groupHeader) && groupBy.length > groupHeader.length){\n\t\t\t\tconsole.warn(\"Error creating group headers, groupHeader array is shorter than groupBy array\");\n\t\t\t}\n\n\t\t\tthis.headerGenerator = [function(){return \"\";}];\n\t\t\tthis.startOpen = [function(){return false;}]; //starting state of group\n\n\t\t\tthis.langBind(\"groups|item\", (langValue, lang) => {\n\t\t\t\tthis.headerGenerator[0] = (value, count, data) => { //header layout function\n\t\t\t\t\treturn (typeof value === \"undefined\" ? \"\" : value) + \"<span>(\" + count + \" \" + ((count === 1) ? langValue : lang.groups.items) + \")</span>\";\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tthis.groupIDLookups = [];\n\n\t\t\tif(Array.isArray(groupBy) || groupBy){\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"table\" && this.table.options.columnCalcs != \"both\"){\n\t\t\t\t\tthis.table.modules.columnCalcs.removeCalcs();\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.modExists(\"columnCalcs\") && this.table.options.columnCalcs != \"group\"){\n\n\t\t\t\t\tvar cols = this.table.columnManager.getRealColumns();\n\n\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\tif(col.definition.topCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeTopRow();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif(col.definition.bottomCalc){\n\t\t\t\t\t\t\tthis.table.modules.columnCalcs.initializeBottomRow();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!Array.isArray(groupBy)){\n\t\t\t\tgroupBy = [groupBy];\n\t\t\t}\n\n\t\t\tgroupBy.forEach((group, i) => {\n\t\t\t\tvar lookupFunc, column;\n\n\t\t\t\tif(typeof group == \"function\"){\n\t\t\t\t\tlookupFunc = group;\n\t\t\t\t}else{\n\t\t\t\t\tcolumn = this.table.columnManager.getColumnByField(group);\n\n\t\t\t\t\tif(column){\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn column.getFieldValue(data);\n\t\t\t\t\t\t};\n\t\t\t\t\t}else{\n\t\t\t\t\t\tlookupFunc = function(data){\n\t\t\t\t\t\t\treturn data[group];\n\t\t\t\t\t\t};\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tthis.groupIDLookups.push({\n\t\t\t\t\tfield: typeof group === \"function\" ? false : group,\n\t\t\t\t\tfunc:lookupFunc,\n\t\t\t\t\tvalues:this.allowedValues ? this.allowedValues[i] : false,\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif(startOpen){\n\t\t\t\tif(!Array.isArray(startOpen)){\n\t\t\t\t\tstartOpen = [startOpen];\n\t\t\t\t}\n\n\t\t\t\tstartOpen.forEach((level) => {\n\t\t\t\t\tlevel = typeof level == \"function\" ? level : function(){return true;};\n\t\t\t\t});\n\n\t\t\t\tthis.startOpen = startOpen;\n\t\t\t}\n\n\t\t\tif(groupHeader){\n\t\t\t\tthis.headerGenerator = Array.isArray(groupHeader) ? groupHeader : [groupHeader];\n\t\t\t}\n\t\t}\n\t}\n\n\trowSample(rows, prevValue){\n\t\tvar group = this.getGroups(false)[0];\n\n\t\tprevValue.push(group.getRows(false)[0]);\n\n\t\treturn prevValue;\n\t}\n\n\tvirtualRenderFill(){\n\t\tvar el = this.table.rowManager.tableElement;\n\t\tvar rows = this.table.rowManager.getVisibleRows();\n\n\t\trows = rows.filter((row) => {\n\t\t\treturn row.type !== \"group\";\n\t\t});\n\n\t\tel.style.minWidth = !rows.length ? this.table.columnManager.getWidth() + \"px\" : \"\";\n\n\t\t// if(this.table.options.groupBy){\n\t\t// \tif(this.layoutMode() != \"fitDataFill\" && rowsCount == this.table.modules.groupRows.countGroups()){\n\t\t// \t\tel.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t// \t}\n\t\t// }\n\t}\n\n\trowAddingIndex(row, index, top){\n\t\tthis.assignRowToGroup(row);\n\n\t\tvar groupRows = row.modules.group.rows;\n\n\t\tif(groupRows.length > 1){\n\t\t\tif(!index || (index && groupRows.indexOf(index) == -1)){\n\t\t\t\tif(top){\n\t\t\t\t\tif(groupRows[0] !== row){\n\t\t\t\t\t\tindex = groupRows[0];\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(groupRows[groupRows.length -1] !== row){\n\t\t\t\t\t\tindex = groupRows[groupRows.length -1];\n\t\t\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.rowManager.moveRowInArray(row.modules.group.rows, row, index, !top);\n\t\t\t}\n\t\t}\n\n\t\treturn index;\n\t}\n\n\ttrackChanges(){\n\t\tthis.dispatch(\"group-changed\");\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tsetGroupBy(groups){\n\t\tthis.table.options.groupBy = groups;\n\t\tif(!this.initialized){\n\t\t\tthis.initialize();\n\t\t}else{\n\t\t\tthis.configureGroupSetup();\n\t\t}\n\n\t\tthis.refreshData();\n\n\t\tthis.trackChanges();\n\t}\n\n\tsetGroupValues(groupValues){\n\t\tthis.table.options.groupValues = groupValues;\n\t\tthis.configureGroupSetup();\n\t\tthis.refreshData();\n\n\t\tthis.trackChanges();\n\t}\n\n\tsetGroupStartOpen(values){\n\t\tthis.table.options.groupStartOpen = values;\n\t\tthis.configureGroupSetup();\n\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\n\tsetGroupHeader(values){\n\t\tthis.table.options.groupHeader = values;\n\t\tthis.configureGroupSetup();\n\n\t\tif(this.table.options.groupBy){\n\t\t\tthis.refreshData();\n\n\t\t\tthis.trackChanges();\n\t\t}else{\n\t\t\tconsole.warn(\"Grouping Update - cant refresh view, no groups have been set\");\n\t\t}\n\t}\n\n\tuserGetGroups(values){\n\t\treturn this.getGroups(true);\n\t}\n\n\t// get grouped table data in the same format as getData()\n\tuserGetGroupedData(){\n\t\treturn this.table.options.groupBy ?\n\t\tthis.getGroupedData() : this.getData()\n\t}\n\n\n\t///////////////////////////////////////\n\t///////// Component Functions /////////\n\t///////////////////////////////////////\n\n\trowGetGroup(row){\n\t\treturn row.modules.group ? row.modules.group.getComponent() : false;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\trowMoving(from, to, after){\n\t\tif(!after && to instanceof Group){\n\t\t\tto = this.table.rowManager.prevDisplayRow(from) || to;\n\t\t}\n\n\t\tvar toGroup = to instanceof Group ? to : to.modules.group;\n\t\tvar fromGroup = from instanceof Group ? from : from.modules.group;\n\n\t\tif(toGroup === fromGroup){\n\t\t\tthis.table.rowManager.moveRowInArray(toGroup.rows, from, to, after);\n\t\t}else{\n\t\t\tif(fromGroup){\n\t\t\t\tfromGroup.removeRow(from);\n\t\t\t}\n\n\t\t\ttoGroup.insertRow(from, to, after);\n\t\t}\n\t}\n\n\n\trowDeleting(row){\n\t\t//remove from group\n\t\tif(row.modules.group){\n\t\t\trow.modules.group.removeRow(row);\n\t\t}\n\t}\n\n\n\trowsUpdated(row){\n\t\tthis.updateGroupRows(true);\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.reassignRowToGroup(cell.row);\n\t}\n\n\n\tsetDisplayIndex(index){\n\t\tthis.displayIndex = index;\n\t}\n\n\tgetDisplayIndex(){\n\t\treturn this.displayIndex;\n\t}\n\n\t//return appropriate rows with group headers\n\tgetRows(rows){\n\t\tif(this.table.options.groupBy && this.groupIDLookups.length){\n\n\t\t\tthis.dispatchExternal(\"dataGrouping\");\n\n\t\t\tthis.generateGroups(rows);\n\n\t\t\tif(this.subscribedExternal(\"dataGrouped\")){\n\t\t\t\tthis.dispatchExternal(\"dataGrouped\", this.getGroups(true));\n\t\t\t}\n\n\t\t\treturn this.updateGroupRows();\n\n\t\t}else{\n\t\t\treturn rows.slice(0);\n\t\t}\n\t}\n\n\tgetGroups(component){\n\t\tvar groupComponents = [];\n\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroupComponents.push(component ? group.getComponent() : group);\n\t\t});\n\n\t\treturn groupComponents;\n\t}\n\n\tgetChildGroups(group){\n\t\tvar groupComponents = [];\n\n\t\tif(!group){\n\t\t\tgroup = this;\n\t\t}\n\n\t\tgroup.groupList.forEach((child) => {\n\t\t\tif(child.groupList.length){\n\t\t\t\tgroupComponents = groupComponents.concat(this.getChildGroups(child));\n\t\t\t}else{\n\t\t\t\tgroupComponents.push(child);\n\t\t\t}\n\t\t});\n\n\t\treturn groupComponents;\n\t}\n\n\twipe(){\n\t\tthis.groupList.forEach(function(group){\n\t\t\tgroup.wipe();\n\t\t});\n\t}\n\n\tpullGroupListData(groupList) {\n\t\tvar groupListData = [];\n\n\t\tgroupList.forEach((group) => {\n\t\t\tvar groupHeader = {};\n\t\t\tgroupHeader.level = 0;\n\t\t\tgroupHeader.rowCount = 0;\n\t\t\tgroupHeader.headerContent = \"\";\n\t\t\tvar childData = [];\n\n\t\t\tif (group.hasSubGroups) {\n\t\t\t\tchildData = this.pullGroupListData(group.groupList);\n\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.rowCount = childData.length - group.groupList.length; // data length minus number of sub-headers\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, groupHeader.rowCount, group.rows, group);\n\n\t\t\t\tgroupListData.push(groupHeader);\n\t\t\t\tgroupListData = groupListData.concat(childData);\n\t\t\t}\n\n\t\t\telse {\n\t\t\t\tgroupHeader.level = group.level;\n\t\t\t\tgroupHeader.headerContent = group.generator(group.key, group.rows.length, group.rows, group);\n\t\t\t\tgroupHeader.rowCount = group.getRows().length;\n\n\t\t\t\tgroupListData.push(groupHeader);\n\n\t\t\t\tgroup.getRows().forEach((row) => {\n\t\t\t\t\tgroupListData.push(row.getData(\"data\"));\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\n\t\treturn groupListData\n\t}\n\n\tgetGroupedData(){\n\n\t\treturn this.pullGroupListData(this.groupList);\n\t}\n\n\tgetRowGroup(row){\n\t\tvar match = false;\n\n\t\tthis.groupList.forEach((group) => {\n\t\t\tvar result = group.getRowGroup(row);\n\n\t\t\tif(result){\n\t\t\t\tmatch = result;\n\t\t\t}\n\t\t});\n\n\t\treturn match;\n\t}\n\n\tcountGroups(){\n\t\treturn this.groupList.length;\n\t}\n\n\tgenerateGroups(rows){\n\t\tvar oldGroups = this.groups;\n\n\t\tthis.groups = {};\n\t\tthis.groupList = [];\n\n\t\tif(this.allowedValues && this.allowedValues[0]){\n\t\t\tthis.allowedValues[0].forEach((value) => {\n\t\t\t\tthis.createGroup(value, 0, oldGroups);\n\t\t\t});\n\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToExistingGroup(row, oldGroups);\n\t\t\t});\n\t\t}else{\n\t\t\trows.forEach((row) => {\n\t\t\t\tthis.assignRowToGroup(row, oldGroups);\n\t\t\t});\n\t\t}\n\t}\n\n\tcreateGroup(groupID, level, oldGroups){\n\t\tvar groupKey = level + \"_\" + groupID,\n\t\tgroup;\n\n\t\toldGroups = oldGroups || [];\n\n\t\tgroup = new Group(this, false, level, groupID, this.groupIDLookups[0].field, this.headerGenerator[0], oldGroups[groupKey]);\n\n\t\tthis.groups[groupKey] = group;\n\t\tthis.groupList.push(group);\n\t}\n\n\tassignRowToExistingGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tgroupKey = \"0_\" + groupID;\n\n\t\tif(this.groups[groupKey]){\n\t\t\tthis.groups[groupKey].addRow(row);\n\t\t}\n\t}\n\n\tassignRowToGroup(row, oldGroups){\n\t\tvar groupID = this.groupIDLookups[0].func(row.getData()),\n\t\tnewGroupNeeded = !this.groups[\"0_\" + groupID];\n\n\t\tif(newGroupNeeded){\n\t\t\tthis.createGroup(groupID, 0, oldGroups);\n\t\t}\n\n\t\tthis.groups[\"0_\" + groupID].addRow(row);\n\n\t\treturn !newGroupNeeded;\n\t}\n\n\treassignRowToGroup(row){\n\t\tif(row.type === \"row\"){\n\t\t\tvar oldRowGroup = row.modules.group,\n\t\t\toldGroupPath = oldRowGroup.getPath(),\n\t\t\tnewGroupPath = this.getExpectedPath(row),\n\t\t\tsamePath = true;\n\n\t\t\t// figure out if new group path is the same as old group path\n\t\t\tvar samePath = (oldGroupPath.length == newGroupPath.length) && oldGroupPath.every((element, index) => {\n\t\t\t\treturn element === newGroupPath[index];\n\t\t\t});\n\n\t\t\t// refresh if they new path and old path aren't the same (aka the row's groupings have changed)\n\t\t\tif(!samePath) {\n\t\t\t\toldRowGroup.removeRow(row);\n\t\t\t\tthis.assignRowToGroup(row, this.groups);\n\t\t\t\tthis.refreshData(true);\n\t\t\t}\n\t\t}\n\t}\n\n\tgetExpectedPath(row) {\n\t\tvar groupPath = [], rowData = row.getData();\n\n\t\tthis.groupIDLookups.forEach((groupId) => {\n\t\t\tgroupPath.push(groupId.func(rowData));\n\t\t});\n\n\t\treturn groupPath;\n\t}\n\n\tupdateGroupRows(force){\n\t\tvar output = [],\n\t\toldRowCount;\n\n\t\tthis.groupList.forEach((group) => {\n\t\t\toutput = output.concat(group.getHeadersAndRows());\n\t\t});\n\n\t\tif(force){\n\t\t\tthis.refreshData(true, this.displayHandler);\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tscrollHeaders(left){\n\t\tif(this.table.options.renderHorizontal === \"virtual\"){\n\t\t\tleft -= this.table.columnManager.renderer.vDomPadLeft;\n\t\t}\n\n\t\tleft = left + \"px\";\n\n\t\tthis.groupList.forEach((group) => {\n\t\t\tgroup.scrollHeader(left);\n\t\t});\n\t}\n\n\tremoveGroup(group){\n\t\tvar groupKey = group.level + \"_\" + group.key,\n\t\tindex;\n\n\t\tif(this.groups[groupKey]){\n\t\t\tdelete this.groups[groupKey];\n\n\t\t\tindex = this.groupList.indexOf(group);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.groupList.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nGroupRows.moduleName = \"groupRows\";\n\nexport default GroupRows;","import Module from '../../core/Module.js';\nimport Row from '../../core/row/Row.js';\nimport Cell from '../../core/cell/Cell.js';\n\nimport defaultUndoers from './defaults/undoers.js';\nimport defaultRedoers from './defaults/redoers.js';\n\nclass History extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\n\t\tthis.registerTableOption(\"history\", false); //enable edit history\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.history){\n\t\t\tthis.subscribe(\"cell-value-updated\", this.cellUpdated.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.clearComponentHistory.bind(this));\n\t\t\tthis.subscribe(\"row-delete\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clear.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowAdded.bind(this));\n\t\t\tthis.subscribe(\"row-move\", this.rowMoved.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"undo\", this.undo.bind(this));\n\t\tthis.registerTableFunction(\"redo\", this.redo.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryUndoSize\", this.getHistoryUndoSize.bind(this));\n\t\tthis.registerTableFunction(\"getHistoryRedoSize\", this.getHistoryRedoSize.bind(this));\n\t\tthis.registerTableFunction(\"clearHistory\", this.clear.bind(this));\n\t}\n\n\trowMoved(from, to, after){\n\t\tthis.action(\"rowMove\", from, {posFrom:this.table.rowManager.getRowPosition(from), posTo:this.table.rowManager.getRowPosition(to), to:to, after:after});\n\t}\n\n\trowAdded(row, data, pos, index){\n\t\tthis.action(\"rowAdd\", row, {data:data, pos:pos, index:index});\n\t}\n\n\trowDeleted(row){\n\t\tvar index, rows;\n\n\t\tif(this.table.options.groupBy){\n\n\t\t\trows = row.getComponent().getGroup().rows\n\t\t\tindex = rows.indexOf(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = rows[index-1];\n\t\t\t}\n\t\t}else{\n\t\t\tindex = row.table.rowManager.getRowIndex(row);\n\n\t\t\tif(index){\n\t\t\t\tindex = row.table.rowManager.rows[index-1];\n\t\t\t}\n\t\t}\n\n\t\tthis.action(\"rowDelete\", row, {data:row.getData(), pos:!index, index:index});\n\t}\n\n\tcellUpdated(cell){\n\t\tthis.action(\"cellEdit\", cell, {oldValue:cell.oldValue, newValue:cell.value});\n\t}\n\n\tclear(){\n\t\tthis.history = [];\n\t\tthis.index = -1;\n\t}\n\n\taction(type, component, data){\n\t\tthis.history = this.history.slice(0, this.index + 1);\n\n\t\tthis.history.push({\n\t\t\ttype:type,\n\t\t\tcomponent:component,\n\t\t\tdata:data,\n\t\t});\n\n\t\tthis.index ++;\n\t}\n\n\tgetHistoryUndoSize(){\n\t\treturn this.index + 1;\n\t}\n\n\tgetHistoryRedoSize(){\n\t\treturn this.history.length - (this.index + 1);\n\t}\n\n\tclearComponentHistory(component){\n\t\tvar index = this.history.findIndex(function(item){\n\t\t\treturn item.component === component;\n\t\t});\n\n\t\tif(index > -1){\n\t\t\tthis.history.splice(index, 1);\n\t\t\tif(index <= this.index){\n\t\t\t\tthis.index--;\n\t\t\t}\n\n\t\t\tthis.clearComponentHistory(component);\n\t\t}\n\t}\n\n\tundo(){\n\t\tif(this.index > -1){\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.undoers[action.type].call(this, action);\n\n\t\t\tthis.index--;\n\n\t\t\tthis.dispatchExternal(\"historyUndo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Undo Error - No more history to undo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tredo(){\n\t\tif(this.history.length-1 > this.index){\n\n\t\t\tthis.index++;\n\n\t\t\tlet action = this.history[this.index];\n\n\t\t\tHistory.redoers[action.type].call(this, action);\n\n\t\t\tthis.dispatchExternal(\"historyRedo\", action.type, action.component.getComponent(), action.data);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"History Redo Error - No more history to redo\");\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//rebind rows to new element after deletion\n\t_rebindRow(oldRow, newRow){\n\t\tthis.history.forEach(function(action){\n\t\t\tif(action.component instanceof Row){\n\t\t\t\tif(action.component === oldRow){\n\t\t\t\t\taction.component = newRow;\n\t\t\t\t}\n\t\t\t}else if(action.component instanceof Cell){\n\t\t\t\tif(action.component.row === oldRow){\n\t\t\t\t\tvar field = action.component.column.getField();\n\n\t\t\t\t\tif(field){\n\t\t\t\t\t\taction.component = newRow.getCell(field);\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}\n\nHistory.moduleName = \"history\";\n\n//load defaults\nHistory.undoers = defaultUndoers;\nHistory.redoers = defaultRedoers;\n\nexport default History;","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.oldValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowDelete: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posFrom], !action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t},\n};","export default {\n\tcellEdit: function(action){\n\t\taction.component.setValueProcessData(action.data.newValue);\n\t\taction.component.cellRendered();\n\t},\n\n\trowAdd: function(action){\n\t\tvar newRow = this.table.rowManager.addRowActual(action.data.data, action.data.pos, action.data.index);\n\n\t\tif(this.table.options.groupBy && this.table.modExists(\"groupRows\")){\n\t\t\tthis.table.modules.groupRows.updateGroupRows(true);\n\t\t}\n\n\t\tthis._rebindRow(action.component, newRow);\n\t},\n\n\trowDelete:function(action){\n\t\taction.component.deleteActual();\n\t},\n\n\trowMove: function(action){\n\t\tthis.table.rowManager.moveRowActual(action.component, this.table.rowManager.rows[action.data.posTo], action.data.after);\n\t\tthis.table.rowManager.redraw();\n\t},\n};","import Module from '../../core/Module.js';\nimport Column from '../../core/column/Column.js';\n\nclass HtmlTableImport extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.fieldIndex = [];\n\t\tthis.hasIndex = false;\n\t}\n\n\tinitialize(){\n\t\tthis.tableElementCheck();\n\t}\n\n\ttableElementCheck(){\n\t\tif(this.table.originalElement && this.table.originalElement.tagName === \"TABLE\"){\n\t\t\tif(this.table.originalElement.childNodes.length){\n\t\t\t\tthis.parseTable();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Unable to parse data from empty table tag, Tabulator should be initialized on a div tag unless importing data from a table element.\");\n\t\t\t}\n\t\t}\n\t}\n\n\tparseTable(){\n\t\tvar element = this.table.originalElement,\n\t\toptions = this.table.options,\n\t\tcolumns = options.columns,\n\t\theaders = element.getElementsByTagName(\"th\"),\n\t\trows = element.getElementsByTagName(\"tbody\")[0],\n\t\tdata = [],\n\t\tnewTable;\n\n\t\tthis.hasIndex = false;\n\n\t\tthis.dispatchExternal(\"htmlImporting\");\n\n\t\trows = rows ? rows.getElementsByTagName(\"tr\") : [];\n\n\t\t//check for Tabulator inline options\n\t\tthis._extractOptions(element, options);\n\n\t\tif(headers.length){\n\t\t\tthis._extractHeaders(headers, rows);\n\t\t}else{\n\t\t\tthis._generateBlankHeaders(headers, rows);\n\t\t}\n\n\t\t//iterate through table rows and build data set\n\t\tfor(var index = 0; index < rows.length; index++){\n\t\t\tvar row = rows[index],\n\t\t\tcells = row.getElementsByTagName(\"td\"),\n\t\t\titem = {};\n\n\t\t\t//create index if the dont exist in table\n\t\t\tif(!this.hasIndex){\n\t\t\t\titem[options.index] = index;\n\t\t\t}\n\n\t\t\tfor(var i = 0; i < cells.length; i++){\n\t\t\t\tvar cell = cells[i];\n\t\t\t\tif(typeof this.fieldIndex[i] !== \"undefined\"){\n\t\t\t\t\titem[this.fieldIndex[i]] = cell.innerHTML;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//add row data to item\n\t\t\tdata.push(item);\n\t\t}\n\n\t\toptions.data = data;\n\n\t\tthis.dispatchExternal(\"htmlImported\");\n\t}\n\n\t//extract tabulator attribute options\n\t_extractOptions(element, options, defaultOptions){\n\t\tvar attributes = element.attributes;\n\t\tvar optionsArr = defaultOptions ? Object.keys(defaultOptions) : Object.keys(options);\n\t\tvar optionsList = {};\n\n\t\toptionsArr.forEach((item) => {\n\t\t\toptionsList[item.toLowerCase()] = item;\n\t\t});\n\n\t\tfor(var index in attributes){\n\t\t\tvar attrib = attributes[index];\n\t\t\tvar name;\n\n\t\t\tif(attrib && typeof attrib == \"object\" && attrib.name && attrib.name.indexOf(\"tabulator-\") === 0){\n\t\t\t\tname = attrib.name.replace(\"tabulator-\", \"\");\n\n\t\t\t\tif(typeof optionsList[name] !== \"undefined\"){\n\t\t\t\t\toptions[optionsList[name]] = this._attribValue(attrib.value);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t//get value of attribute\n\t_attribValue(value){\n\t\tif(value === \"true\"){\n\t\t\treturn true;\n\t\t}\n\n\t\tif(value === \"false\"){\n\t\t\treturn false;\n\t\t}\n\n\t\treturn value;\n\t}\n\n\t//find column if it has already been defined\n\t_findCol(title){\n\t\tvar match = this.table.options.columns.find((column) => {\n\t\t\treturn column.title === title;\n\t\t});\n\n\t\treturn match || false;\n\t}\n\n\t//extract column from headers\n\t_extractHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\texists = false,\n\t\t\tcol = this._findCol(header.textContent),\n\t\t\twidth, attributes;\n\n\t\t\tif(col){\n\t\t\t\texists = true;\n\t\t\t}else{\n\t\t\t\tcol = {title:header.textContent.trim()};\n\t\t\t}\n\n\t\t\tif(!col.field) {\n\t\t\t\tcol.field = header.textContent.trim().toLowerCase().replace(\" \", \"_\");\n\t\t\t}\n\n\t\t\twidth = header.getAttribute(\"width\");\n\n\t\t\tif(width && !col.width)\t{\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\t//check for Tabulator inline options\n\t\t\tthis._extractOptions(header, col, this.table.columnManager.optionsList.registeredDefaults);\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tif(col.field == this.table.options.index){\n\t\t\t\tthis.hasIndex = true;\n\t\t\t}\n\n\t\t\tif(!exists){\n\t\t\t\tthis.table.options.columns.push(col);\n\t\t\t}\n\n\t\t}\n\t}\n\n\t//generate blank headers\n\t_generateBlankHeaders(headers, rows){\n\t\tfor(var index = 0; index < headers.length; index++){\n\t\t\tvar header = headers[index],\n\t\t\tcol = {title:\"\", field:\"col\" + index};\n\n\t\t\tthis.fieldIndex[index] = col.field;\n\n\t\t\tvar width = header.getAttribute(\"width\");\n\n\t\t\tif(width){\n\t\t\t\tcol.width = width;\n\t\t\t}\n\n\t\t\tthis.table.options.columns.push(col);\n\t\t}\n\t}\n}\n\nHtmlTableImport.moduleName = \"htmlTableImport\";\n\nexport default HtmlTableImport;","import csv from './importers/csv.js';\nimport json from './importers/json.js';\n\nexport default {\n\tcsv:csv,\n\tjson:json,\n};","function csvImporter(input){\n    var data = [],\n    row = 0, \n    col = 0,\n    inQuote = false;\n    \n    //Iterate over each character\n    for (let index = 0; index < input.length; index++) {\n        let char = input[index], \n        nextChar = input[index+1];      \n        \n        //Initialize empty row\n        if(!data[row]){\n            data[row] = [];\n        }\n\n        //Initialize empty column\n        if(!data[row][col]){\n            data[row][col] = \"\";\n        }\n        \n        //Handle quotation mark inside string\n        if (char == '\"' && inQuote && nextChar == '\"') { \n            data[row][col] += char; \n            index++;\n            continue; \n        }\n        \n        //Begin / End Quote\n        if (char == '\"') { \n            inQuote = !inQuote;\n            continue;\n        }\n        \n        //Next column (if not in quote)\n        if (char == ',' && !inQuote) { \n            col++;\n            continue; \n        }\n        \n        //New row if new line and not in quote (CRLF) \n        if (char == '\\r' && nextChar == '\\n' && !inQuote) { \n            col = 0; \n            row++; \n            index++; \n            continue; \n        }\n        \n        //New row if new line and not in quote (CR or LF) \n        if ((char == '\\r' || char == '\\n') && !inQuote) { \n            col = 0;\n            row++;\n            continue; \n        }\n\n        //Normal Character, append to column\n        data[row][col] += char;\n    }\n\n    return data;\n}\n\nexport default csvImporter;","export default function(input){\n    try {\n        return JSON.parse(input);\n    } catch(e) {\n        console.warn(\"JSON Import Error - File contents is invalid JSON\", e);\n        return Promise.reject();\n    }\n}","import Module from '../../core/Module.js';\n\nimport defaultImporters from './defaults/importers.js';\n\nclass Import extends Module{\n    \n    constructor(table){\n        super(table);\n        \n        this.registerTableOption(\"importFormat\");\n        this.registerTableOption(\"importReader\", \"text\");\n    }\n    \n    initialize(){\n        this.registerTableFunction(\"import\", this.importFromFile.bind(this));\n\n        if(this.table.options.importFormat){\n            this.subscribe(\"data-loading\", this.loadDataCheck.bind(this), 10);\n            this.subscribe(\"data-load\", this.loadData.bind(this), 10);\n        }\n    }\n\n    loadDataCheck(data){\n        return typeof data === \"string\";\n    }\n\n    loadData(data, params, config, silent, previousData){\n        return this.importData(this.lookupImporter(), data)\n        .then(this.structureData.bind(this))\n        .catch((err) => {\n            console.error(\"Import Error:\", err || \"Unable to import data\")\n            return Promise.reject(err);\n        })\n    }\n\n    lookupImporter(importFormat){\n        var importer;\n        \n        if(!importFormat){\n            importFormat = this.table.options.importFormat;\n        }\n        \n        if(typeof importFormat === \"string\"){\n            importer = Import.importers[importFormat];\n        }else{\n            importer = importFormat;\n        }\n\n        if(!importer){\n            console.error(\"Import Error - Importer not found:\", importFormat);\n        }\n        \n        return importer;\n    }\n    \n    importFromFile(importFormat, extension){\n        var importer = this.lookupImporter(importFormat);\n        \n        if(importer){\n            return this.pickFile(extension)\n            .then(this.importData.bind(this, importer))\n            .then(this.structureData.bind(this))\n            .then(this.setData.bind(this))\n            .catch((err) => {\n                console.error(\"Import Error:\", err || \"Unable to import file\")\n                return Promise.reject(err);\n            })\n        }\n    }\n    \n    pickFile(extensions){\n        return new Promise((resolve, reject) => {\n            var input = document.createElement(\"input\");\n            input.type = \"file\";\n            input.accept = extensions;\n            \n            input.addEventListener(\"change\", (e) => {\n                var file = input.files[0],\n                reader = new FileReader(),\n                data;\n                \n                switch(this.table.options.importReader){\n                    case \"buffer\":\n                        reader.readAsArrayBuffer(file);\n                    break;\n\n                    case \"binary\":\n                        reader.readAsBinaryString(file);\n                    break;\n\n                    case \"url\":\n                        reader.readAsDataURL(file);\n                    break;\n\n                    case \"text\":\n                    default:\n                        reader.readAsText(file);\n                }\n                  \n                reader.onload = (e) => {\n                    resolve(reader.result)\n                };\n                \n                reader.onerror = (e) => {\n                    console.warn(\"File Load Error - Unable to read file\");\n                    reject();\n                };\n            });\n            \n            input.click();\n        });\n    }\n    \n    importData(importer, fileContents){\n        var data = importer.call(this.table, fileContents);\n        \n        if(data instanceof Promise){\n            return data;\n        }else{\n            return data ? Promise.resolve(data) : Promise.reject();\n        }\n    }\n\n    structureData(parsedData){\n        var data = [];\n        \n        if(Array.isArray(parsedData) && parsedData.length && Array.isArray(parsedData[0])){\n            if(this.table.options.autoColumns){\n                data = this.structureArrayToObject(parsedData);\n            }else{\n                data = this.structureArrayToColumns(parsedData);\n            }\n\n            return data;\n        }else{\n            return parsedData;\n        }\n    }\n\n    structureArrayToObject(parsedData){\n        var columns = parsedData.shift();\n\n        var data = parsedData.map((values) => {\n            var row = {};\n\n            columns.forEach((key, i) => {\n                row[key] = values[i];\n            })\n\n            return row;\n        })\n\n        return data;\n    }\n\n    structureArrayToColumns(parsedData){\n        var data = [],\n        columns = this.table.getColumns();\n\n        //remove first row if it is the column names\n        if(columns[0] && parsedData[0][0]){\n            if(columns[0].getDefinition().title === parsedData[0][0]){\n                parsedData.shift();\n            }\n        }\n        \n        //convert row arrays to objects\n        parsedData.forEach((rowData) => {\n            var row = {};\n\n            rowData.forEach((value, index) => {\n                var column = columns[index];\n\n                if(column){\n                    row[column.getField()] = value;\n                }\n            })\n\n            data.push(row);\n        });\n\n        return data;\n    }\n    \n    setData(data){\n        return this.table.setData(data);\n    }\n}\n\nImport.moduleName = \"import\";\n\n//load defaults\nImport.importers = defaultImporters;\n\nexport default Import;","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport Cell from '../../core/cell/Cell';\nimport Column from '../../core/column/Column';\n\nclass Interaction extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.eventMap = {\n\t\t\t//row events\n\t\t\trowClick:\"row-click\",\n\t\t\trowDblClick:\"row-dblclick\",\n\t\t\trowContext:\"row-contextmenu\",\n\t\t\trowMouseEnter:\"row-mouseenter\",\n\t\t\trowMouseLeave:\"row-mouseleave\",\n\t\t\trowMouseOver:\"row-mouseover\",\n\t\t\trowMouseOut:\"row-mouseout\",\n\t\t\trowMouseMove:\"row-mousemove\",\n\t\t\trowTap:\"row\",\n\t\t\trowDblTap:\"row\",\n\t\t\trowTapHold:\"row\",\n\n\t\t\t//cell events\n\t\t\tcellClick:\"cell-click\",\n\t\t\tcellDblClick:\"cell-dblclick\",\n\t\t\tcellContext:\"cell-contextmenu\",\n\t\t\tcellMouseEnter:\"cell-mouseenter\",\n\t\t\tcellMouseLeave:\"cell-mouseleave\",\n\t\t\tcellMouseOver:\"cell-mouseover\",\n\t\t\tcellMouseOut:\"cell-mouseout\",\n\t\t\tcellMouseMove:\"cell-mousemove\",\n\t\t\tcellTap:\"cell\",\n\t\t\tcellDblTap:\"cell\",\n\t\t\tcellTapHold:\"cell\",\n\n\t\t\t//column header events\n\t\t\theaderClick:\"column-click\",\n\t\t\theaderDblClick:\"column-dblclick\",\n\t\t\theaderContext:\"column-contextmenu\",\n\t\t\theaderMouseEnter:\"column-mouseenter\",\n\t\t\theaderMouseLeave:\"column-mouseleave\",\n\t\t\theaderMouseOver:\"column-mouseover\",\n\t\t\theaderMouseOut:\"column-mouseout\",\n\t\t\theaderMouseMove:\"column-mousemove\",\n\t\t\theaderTap:\"column\",\n\t\t\theaderDblTap:\"column\",\n\t\t\theaderTapHold:\"column\",\n\n\t\t\t//group header\n\t\t\tgroupClick:\"group-click\",\n\t\t\tgroupDblClick:\"group-dblclick\",\n\t\t\tgroupContext:\"group-contextmenu\",\n\t\t\tgroupMouseEnter:\"group-mouseenter\",\n\t\t\tgroupMouseLeave:\"group-mouseleave\",\n\t\t\tgroupMouseOver:\"group-mouseover\",\n\t\t\tgroupMouseOut:\"group-mouseout\",\n\t\t\tgroupMouseMove:\"group-mousemove\",\n\t\t\tgroupTap:\"group\",\n\t\t\tgroupDblTap:\"group\",\n\t\t\tgroupTapHold:\"group\",\n\t\t}\n\n\t\tthis.subscribers = {};\n\n\t\tthis.touchSubscribers = {};\n\n\t\tthis.columnSubscribers = {};\n\n\t\tthis.touchWatchers = {\n\t\t\trow:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcell:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tcolumn:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t},\n\t\t\tgroup:{\n\t\t\t\ttap:null,\n\t\t\t\ttapDbl:null,\n\t\t\t\ttapHold:null,\n\t\t\t}\n\t\t}\n\n\t\tthis.registerColumnOption(\"headerClick\");\n\t\tthis.registerColumnOption(\"headerDblClick\");\n\t\tthis.registerColumnOption(\"headerContext\");\n\t\tthis.registerColumnOption(\"headerMouseEnter\");\n\t\tthis.registerColumnOption(\"headerMouseLeave\");\n\t\tthis.registerColumnOption(\"headerMouseOver\");\n\t\tthis.registerColumnOption(\"headerMouseOut\");\n\t\tthis.registerColumnOption(\"headerMouseMove\");\n\t\tthis.registerColumnOption(\"headerTap\");\n\t\tthis.registerColumnOption(\"headerDblTap\");\n\t\tthis.registerColumnOption(\"headerTapHold\");\n\n\t\tthis.registerColumnOption(\"cellClick\");\n\t\tthis.registerColumnOption(\"cellDblClick\");\n\t\tthis.registerColumnOption(\"cellContext\");\n\t\tthis.registerColumnOption(\"cellMouseEnter\");\n\t\tthis.registerColumnOption(\"cellMouseLeave\");\n\t\tthis.registerColumnOption(\"cellMouseOver\");\n\t\tthis.registerColumnOption(\"cellMouseOut\");\n\t\tthis.registerColumnOption(\"cellMouseMove\");\n\t\tthis.registerColumnOption(\"cellTap\");\n\t\tthis.registerColumnOption(\"cellDblTap\");\n\t\tthis.registerColumnOption(\"cellTapHold\");\n\n\t}\n\n\tinitialize(){\n\t\tthis.initializeExternalEvents();\n\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this))\n\t\tthis.subscribe(\"cell-dblclick\", this.cellContentsSelectionFixer.bind(this))\n\t}\n\n\tcellContentsSelectionFixer(e, cell){\n\t\tif(this.table.modExists(\"edit\")){\n\t\t\tif (this.table.modules.edit.currentCell === this){\n\t\t\t\treturn; //prevent instant selection of editor content\n\t\t\t}\n\t\t}\n\n\t\te.preventDefault();\n\n\t\ttry{\n\t\t\tif (document.selection) { // IE\n\t\t\t\tvar range = document.body.createTextRange();\n\t\t\t\trange.moveToElementText(this.element);\n\t\t\t\trange.select();\n\t\t\t} else if (window.getSelection) {\n\t\t\t\tvar range = document.createRange();\n\t\t\t\trange.selectNode(this.element);\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t\twindow.getSelection().addRange(range);\n\t\t\t}\n\t\t}catch(e){}\n\t}\n\n\tinitializeExternalEvents(){\n\t\tfor(let key in this.eventMap){\n\t\t\tthis.subscriptionChangeExternal(key, this.subscriptionChanged.bind(this, key))\n\t\t}\n\t}\n\n\tsubscriptionChanged(key, added){\n\t\tvar index;\n\n\t\tif(added){\n\t\t\tif(!this.subscribers[key]){\n\t\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\t\tthis.subscribers[key] = this.handle.bind(this, key);\n\t\t\t\t\tthis.subscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t}else{\n\t\t\t\t\tthis.subscribeTouchEvents(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.eventMap[key].includes(\"-\")){\n\t\t\t\tif(this.subscribers[key] && !this.columnSubscribers[key]  && !this.subscribedExternal(key)){\n\t\t\t\t\tthis.unsubscribe(this.eventMap[key], this.subscribers[key]);\n\t\t\t\t\tdelete this.subscribers[key];\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.unsubscribeTouchEvents(key);\n\t\t\t}\n\t\t}\n\t}\n\n\n\tsubscribeTouchEvents(key){\n\t\tvar type = this.eventMap[key];\n\n\t\tif(!this.touchSubscribers[type + \"-touchstart\"]){\n\t\t\tthis.touchSubscribers[type + \"-touchstart\"] = this.handleTouch.bind(this, type, \"start\");\n\t\t\tthis.touchSubscribers[type + \"-touchend\"] = this.handleTouch.bind(this, type, \"end\");\n\n\t\t\tthis.subscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\tthis.subscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\t\t}\n\n\t\tthis.subscribers[key] = true;\n\t}\n\n\tunsubscribeTouchEvents(key){\n\t\tvar notouch = true,\n\t\ttype = this.eventMap[key];\n\n\t\tif(this.subscribers[key] && !this.subscribedExternal(key)){\n\t\t\tdelete this.subscribers[key];\n\n\t\t\tfor(let i in this.eventMap){\n\t\t\t\tif(this.eventMap[i] === type){\n\t\t\t\t\tif(this.subscribers[i]){\n\t\t\t\t\t\tnotouch = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(notouch){\n\t\t\t\tthis.unsubscribe(type + \"-touchstart\", this.touchSubscribers[type + \"-touchstart\"]);\n\t\t\t\tthis.unsubscribe(type + \"-touchend\", this.touchSubscribers[type + \"-touchend\"]);\n\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchstart\"];\n\t\t\t\tdelete this.touchSubscribers[type + \"-touchend\"];\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeColumn(column){\n\t\tvar def = column.definition;\n\n\t\tfor(let key in this.eventMap){\n\t\t\tif(def[key]){\n\t\t\t\tthis.subscriptionChanged(key, true);\n\n\t\t\t\tif(!this.columnSubscribers[key]){\n\t\t\t\t\tthis.columnSubscribers[key] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.columnSubscribers[key].push(column);\n\t\t\t}\n\t\t}\n\t}\n\n\thandle(action, e, component){\n\t\tthis.dispatchEvent(action, e, component);\n\t}\n\n\thandleTouch(type, action, e, component){\n\t\tvar watchers = this.touchWatchers[type];\n\n\t\tif(type === \"column\"){\n\t\t\ttype = \"header\";\n\t\t}\n\n\t\tswitch(action){\n\t\t\tcase \"start\":\n\t\t\twatchers.tap = true;\n\n\t\t\tclearTimeout(watchers.tapHold);\n\n\t\t\twatchers.tapHold = setTimeout(() => {\n\t\t\t\tclearTimeout(watchers.tapHold);\n\t\t\t\twatchers.tapHold = null;\n\n\t\t\t\twatchers.tap = null;\n\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\tthis.dispatchEvent(type + \"TapHold\", e,  component);\n\t\t\t}, 1000);\n\t\t\tbreak;\n\n\t\t\tcase \"end\":\n\t\t\tif(watchers.tap){\n\n\t\t\t\twatchers.tap = null;\n\t\t\t\tthis.dispatchEvent(type + \"Tap\", e,  component);\n\t\t\t}\n\n\t\t\tif(watchers.tapDbl){\n\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\twatchers.tapDbl = null;\n\n\t\t\t\tthis.dispatchEvent(type + \"DblTap\", e,  component);\n\t\t\t}else{\n\t\t\t\twatchers.tapDbl = setTimeout(() => {\n\t\t\t\t\tclearTimeout(watchers.tapDbl);\n\t\t\t\t\twatchers.tapDbl = null;\n\t\t\t\t}, 300);\n\t\t\t}\n\n\t\t\tclearTimeout(watchers.tapHold);\n\t\t\twatchers.tapHold = null;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tdispatchEvent(action, e, component){\n\t\tvar componentObj = component.getComponent(),\n\t\tcallback;\n\n\t\tif(this.columnSubscribers[action]){\n\n\t\t\tif(component instanceof Cell){\n\t\t\t\tcallback = component.column.definition[action];\n\t\t\t}else if(component instanceof Column){\n\t\t\t\tcallback = component.definition[action];\n\t\t\t}\n\n\t\t\tif(callback){\n\t\t\t\tcallback(e, componentObj);\n\t\t\t}\n\t\t}\n\n\t\tthis.dispatchExternal(action, e, componentObj);\n\t}\n}\n\nInteraction.moduleName = \"interaction\";\n\nexport default Interaction;","import Module from '../../core/Module.js';\n\nimport defaultBindings from './defaults/bindings.js';\nimport defaultActions from './defaults/actions.js';\n\nclass Keybindings extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.watchKeys = null;\n\t\tthis.pressedKeys = null;\n\t\tthis.keyupBinding = false;\n\t\tthis.keydownBinding = false;\n\n\t\tthis.registerTableOption(\"keybindings\", {}); //array for keybindings\n\t\tthis.registerTableOption(\"tabEndNewRow\", false); //create new row when tab to end of table\n\t}\n\n\tinitialize(){\n\t\tvar bindings = this.table.options.keybindings,\n\t\tmergedBindings = {};\n\n\t\tthis.watchKeys = {};\n\t\tthis.pressedKeys = [];\n\n\t\tif(bindings !== false){\n\t\t\tObject.assign(mergedBindings, Keybindings.bindings)\n\t\t\tObject.assign(mergedBindings, bindings)\n\n\t\t\tthis.mapBindings(mergedBindings);\n\t\t\tthis.bindEvents();\n\t\t}\n\n\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t}\n\n\tmapBindings(bindings){\n\t\tfor(let key in bindings){\n\t\t\tif(Keybindings.actions[key]){\n\t\t\t\tif(bindings[key]){\n\t\t\t\t\tif(typeof bindings[key] !== \"object\"){\n\t\t\t\t\t\tbindings[key] = [bindings[key]];\n\t\t\t\t\t}\n\n\t\t\t\t\tbindings[key].forEach((binding) => {\n\t\t\t\t\t\tvar bindingList = Array.isArray(binding) ?  binding : [binding];\n\t\t\t\t\t\t\n\t\t\t\t\t\tbindingList.forEach((item) => {\n\t\t\t\t\t\t\tthis.mapBinding(key, item);\n\t\t\t\t\t\t});\t\t\t\t\t\t\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Key Binding Error - no such action:\", key);\n\t\t\t}\n\t\t}\n\t}\n\n\tmapBinding(action, symbolsList){\n\t\tvar binding = {\n\t\t\taction: Keybindings.actions[action],\n\t\t\tkeys: [],\n\t\t\tctrl: false,\n\t\t\tshift: false,\n\t\t\tmeta: false,\n\t\t};\n\n\t\tvar symbols = symbolsList.toString().toLowerCase().split(\" \").join(\"\").split(\"+\");\n\n\t\tsymbols.forEach((symbol) => {\n\t\t\tswitch(symbol){\n\t\t\t\tcase \"ctrl\":\n\t\t\t\tbinding.ctrl = true;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"shift\":\n\t\t\t\tbinding.shift = true;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"meta\":\n\t\t\t\tbinding.meta = true;\n\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\tsymbol = isNaN(symbol) ? symbol.toUpperCase().charCodeAt(0) : parseInt(symbol);\n\t\t\t\tbinding.keys.push(symbol);\n\n\t\t\t\tif(!this.watchKeys[symbol]){\n\t\t\t\t\tthis.watchKeys[symbol] = [];\n\t\t\t\t}\n\n\t\t\t\tthis.watchKeys[symbol].push(binding);\n\t\t\t}\n\t\t});\n\t}\n\n\tbindEvents(){\n\t\tvar self = this;\n\n\t\tthis.keyupBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tself.pressedKeys.push(code);\n\n\t\t\t\tbindings.forEach(function(binding){\n\t\t\t\t\tself.checkBinding(e, binding);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tthis.keydownBinding = function(e){\n\t\t\tvar code = e.keyCode;\n\t\t\tvar bindings = self.watchKeys[code];\n\n\t\t\tif(bindings){\n\n\t\t\t\tvar index = self.pressedKeys.indexOf(code);\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tself.pressedKeys.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\tthis.table.element.addEventListener(\"keydown\", this.keyupBinding);\n\n\t\tthis.table.element.addEventListener(\"keyup\", this.keydownBinding);\n\t}\n\n\tclearBindings(){\n\t\tif(this.keyupBinding){\n\t\t\tthis.table.element.removeEventListener(\"keydown\", this.keyupBinding);\n\t\t}\n\n\t\tif(this.keydownBinding){\n\t\t\tthis.table.element.removeEventListener(\"keyup\", this.keydownBinding);\n\t\t}\n\t}\n\n\tcheckBinding(e, binding){\n\t\tvar match = true;\n\n\t\tif(e.ctrlKey == binding.ctrl && e.shiftKey == binding.shift && e.metaKey == binding.meta){\n\t\t\tbinding.keys.forEach((key) => {\n\t\t\t\tvar index = this.pressedKeys.indexOf(key);\n\n\t\t\t\tif(index == -1){\n\t\t\t\t\tmatch = false;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif(match){\n\t\t\t\tbinding.action.call(this, e);\n\t\t\t}\n\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\nKeybindings.moduleName = \"keybindings\";\n\n//load defaults\nKeybindings.bindings = defaultBindings;\nKeybindings.actions = defaultActions;\n\nexport default Keybindings;","export default {\n\tnavPrev:\"shift + 9\",\n\tnavNext:9,\n\tnavUp:38,\n\tnavDown:40,\n\tscrollPageUp:33,\n\tscrollPageDown:34,\n\tscrollToStart:36,\n\tscrollToEnd:35,\n\tundo:[\"ctrl + 90\", \"meta + 90\"],\n\tredo:[\"ctrl + 89\", \"meta + 89\"],\n\tcopyToClipboard:[\"ctrl + 67\", \"meta + 89\"],\n};","export default {\n\tkeyBlock:function(e){\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t},\n\tscrollPageUp:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop - rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos >= 0){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollPageDown:function(e){\n\t\tvar rowManager = this.table.rowManager,\n\t\tnewPos = rowManager.scrollTop + rowManager.element.clientHeight,\n\t\tscrollMax = rowManager.element.scrollHeight;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\tif(newPos <= scrollMax){\n\t\t\t\trowManager.element.scrollTop = newPos;\n\t\t\t}else{\n\t\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t\t}\n\t\t}\n\n\t\tthis.table.element.focus();\n\n\t},\n\tscrollToStart:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[0]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tscrollToEnd:function(e){\n\t\tvar rowManager = this.table.rowManager;\n\n\t\te.preventDefault();\n\n\t\tif(rowManager.displayRowsCount){\n\t\t\trowManager.scrollToRow(rowManager.getDisplayRows()[rowManager.displayRowsCount - 1]);\n\t\t}\n\n\t\tthis.table.element.focus();\n\t},\n\tnavPrev:function(e){\n\t\tthis.dispatch(\"keybinding-nav-prev\", e);\n\t},\n\n\tnavNext:function(e){\n\t\tthis.dispatch(\"keybinding-nav-next\", e);\n\t},\n\n\tnavLeft:function(e){\n\t\tthis.dispatch(\"keybinding-nav-left\", e);\n\t},\n\n\tnavRight:function(e){\n\t\tthis.dispatch(\"keybinding-nav-right\", e);\n\t},\n\n\tnavUp:function(e){\n\t\tthis.dispatch(\"keybinding-nav-up\", e);\n\t},\n\n\tnavDown:function(e){\n\t\tthis.dispatch(\"keybinding-nav-down\", e);\n\t},\n\n\tundo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.undo();\n\t\t\t}\n\t\t}\n\t},\n\n\tredo:function(e){\n\t\tvar cell = false;\n\t\tif(this.table.options.history && this.table.modExists(\"history\") && this.table.modExists(\"edit\")){\n\n\t\t\tcell = this.table.modules.edit.currentCell;\n\n\t\t\tif(!cell){\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.table.modules.history.redo();\n\t\t\t}\n\t\t}\n\t},\n\n\tcopyToClipboard:function(e){\n\t\tif(!this.table.modules.edit.currentCell){\n\t\t\tif(this.table.modExists(\"clipboard\", true)){\n\t\t\t\tthis.table.modules.clipboard.copy(false, true);\n\t\t\t}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\n\nclass Menu extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.menuContainer = null;\n\t\tthis.nestedMenuBlock = false;\n\t\t\n\t\tthis.currentComponent = null;\n\t\tthis.rootPopup = null;\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"menuContainer\", undefined); //deprecated\n\n\t\tthis.registerTableOption(\"rowContextMenu\", false);\n\t\tthis.registerTableOption(\"rowClickMenu\", false);\n\t\tthis.registerTableOption(\"groupContextMenu\", false);\n\t\tthis.registerTableOption(\"groupClickMenu\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextMenu\");\n\t\tthis.registerColumnOption(\"headerClickMenu\");\n\t\tthis.registerColumnOption(\"headerMenu\");\n\t\tthis.registerColumnOption(\"headerMenuIcon\");\n\t\tthis.registerColumnOption(\"contextMenu\");\n\t\tthis.registerColumnOption(\"clickMenu\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecationCheck();\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\n\tdeprecationCheck(){\n\t\tif(typeof this.table.options.menuContainer !== \"undefined\"){\n\t\t\tconsole.warn(\"Use of the menuContainer option is now deprecated. Please use the popupContainer option instead\");\n\n\t\t\tthis.table.options.popupContainer = this.table.options.menuContainer;\n\t\t}\n\t}\t\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextMenu){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadMenuEvent.bind(this, this.table.options.rowContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickMenu){\n\t\t\tthis.subscribe(\"row-click\", this.loadMenuEvent.bind(this, this.table.options.rowClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextMenu){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadMenuEvent.bind(this, this.table.options.groupContextMenu));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickMenu){\n\t\t\tthis.subscribe(\"group-click\", this.loadMenuEvent.bind(this, this.table.options.groupClickMenu));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar options = [\"headerContextMenu\", \"headerClickMenu\"],\n\t\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextMenu && !this.columnSubscribers.headerContextMenu){\n\t\t\tthis.columnSubscribers.headerContextMenu = this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextMenu);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadMenuTableColumnEvent.bind(this, \"headerContextMenu\"))\n\t\t}\n\t\t\n\t\tif(def.headerClickMenu && !this.columnSubscribers.headerClickMenu){\n\t\t\tthis.columnSubscribers.headerClickMenu = this.loadMenuTableColumnEvent.bind(this, \"headerClickMenu\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickMenu);\n\t\t}\n\t\t\n\t\tif(def.headerMenu){\n\t\t\tthis.initializeColumnHeaderMenu(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextMenu && !this.columnSubscribers.contextMenu){\n\t\t\tthis.columnSubscribers.contextMenu = this.loadMenuTableCellEvent.bind(this, \"contextMenu\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextMenu);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadMenuTableCellEvent.bind(this, \"contextMenu\"))\n\t\t}\n\t\t\n\t\tif(def.clickMenu && !this.columnSubscribers.clickMenu){\n\t\t\tthis.columnSubscribers.clickMenu = this.loadMenuTableCellEvent.bind(this, \"clickMenu\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickMenu);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderMenu(column){\n\t\tvar icon = column.definition.headerMenuIcon,\n\t\theaderMenuEl;\n\t\t\n\t\theaderMenuEl = document.createElement(\"span\");\n\t\theaderMenuEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderMenuEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderMenuEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderMenuEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderMenuEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadMenuEvent(column.definition.headerMenu, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerMenuEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadMenuTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadMenuEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadMenuTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadMenuEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadMenuEvent(menu, e, component){\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tmenu = typeof menu == \"function\" ? menu.call(this.table, e, component.getComponent()) : menu;\n\t\t\n\t\tthis.loadMenu(e, component, menu);\n\t}\n\t\n\tloadMenu(e, component, menu, parentEl, parentPopup){\n\t\tvar touch = !(e instanceof MouseEvent),\t\t\n\t\tmenuEl = document.createElement(\"div\"),\n\t\tpopup;\n\t\t\n\t\tmenuEl.classList.add(\"tabulator-menu\");\n\t\t\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\t//abort if no menu set\n\t\tif(!menu || !menu.length){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tif(!parentEl){\n\t\t\tif(this.nestedMenuBlock){\n\t\t\t\t//abort if child menu already open\n\t\t\t\tif(this.rootPopup){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.nestedMenuBlock = setTimeout(() => {\n\t\t\t\t\tthis.nestedMenuBlock = false;\n\t\t\t\t}, 100)\n\t\t\t}\n\t\t\t\n\t\t\tif(this.rootPopup){\n\t\t\t\tthis.rootPopup.hide();\t\n\t\t\t}\n\t\t\t\n\t\t\tthis.rootPopup = popup = this.popup(menuEl);\n\t\t\t\n\t\t}else{\n\t\t\tpopup = parentPopup.child(menuEl);\n\t\t}\n\t\t\n\t\tmenu.forEach((item) => {\n\t\t\tvar itemEl = document.createElement(\"div\"),\n\t\t\tlabel = item.label,\n\t\t\tdisabled = item.disabled;\n\t\t\t\n\t\t\tif(item.separator){\n\t\t\t\titemEl.classList.add(\"tabulator-menu-separator\");\n\t\t\t}else{\n\t\t\t\titemEl.classList.add(\"tabulator-menu-item\");\n\t\t\t\t\n\t\t\t\tif(typeof label == \"function\"){\n\t\t\t\t\tlabel = label.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(label instanceof Node){\n\t\t\t\t\titemEl.appendChild(label);\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = label;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(typeof disabled == \"function\"){\n\t\t\t\t\tdisabled = disabled.call(this.table, component.getComponent());\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(disabled){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-disabled\");\n\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\t\tthis.loadMenu(e, component, item.menu, itemEl, popup);\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(item.action){\n\t\t\t\t\t\t\titemEl.addEventListener(\"click\", (e) => {\n\t\t\t\t\t\t\t\titem.action(e, component.getComponent());\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(item.menu && item.menu.length){\n\t\t\t\t\titemEl.classList.add(\"tabulator-menu-item-submenu\");\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tmenuEl.appendChild(itemEl);\n\t\t});\n\t\t\n\t\tmenuEl.addEventListener(\"click\", (e) => {\n\t\t\tthis.rootPopup.hide();\n\t\t});\n\t\t\n\t\tpopup.show(parentEl || e);\n\t\t\n\t\tif(popup === this.rootPopup){\n\t\t\tthis.rootPopup.hideOnBlur(() => {\n\t\t\t\tthis.rootPopup = null;\n\t\t\t\t\n\t\t\t\tif(this.currentComponent){\n\t\t\t\t\tthis.dispatchExternal(\"menuClosed\", this.currentComponent.getComponent());\n\t\t\t\t\tthis.currentComponent = null;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.currentComponent = component;\n\n\t\t\tthis.dispatchExternal(\"menuOpened\", component.getComponent())\n\t\t}\n\t}\n}\n\nMenu.moduleName = \"menu\";\n\nexport default Menu;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating column header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 250; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving column\n\t\tthis.toCol = false; //destination column\n\t\tthis.toColAfter = false; //position of moving column relative to the desitnation column\n\t\tthis.startX = 0; //starting position within header element\n\t\tthis.autoScrollMargin = 40; //auto scroll on edge when within margin\n\t\tthis.autoScrollStep = 5; //auto scroll distance in pixels\n\t\tthis.autoScrollTimeout = false; //auto scroll timeout\n\t\tthis.touchMove = false;\n\t\t\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\t\n\t\tthis.registerTableOption(\"movableColumns\", false); //enable movable columns\n\t}\n\t\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-col\");\n\t\tel.classList.add(\"tabulator-col-placeholder\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.movableColumns){\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\tcolEl;\n\t\t\n\t\tif(!column.modules.frozen){\n\t\t\tcolEl = column.getElement();\n\t\t\t\n\t\t\tconfig.mousemove = function(e){\n\t\t\t\tif(column.parent === self.moving.parent){\n\t\t\t\t\tif((((self.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(colEl).left) + self.table.columnManager.element.scrollLeft) > (column.getWidth() / 2)){\n\t\t\t\t\t\tif(self.toCol !== column || !self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl.nextSibling);\n\t\t\t\t\t\t\tself.moveColumn(column, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(self.toCol !== column || self.toColAfter){\n\t\t\t\t\t\t\tcolEl.parentNode.insertBefore(self.placeholderElement, colEl);\n\t\t\t\t\t\t\tself.moveColumn(column, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}.bind(self);\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tself.touchMove = false;\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, column);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tcolEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tself.bindTouchEvents(column);\n\t\t}\n\t\t\n\t\tcolumn.modules.moveColumn = config;\n\t}\n\t\n\tbindTouchEvents(column){\n\t\tvar colEl = column.getElement(),\n\t\tstartXMove = false, //shifting center position of the cell\n\t\tdir = false,\n\t\tcurrentCol, nextCol, prevCol, nextColWidth, prevColWidth, nextColWidthLast, prevColWidthLast;\n\t\t\n\t\tcolEl.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tcurrentCol = column;\n\t\t\t\tnextCol = column.nextColumn();\n\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth()/2 : 0;\n\t\t\t\tprevCol = column.prevColumn();\n\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth()/2 : 0;\n\t\t\t\tnextColWidthLast = 0;\n\t\t\t\tprevColWidthLast = 0;\n\t\t\t\tstartXMove = false;\n\t\t\t\t\n\t\t\t\tthis.startMove(e, column);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchmove\", (e) => {\n\t\t\tvar halfCol, diff, moveToCol;\n\t\t\t\n\t\t\tif(this.moving){\n\t\t\t\tthis.moveHover(e);\n\t\t\t\t\n\t\t\t\tif(!startXMove){\n\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tdiff = e.touches[0].pageX - startXMove;\n\t\t\t\t\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextCol && diff - nextColWidthLast > nextColWidth){\n\t\t\t\t\t\tmoveToCol = nextCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevCol && -diff - prevColWidthLast >  prevColWidth){\n\t\t\t\t\t\tmoveToCol = prevCol;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(moveToCol !== column){\n\t\t\t\t\t\t\tstartXMove = e.touches[0].pageX;\n\t\t\t\t\t\t\tmoveToCol.getElement().parentNode.insertBefore(this.placeholderElement, moveToCol.getElement());\n\t\t\t\t\t\t\tthis.moveColumn(moveToCol, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(moveToCol){\n\t\t\t\t\tcurrentCol = moveToCol;\n\t\t\t\t\tnextCol = moveToCol.nextColumn();\n\t\t\t\t\tnextColWidthLast = nextColWidth;\n\t\t\t\t\tnextColWidth = nextCol ? nextCol.getWidth() / 2 : 0;\n\t\t\t\t\tprevCol = moveToCol.prevColumn();\n\t\t\t\t\tprevColWidthLast = prevColWidth;\n\t\t\t\t\tprevColWidth = prevCol ? prevCol.getWidth() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}, {passive: true});\n\t\t\n\t\tcolEl.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tstartMove(e, column){\n\t\tvar element = column.getElement(),\n\t\theaderElement = this.table.columnManager.getElement(),\n\t\theadersElement = this.table.columnManager.getHeadersElement();\n\t\t\n\t\tthis.moving = column;\n\t\tthis.startX = (this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(element).left;\n\t\t\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = column.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = column.getHeight() + \"px\";\n\t\t\n\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\telement.parentNode.removeChild(element);\n\t\t\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\t\t\n\t\tthis.table.columnManager.getElement().appendChild(this.hoverElement);\n\t\t\n\t\tthis.hoverElement.style.left = \"0\";\n\t\tthis.hoverElement.style.bottom = (headerElement.clientHeight - headersElement.offsetHeight) + \"px\";\n\t\t\n\t\tif(!this.touchMove){\n\t\t\tthis._bindMouseMove();\n\t\t\t\n\t\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\t\t}\n\t\t\n\t\tthis.moveHover(e);\n\t}\n\t\n\t_bindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().addEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t_unbindMouseMove(){\n\t\tthis.table.columnManager.columnsByIndex.forEach(function(column){\n\t\t\tif(column.modules.moveColumn.mousemove){\n\t\t\t\tcolumn.getElement().removeEventListener(\"mousemove\", column.modules.moveColumn.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\t\n\tmoveColumn(column, after){\n\t\tvar movingCells = this.moving.getCells();\n\t\t\n\t\tthis.toCol = column;\n\t\tthis.toColAfter = after;\n\t\t\n\t\tif(after){\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl.nextSibling);\n\t\t\t\t}\n\t\t\t});\n\t\t}else{\n\t\t\tcolumn.getCells().forEach(function(cell, i){\n\t\t\t\tvar cellEl = cell.getElement(true);\n\t\t\t\t\n\t\t\t\tif(cellEl.parentNode && movingCells[i]){\n\t\t\t\t\tcellEl.parentNode.insertBefore(movingCells[i].getElement(), cellEl);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tendMove(e){\n\t\tif(e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\t\t\t\n\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\t\t\t\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(this.toCol){\n\t\t\t\tthis.table.columnManager.moveColumnActual(this.moving, this.toCol, this.toColAfter);\n\t\t\t}\n\t\t\t\n\t\t\tthis.moving = false;\n\t\t\tthis.toCol = false;\n\t\t\tthis.toColAfter = false;\n\t\t\t\n\t\t\tif(!this.touchMove){\n\t\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tmoveHover(e){\n\t\tvar columnHolder = this.table.columnManager.getElement(),\n\t\tscrollLeft = columnHolder.scrollLeft,\n\t\txPos = ((this.touchMove ? e.touches[0].pageX : e.pageX) - Helpers.elOffset(columnHolder).left) + scrollLeft,\n\t\tscrollPos;\n\t\t\n\t\tthis.hoverElement.style.left = (xPos - this.startX) + \"px\";\n\t\t\n\t\tif(xPos - scrollLeft < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.max(0,scrollLeft-5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(scrollLeft + columnHolder.clientWidth - xPos < this.autoScrollMargin){\n\t\t\tif(!this.autoScrollTimeout){\n\t\t\t\tthis.autoScrollTimeout = setTimeout(() => {\n\t\t\t\t\tscrollPos = Math.min(columnHolder.clientWidth, scrollLeft+5);\n\t\t\t\t\tthis.table.rowManager.getElement().scrollLeft = scrollPos;\n\t\t\t\t\tthis.autoScrollTimeout = false;\n\t\t\t\t}, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nMoveColumns.moduleName = \"moveColumn\";\n\nexport default MoveColumns;\n","import Module from '../../core/Module.js';\nimport Helpers from '../../core/tools/Helpers.js';\n\nclass MoveRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.placeholderElement = this.createPlaceholderElement();\n\t\tthis.hoverElement = false; //floating row header element\n\t\tthis.checkTimeout = false; //click check timeout holder\n\t\tthis.checkPeriod = 150; //period to wait on mousedown to consider this a move and not a click\n\t\tthis.moving = false; //currently moving row\n\t\tthis.toRow = false; //destination row\n\t\tthis.toRowAfter = false; //position of moving row relative to the desitnation row\n\t\tthis.hasHandle = false; //row has handle instead of fully movable row\n\t\tthis.startY = 0; //starting Y position within header element\n\t\tthis.startX = 0; //starting X position within header element\n\n\t\tthis.moveHover = this.moveHover.bind(this);\n\t\tthis.endMove = this.endMove.bind(this);\n\t\tthis.tableRowDropEvent = false;\n\n\t\tthis.touchMove = false;\n\n\t\tthis.connection = false;\n\t\tthis.connectionSelectorsTables = false;\n\t\tthis.connectionSelectorsElements = false;\n\t\tthis.connectionElements = [];\n\t\tthis.connections = [];\n\n\t\tthis.connectedTable = false;\n\t\tthis.connectedRow = false;\n\n\t\tthis.registerTableOption(\"movableRows\", false); //enable movable rows\n\t\tthis.registerTableOption(\"movableRowsConnectedTables\", false); //tables for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsConnectedElements\", false); //other elements for movable rows to be connected to\n\t\tthis.registerTableOption(\"movableRowsSender\", false);\n\t\tthis.registerTableOption(\"movableRowsReceiver\", \"insert\");\n\n\t\tthis.registerColumnOption(\"rowHandle\");\n\t}\n\n\tcreatePlaceholderElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-row\");\n\t\tel.classList.add(\"tabulator-row-placeholder\");\n\n\t\treturn el;\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.movableRows){\n\t\t\tthis.connectionSelectorsTables = this.table.options.movableRowsConnectedTables;\n\t\t\tthis.connectionSelectorsElements = this.table.options.movableRowsConnectedElements;\n\n\t\t\tthis.connection = this.connectionSelectorsTables || this.connectionSelectorsElements;\n\n\t\t\tthis.subscribe(\"cell-init\", this.initializeCell.bind(this));\n\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeGroupHeader(group){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tif(((e.pageY - Helpers.elOffset(group.element).top) + self.table.rowManager.element.scrollTop) > (group.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== group || !self.toRowAfter){\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(group, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== group || self.toRowAfter){\n\t\t\t\t\tvar rowEl = group.getElement();\n\t\t\t\t\tif(rowEl.previousSibling){\n\t\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\t\tself.moveRow(group, false);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\t\tgroup.modules.moveRow = config;\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\tconfig = {},\n\t\trowEl;\n\n\t\t//inter table drag drop\n\t\tconfig.mouseup = function(e){\n\t\t\tself.tableRowDrop(e, row);\n\t\t}.bind(self);\n\n\t\t//same table drag drop\n\t\tconfig.mousemove = function(e){\n\t\t\tvar rowEl = row.getElement();\n\n\t\t\tif(((e.pageY - Helpers.elOffset(rowEl).top) + self.table.rowManager.element.scrollTop) > (row.getHeight() / 2)){\n\t\t\t\tif(self.toRow !== row || !self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl.nextSibling);\n\t\t\t\t\tself.moveRow(row, true);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(self.toRow !== row || self.toRowAfter){\n\t\t\t\t\trowEl.parentNode.insertBefore(self.placeholderElement, rowEl);\n\t\t\t\t\tself.moveRow(row, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}.bind(self);\n\n\n\t\tif(!this.hasHandle){\n\n\t\t\trowEl = row.getElement();\n\n\t\t\trowEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\trowEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(row, row.getElement());\n\t\t}\n\n\t\trow.modules.moveRow = config;\n\t}\n\n\tinitializeColumn(column){\n\t\tif(column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tthis.hasHandle = true;\n\t\t}\n\t}\n\n\tinitializeCell(cell){\n\t\tif(cell.column.definition.rowHandle && this.table.options.movableRows !== false){\n\t\t\tvar self = this,\n\t\t\tcellEl = cell.getElement(true);\n\n\t\t\tcellEl.addEventListener(\"mousedown\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tself.checkTimeout = setTimeout(function(){\n\t\t\t\t\t\tself.startMove(e, cell.row);\n\t\t\t\t\t}, self.checkPeriod);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tcellEl.addEventListener(\"mouseup\", function(e){\n\t\t\t\tif(e.which === 1){\n\t\t\t\t\tif(self.checkTimeout){\n\t\t\t\t\t\tclearTimeout(self.checkTimeout);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.bindTouchEvents(cell.row, cellEl);\n\t\t}\n\t}\n\n\tbindTouchEvents(row, element){\n\t\tvar startYMove = false, //shifting center position of the cell\n\t\tdir = false,\n\t\tcurrentRow, nextRow, prevRow, nextRowHeight, prevRowHeight, nextRowHeightLast, prevRowHeightLast;\n\n\t\telement.addEventListener(\"touchstart\", (e) => {\n\t\t\tthis.checkTimeout = setTimeout(() => {\n\t\t\t\tthis.touchMove = true;\n\t\t\t\tcurrentRow = row;\n\t\t\t\tnextRow = row.nextRow();\n\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight()/2 : 0;\n\t\t\t\tprevRow = row.prevRow();\n\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight()/2 : 0;\n\t\t\t\tnextRowHeightLast = 0;\n\t\t\t\tprevRowHeightLast = 0;\n\t\t\t\tstartYMove = false;\n\n\t\t\t\tthis.startMove(e, row);\n\t\t\t}, this.checkPeriod);\n\t\t}, {passive: true});\n\t\tthis.moving, this.toRow, this.toRowAfter\n\t\telement.addEventListener(\"touchmove\", (e) => {\n\n\t\t\tvar halfCol, diff, moveToRow;\n\n\t\t\tif(this.moving){\n\t\t\t\te.preventDefault();\n\n\t\t\t\tthis.moveHover(e);\n\n\t\t\t\tif(!startYMove){\n\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t}\n\n\t\t\t\tdiff = e.touches[0].pageY - startYMove;\n\n\t\t\t\tif(diff > 0){\n\t\t\t\t\tif(nextRow && diff - nextRowHeightLast > nextRowHeight){\n\t\t\t\t\t\tmoveToRow = nextRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement().nextSibling);\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tif(prevRow && -diff - prevRowHeightLast >  prevRowHeight){\n\t\t\t\t\t\tmoveToRow = prevRow;\n\n\t\t\t\t\t\tif(moveToRow !== row){\n\t\t\t\t\t\t\tstartYMove = e.touches[0].pageY;\n\t\t\t\t\t\t\tmoveToRow.getElement().parentNode.insertBefore(this.placeholderElement, moveToRow.getElement());\n\t\t\t\t\t\t\tthis.moveRow(moveToRow, false);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(moveToRow){\n\t\t\t\t\tcurrentRow = moveToRow;\n\t\t\t\t\tnextRow = moveToRow.nextRow();\n\t\t\t\t\tnextRowHeightLast = nextRowHeight;\n\t\t\t\t\tnextRowHeight = nextRow ? nextRow.getHeight() / 2 : 0;\n\t\t\t\t\tprevRow = moveToRow.prevRow();\n\t\t\t\t\tprevRowHeightLast = prevRowHeight;\n\t\t\t\t\tprevRowHeight = prevRow ? prevRow.getHeight() / 2 : 0;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\telement.addEventListener(\"touchend\", (e) => {\n\t\t\tif(this.checkTimeout){\n\t\t\t\tclearTimeout(this.checkTimeout);\n\t\t\t}\n\t\t\tif(this.moving){\n\t\t\t\tthis.endMove(e);\n\t\t\t\tthis.touchMove = false;\n\t\t\t}\n\t\t});\n\t}\n\n\t_bindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().addEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\t_unbindMouseMove(){\n\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\tif((row.type === \"row\" || row.type === \"group\") && row.modules.moveRow && row.modules.moveRow.mousemove){\n\t\t\t\trow.getElement().removeEventListener(\"mousemove\", row.modules.moveRow.mousemove);\n\t\t\t}\n\t\t});\n\t}\n\n\tstartMove(e, row){\n\t\tvar element = row.getElement();\n\n\t\tthis.setStartPosition(e, row);\n\n\t\tthis.moving = row;\n\n\t\tthis.table.element.classList.add(\"tabulator-block-select\");\n\n\t\t//create placeholder\n\t\tthis.placeholderElement.style.width = row.getWidth() + \"px\";\n\t\tthis.placeholderElement.style.height = row.getHeight() + \"px\";\n\n\t\tif(!this.connection){\n\t\t\telement.parentNode.insertBefore(this.placeholderElement, element);\n\t\t\telement.parentNode.removeChild(element);\n\t\t}else{\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-sending\");\n\t\t\tthis.connectToTables(row);\n\t\t}\n\n\t\t//create hover element\n\t\tthis.hoverElement = element.cloneNode(true);\n\t\tthis.hoverElement.classList.add(\"tabulator-moving\");\n\n\t\tif(this.connection){\n\t\t\tdocument.body.appendChild(this.hoverElement);\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\t\t\tthis.hoverElement.style.width = this.table.element.clientWidth + \"px\";\n\t\t\tthis.hoverElement.style.whiteSpace = \"nowrap\";\n\t\t\tthis.hoverElement.style.overflow = \"hidden\";\n\t\t\tthis.hoverElement.style.pointerEvents = \"none\";\n\t\t}else{\n\t\t\tthis.table.rowManager.getTableElement().appendChild(this.hoverElement);\n\n\t\t\tthis.hoverElement.style.left = \"0\";\n\t\t\tthis.hoverElement.style.top = \"0\";\n\n\t\t\tthis._bindMouseMove();\n\t\t}\n\n\t\tdocument.body.addEventListener(\"mousemove\", this.moveHover);\n\t\tdocument.body.addEventListener(\"mouseup\", this.endMove);\n\n\t\tthis.dispatchExternal(\"rowMoving\", row.getComponent());\n\n\t\tthis.moveHover(e);\n\t}\n\n\tsetStartPosition(e, row){\n\t\tvar pageX = this.touchMove ? e.touches[0].pageX : e.pageX,\n\t\tpageY = this.touchMove ? e.touches[0].pageY : e.pageY,\n\t\telement, position;\n\n\t\telement = row.getElement();\n\t\tif(this.connection){\n\t\t\tposition = element.getBoundingClientRect();\n\n\t\t\tthis.startX = position.left - pageX + window.pageXOffset;\n\t\t\tthis.startY = position.top - pageY + window.pageYOffset;\n\t\t}else{\n\t\t\tthis.startY = (pageY - element.getBoundingClientRect().top);\n\t\t}\n\t}\n\n\tendMove(e){\n\t\tif(!e || e.which === 1 || this.touchMove){\n\t\t\tthis._unbindMouseMove();\n\n\t\t\tif(!this.connection){\n\t\t\t\tthis.placeholderElement.parentNode.insertBefore(this.moving.getElement(), this.placeholderElement.nextSibling);\n\t\t\t\tthis.placeholderElement.parentNode.removeChild(this.placeholderElement);\n\t\t\t}\n\n\t\t\tthis.hoverElement.parentNode.removeChild(this.hoverElement);\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tif(this.toRow){\n\t\t\t\tthis.table.rowManager.moveRow(this.moving, this.toRow, this.toRowAfter);\n\t\t\t}else{\n\t\t\t\tthis.dispatchExternal(\"rowMoveCancelled\", this.moving.getComponent());\n\t\t\t}\n\n\t\t\tthis.moving = false;\n\t\t\tthis.toRow = false;\n\t\t\tthis.toRowAfter = false;\n\n\t\t\tdocument.body.removeEventListener(\"mousemove\", this.moveHover);\n\t\t\tdocument.body.removeEventListener(\"mouseup\", this.endMove);\n\n\t\t\tif(this.connection){\n\t\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-sending\");\n\t\t\t\tthis.disconnectFromTables();\n\t\t\t}\n\t\t}\n\t}\n\n\tmoveRow(row, after){\n\t\tthis.toRow = row;\n\t\tthis.toRowAfter = after;\n\t}\n\n\tmoveHover(e){\n\t\tif(this.connection){\n\t\t\tthis.moveHoverConnections.call(this, e);\n\t\t}else{\n\t\t\tthis.moveHoverTable.call(this, e);\n\t\t}\n\t}\n\n\tmoveHoverTable(e){\n\t\tvar rowHolder = this.table.rowManager.getElement(),\n\t\tscrollTop = rowHolder.scrollTop,\n\t\tyPos = ((this.touchMove ? e.touches[0].pageY : e.pageY) - rowHolder.getBoundingClientRect().top) + scrollTop,\n\t\tscrollPos;\n\n\t\tthis.hoverElement.style.top = (yPos - this.startY) + \"px\";\n\t}\n\n\tmoveHoverConnections(e){\n\t\tthis.hoverElement.style.left = (this.startX + (this.touchMove ? e.touches[0].pageX : e.pageX)) + \"px\";\n\t\tthis.hoverElement.style.top = (this.startY + (this.touchMove ? e.touches[0].pageY : e.pageY)) + \"px\";\n\t}\n\n\telementRowDrop(e, element, row){\n\t\tthis.dispatchExternal(\"movableRowsElementDrop\", e, element, row ? row.getComponent() : false);\n\t}\n\n\t//establish connection with other tables\n\tconnectToTables(row){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStart\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"connect\", {\n\t\t\t\trow:row,\n\t\t\t});\n\t\t}\n\n\t\tif(this.connectionSelectorsElements){\n\n\t\t\tthis.connectionElements = [];\n\n\t\t\tif(!Array.isArray(this.connectionSelectorsElements)){\n\t\t\t\tthis.connectionSelectorsElements = [this.connectionSelectorsElements];\n\t\t\t}\n\n\t\t\tthis.connectionSelectorsElements.forEach((query) => {\n\t\t\t\tif(typeof query === \"string\"){\n\t\t\t\t\tthis.connectionElements = this.connectionElements.concat(Array.prototype.slice.call(document.querySelectorAll(query)));\n\t\t\t\t}else{\n\t\t\t\t\tthis.connectionElements.push(query);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.connectionElements.forEach((element) => {\n\t\t\t\tvar dropEvent = (e) => {\n\t\t\t\t\tthis.elementRowDrop(e, element, this.moving);\n\t\t\t\t};\n\n\t\t\t\telement.addEventListener(\"mouseup\", dropEvent);\n\t\t\t\telement.tabulatorElementDropEvent = dropEvent;\n\n\t\t\t\telement.classList.add(\"tabulator-movingrow-receiving\");\n\t\t\t});\n\t\t}\n\t}\n\n\t//disconnect from other tables\n\tdisconnectFromTables(){\n\t\tvar connectionTables;\n\n\t\tif(this.connectionSelectorsTables){\n\t\t\tconnectionTables = this.commsConnections(this.connectionSelectorsTables);\n\n\t\t\tthis.dispatchExternal(\"movableRowsSendingStop\", connectionTables);\n\n\t\t\tthis.commsSend(this.connectionSelectorsTables, \"moveRow\", \"disconnect\");\n\t\t}\n\n\t\tthis.connectionElements.forEach((element) => {\n\t\t\telement.classList.remove(\"tabulator-movingrow-receiving\");\n\t\t\telement.removeEventListener(\"mouseup\", element.tabulatorElementDropEvent);\n\t\t\tdelete element.tabulatorElementDropEvent;\n\t\t});\n\t}\n\n\t//accept incomming connection\n\tconnect(table, row){\n\t\tif(!this.connectedTable){\n\t\t\tthis.connectedTable = table;\n\t\t\tthis.connectedRow = row;\n\n\t\t\tthis.table.element.classList.add(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) => {\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().addEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.tableRowDropEvent = this.tableRowDrop.bind(this);\n\n\t\t\tthis.table.element.addEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStart\", row, table);\n\n\t\t\treturn true;\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - Table cannot accept connection, already connected to table:\", this.connectedTable);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//close incomming connection\n\tdisconnect(table){\n\t\tif(table === this.connectedTable){\n\t\t\tthis.connectedTable = false;\n\t\t\tthis.connectedRow = false;\n\n\t\t\tthis.table.element.classList.remove(\"tabulator-movingrow-receiving\");\n\n\t\t\tthis.table.rowManager.getDisplayRows().forEach((row) =>{\n\t\t\t\tif(row.type === \"row\" && row.modules.moveRow && row.modules.moveRow.mouseup){\n\t\t\t\t\trow.getElement().removeEventListener(\"mouseup\", row.modules.moveRow.mouseup);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.table.element.removeEventListener(\"mouseup\", this.tableRowDropEvent);\n\n\t\t\tthis.dispatchExternal(\"movableRowsReceivingStop\", table);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Row Error - trying to disconnect from non connected table\")\n\t\t}\n\t}\n\n\tdropComplete(table, row, success){\n\t\tvar sender = false;\n\n\t\tif(success){\n\n\t\t\tswitch(typeof this.table.options.movableRowsSender){\n\t\t\t\tcase \"string\":\n\t\t\t\tsender = this.senders[this.table.options.movableRowsSender];\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"function\":\n\t\t\t\tsender = this.table.options.movableRowsSender;\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tif(sender){\n\t\t\t\tsender.call(this, this.moving.getComponent(), row ? row.getComponent() : undefined, table)\n\t\t\t}else{\n\t\t\t\tif(this.table.options.movableRowsSender){\n\t\t\t\t\tconsole.warn(\"Mover Row Error - no matching sender found:\", this.table.options.movableRowsSender);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis.dispatchExternal(\"movableRowsSent\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsSentFailed\", this.moving.getComponent(), row ? row.getComponent() : undefined, table);\n\t\t}\n\n\t\tthis.endMove();\n\t}\n\n\ttableRowDrop(e, row){\n\t\tvar receiver = false,\n\t\tsuccess = false;\n\n\t\te.stopImmediatePropagation();\n\n\t\tswitch(typeof this.table.options.movableRowsReceiver){\n\t\t\tcase \"string\":\n\t\t\treceiver = this.receivers[this.table.options.movableRowsReceiver];\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\treceiver = this.table.options.movableRowsReceiver;\n\t\t\tbreak;\n\t\t}\n\n\t\tif(receiver){\n\t\t\tsuccess = receiver.call(this, this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable)\n\t\t}else{\n\t\t\tconsole.warn(\"Mover Row Error - no matching receiver found:\", this.table.options.movableRowsReceiver)\n\t\t}\n\n\t\tif(success){\n\t\t\tthis.dispatchExternal(\"movableRowsReceived\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"movableRowsReceivedFailed\", this.connectedRow.getComponent(), row ? row.getComponent() : undefined, this.connectedTable);\n\t\t}\n\n\t\tthis.commsSend(this.connectedTable, \"moveRow\", \"dropcomplete\", {\n\t\t\trow:row,\n\t\t\tsuccess:success,\n\t\t});\n\t}\n\n\tcommsReceived(table, action, data){\n\t\tswitch(action){\n\t\t\tcase \"connect\":\n\t\t\treturn this.connect(table, data.row);\n\t\t\tbreak;\n\n\t\t\tcase \"disconnect\":\n\t\t\treturn this.disconnect(table);\n\t\t\tbreak;\n\n\t\t\tcase \"dropcomplete\":\n\t\t\treturn this.dropComplete(table, data.row, data.success);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nMoveRows.prototype.receivers = {\n\tinsert:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\treturn true;\n\t},\n\n\tadd:function(fromRow, toRow, fromTable){\n\t\tthis.table.addRow(fromRow.getData());\n\t\treturn true;\n\t},\n\n\tupdate:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\ttoRow.update(fromRow.getData());\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\n\treplace:function(fromRow, toRow, fromTable){\n\t\tif(toRow){\n\t\t\tthis.table.addRow(fromRow.getData(), undefined, toRow);\n\t\t\ttoRow.delete();\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n};\n\nMoveRows.prototype.senders = {\n\tdelete:function(fromRow, toRow, toTable){\n\t\tfromRow.delete();\n\t}\n};\n\nMoveRows.moduleName = \"moveRow\";\n\nexport default MoveRows;","import Module from '../../core/Module.js';\n\nimport defaultMutators from './defaults/mutators.js';\n\nclass Mutator extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.allowedTypes = [\"\", \"data\", \"edit\", \"clipboard\"]; //list of muatation types\n\t\tthis.enabled = true;\n\n\t\tthis.registerColumnOption(\"mutator\");\n\t\tthis.registerColumnOption(\"mutatorParams\");\n\t\tthis.registerColumnOption(\"mutatorData\");\n\t\tthis.registerColumnOption(\"mutatorDataParams\");\n\t\tthis.registerColumnOption(\"mutatorEdit\");\n\t\tthis.registerColumnOption(\"mutatorEditParams\");\n\t\tthis.registerColumnOption(\"mutatorClipboard\");\n\t\tthis.registerColumnOption(\"mutatorClipboardParams\");\n\t\tthis.registerColumnOption(\"mutateLink\");\n\t}\n\n\tinitialize(){\n\t\tthis.subscribe(\"cell-value-changing\", this.transformCell.bind(this));\n\t\tthis.subscribe(\"cell-value-changed\", this.mutateLink.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\tthis.subscribe(\"row-data-init-before\", this.rowDataChanged.bind(this));\n\t\tthis.subscribe(\"row-data-changing\", this.rowDataChanged.bind(this));\n\t}\n\n\trowDataChanged(row, tempData, updatedData){\n\t\treturn this.transformRow(tempData, \"data\", updatedData);\n\t}\n\n\t//initialize column mutator\n\tinitializeColumn(column){\n\t\tvar match = false,\n\t\tconfig = {};\n\n\t\tthis.allowedTypes.forEach((type) => {\n\t\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\t\tmutator;\n\n\t\t\tif(column.definition[key]){\n\t\t\t\tmutator = this.lookupMutator(column.definition[key]);\n\n\t\t\t\tif(mutator){\n\t\t\t\t\tmatch = true;\n\n\t\t\t\t\tconfig[key] = {\n\t\t\t\t\t\tmutator:mutator,\n\t\t\t\t\t\tparams: column.definition[key + \"Params\"] || {},\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(match){\n\t\t\tcolumn.modules.mutate = config;\n\t\t}\n\t}\n\n\tlookupMutator(value){\n\t\tvar mutator = false;\n\n\t\t//set column mutator\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\tif(Mutator.mutators[value]){\n\t\t\t\tmutator = Mutator.mutators[value];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Mutator Error - No such mutator found, ignoring: \", value);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tmutator = value;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn mutator;\n\t}\n\n\t//apply mutator to row\n\ttransformRow(data, type, updatedData){\n\t\tvar key = \"mutator\" + (type.charAt(0).toUpperCase() + type.slice(1)),\n\t\tvalue;\n\n\t\tif(this.enabled){\n\n\t\t\tthis.table.columnManager.traverse((column) => {\n\t\t\t\tvar mutator, params, component;\n\n\t\t\t\tif(column.modules.mutate){\n\t\t\t\t\tmutator = column.modules.mutate[key] || column.modules.mutate.mutator || false;\n\n\t\t\t\t\tif(mutator){\n\t\t\t\t\t\tvalue = column.getFieldValue(typeof updatedData !== \"undefined\" ? updatedData : data);\n\n\t\t\t\t\t\tif(type == \"data\" || typeof value !== \"undefined\"){\n\t\t\t\t\t\t\tcomponent = column.getComponent();\n\t\t\t\t\t\t\tparams = typeof mutator.params === \"function\" ? mutator.params(value, data, type, component) : mutator.params;\n\t\t\t\t\t\t\tcolumn.setFieldValue(data, mutator.mutator(value, data, type, params, component));\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//apply mutator to new cell value\n\ttransformCell(cell, value){\n\t\tif(cell.column.modules.mutate){\n\t\t\tvar mutator = cell.column.modules.mutate.mutatorEdit || cell.column.modules.mutate.mutator || false,\n\t\t\ttempData = {};\n\n\t\t\tif(mutator){\n\t\t\t\ttempData = Object.assign(tempData, cell.row.getData());\n\t\t\t\tcell.column.setFieldValue(tempData, value);\n\t\t\t\treturn mutator.mutator(value, tempData, \"edit\", mutator.params, cell.getComponent());\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t}\n\n\tmutateLink(cell){\n\t\tvar links = cell.column.definition.mutateLink;\n\n\t\tif(links){\n\t\t\tif(!Array.isArray(links)){\n\t\t\t\tlinks = [links];\n\t\t\t}\n\n\t\t\tlinks.forEach((link) => {\n\t\t\t\tvar linkCell = cell.row.getCell(link);\n\n\t\t\t\tif(linkCell){\n\t\t\t\t\tlinkCell.setValue(linkCell.getValue(), true, true);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tenable(){\n\t\tthis.enabled = true;\n\t}\n\n\tdisable(){\n\t\tthis.enabled = false;\n\t}\n}\n\nMutator.moduleName = \"mutator\";\n\n//load defaults\nMutator.mutators = defaultMutators;\n\nexport default Mutator;","export default {};","import rows from './pageCounters/rows.js';\nimport pages from './pageCounters/pages.js';\n\n\nexport default {\n\trows:rows,\n\tpages:pages,\n};","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\tvar el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\n\tthis.table.modules.localize.langBind(\"pagination|counter|rows\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\n\tif(totalRows){\n\t\tvalueEl.innerHTML = \" \" + currentRow + \"-\" + Math.min((currentRow + pageSize - 1), totalRows) + \" \";\n\t\t\n\t\ttotalEl.innerHTML = \" \" + totalRows + \" \";\n\t\t\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(ofEl);\n\t\tel.appendChild(totalEl);\n\t\tel.appendChild(rowsEl);\n\t}else{\n\t\tvalueEl.innerHTML = \" 0 \";\n\n\t\tel.appendChild(showingEl);\n\t\tel.appendChild(valueEl);\n\t\tel.appendChild(rowsEl);\n\t}\n\t\n\treturn el;\n};","export default function(pageSize, currentRow, currentPage, totalRows, totalPages){\n\n    var el = document.createElement(\"span\"),\n\tshowingEl = document.createElement(\"span\"),\n\tvalueEl = document.createElement(\"span\"),\n\tofEl = document.createElement(\"span\"),\n\ttotalEl = document.createElement(\"span\"),\n\trowsEl = document.createElement(\"span\");\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|showing\", (value) => {\n\t\tshowingEl.innerHTML = value;\n\t});\n\t\n\tvalueEl.innerHTML = \" \" + currentPage + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|of\", (value) => {\n\t\tofEl.innerHTML = value;\n\t});\n\t\n\ttotalEl.innerHTML = \" \" + totalPages + \" \";\n\t\n\tthis.table.modules.localize.langBind(\"pagination|counter|pages\", (value) => {\n\t\trowsEl.innerHTML = value;\n\t});\n\t\n\tel.appendChild(showingEl);\n\tel.appendChild(valueEl);\n\tel.appendChild(ofEl);\n\tel.appendChild(totalEl);\n\tel.appendChild(rowsEl);\n\t\n\treturn el;\n};","import Module from '../../core/Module.js';\n\nimport defaultPageCounters from './defaults/pageCounters.js';\n\nclass Page extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.mode = \"local\";\n\t\tthis.progressiveLoad = false;\n\t\t\n\t\tthis.element = null;\n\t\tthis.pageCounterElement = null;\n\t\tthis.pageCounter = null;\n\t\t\n\t\tthis.size = 0;\n\t\tthis.page = 1;\n\t\tthis.count = 5;\n\t\tthis.max = 1;\n\n\t\tthis.remoteRowCountEstimate = null;\n\t\t\n\t\tthis.displayIndex = 0; //index in display pipeline\n\t\t\n\t\tthis.initialLoad = true;\n\t\tthis.dataChanging = false; //flag to check if data is being changed by this module\n\t\t\n\t\tthis.pageSizes = [];\n\t\t\n\t\tthis.registerTableOption(\"pagination\", false); //set pagination type\n\t\tthis.registerTableOption(\"paginationMode\", \"local\"); //local or remote pagination\n\t\tthis.registerTableOption(\"paginationSize\", false); //set number of rows to a page\n\t\tthis.registerTableOption(\"paginationInitialPage\", 1); //initial page to show on load\n\t\tthis.registerTableOption(\"paginationCounter\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationCounterElement\", false);  // set pagination counter\n\t\tthis.registerTableOption(\"paginationButtonCount\", 5);  // set count of page button\n\t\tthis.registerTableOption(\"paginationSizeSelector\", false); //add pagination size selector element\n\t\tthis.registerTableOption(\"paginationElement\", false); //element to hold pagination numbers\n\t\t// this.registerTableOption(\"paginationDataSent\", {}); //pagination data sent to the server\n\t\t// this.registerTableOption(\"paginationDataReceived\", {}); //pagination data received from the server\n\t\tthis.registerTableOption(\"paginationAddRow\", \"page\"); //add rows on table or page\n\t\t\n\t\tthis.registerTableOption(\"progressiveLoad\", false); //progressive loading\n\t\tthis.registerTableOption(\"progressiveLoadDelay\", 0); //delay between requests\n\t\tthis.registerTableOption(\"progressiveLoadScrollMargin\", 0); //margin before scroll begins\n\t\t\n\t\tthis.registerTableFunction(\"setMaxPage\", this.setMaxPage.bind(this));\n\t\tthis.registerTableFunction(\"setPage\", this.setPage.bind(this));\n\t\tthis.registerTableFunction(\"setPageToRow\", this.userSetPageToRow.bind(this));\n\t\tthis.registerTableFunction(\"setPageSize\", this.userSetPageSize.bind(this));\n\t\tthis.registerTableFunction(\"getPageSize\", this.getPageSize.bind(this));\n\t\tthis.registerTableFunction(\"previousPage\", this.previousPage.bind(this));\n\t\tthis.registerTableFunction(\"nextPage\", this.nextPage.bind(this));\n\t\tthis.registerTableFunction(\"getPage\", this.getPage.bind(this));\n\t\tthis.registerTableFunction(\"getPageMax\", this.getPageMax.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"pageTo\", this.setPageToRow.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.subscribe(\"row-deleted\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"row-added\", this.rowsUpdated.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"footer-redraw\", this.footerRedraw.bind(this));\n\n\t\t\tif(this.table.options.paginationAddRow == \"page\"){\n\t\t\t\tthis.subscribe(\"row-adding-position\", this.rowAddingPosition.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.paginationMode === \"remote\"){\n\t\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\t}\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad){\n\t\t\t\tconsole.error(\"Progressive Load Error - Pagination and progressive load cannot be used at the same time\");\n\t\t\t}\n\t\t\t\n\t\t\tthis.registerDisplayHandler(this.restOnRenderBefore.bind(this), 40);\n\t\t\tthis.registerDisplayHandler(this.getRows.bind(this), 50);\n\t\t\t\n\t\t\tthis.createElements();\n\t\t\tthis.initializePageCounter();\n\t\t\tthis.initializePaginator();\n\t\t}else if(this.table.options.progressiveLoad){\n\t\t\tthis.subscribe(\"data-params\", this.remotePageParams.bind(this));\n\t\t\tthis.subscribe(\"data-loaded\", this._parseRemoteData.bind(this));\n\t\t\tthis.subscribe(\"table-built\", this.calculatePageSizes.bind(this));\n\t\t\tthis.subscribe(\"data-processed\", this.initialLoadComplete.bind(this));\n\t\t\t\n\t\t\tthis.initializeProgressive(this.table.options.progressiveLoad)\n\t\t\t\n\t\t\tif(this.table.options.progressiveLoad === \"scroll\"){\n\t\t\t\tthis.subscribe(\"scroll-vertical\", this.scrollVertical.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowAddingPosition(row, top){\n\t\tvar rowManager = this.table.rowManager,\n\t\tdispRows = rowManager.getDisplayRows(),\n\t\tindex;\n\t\t\n\t\tif(top){\n\t\t\tif(dispRows.length){\n\t\t\t\tindex = dispRows[0];\n\t\t\t}else{\n\t\t\t\tif(rowManager.activeRows.length){\n\t\t\t\t\tindex = rowManager.activeRows[rowManager.activeRows.length-1];\n\t\t\t\t\ttop = false;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(dispRows.length){\n\t\t\t\tindex = dispRows[dispRows.length - 1];\n\t\t\t\ttop = dispRows.length < this.size ? false : true;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn {index, top}\n\t}\n\t\n\tcalculatePageSizes(){\n\t\tvar testElRow, testElCell;\n\t\t\n\t\tif(this.table.options.paginationSize){\n\t\t\tthis.size = this.table.options.paginationSize;\n\t\t}else{\n\t\t\ttestElRow = document.createElement(\"div\");\n\t\t\ttestElRow.classList.add(\"tabulator-row\");\n\t\t\ttestElRow.style.visibility = \"hidden\";\n\t\t\t\n\t\t\ttestElCell = document.createElement(\"div\");\n\t\t\ttestElCell.classList.add(\"tabulator-cell\");\n\t\t\ttestElCell.innerHTML = \"Page Row Test\";\n\t\t\t\n\t\t\ttestElRow.appendChild(testElCell);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().appendChild(testElRow);\n\t\t\t\n\t\t\tthis.size = Math.floor(this.table.rowManager.getElement().clientHeight / testElRow.offsetHeight);\n\t\t\t\n\t\t\tthis.table.rowManager.getTableElement().removeChild(testElRow);\n\t\t}\n\n\t\tthis.dispatchExternal(\"pageSizeChanged\", this.size);\n\t\t\n\t\tthis.generatePageSizeSelectList();\n\t}\n\t\n\tinitialLoadComplete(){\n\t\tthis.initialLoad = false;\n\t}\n\t\n\tremotePageParams(data, config, silent, params){\n\t\tif(!this.initialLoad){\n\t\t\tif((this.progressiveLoad && !silent) || (!this.progressiveLoad && !this.dataChanging)){\n\t\t\t\tthis.reset(true);\n\t\t\t}\n\t\t}\n\t\t\n\t\t//configure request params\n\t\tparams.page = this.page;\n\t\t\n\t\t//set page size if defined\n\t\tif(this.size){\n\t\t\tparams.size = this.size;\n\t\t}\n\t\t\n\t\treturn params;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\tuserSetPageToRow(row){\n\t\tif(this.table.options.pagination){\n\t\t\trow = this.rowManager.findRow(row);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\treturn this.setPageToRow(row)\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn Promise.reject();\n\t}\n\t\n\tuserSetPageSize(size){\n\t\tif(this.table.options.pagination){\n\t\t\tthis.setPageSize(size);\n\t\t\treturn this.setPage(1);\n\t\t}else{\n\t\t\treturn false;\n\t\t}\n\t}\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tscrollVertical(top, dir){\n\t\tvar element, diff, margin;\n\t\tif(!dir && !this.table.dataLoader.loading){\n\t\t\telement = this.table.rowManager.getElement();\n\t\t\tdiff = element.scrollHeight - element.clientHeight - top;\n\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (element.clientHeight * 2);\n\t\t\t\n\t\t\tif(diff < margin){\n\t\t\t\tthis.nextPage()\n\t\t\t\t.catch(() => {}); //consume the exception thrown when on the last page\n\t\t\t}\n\t\t}\n\t}\n\t\n\trestOnRenderBefore(rows, renderInPosition){\n\t\tif(!renderInPosition){\n\t\t\tif(this.mode === \"local\"){\n\t\t\t\tthis.reset();\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\trowsUpdated(){\n\t\tthis.refreshData(true, \"all\");\n\t}\n\t\n\tcreateElements(){\n\t\tvar button;\n\t\t\n\t\tthis.element = document.createElement(\"span\");\n\t\tthis.element.classList.add(\"tabulator-paginator\");\n\t\t\n\t\tthis.pagesElement = document.createElement(\"span\");\n\t\tthis.pagesElement.classList.add(\"tabulator-pages\");\n\t\t\n\t\tbutton = document.createElement(\"button\");\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\tbutton.setAttribute(\"aria-label\", \"\");\n\t\tbutton.setAttribute(\"title\", \"\");\n\t\t\n\t\tthis.firstBut = button.cloneNode(true);\n\t\tthis.firstBut.setAttribute(\"data-page\", \"first\");\n\t\t\n\t\tthis.prevBut = button.cloneNode(true);\n\t\tthis.prevBut.setAttribute(\"data-page\", \"prev\");\n\t\t\n\t\tthis.nextBut = button.cloneNode(true);\n\t\tthis.nextBut.setAttribute(\"data-page\", \"next\");\n\t\t\n\t\tthis.lastBut = button.cloneNode(true);\n\t\tthis.lastBut.setAttribute(\"data-page\", \"last\");\n\t\t\n\t\tif(this.table.options.paginationSizeSelector){\n\t\t\tthis.pageSizeSelect = document.createElement(\"select\");\n\t\t\tthis.pageSizeSelect.classList.add(\"tabulator-page-size\");\n\t\t}\n\t}\n\t\n\tgeneratePageSizeSelectList(){\n\t\tvar pageSizes = [];\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t\n\t\t\tif(Array.isArray(this.table.options.paginationSizeSelector)){\n\t\t\t\tpageSizes = this.table.options.paginationSizeSelector;\n\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes.unshift(this.size);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(this.pageSizes.indexOf(this.size) == -1){\n\t\t\t\t\tpageSizes = [];\n\t\t\t\t\t\n\t\t\t\t\tfor (let i = 1; i < 5; i++){\n\t\t\t\t\t\tpageSizes.push(this.size * i);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.pageSizes = pageSizes;\n\t\t\t\t}else{\n\t\t\t\t\tpageSizes = this.pageSizes;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\twhile(this.pageSizeSelect.firstChild) this.pageSizeSelect.removeChild(this.pageSizeSelect.firstChild);\n\t\t\t\n\t\t\tpageSizes.forEach((item) => {\n\t\t\t\tvar itemEl = document.createElement(\"option\");\n\t\t\t\titemEl.value = item;\n\t\t\t\t\n\t\t\t\tif(item === true){\n\t\t\t\t\tthis.langBind(\"pagination|all\", function(value){\n\t\t\t\t\t\titemEl.innerHTML = value;\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\titemEl.innerHTML = item;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.appendChild(itemEl);\n\t\t\t});\n\t\t\t\n\t\t\tthis.pageSizeSelect.value = this.size;\n\t\t}\n\t}\n\t\n\tinitializePageCounter(){\n\t\tvar counter = this.table.options.paginationCounter,\n\t\tpageCounter = null;\n\t\t\n\t\tif(counter){\n\t\t\tif(typeof counter === \"function\"){\n\t\t\t\tpageCounter = counter;\n\t\t\t}else{\n\t\t\t\tpageCounter = Page.pageCounters[counter];\n\t\t\t}\n\t\t\t\n\t\t\tif(pageCounter){\n\t\t\t\tthis.pageCounter = pageCounter;\n\t\t\t\t\n\t\t\t\tthis.pageCounterElement = document.createElement(\"span\");\n\t\t\t\tthis.pageCounterElement.classList.add(\"tabulator-page-counter\");\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Pagination Error - No such page counter found: \", counter);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup pagination\n\tinitializePaginator(hidden){\n\t\tvar pageSelectLabel, paginationCounterHolder;\n\t\t\n\t\tif(!hidden){\n\t\t\t//build pagination element\n\t\t\t\n\t\t\t//bind localizations\n\t\t\tthis.langBind(\"pagination|first\", (value) => {\n\t\t\t\tthis.firstBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|first_title\", (value) => {\n\t\t\t\tthis.firstBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.firstBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev\", (value) => {\n\t\t\t\tthis.prevBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|prev_title\", (value) => {\n\t\t\t\tthis.prevBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.prevBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next\", (value) => {\n\t\t\t\tthis.nextBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|next_title\", (value) => {\n\t\t\t\tthis.nextBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.nextBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last\", (value) => {\n\t\t\t\tthis.lastBut.innerHTML = value;\n\t\t\t});\n\t\t\t\n\t\t\tthis.langBind(\"pagination|last_title\", (value) => {\n\t\t\t\tthis.lastBut.setAttribute(\"aria-label\", value);\n\t\t\t\tthis.lastBut.setAttribute(\"title\", value);\n\t\t\t});\n\t\t\t\n\t\t\t//click bindings\n\t\t\tthis.firstBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(1)\n\t\t\t});\n\t\t\t\n\t\t\tthis.prevBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.previousPage()\n\t\t\t});\n\t\t\t\n\t\t\tthis.nextBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.nextPage()\n\t\t\t});\n\t\t\t\n\t\t\tthis.lastBut.addEventListener(\"click\", () => {\n\t\t\t\tthis.setPage(this.max)\n\t\t\t});\n\t\t\t\n\t\t\tif(this.table.options.paginationElement){\n\t\t\t\tthis.element = this.table.options.paginationElement;\n\t\t\t}\n\t\t\t\n\t\t\tif(this.pageSizeSelect){\n\t\t\t\tpageSelectLabel = document.createElement(\"label\");\n\t\t\t\t\n\t\t\t\tthis.langBind(\"pagination|page_size\", (value) => {\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"aria-label\", value);\n\t\t\t\t\tthis.pageSizeSelect.setAttribute(\"title\", value);\n\t\t\t\t\tpageSelectLabel.innerHTML = value;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.element.appendChild(pageSelectLabel);\n\t\t\t\tthis.element.appendChild(this.pageSizeSelect);\n\t\t\t\t\n\t\t\t\tthis.pageSizeSelect.addEventListener(\"change\", (e) => {\n\t\t\t\t\tthis.setPageSize(this.pageSizeSelect.value == \"true\" ? true : this.pageSizeSelect.value);\n\t\t\t\t\tthis.setPage(1)\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\t//append to DOM\n\t\t\tthis.element.appendChild(this.firstBut);\n\t\t\tthis.element.appendChild(this.prevBut);\n\t\t\tthis.element.appendChild(this.pagesElement);\n\t\t\tthis.element.appendChild(this.nextBut);\n\t\t\tthis.element.appendChild(this.lastBut);\n\t\t\t\n\t\t\tif(!this.table.options.paginationElement && !hidden){\n\t\t\t\tif(this.table.options.paginationCounter){\n\n\t\t\t\t\tpaginationCounterHolder \n\n\t\t\t\t\tif(this.table.options.paginationCounterElement){\n\t\t\t\t\t\tif(this.table.options.paginationCounterElement instanceof HTMLElement){\n\t\t\t\t\t\t\tthis.table.options.paginationCounterElement.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t}else if(typeof this.table.options.paginationCounterElement === \"string\"){\n\t\t\t\t\t\t\tpaginationCounterHolder = document.querySelector(this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(paginationCounterHolder){\n\t\t\t\t\t\t\t\tpaginationCounterHolder.appendChild(this.pageCounterElement);\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tconsole.warn(\"Pagination Error - Unable to find element matching paginationCounterElement selector:\", this.table.options.paginationCounterElement);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.footerAppend(this.pageCounterElement);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.footerAppend(this.element);\n\t\t\t}\n\t\t\t\n\t\t\tthis.page = this.table.options.paginationInitialPage;\n\t\t\tthis.count = this.table.options.paginationButtonCount;\n\t\t}\n\t\t\n\t\t//set default values\n\t\tthis.mode = this.table.options.paginationMode;\n\t}\n\t\n\tinitializeProgressive(mode){\n\t\tthis.initializePaginator(true);\n\t\tthis.mode = \"progressive_\" + mode;\n\t\tthis.progressiveLoad = true;\n\t}\n\t\n\ttrackChanges(){\n\t\tthis.dispatch(\"page-changed\");\n\t}\n\t\n\tsetDisplayIndex(index){\n\t\tthis.displayIndex = index;\n\t}\n\t\n\tgetDisplayIndex(){\n\t\treturn this.displayIndex;\n\t}\n\t\n\t//calculate maximum page from number of rows\n\tsetMaxRows(rowCount){\n\t\tif(!rowCount){\n\t\t\tthis.max = 1;\n\t\t}else{\n\t\t\tthis.max = this.size === true ?  1 : Math.ceil(rowCount/this.size);\n\t\t}\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t}\n\t}\n\t\n\t//reset to first page without triggering action\n\treset(force){\n\t\tif(!this.initialLoad){\n\t\t\tif(this.mode == \"local\" || force){\n\t\t\t\tthis.page = 1;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//set the maximum page\n\tsetMaxPage(max){\n\t\t\n\t\tmax = parseInt(max);\n\t\t\n\t\tthis.max = max || 1;\n\t\t\n\t\tif(this.page > this.max){\n\t\t\tthis.page = this.max;\n\t\t\tthis.trigger();\n\t\t}\n\t}\n\t\n\t//set current page number\n\tsetPage(page){\n\t\tswitch(page){\n\t\t\tcase \"first\":\n\t\t\treturn this.setPage(1);\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"prev\":\n\t\t\treturn this.previousPage();\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"next\":\n\t\t\treturn this.nextPage();\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"last\":\n\t\t\treturn this.setPage(this.max);\n\t\t\tbreak;\n\t\t}\n\t\t\n\t\tpage = parseInt(page);\n\t\t\n\t\tif((page > 0 && page <= this.max) || this.mode !== \"local\"){\n\t\t\tthis.page = page;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested page is out of range of 1 - \" + this.max + \":\", page);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageToRow(row){\n\t\tvar rows = this.table.rowManager.getDisplayRows(this.displayIndex - 1);\n\t\tvar index = rows.indexOf(row);\n\t\t\n\t\tif(index > -1){\n\t\t\tvar page = this.size === true ? 1 : Math.ceil((index + 1) / this.size);\n\t\t\t\n\t\t\treturn this.setPage(page)\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Requested row is not visible\");\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tsetPageSize(size){\n\t\tif(size !== true){\n\t\t\tsize = parseInt(size);\n\t\t}\n\n\t\tif(size > 0){\n\t\t\tthis.size = size;\n\t\t\tthis.dispatchExternal(\"pageSizeChanged\", size);\n\t\t}\n\t\t\n\t\tif(this.pageSizeSelect){\n\t\t\t// this.pageSizeSelect.value = size;\n\t\t\tthis.generatePageSizeSelectList();\n\t\t}\n\t\t\n\t\tthis.trackChanges();\n\t}\n\t\n\t_setPageCounter(totalRows, size, currentRow){\n\t\tvar content;\n\t\t\n\t\tif(this.pageCounter){\n\n\t\t\tif(this.mode === \"remote\"){\n\t\t\t\tsize = this.size;\n\t\t\t\tcurrentRow = ((this.page - 1) * this.size) + 1;\n\t\t\t\ttotalRows = this.remoteRowCountEstimate;\n\t\t\t}\n\n\t\t\tcontent = this.pageCounter.call(this, size, currentRow, this.page, totalRows, this.max);\n\t\t\t\n\t\t\tswitch(typeof content){\n\t\t\t\tcase \"object\":\n\t\t\t\tif(content instanceof Node){\n\t\t\t\t\t\n\t\t\t\t\t//clear previous cell contents\n\t\t\t\t\twhile(this.pageCounterElement.firstChild) this.pageCounterElement.removeChild(this.pageCounterElement.firstChild);\n\t\t\t\t\t\n\t\t\t\t\tthis.pageCounterElement.appendChild(content);\n\t\t\t\t}else{\n\t\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\t\t\n\t\t\t\t\tif(content != null){\n\t\t\t\t\t\tconsole.warn(\"Page Counter Error - Page Counter has returned a type of object, the only valid page counter object return is an instance of Node, the page counter returned:\", content);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t\tcase \"undefined\":\n\t\t\t\tcase \"null\":\n\t\t\t\tthis.pageCounterElement.innerHTML = \"\";\n\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\tthis.pageCounterElement.innerHTML = content;\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//setup the pagination buttons\n\t_setPageButtons(){\n\t\tlet leftSize = Math.floor((this.count-1) / 2);\n\t\tlet rightSize = Math.ceil((this.count-1) / 2);\n\t\tlet min = this.max - this.page + leftSize + 1 < this.count ? this.max-this.count+1: Math.max(this.page-leftSize,1);\n\t\tlet max = this.page <= rightSize? Math.min(this.count, this.max) :Math.min(this.page+rightSize, this.max);\n\t\t\n\t\twhile(this.pagesElement.firstChild) this.pagesElement.removeChild(this.pagesElement.firstChild);\n\t\t\n\t\tif(this.page == 1){\n\t\t\tthis.firstBut.disabled = true;\n\t\t\tthis.prevBut.disabled = true;\n\t\t}else{\n\t\t\tthis.firstBut.disabled = false;\n\t\t\tthis.prevBut.disabled = false;\n\t\t}\n\t\t\n\t\tif(this.page == this.max){\n\t\t\tthis.lastBut.disabled = true;\n\t\t\tthis.nextBut.disabled = true;\n\t\t}else{\n\t\t\tthis.lastBut.disabled = false;\n\t\t\tthis.nextBut.disabled = false;\n\t\t}\n\t\t\n\t\tfor(let i = min; i <= max; i++){\n\t\t\tif(i>0 && i <= this.max){\n\t\t\t\tthis.pagesElement.appendChild(this._generatePageButton(i));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.footerRedraw();\n\t}\n\t\n\t_generatePageButton(page){\n\t\tvar button = document.createElement(\"button\");\n\t\t\n\t\tbutton.classList.add(\"tabulator-page\");\n\t\tif(page == this.page){\n\t\t\tbutton.classList.add(\"active\");\n\t\t}\n\t\t\n\t\tbutton.setAttribute(\"type\", \"button\");\n\t\tbutton.setAttribute(\"role\", \"button\");\n\t\t\n\t\tthis.langBind(\"pagination|page_title\", (value) => {\n\t\t\tbutton.setAttribute(\"aria-label\", value + \" \" + page);\n\t\t\tbutton.setAttribute(\"title\", value + \" \" + page);\n\t\t});\n\t\t\n\t\tbutton.setAttribute(\"data-page\", page);\n\t\tbutton.textContent = page;\n\t\t\n\t\tbutton.addEventListener(\"click\", (e) => {\n\t\t\tthis.setPage(page)\n\t\t});\n\t\t\n\t\treturn button;\n\t}\n\t\n\t//previous page\n\tpreviousPage(){\n\t\tif(this.page > 1){\n\t\t\tthis.page--;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger()\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Pagination Error - Previous page would be less than page 1:\", 0);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//next page\n\tnextPage(){\n\t\tif(this.page < this.max){\n\t\t\tthis.page++;\n\t\t\t\n\t\t\tthis.trackChanges();\n\t\t\t\n\t\t\treturn this.trigger();\n\t\t\t\n\t\t}else{\n\t\t\tif(!this.progressiveLoad){\n\t\t\t\tconsole.warn(\"Pagination Error - Next page would be greater than maximum page of \" + this.max + \":\", this.max + 1);\n\t\t\t}\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t//return current page number\n\tgetPage(){\n\t\treturn this.page;\n\t}\n\t\n\t//return max page number\n\tgetPageMax(){\n\t\treturn this.max;\n\t}\n\t\n\tgetPageSize(size){\n\t\treturn this.size;\n\t}\n\t\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\t\n\t//return appropriate rows for current page\n\tgetRows(data){\n\t\tvar actualRowPageSize = 0,\n\t\toutput, start, end, actualStartRow;\n\n\t\tvar actualRows = data.filter((row) => {\n\t\t\treturn row.type === \"row\";\n\t\t});\n\t\t\n\t\tif(this.mode == \"local\"){\n\t\t\toutput = [];\n\t\t\t\n\t\t\tthis.setMaxRows(data.length);\n\t\t\t\n\t\t\tif(this.size === true){\n\t\t\t\tstart = 0;\n\t\t\t\tend = data.length;\n\t\t\t}else{\n\t\t\t\tstart = this.size * (this.page - 1);\n\t\t\t\tend = start + parseInt(this.size);\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageButtons();\n\t\t\t\n\t\t\tfor(let i = start; i < end; i++){\n\t\t\t\tlet row = data[i];\n\n\t\t\t\tif(row){\n\t\t\t\t\toutput.push(row);\n\n\t\t\t\t\tif(row.type === \"row\"){\n\t\t\t\t\t\tif(!actualStartRow){\n\t\t\t\t\t\t\tactualStartRow = row;\n\t\t\t\t\t\t}\t\n\n\t\t\t\t\t\tactualRowPageSize++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tthis._setPageCounter(actualRows.length, actualRowPageSize, actualStartRow ? (actualRows.indexOf(actualStartRow) + 1) : 0);\n\t\t\t\n\t\t\treturn output;\n\t\t}else{\n\t\t\tthis._setPageButtons();\n\t\t\tthis._setPageCounter(actualRows.length);\n\t\t\t\n\t\t\treturn data.slice(0);\n\t\t}\n\t}\n\t\n\ttrigger(){\n\t\tvar left;\n\t\t\n\t\tswitch(this.mode){\n\t\t\tcase \"local\":\n\t\t\tleft = this.table.rowManager.scrollLeft;\n\t\t\t\n\t\t\tthis.refreshData();\n\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\n\t\t\tthis.dispatchExternal(\"pageLoaded\", this.getPage());\n\t\t\t\n\t\t\treturn Promise.resolve();\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"remote\":\n\t\t\tthis.dataChanging = true;\n\t\t\treturn this.reloadData(null)\n\t\t\t.finally(() => {\n\t\t\t\tthis.dataChanging = false;\n\t\t\t})\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"progressive_load\":\n\t\t\tcase \"progressive_scroll\":\n\t\t\treturn this.reloadData(null, true);\n\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\tconsole.warn(\"Pagination Error - no such pagination mode:\", this.mode);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\t_parseRemoteData(data){\n\t\tvar left, data, margin;\n\t\t\n\t\tif(typeof data.last_page === \"undefined\"){\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").last_page || \"last_page\") + \"' property\");\n\t\t}\n\t\t\n\t\tif(data.data){\n\t\t\tthis.max = parseInt(data.last_page) || 1;\n\n\t\t\tthis.remoteRowCountEstimate = typeof data.last_row !== \"undefined\" ? data.last_row : (data.last_page * this.size - (this.page == data.last_page ? (this.size - data.data.length) : 0));\n\t\t\t\n\t\t\tif(this.progressiveLoad){\n\t\t\t\tswitch(this.mode){\n\t\t\t\t\tcase \"progressive_load\":\n\t\t\t\t\t\n\t\t\t\t\tif(this.page == 1){\n\t\t\t\t\t\tthis.table.rowManager.setData(data.data, false, this.page == 1)\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.table.rowManager.addRows(data.data);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t}, this.table.options.progressiveLoadDelay);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"progressive_scroll\":\n\t\t\t\t\tdata = this.page === 1 ? data.data : this.table.rowManager.getData().concat(data.data);\n\t\t\t\t\t\n\t\t\t\t\tthis.table.rowManager.setData(data, this.page !== 1, this.page == 1);\n\t\t\t\t\t\n\t\t\t\t\tmargin = this.table.options.progressiveLoadScrollMargin || (this.table.rowManager.element.clientHeight * 2);\n\t\t\t\t\t\n\t\t\t\t\tif(this.table.rowManager.element.scrollHeight <= (this.table.rowManager.element.clientHeight + margin)){\n\t\t\t\t\t\tif(this.page < this.max){\n\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\tthis.nextPage();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn false;\n\t\t\t}else{\n\t\t\t\t// left = this.table.rowManager.scrollLeft;\n\t\t\t\tthis.dispatchExternal(\"pageLoaded\",  this.getPage());\n\t\t\t\t// this.table.rowManager.scrollHorizontal(left);\n\t\t\t\t// this.table.columnManager.scrollHorizontal(left);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tconsole.warn(\"Remote Pagination Error - Server response missing '\" + (this.options(\"dataReceiveParams\").data || \"data\") + \"' property\");\n\t\t}\n\t\t\n\t\treturn data.data;\n\t}\n\t\n\t//handle the footer element being redrawn\n\tfooterRedraw(){\n\t\tvar footer = this.table.footerManager.containerElement;\n\n\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\tthis.pagesElement.style.display = 'none';\n\t\t}else{\n\t\t\tthis.pagesElement.style.display = '';\n\t\t\t\n\t\t\tif((Math.ceil(footer.clientWidth) - footer.scrollWidth) < 0){\n\t\t\t\tthis.pagesElement.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n}\n\nPage.moduleName = \"page\";\n\n//load defaults\nPage.pageCounters = defaultPageCounters;\n\nexport default Page;","// read peristence information from storage\nexport default {\n\tlocal:function(id, type){\n\t\tvar data = localStorage.getItem(id + \"-\" + type);\n\n\t\treturn data ? JSON.parse(data) : false;\n\t},\n\tcookie:function(id, type){\n\t\tvar cookie = document.cookie,\n\t\tkey = id + \"-\" + type,\n\t\tcookiePos = cookie.indexOf(key + \"=\"),\n\t\tend, data;\n\n\t\t//if cookie exists, decode and load column data into tabulator\n\t\tif(cookiePos > -1){\n\t\t\tcookie = cookie.slice(cookiePos);\n\n\t\t\tend = cookie.indexOf(\";\");\n\n\t\t\tif(end > -1){\n\t\t\t\tcookie = cookie.slice(0, end);\n\t\t\t}\n\n\t\t\tdata = cookie.replace(key + \"=\", \"\");\n\t\t}\n\n\t\treturn data ? JSON.parse(data) : false;\n\t}\n};\n","//write persistence information to storage\nexport default {\n\tlocal:function(id, type, data){\n\t\tlocalStorage.setItem(id + \"-\" + type, JSON.stringify(data));\n\t},\n\tcookie:function(id, type, data){\n\t\tvar expireDate = new Date();\n\n\t\texpireDate.setDate(expireDate.getDate() + 10000);\n\n\t\tdocument.cookie = id + \"-\" + type + \"=\" + JSON.stringify(data) + \"; expires=\" + expireDate.toUTCString();\n\t}\n};","import Module from '../../core/Module.js';\n\nimport defaultReaders from './defaults/readers.js';\nimport defaultWriters from './defaults/writers.js';\n\nclass Persistence extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.mode = \"\";\n\t\tthis.id = \"\";\n\t\t// this.persistProps = [\"field\", \"width\", \"visible\"];\n\t\tthis.defWatcherBlock = false;\n\t\tthis.config = {};\n\t\tthis.readFunc = false;\n\t\tthis.writeFunc = false;\n\n\t\tthis.registerTableOption(\"persistence\", false);\n\t\tthis.registerTableOption(\"persistenceID\", \"\"); //key for persistent storage\n\t\tthis.registerTableOption(\"persistenceMode\", true); //mode for storing persistence information\n\t\tthis.registerTableOption(\"persistenceReaderFunc\", false); //function for handling persistence data reading\n\t\tthis.registerTableOption(\"persistenceWriterFunc\", false); //function for handling persistence data writing\n\t}\n\n\t// Test for whether localStorage is available for use.\n\tlocalStorageTest() {\n\t\tvar  testKey =  \"_tabulator_test\";\n\n\t\ttry {\n\t\t\twindow.localStorage.setItem( testKey, testKey);\n\t\t\twindow.localStorage.removeItem( testKey );\n\t\t\treturn true;\n\t\t} catch(e) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t//setup parameters\n\tinitialize(){\n\t\tif(this.table.options.persistence){\n\t\t\t//determine persistent layout storage type\n\t\t\tvar mode = this.table.options.persistenceMode,\n\t\t\tid = this.table.options.persistenceID,\n\t\t\tretreivedData;\n\n\t\t\tthis.mode = mode !== true ?  mode : (this.localStorageTest() ? \"local\" : \"cookie\");\n\n\t\t\tif(this.table.options.persistenceReaderFunc){\n\t\t\t\tif(typeof this.table.options.persistenceReaderFunc === \"function\"){\n\t\t\t\t\tthis.readFunc = this.table.options.persistenceReaderFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.readers[this.table.options.persistenceReaderFunc]){\n\t\t\t\t\t\tthis.readFunc = Persistence.readers[this.table.options.persistenceReaderFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.table.options.persistenceReaderFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.readers[this.mode]){\n\t\t\t\t\tthis.readFunc = Persistence.readers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Read Error - invalid reader set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.table.options.persistenceWriterFunc){\n\t\t\t\tif(typeof this.table.options.persistenceWriterFunc === \"function\"){\n\t\t\t\t\tthis.writeFunc = this.table.options.persistenceWriterFunc;\n\t\t\t\t}else{\n\t\t\t\t\tif(Persistence.writers[this.table.options.persistenceWriterFunc]){\n\t\t\t\t\t\tthis.writeFunc = Persistence.writers[this.table.options.persistenceWriterFunc];\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid reader set\", this.table.options.persistenceWriterFunc);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(Persistence.writers[this.mode]){\n\t\t\t\t\tthis.writeFunc = Persistence.writers[this.mode];\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Persistence Write Error - invalid writer set\", this.mode);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//set storage tag\n\t\t\tthis.id = \"tabulator-\" + (id || (this.table.element.getAttribute(\"id\") || \"\"));\n\n\t\t\tthis.config = {\n\t\t\t\tsort:this.table.options.persistence === true || this.table.options.persistence.sort,\n\t\t\t\tfilter:this.table.options.persistence === true || this.table.options.persistence.filter,\n\t\t\t\tgroup:this.table.options.persistence === true || this.table.options.persistence.group,\n\t\t\t\tpage:this.table.options.persistence === true || this.table.options.persistence.page,\n\t\t\t\tcolumns:this.table.options.persistence === true ? [\"title\", \"width\", \"visible\"] : this.table.options.persistence.columns,\n\t\t\t};\n\n\t\t\t//load pagination data if needed\n\t\t\tif(this.config.page){\n\t\t\t\tretreivedData = this.retreiveData(\"page\");\n\n\t\t\t\tif(retreivedData){\n\t\t\t\t\tif(typeof retreivedData.paginationSize !== \"undefined\" && (this.config.page === true || this.config.page.size)){\n\t\t\t\t\t\tthis.table.options.paginationSize = retreivedData.paginationSize;\n\t\t\t\t\t}\n\n\t\t\t\t\tif(typeof retreivedData.paginationInitialPage !== \"undefined\" && (this.config.page === true || this.config.page.page)){\n\t\t\t\t\t\tthis.table.options.paginationInitialPage = retreivedData.paginationInitialPage;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//load group data if needed\n\t\t\tif(this.config.group){\n\t\t\t\tretreivedData = this.retreiveData(\"group\");\n\n\t\t\t\tif(retreivedData){\n\t\t\t\t\tif(typeof retreivedData.groupBy !== \"undefined\" && (this.config.group === true || this.config.group.groupBy)){\n\t\t\t\t\t\tthis.table.options.groupBy = retreivedData.groupBy;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retreivedData.groupStartOpen !== \"undefined\" && (this.config.group === true || this.config.group.groupStartOpen)){\n\t\t\t\t\t\tthis.table.options.groupStartOpen = retreivedData.groupStartOpen;\n\t\t\t\t\t}\n\t\t\t\t\tif(typeof retreivedData.groupHeader !== \"undefined\" && (this.config.group === true || this.config.group.groupHeader)){\n\t\t\t\t\t\tthis.table.options.groupHeader = retreivedData.groupHeader;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(this.config.columns){\n\t\t\t\tthis.table.options.columns = this.load(\"columns\", this.table.options.columns);\n\t\t\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t\t\t\tthis.subscribe(\"column-show\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-hide\", this.save.bind(this, \"columns\"));\n\t\t\t\tthis.subscribe(\"column-moved\", this.save.bind(this, \"columns\"));\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-built\", this.tableBuilt.bind(this), 0);\n\n\t\t\tthis.subscribe(\"table-redraw\", this.tableRedraw.bind(this));\n\n\t\t\tthis.subscribe(\"filter-changed\", this.eventSave.bind(this, \"filter\"));\n\t\t\tthis.subscribe(\"sort-changed\", this.eventSave.bind(this, \"sort\"));\n\t\t\tthis.subscribe(\"group-changed\", this.eventSave.bind(this, \"group\"));\n\t\t\tthis.subscribe(\"page-changed\", this.eventSave.bind(this, \"page\"));\n\t\t\tthis.subscribe(\"column-resized\", this.eventSave.bind(this, \"columns\"));\n\t\t\tthis.subscribe(\"layout-refreshed\", this.eventSave.bind(this, \"columns\"));\n\t\t}\n\n\t\tthis.registerTableFunction(\"getColumnLayout\", this.getColumnLayout.bind(this));\n\t\tthis.registerTableFunction(\"setColumnLayout\", this.setColumnLayout.bind(this));\n\t}\n\n\teventSave(type){\n\t\tif(this.config[type]){\n\t\t\tthis.save(type);\n\t\t}\n\t}\n\n\ttableBuilt(){\n\t\tvar options = this.table.options,\n\t\tsorters, filters;\n\n\t\tif(this.config.sort){\n\t\t\tsorters = this.load(\"sort\");\n\n\t\t\tif(!sorters === false){\n\t\t\t\tthis.table.options.initialSort = sorters;\n\t\t\t}\n\t\t}\n\n\t\tif(this.config.filter){\n\t\t\tfilters = this.load(\"filter\");\n\n\t\t\tif(!filters === false){\n\t\t\t\tthis.table.options.initialFilter = filters;\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif(force && this.config.columns){\n\t\t\tthis.save(\"columns\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tgetColumnLayout(){\n\t\treturn this.parseColumns(this.table.columnManager.getColumns());\n\t}\n\n\tsetColumnLayout(layout){\n\t\tthis.table.columnManager.setColumns(this.mergeDefinition(this.table.options.columns, layout))\n\t\treturn true;\n\t}\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\tinitializeColumn(column){\n\t\tvar def, keys;\n\n\t\tif(this.config.columns){\n\t\t\tthis.defWatcherBlock = true;\n\n\t\t\tdef = column.getDefinition();\n\n\t\t\tkeys = this.config.columns === true ? Object.keys(def) : this.config.columns;\n\n\t\t\tkeys.forEach((key)=>{\n\t\t\t\tvar props = Object.getOwnPropertyDescriptor(def, key);\n\t\t\t\tvar value = def[key];\n\t\t\t\tif(props){\n\t\t\t\t\tObject.defineProperty(def, key, {\n\t\t\t\t\t\tset: function(newValue){\n\t\t\t\t\t\t\tvalue = newValue;\n\n\t\t\t\t\t\t\tif(!this.defWatcherBlock){\n\t\t\t\t\t\t\t\tthis.save(\"columns\");\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(props.set){\n\t\t\t\t\t\t\t\tprops.set(newValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tget:function(){\n\t\t\t\t\t\t\tif(props.get){\n\t\t\t\t\t\t\t\tprops.get();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.defWatcherBlock = false;\n\t\t}\n\t}\n\n\t//load saved definitions\n\tload(type, current){\n\t\tvar data = this.retreiveData(type);\n\n\t\tif(current){\n\t\t\tdata = data ? this.mergeDefinition(current, data) : current;\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//retreive data from memory\n\tretreiveData(type){\n\t\treturn this.readFunc ? this.readFunc(this.id, type) : false;\n\t}\n\n\t//merge old and new column definitions\n\tmergeDefinition(oldCols, newCols){\n\t\tvar output = [];\n\n\t\tnewCols = newCols || [];\n\n\t\tnewCols.forEach((column, to) => {\n\t\t\tvar from = this._findColumn(oldCols, column),\n\t\t\tkeys;\n\n\t\t\tif(from){\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(from);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tif(key !== \"columns\" && typeof column[key] !== \"undefined\"){\n\t\t\t\t\t\tfrom[key] = column[key];\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif(from.columns){\n\t\t\t\t\tfrom.columns = this.mergeDefinition(from.columns, column.columns);\n\t\t\t\t}\n\n\t\t\t\toutput.push(from);\n\t\t\t}\n\t\t});\n\n\t\toldCols.forEach((column, i) => {\n\t\t\tvar from = this._findColumn(newCols, column);\n\n\t\t\tif (!from) {\n\t\t\t\tif(output.length>i){\n\t\t\t\t\toutput.splice(i, 0, column);\n\t\t\t\t}else{\n\t\t\t\t\toutput.push(column);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//find matching columns\n\t_findColumn(columns, subject){\n\t\tvar type = subject.columns ? \"group\" : (subject.field ? \"field\" : \"object\");\n\n\t\treturn columns.find(function(col){\n\t\t\tswitch(type){\n\t\t\t\tcase \"group\":\n\t\t\t\treturn col.title === subject.title && col.columns.length === subject.columns.length;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"field\":\n\t\t\t\treturn col.field === subject.field;\n\t\t\t\tbreak;\n\n\t\t\t\tcase \"object\":\n\t\t\t\treturn col === subject;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t}\n\n\t//save data\n\tsave(type){\n\t\tvar data = {};\n\n\t\tswitch(type){\n\t\t\tcase \"columns\":\n\t\t\tdata = this.parseColumns(this.table.columnManager.getColumns())\n\t\t\tbreak;\n\n\t\t\tcase \"filter\":\n\t\t\tdata = this.table.modules.filter.getFilters();\n\t\t\tbreak;\n\n\t\t\tcase \"sort\":\n\t\t\tdata = this.validateSorters(this.table.modules.sort.getSort());\n\t\t\tbreak;\n\n\t\t\tcase \"group\":\n\t\t\tdata = this.getGroupConfig();\n\t\t\tbreak;\n\n\t\t\tcase \"page\":\n\t\t\tdata = this.getPageConfig();\n\t\t\tbreak;\n\t\t}\n\n\t\tif(this.writeFunc){\n\t\t\tthis.writeFunc(this.id, type, data);\n\t\t}\n\n\t}\n\n\t//ensure sorters contain no function data\n\tvalidateSorters(data){\n\t\tdata.forEach(function(item){\n\t\t\titem.column = item.field;\n\t\t\tdelete item.field;\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tgetGroupConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.group){\n\t\t\tif(this.config.group === true || this.config.group.groupBy){\n\t\t\t\tdata.groupBy = this.table.options.groupBy;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupStartOpen){\n\t\t\t\tdata.groupStartOpen = this.table.options.groupStartOpen;\n\t\t\t}\n\n\t\t\tif(this.config.group === true || this.config.group.groupHeader){\n\t\t\t\tdata.groupHeader = this.table.options.groupHeader;\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tgetPageConfig(){\n\t\tvar data = {};\n\n\t\tif(this.config.page){\n\t\t\tif(this.config.page === true || this.config.page.size){\n\t\t\t\tdata.paginationSize = this.table.modules.page.getPageSize();\n\t\t\t}\n\n\t\t\tif(this.config.page === true || this.config.page.page){\n\t\t\t\tdata.paginationInitialPage = this.table.modules.page.getPage();\n\t\t\t}\n\t\t}\n\n\t\treturn data;\n\t}\n\n\n\t//parse columns for data to store\n\tparseColumns(columns){\n\t\tvar definitions = [],\n\t\texcludedKeys = [\"headerContextMenu\", \"headerMenu\", \"contextMenu\", \"clickMenu\"];\n\n\t\tcolumns.forEach((column) => {\n\t\t\tvar defStore = {},\n\t\t\tcolDef = column.getDefinition(),\n\t\t\tkeys;\n\n\t\t\tif(column.isGroup){\n\t\t\t\tdefStore.title = colDef.title;\n\t\t\t\tdefStore.columns = this.parseColumns(column.getColumns());\n\t\t\t}else{\n\t\t\t\tdefStore.field = column.getField();\n\n\t\t\t\tif(this.config.columns === true || this.config.columns == undefined){\n\t\t\t\t\tkeys =  Object.keys(colDef);\n\t\t\t\t\tkeys.push(\"width\");\n\t\t\t\t}else{\n\t\t\t\t\tkeys = this.config.columns;\n\t\t\t\t}\n\n\t\t\t\tkeys.forEach((key)=>{\n\t\t\t\t\tswitch(key){\n\t\t\t\t\t\tcase \"width\":\n\t\t\t\t\t\tdefStore.width = column.getWidth();\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"visible\":\n\t\t\t\t\t\tdefStore.visible = column.visible;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\tif(typeof colDef[key] !== \"function\" && excludedKeys.indexOf(key) === -1){\n\t\t\t\t\t\t\tdefStore[key] = colDef[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tdefinitions.push(defStore);\n\t\t});\n\n\t\treturn definitions;\n\t}\n}\n\nPersistence.moduleName = \"persistence\";\n\nPersistence.moduleInitOrder = -10;\n\n//load defaults\nPersistence.readers = defaultReaders;\nPersistence.writers = defaultWriters;\n\nexport default Persistence;","import Module from '../../core/Module.js';\n\nclass Popup extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.columnSubscribers = {};\n\t\t\n\t\tthis.registerTableOption(\"rowContextPopup\", false);\n\t\tthis.registerTableOption(\"rowClickPopup\", false);\n\t\tthis.registerTableOption(\"groupContextPopup\", false);\n\t\tthis.registerTableOption(\"groupClickPopup\", false);\n\t\t\n\t\tthis.registerColumnOption(\"headerContextPopup\");\n\t\tthis.registerColumnOption(\"headerClickPopup\");\n\t\tthis.registerColumnOption(\"headerPopup\");\n\t\tthis.registerColumnOption(\"headerPopupIcon\");\n\t\tthis.registerColumnOption(\"contextPopup\");\n\t\tthis.registerColumnOption(\"clickPopup\");\n\t\t\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializeRowWatchers();\n\t\tthis.initializeGroupWatchers();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tinitializeRowWatchers(){\n\t\tif(this.table.options.rowContextPopup){\n\t\t\tthis.subscribe(\"row-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t\tthis.table.on(\"rowTapHold\", this.loadPopupEvent.bind(this, this.table.options.rowContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.rowClickPopup){\n\t\t\tthis.subscribe(\"row-click\", this.loadPopupEvent.bind(this, this.table.options.rowClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeGroupWatchers(){\n\t\tif(this.table.options.groupContextPopup){\n\t\t\tthis.subscribe(\"group-contextmenu\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t\tthis.table.on(\"groupTapHold\", this.loadPopupEvent.bind(this, this.table.options.groupContextPopup));\n\t\t}\n\t\t\n\t\tif(this.table.options.groupClickPopup){\n\t\t\tthis.subscribe(\"group-click\", this.loadPopupEvent.bind(this, this.table.options.groupClickPopup));\n\t\t}\n\t}\n\t\n\tinitializeColumn(column){\n\t\tvar options = [\"headerContextPopup\", \"headerClickPopup\"],\n\t\tdef = column.definition;\n\t\t\n\t\t//handle column events\n\t\tif(def.headerContextPopup && !this.columnSubscribers.headerContextPopup){\n\t\t\tthis.columnSubscribers.headerContextPopup = this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\");\n\t\t\tthis.subscribe(\"column-contextmenu\", this.columnSubscribers.headerContextPopup);\n\t\t\tthis.table.on(\"headerTapHold\", this.loadPopupTableColumnEvent.bind(this, \"headerContextPopup\"))\n\t\t}\n\t\t\n\t\tif(def.headerClickPopup && !this.columnSubscribers.headerClickPopup){\n\t\t\tthis.columnSubscribers.headerClickPopup = this.loadPopupTableColumnEvent.bind(this, \"headerClickPopup\");\n\t\t\tthis.subscribe(\"column-click\", this.columnSubscribers.headerClickPopup);\n\t\t}\n\t\t\n\t\tif(def.headerPopup){\n\t\t\tthis.initializeColumnHeaderPopup(column);\n\t\t}\n\t\t\n\t\t//handle cell events\n\t\tif(def.contextPopup && !this.columnSubscribers.contextPopup){\n\t\t\tthis.columnSubscribers.contextPopup = this.loadPopupTableCellEvent.bind(this, \"contextPopup\");\n\t\t\tthis.subscribe(\"cell-contextmenu\", this.columnSubscribers.contextPopup);\n\t\t\tthis.table.on(\"cellTapHold\", this.loadPopupTableCellEvent.bind(this, \"contextPopup\"))\n\t\t}\n\t\t\n\t\tif(def.clickPopup && !this.columnSubscribers.clickPopup){\n\t\t\tthis.columnSubscribers.clickPopup = this.loadPopupTableCellEvent.bind(this, \"clickPopup\");\n\t\t\tthis.subscribe(\"cell-click\", this.columnSubscribers.clickPopup);\n\t\t}\n\t}\n\t\n\tinitializeColumnHeaderPopup(column){\n\t\tvar icon = column.definition.headerPopupIcon,\n\t\theaderPopupEl;\n\t\t\n\t\theaderPopupEl = document.createElement(\"span\");\n\t\theaderPopupEl.classList.add(\"tabulator-header-popup-button\");\n\n\t\tif(icon){\n\t\t\tif(typeof icon === \"function\"){\n\t\t\t\ticon = icon(column.getComponent());\n\t\t\t}\n\n\t\t\tif(icon instanceof HTMLElement){\n\t\t\t\theaderPopupEl.appendChild(icon);\n\t\t\t}else{\n\t\t\t\theaderPopupEl.innerHTML = icon;\n\t\t\t}\n\t\t}else{\n\t\t\theaderPopupEl.innerHTML = \"&vellip;\";\n\t\t}\n\t\t\n\t\theaderPopupEl.addEventListener(\"click\", (e) => {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tthis.loadPopupEvent(column.definition.headerPopup, e, column);\n\t\t});\n\t\t\n\t\tcolumn.titleElement.insertBefore(headerPopupEl, column.titleElement.firstChild);\n\t}\n\t\n\tloadPopupTableCellEvent(option, e, cell){\n\t\tif(cell._cell){\n\t\t\tcell = cell._cell;\n\t\t}\n\t\t\n\t\tif(cell.column.definition[option]){\n\t\t\tthis.loadPopupEvent(cell.column.definition[option], e, cell);\n\t\t}\n\t}\n\t\n\tloadPopupTableColumnEvent(option, e, column){\n\t\tif(column._column){\n\t\t\tcolumn = column._column;\n\t\t}\n\t\t\n\t\tif(column.definition[option]){\n\t\t\tthis.loadPopupEvent(column.definition[option], e, column);\n\t\t}\n\t}\n\t\n\tloadPopupEvent(contents, e, component){\n\t\tvar renderedCallback;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(component._group){\n\t\t\tcomponent = component._group;\n\t\t}else if(component._row){\n\t\t\tcomponent = component._row;\n\t\t}\n\t\t\n\t\tcontents = typeof contents == \"function\" ? contents.call(this.table, e, component.getComponent(),  onRendered) : contents;\n\t\t\n\t\tthis.loadPopup(e, component, contents, renderedCallback);\n\t}\n\t\n\tloadPopup(e, component, contents, renderedCallback){\n\t\tvar touch = !(e instanceof MouseEvent),\n\t\tcontentsEl, popup;\n\t\t\n\t\tif(contents instanceof HTMLElement){\n\t\t\tcontentsEl = contents;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\tcontentsEl.innerHTML = contents;\n\t\t}\n\t\t\n\t\tcontentsEl.classList.add(\"tabulator-popup\");\n\n\t\tcontentsEl.addEventListener(\"click\", (e) =>{\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tif(!touch){\n\t\t\te.preventDefault();\n\t\t}\n\t\t\n\t\tpopup = this.popup(contentsEl);\n\n\t\tif(typeof renderedCallback === \"function\"){\n\t\t\tpopup.renderCallback(renderedCallback);\n\t\t}\n\t\t\n\t\tpopup.show(e).hideOnBlur(() => {\n\t\t\tthis.dispatchExternal(\"popupClosed\", component.getComponent());\n\t\t});\n\n\n\n\t\tthis.dispatchExternal(\"popupOpened\", component.getComponent())\n\t}\n}\n\nPopup.moduleName = \"popup\";\n\nexport default Popup;\n","import Module from '../../core/Module.js';\n\nclass Print extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.element = false;\n\t\tthis.manualBlock = false;\n\n\t\tthis.registerTableOption(\"printAsHtml\", false); //enable print as html\n\t\tthis.registerTableOption(\"printFormatter\", false); //printing page formatter\n\t\tthis.registerTableOption(\"printHeader\", false); //page header contents\n\t\tthis.registerTableOption(\"printFooter\", false); //page footer contents\n\t\tthis.registerTableOption(\"printStyled\", true); //enable print as html styling\n\t\tthis.registerTableOption(\"printRowRange\", \"visible\"); //restrict print to visible rows only\n\t\tthis.registerTableOption(\"printConfig\", {}); //print config options\n\n\t\tthis.registerColumnOption(\"print\");\n\t\tthis.registerColumnOption(\"titlePrint\");\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.printAsHtml){\n\t\t\twindow.addEventListener(\"beforeprint\", this.replaceTable.bind(this));\n\t\t\twindow.addEventListener(\"afterprint\", this.cleanup.bind(this));\n\t\t}\n\n\t\tthis.registerTableFunction(\"print\", this.printFullscreen.bind(this));\n\t}\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\treplaceTable(){\n\t\tif(!this.manualBlock){\n\t\t\tthis.element = document.createElement(\"div\");\n\t\t\tthis.element.classList.add(\"tabulator-print-table\");\n\n\t\t\tthis.element.appendChild(this.table.modules.export.genereateTable(this.table.options.printConfig, this.table.options.printStyled, this.table.options.printRowRange, \"print\"));\n\n\t\t\tthis.table.element.style.display = \"none\";\n\n\t\t\tthis.table.element.parentNode.insertBefore(this.element, this.table.element);\n\t\t}\n\t}\n\n\tcleanup(){\n\t\tdocument.body.classList.remove(\"tabulator-print-fullscreen-hide\");\n\n\t\tif(this.element && this.element.parentNode){\n\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\tthis.table.element.style.display = \"\";\n\t\t}\n\t}\n\n\tprintFullscreen(visible, style, config){\n\t\tvar scrollX = window.scrollX,\n\t\tscrollY = window.scrollY,\n\t\theaderEl = document.createElement(\"div\"),\n\t\tfooterEl = document.createElement(\"div\"),\n\t\ttableEl = this.table.modules.export.genereateTable(typeof config != \"undefined\" ? config : this.table.options.printConfig, typeof style != \"undefined\" ? style : this.table.options.printStyled, visible || this.table.options.printRowRange, \"print\"),\n\t\theaderContent, footerContent;\n\n\t\tthis.manualBlock = true;\n\n\t\tthis.element = document.createElement(\"div\");\n\t\tthis.element.classList.add(\"tabulator-print-fullscreen\");\n\n\t\tif(this.table.options.printHeader){\n\t\t\theaderEl.classList.add(\"tabulator-print-header\");\n\n\t\t\theaderContent = typeof this.table.options.printHeader == \"function\" ? this.table.options.printHeader.call(this.table) : this.table.options.printHeader;\n\n\t\t\tif(typeof headerContent == \"string\"){\n\t\t\t\theaderEl.innerHTML = headerContent;\n\t\t\t}else{\n\t\t\t\theaderEl.appendChild(headerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(headerEl);\n\t\t}\n\n\t\tthis.element.appendChild(tableEl);\n\n\t\tif(this.table.options.printFooter){\n\t\t\tfooterEl.classList.add(\"tabulator-print-footer\");\n\n\t\t\tfooterContent = typeof this.table.options.printFooter == \"function\" ? this.table.options.printFooter.call(this.table) : this.table.options.printFooter;\n\n\n\t\t\tif(typeof footerContent == \"string\"){\n\t\t\t\tfooterEl.innerHTML = footerContent;\n\t\t\t}else{\n\t\t\t\tfooterEl.appendChild(footerContent);\n\t\t\t}\n\n\t\t\tthis.element.appendChild(footerEl);\n\t\t}\n\n\t\tdocument.body.classList.add(\"tabulator-print-fullscreen-hide\");\n\t\tdocument.body.appendChild(this.element);\n\n\t\tif(this.table.options.printFormatter){\n\t\t\tthis.table.options.printFormatter(this.element, tableEl);\n\t\t}\n\n\t\twindow.print();\n\n\t\tthis.cleanup();\n\n\t\twindow.scrollTo(scrollX, scrollY);\n\n\t\tthis.manualBlock = false;\n\t}\n}\n\nPrint.moduleName = \"print\";\n\nexport default Print;","import Module from '../../core/Module.js';\n\nclass ReactiveData extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.data = false;\n\t\tthis.blocked = false; //block reactivity while performing update\n\t\tthis.origFuncs = {}; // hold original data array functions to allow replacement after data is done with\n\t\tthis.currentVersion = 0;\n\n\t\tthis.registerTableOption(\"reactiveData\", false); //enable data reactivity\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.reactiveData){\n\t\t\tthis.subscribe(\"cell-value-save-before\", this.block.bind(this));\n\t\t\tthis.subscribe(\"cell-value-save-after\", this.unblock.bind(this));\n\t\t\tthis.subscribe(\"row-data-save-before\", this.block.bind(this));\n\t\t\tthis.subscribe(\"row-data-save-after\", this.unblock.bind(this));\n\t\t\tthis.subscribe(\"row-data-init-after\", this.watchRow.bind(this));\n\t\t\tthis.subscribe(\"data-processing\", this.watchData.bind(this));\n\t\t\tthis.subscribe(\"table-destroy\", this.unwatchData.bind(this));\n\t\t}\n\t}\n\n\twatchData(data){\n\t\tvar self = this,\n\t\tpushFunc, version;\n\n\t\tthis.currentVersion ++;\n\n\t\tversion = this.currentVersion;\n\n\t\tthis.unwatchData();\n\n\t\tthis.data = data;\n\n\t\t//override array push function\n\t\tthis.origFuncs.push = data.push;\n\n\t\tObject.defineProperty(this.data, \"push\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, false);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.push.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\t\t//override array unshift function\n\t\tthis.origFuncs.unshift = data.unshift;\n\n\t\tObject.defineProperty(this.data, \"unshift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments);\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\targs.forEach((arg) => {\n\t\t\t\t\t\tself.table.rowManager.addRowActual(arg, true);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.unshift.apply(data, arguments);\n\t\t\t}\n\t\t});\n\n\n\t\t//override array shift function\n\t\tthis.origFuncs.shift = data.shift;\n\n\t\tObject.defineProperty(this.data, \"shift\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[0]);\n\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.shift.call(data);\n\t\t\t}\n\t\t});\n\n\t\t//override array pop function\n\t\tthis.origFuncs.pop = data.pop;\n\n\t\tObject.defineProperty(this.data, \"pop\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar row;\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\t\t\t\t\tif(self.data.length){\n\t\t\t\t\t\trow = self.table.rowManager.getRowFromDataObject(self.data[self.data.length - 1]);\n\n\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\trow.deleteActual();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn self.origFuncs.pop.call(data);\n\t\t\t}\n\t\t});\n\n\n\t\t//override array splice function\n\t\tthis.origFuncs.splice = data.splice;\n\n\t\tObject.defineProperty(this.data, \"splice\", {\n\t\t\tenumerable: false,\n\t\t\tconfigurable: true,\n\t\t\tvalue: function(){\n\t\t\t\tvar args = Array.from(arguments),\n\t\t\t\tstart = args[0] < 0 ? data.length + args[0] : args[0],\n\t\t\t\tend = args[1],\n\t\t\t\tnewRows = args[2] ? args.slice(2) : false,\n\t\t\t\tstartRow;\n\n\t\t\t\tif(!self.blocked && version === self.currentVersion){\n\n\t\t\t\t\t//add new rows\n\t\t\t\t\tif(newRows){\n\t\t\t\t\t\tstartRow = data[start] ? self.table.rowManager.getRowFromDataObject(data[start]) : false;\n\n\t\t\t\t\t\tif(startRow){\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, startRow, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tnewRows = newRows.slice().reverse();\n\n\t\t\t\t\t\t\tnewRows.forEach((rowData) => {\n\t\t\t\t\t\t\t\tself.table.rowManager.addRowActual(rowData, true, false, true);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t//delete removed rows\n\t\t\t\t\tif(end !== 0){\n\t\t\t\t\t\tvar oldRows = data.slice(start, typeof args[1] === \"undefined\" ? args[1] : start + end);\n\n\t\t\t\t\t\toldRows.forEach((rowData, i) => {\n\t\t\t\t\t\t\tvar row = self.table.rowManager.getRowFromDataObject(rowData);\n\n\t\t\t\t\t\t\tif(row){\n\t\t\t\t\t\t\t\trow.deleteActual(i !== oldRows.length - 1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tif(newRows || end !== 0){\n\t\t\t\t\t\tself.table.rowManager.reRenderInPosition();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn self.origFuncs.splice.apply(data, arguments);\n\t\t\t}\n\t\t});\n\t}\n\n\tunwatchData(){\n\t\tif(this.data !== false){\n\t\t\tfor(var key in this.origFuncs){\n\t\t\t\tObject.defineProperty(this.data, key, {\n\t\t\t\t\tenumerable: true,\n\t\t\t\t\tconfigurable:true,\n\t\t\t\t\twritable:true,\n\t\t\t\t\tvalue: this.origFuncs.key,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\twatchRow(row){\n\t\tvar data = row.getData();\n\n\t\tthis.blocked = true;\n\n\t\tfor(var key in data){\n\t\t\tthis.watchKey(row, data, key);\n\t\t}\n\n\t\tif(this.table.options.dataTree){\n\t\t\tthis.watchTreeChildren(row);\n\t\t}\n\n\t\tthis.blocked = false;\n\t}\n\n\twatchTreeChildren (row){\n\t\tvar childField = row.getData()[this.table.options.dataTreeChildField],\n\t\torigFuncs = {};\n\n\t\tfunction rebuildTree(){\n\t\t\tthis.table.modules.dataTree.initializeRow(row);\n\t\t\tthis.table.modules.dataTree.layoutRow(row);\n\t\t\tthis.table.rowManager.refreshActiveData(\"tree\", false, true);\n\t\t}\n\n\t\tif(childField){\n\n\t\t\torigFuncs.push = childField.push;\n\n\t\t\tObject.defineProperty(childField, \"push\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tvar result = origFuncs.push.apply(childField, arguments);\n\n\t\t\t\t\trebuildTree();\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\torigFuncs.unshift = childField.unshift;\n\n\t\t\tObject.defineProperty(childField, \"unshift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tvar result =  origFuncs.unshift.apply(childField, arguments);\n\n\t\t\t\t\trebuildTree();\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\torigFuncs.shift = childField.shift;\n\n\t\t\tObject.defineProperty(childField, \"shift\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tvar result =  origFuncs.shift.call(childField);\n\n\t\t\t\t\trebuildTree();\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\torigFuncs.pop = childField.pop;\n\n\t\t\tObject.defineProperty(childField, \"pop\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tvar result =  origFuncs.pop.call(childField);\n\n\t\t\t\t\trebuildTree();\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\torigFuncs.splice = childField.splice;\n\n\t\t\tObject.defineProperty(childField, \"splice\", {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: true,\n\t\t\t\tvalue: () => {\n\t\t\t\t\tvar result =  origFuncs.splice.apply(childField, arguments);\n\n\t\t\t\t\trebuildTree();\n\n\t\t\t\t\treturn result;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\twatchKey(row, data, key){\n\t\tvar props = Object.getOwnPropertyDescriptor(data, key),\n\t\tvalue = data[key],\n\t\tversion = this.currentVersion;\n\n\t\tObject.defineProperty(data, key, {\n\t\t\tset: (newValue) => {\n\t\t\t\tvalue = newValue;\n\t\t\t\tif(!this.blocked && version === this.currentVersion){\n\t\t\t\t\tvar update = {};\n\t\t\t\t\tupdate[key] = newValue;\n\t\t\t\t\trow.updateData(update);\n\t\t\t\t}\n\n\t\t\t\tif(props.set){\n\t\t\t\t\tprops.set(newValue);\n\t\t\t\t}\n\t\t\t},\n\t\t\tget:() => {\n\n\t\t\t\tif(props.get){\n\t\t\t\t\tprops.get();\n\t\t\t\t}\n\n\t\t\t\treturn value;\n\t\t\t}\n\t\t});\n\t}\n\n\tunwatchRow(row){\n\t\tvar data = row.getData();\n\n\t\tfor(var key in data){\n\t\t\tObject.defineProperty(data, key, {\n\t\t\t\tvalue:data[key],\n\t\t\t});\n\t\t}\n\t}\n\n\tblock(){\n\t\tthis.blocked = true;\n\t}\n\n\tunblock(){\n\t\tthis.blocked = false;\n\t}\n}\n\nReactiveData.moduleName = \"reactiveData\";\n\nexport default ReactiveData;\n\n\n\n","import Module from '../../core/Module.js';\n\nclass ResizeColumns extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.startColumn = false;\n\t\tthis.startX = false;\n\t\tthis.startWidth = false;\n\t\tthis.latestX = false;\n\t\tthis.handle = null;\n\t\tthis.initialNextColumn = null;\n\t\tthis.nextColumn = null;\n\t\t\n\t\tthis.initialized = false;\n\t\tthis.registerColumnOption(\"resizable\", true);\n\t\tthis.registerTableOption(\"resizableColumnFit\", false);\n\t}\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"column-rendered\", this.layoutColumnHeader.bind(this));\n\t}\n\t\n\tinitializeEventWatchers(){\n\t\tif(!this.initialized){\n\t\t\t\n\t\t\tthis.subscribe(\"cell-rendered\", this.layoutCellHandles.bind(this));\n\t\t\tthis.subscribe(\"cell-delete\", this.deInitializeComponent.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"cell-height\", this.resizeHandle.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-hide\", this.deInitializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.columnLayoutUpdated.bind(this));\n\t\t\t\n\t\t\tthis.subscribe(\"column-delete\", this.deInitializeComponent.bind(this));\n\t\t\tthis.subscribe(\"column-height\", this.resizeHandle.bind(this));\n\t\t\t\n\t\t\tthis.initialized = true;\n\t\t}\n\t}\n\t\n\t\n\tlayoutCellHandles(cell){\n\t\tif(cell.row.type === \"row\"){\n\t\t\tthis.deInitializeComponent(cell);\n\t\t\tthis.initializeColumn(\"cell\", cell, cell.column, cell.element);\n\t\t}\n\t}\n\t\n\tlayoutColumnHeader(column){\n\t\tif(column.definition.resizable){\n\t\t\tthis.initializeEventWatchers();\n\t\t\tthis.deInitializeComponent(column);\n\t\t\tthis.initializeColumn(\"header\", column, column, column.element);\n\t\t}\n\t}\n\t\n\tcolumnLayoutUpdated(column){\n\t\tvar prev = column.prevColumn();\n\t\t\n\t\tthis.reinitializeColumn(column);\n\t\t\n\t\tif(prev){\n\t\t\tthis.reinitializeColumn(prev);\n\t\t}\n\t}\n\t\n\treinitializeColumn(column){\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(cell.modules.resize && cell.modules.resize.handleEl){\n\t\t\t\tcell.element.after(cell.modules.resize.handleEl);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(column.modules.resize && column.modules.resize.handleEl){\n\t\t\tcolumn.element.after(column.modules.resize.handleEl);\n\t\t}\n\t}\n\t\n\tinitializeColumn(type, component, column, element){\n\t\tvar self = this,\n\t\tvariableHeight = false,\n\t\tmode = column.definition.resizable,\n\t\tconfig = {},\n\t\tnearestColumn = column.getLastColumn();\n\t\t\n\t\t//set column resize mode\n\t\tif(type === \"header\"){\n\t\t\tvariableHeight = column.definition.formatter == \"textarea\" || column.definition.variableHeight;\n\t\t\tconfig = {variableHeight:variableHeight};\n\t\t}\n\t\t\n\t\tif((mode === true || mode == type) && this._checkResizability(nearestColumn)){\n\t\t\t\n\t\t\tvar handle = document.createElement('span');\n\t\t\thandle.className = \"tabulator-col-resize-handle\";\n\t\t\t\n\t\t\thandle.addEventListener(\"click\", function(e){\n\t\t\t\te.stopPropagation();\n\t\t\t});\n\t\t\t\n\t\t\tvar handleDown = function(e){\n\t\t\t\tself.startColumn = column;\n\t\t\t\tself.initialNextColumn = self.nextColumn = nearestColumn.nextColumn();\n\t\t\t\tself._mouseDown(e, nearestColumn, handle);\n\t\t\t};\n\t\t\t\n\t\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\t\t\t\n\t\t\t//resize column on  double click\n\t\t\thandle.addEventListener(\"dblclick\", (e) => {\n\t\t\t\tvar oldWidth = nearestColumn.getWidth();\n\t\t\t\t\n\t\t\t\te.stopPropagation();\n\t\t\t\tnearestColumn.reinitializeWidth(true);\n\t\t\t\t\n\t\t\t\tif(oldWidth !== nearestColumn.getWidth()){\n\t\t\t\t\tself.dispatch(\"column-resized\", nearestColumn);\n\t\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", nearestColumn.getComponent());\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tconfig.handleEl = handle;\n\t\t\t\n\t\t\tif(element.parentNode){\n\t\t\t\telement.after(handle);\t\t\t\n\t\t\t}\n\t\t}\n\t\t\n\t\tcomponent.modules.resize = config;\n\t}\n\t\n\tdeInitializeColumn(column){\n\t\tthis.deInitializeComponent(column);\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tthis.deInitializeComponent(cell);\n\t\t});\n\t}\n\t\n\tdeInitializeComponent(component){\n\t\tvar handleEl;\n\t\t\n\t\tif(component.modules.resize){\n\t\t\thandleEl = component.modules.resize.handleEl;\n\t\t\t\n\t\t\tif(handleEl && handleEl.parentElement){\n\t\t\t\thandleEl.parentElement.removeChild(handleEl);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tresizeHandle(component, height){\n\t\tif(component.modules.resize && component.modules.resize.handleEl){\n\t\t\tcomponent.modules.resize.handleEl.style.height = height;\n\t\t}\n\t}\n\t\n\t_checkResizability(column){\n\t\treturn column.definition.resizable;\n\t}\n\t\n\t_mouseDown(e, column, handle){\n\t\tvar self = this;\n\t\t\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tfunction mouseMove(e){\n\t\t\tvar x = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX,\n\t\t\tstartDiff = x - self.startX,\n\t\t\tmoveDiff = x - self.latestX,\n\t\t\tblockedBefore, blockedAfter;\n\n\t\t\tself.latestX = x;\n\t\t\t\n\t\t\tif(self.table.rtl){\n\t\t\t\tstartDiff = -startDiff;\n\t\t\t\tmoveDiff = -moveDiff;\n\t\t\t}\n\n\t\t\tblockedBefore = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\t\tcolumn.setWidth(self.startWidth + startDiff);\n\n\t\t\tblockedAfter = column.width == column.minWidth || column.width == column.maxWidth;\n\n\t\t\tif(moveDiff < 0){\n\t\t\t\tself.nextColumn = self.initialNextColumn;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.options.resizableColumnFit && self.nextColumn && !(blockedBefore && blockedAfter)){\n\t\t\t\tlet colWidth = self.nextColumn.getWidth();\n\n\t\t\t\tif(moveDiff > 0){\n\t\t\t\t\tif(colWidth <= self.nextColumn.minWidth){\n\t\t\t\t\t\tself.nextColumn = self.nextColumn.nextColumn();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif(self.nextColumn){\n\t\t\t\t\tself.nextColumn.setWidth(self.nextColumn.getWidth() - moveDiff);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tself.table.columnManager.renderer.rerenderColumns(true);\n\t\t\t\n\t\t\tif(!self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t}\n\t\t\n\t\tfunction mouseUp(e){\n\t\t\t\n\t\t\t//block editor from taking action while resizing is taking place\n\t\t\tif(self.startColumn.modules.edit){\n\t\t\t\tself.startColumn.modules.edit.blocked = false;\n\t\t\t}\n\t\t\t\n\t\t\tif(self.table.browserSlow && column.modules.resize && column.modules.resize.variableHeight){\n\t\t\t\tcolumn.checkCellHeights();\n\t\t\t}\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseUp);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\t\t\t\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\t\t\t\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\t\t\t\n\t\t\tif(self.startWidth !== column.getWidth()){\n\t\t\t\tself.dispatch(\"column-resized\", column);\n\t\t\t\tself.table.externalEvents.dispatch(\"columnResized\", column.getComponent());\n\t\t\t}\n\t\t}\n\t\t\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\t\t\n\t\t//block editor from taking action while resizing is taking place\n\t\tif(self.startColumn.modules.edit){\n\t\t\tself.startColumn.modules.edit.blocked = true;\n\t\t}\n\t\t\n\t\tself.startX = typeof e.screenX === \"undefined\" ? e.touches[0].screenX : e.screenX;\n\t\tself.latestX = self.startX;\n\t\tself.startWidth = column.getWidth();\n\t\t\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeColumns.moduleName = \"resizeColumns\";\n\nexport default ResizeColumns;","import Module from '../../core/Module.js';\n\nclass ResizeRows extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.startColumn = false;\n\t\tthis.startY = false;\n\t\tthis.startHeight = false;\n\t\tthis.handle = null;\n\t\tthis.prevHandle = null;\n\n\t\tthis.registerTableOption(\"resizableRows\", false); //resizable rows\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.resizableRows){\n\t\t\tthis.subscribe(\"row-layout-after\", this.initializeRow.bind(this));\n\t\t}\n\t}\n\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\trowEl = row.getElement();\n\n\t\tvar handle = document.createElement('div');\n\t\thandle.className = \"tabulator-row-resize-handle\";\n\n\t\tvar prevHandle = document.createElement('div');\n\t\tprevHandle.className = \"tabulator-row-resize-handle prev\";\n\n\t\thandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar handleDown = function(e){\n\t\t\tself.startRow = row;\n\t\t\tself._mouseDown(e, row, handle);\n\t\t};\n\n\t\thandle.addEventListener(\"mousedown\", handleDown);\n\t\thandle.addEventListener(\"touchstart\", handleDown, {passive: true});\n\n\t\tprevHandle.addEventListener(\"click\", function(e){\n\t\t\te.stopPropagation();\n\t\t});\n\n\t\tvar prevHandleDown =  function(e){\n\t\t\tvar prevRow = self.table.rowManager.prevDisplayRow(row);\n\n\t\t\tif(prevRow){\n\t\t\t\tself.startRow = prevRow;\n\t\t\t\tself._mouseDown(e, prevRow, prevHandle);\n\t\t\t}\n\t\t};\n\n\t\tprevHandle.addEventListener(\"mousedown\",prevHandleDown);\n\t\tprevHandle.addEventListener(\"touchstart\",prevHandleDown, {passive: true});\n\n\t\trowEl.appendChild(handle);\n\t\trowEl.appendChild(prevHandle);\n\t}\n\n\t_mouseDown(e, row, handle){\n\t\tvar self = this;\n\n\t\tself.table.element.classList.add(\"tabulator-block-select\");\n\n\t\tfunction mouseMove(e){\n\t\t\trow.setHeight(self.startHeight + ((typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY) - self.startY));\n\t\t}\n\n\t\tfunction mouseUp(e){\n\n\t\t\t// //block editor from taking action while resizing is taking place\n\t\t\t// if(self.startColumn.modules.edit){\n\t\t\t// \tself.startColumn.modules.edit.blocked = false;\n\t\t\t// }\n\n\t\t\tdocument.body.removeEventListener(\"mouseup\", mouseMove);\n\t\t\tdocument.body.removeEventListener(\"mousemove\", mouseMove);\n\n\t\t\thandle.removeEventListener(\"touchmove\", mouseMove);\n\t\t\thandle.removeEventListener(\"touchend\", mouseUp);\n\n\t\t\tself.table.element.classList.remove(\"tabulator-block-select\");\n\n\t\t\tself.dispatchExternal(\"rowResized\", row.getComponent());\n\t\t}\n\n\t\te.stopPropagation(); //prevent resize from interfereing with movable columns\n\n\t\t//block editor from taking action while resizing is taking place\n\t\t// if(self.startColumn.modules.edit){\n\t\t// \tself.startColumn.modules.edit.blocked = true;\n\t\t// }\n\n\t\tself.startY = typeof e.screenY === \"undefined\" ? e.touches[0].screenY : e.screenY;\n\t\tself.startHeight = row.getHeight();\n\n\t\tdocument.body.addEventListener(\"mousemove\", mouseMove);\n\t\tdocument.body.addEventListener(\"mouseup\", mouseUp);\n\n\t\thandle.addEventListener(\"touchmove\", mouseMove, {passive: true});\n\t\thandle.addEventListener(\"touchend\", mouseUp);\n\t}\n}\n\nResizeRows.moduleName = \"resizeRows\";\n\nexport default ResizeRows;","import Module from '../../core/Module.js';\n\nclass ResizeTable extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.binding = false;\n\t\tthis.observer = false;\n\t\tthis.containerObserver = false;\n\n\t\tthis.tableHeight = 0;\n\t\tthis.tableWidth = 0;\n\t\tthis.containerHeight = 0;\n\t\tthis.containerWidth = 0;\n\n\t\tthis.autoResize = false;\n\n\t\tthis.registerTableOption(\"autoResize\", true); //auto resize table\n\t}\n\n\tinitialize(){\n\t\tif(this.table.options.autoResize){\n\t\t\tvar table = this.table,\n\t\t\ttableStyle;\n\n\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\tthis.tableWidth = table.element.clientWidth;\n\n\t\t\tif(table.element.parentNode){\n\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t}\n\n\t\t\tif(typeof ResizeObserver !== \"undefined\" && table.rowManager.getRenderMode() === \"virtual\"){\n\n\t\t\t\tthis.autoResize = true;\n\n\t\t\t\tthis.observer = new ResizeObserver((entry) => {\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\n\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\t\tif(this.tableHeight != nodeHeight || this.tableWidth != nodeWidth){\n\t\t\t\t\t\t\tthis.tableHeight = nodeHeight;\n\t\t\t\t\t\t\tthis.tableWidth = nodeWidth;\n\n\t\t\t\t\t\t\tif(table.element.parentNode){\n\t\t\t\t\t\t\t\tthis.containerHeight = table.element.parentNode.clientHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = table.element.parentNode.clientWidth;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tthis.table.columnManager.renderer.rerenderColumns(true);\n\n\t\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.observer.observe(table.element);\n\n\t\t\t\ttableStyle = window.getComputedStyle(table.element);\n\n\t\t\t\tif(this.table.element.parentNode && !this.table.rowManager.fixedHeight && (tableStyle.getPropertyValue(\"max-height\") || tableStyle.getPropertyValue(\"min-height\"))){\n\n\t\t\t\t\tthis.containerObserver = new ResizeObserver((entry) => {\n\t\t\t\t\t\tif(!table.browserMobile || (table.browserMobile &&!table.modules.edit.currentCell)){\n\n\t\t\t\t\t\t\tvar nodeHeight = Math.floor(entry[0].contentRect.height);\n\t\t\t\t\t\t\tvar nodeWidth = Math.floor(entry[0].contentRect.width);\n\n\t\t\t\t\t\t\tif(this.containerHeight != nodeHeight || this.containerWidth != nodeWidth){\n\t\t\t\t\t\t\t\tthis.containerHeight = nodeHeight;\n\t\t\t\t\t\t\t\tthis.containerWidth = nodeWidth;\n\t\t\t\t\t\t\t\tthis.tableHeight = table.element.clientHeight;\n\t\t\t\t\t\t\t\tthis.tableWidth = table.element.clientWidth;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ttable.columnManager.renderer.rerenderColumns(true);\n\n\t\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\tthis.containerObserver.observe(this.table.element.parentNode);\n\t\t\t\t}\n\n\t\t\t\tthis.subscribe(\"table-resize\", this.tableResized.bind(this));\n\n\t\t\t}else{\n\t\t\t\tthis.binding = function(){\n\t\t\t\t\tif(!table.browserMobile || (table.browserMobile && !table.modules.edit.currentCell)){\n\n\t\t\t\t\t\ttable.columnManager.renderer.rerenderColumns(true);\n\n\t\t\t\t\t\ttable.redraw();\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\twindow.addEventListener(\"resize\", this.binding);\n\t\t\t}\n\n\t\t\tthis.subscribe(\"table-destroy\", this.clearBindings.bind(this));\n\t\t}\n\t}\n\n\ttableResized(){\n\t\tthis.table.rowManager.redraw();\n\t}\n\n\tclearBindings(){\n\t\tif(this.binding){\n\t\t\twindow.removeEventListener(\"resize\", this.binding);\n\t\t}\n\n\t\tif(this.observer){\n\t\t\tthis.observer.unobserve(this.table.element);\n\t\t}\n\n\t\tif(this.containerObserver){\n\t\t\tthis.containerObserver.unobserve(this.table.element.parentNode);\n\t\t}\n\t}\n}\n\nResizeTable.moduleName = \"resizeTable\";\n\nexport default ResizeTable;","import Module from '../../core/Module.js';\n\nclass ResponsiveLayout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.columns = [];\n\t\tthis.hiddenColumns = [];\n\t\tthis.mode = \"\";\n\t\tthis.index = 0;\n\t\tthis.collapseFormatter = [];\n\t\tthis.collapseStartOpen = true;\n\t\tthis.collapseHandleColumn = false;\n\n\t\tthis.registerTableOption(\"responsiveLayout\", false); //responsive layout flags\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseStartOpen\", true); //start showing collapsed data\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseUseFormatters\", true); //responsive layout collapse formatter\n\t\tthis.registerTableOption(\"responsiveLayoutCollapseFormatter\", false); //responsive layout collapse formatter\n\n\t\tthis.registerColumnOption(\"responsive\");\n\t}\n\n\t//generate responsive columns list\n\tinitialize(){\n\t\tvar self = this,\n\t\tcolumns = [];\n\n\t\tif(this.table.options.responsiveLayout){\n\t\t\tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t\t\tthis.subscribe(\"column-show\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"column-hide\", this.updateColumnVisibility.bind(this));\n\t\t\tthis.subscribe(\"columns-loaded\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-moved\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-add\", this.initializeResponsivity.bind(this));\n\t\t\tthis.subscribe(\"column-delete\", this.initializeResponsivity.bind(this));\n\n\t\t\tthis.subscribe(\"table-redrawing\", this.tableRedraw.bind(this));\n\n\t\t\tif(this.table.options.responsiveLayout === \"collapse\"){\n\t\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\t\tthis.subscribe(\"row-layout\", this.layoutRow.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\n\ttableRedraw(force){\n\t\tif([\"fitColumns\", \"fitDataStretch\"].indexOf(this.layoutMode()) === -1){\n\t\t\tif(!force){\n\t\t\t\tthis.update();\n\t\t\t}\n\t\t}\n\t}\n\n\tinitializeResponsivity(){\n\t\tvar columns = [];\n\n\t\tthis.mode = this.table.options.responsiveLayout;\n\t\tthis.collapseFormatter = this.table.options.responsiveLayoutCollapseFormatter || this.formatCollapsedData;\n\t\tthis.collapseStartOpen = this.table.options.responsiveLayoutCollapseStartOpen;\n\t\tthis.hiddenColumns = [];\n\n\t\t//determine level of responsivity for each column\n\t\tthis.table.columnManager.columnsByIndex.forEach((column, i) => {\n\t\t\tif(column.modules.responsive){\n\t\t\t\tif(column.modules.responsive.order && column.modules.responsive.visible){\n\t\t\t\t\tcolumn.modules.responsive.index = i;\n\t\t\t\t\tcolumns.push(column);\n\n\t\t\t\t\tif(!column.visible && this.mode === \"collapse\"){\n\t\t\t\t\t\tthis.hiddenColumns.push(column);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t//sort list by responsivity\n\t\tcolumns = columns.reverse();\n\t\tcolumns = columns.sort((a, b) => {\n\t\t\tvar diff = b.modules.responsive.order - a.modules.responsive.order;\n\t\t\treturn diff || (b.modules.responsive.index - a.modules.responsive.index);\n\t\t});\n\n\t\tthis.columns = columns;\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.generateCollapsedContent();\n\t\t}\n\n\t\t//assign collapse column\n\t\tfor (let col of this.table.columnManager.columnsByIndex){\n\t\t\tif(col.definition.formatter == \"responsiveCollapse\"){\n\t\t\t\tthis.collapseHandleColumn = col;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif(this.collapseHandleColumn){\n\t\t\tif(this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}else{\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//define layout information\n\tinitializeColumn(column){\n\t\tvar def = column.getDefinition();\n\n\t\tcolumn.modules.responsive = {order: typeof def.responsive === \"undefined\" ? 1 : def.responsive, visible:def.visible === false ? false : true};\n\t}\n\n\tinitializeRow(row){\n\t\tvar el;\n\n\t\tif(row.type !== \"calc\"){\n\t\t\tel = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-responsive-collapse\");\n\n\t\t\trow.modules.responsiveLayout = {\n\t\t\t\telement:el,\n\t\t\t\topen:this.collapseStartOpen,\n\t\t\t};\n\n\t\t\tif(!this.collapseStartOpen){\n\t\t\t\tel.style.display = 'none';\n\t\t\t}\n\t\t}\n\t}\n\n\tlayoutRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\trowEl.appendChild(row.modules.responsiveLayout.element);\n\t\t\tthis.generateCollapsedRowContent(row);\n\t\t}\n\t}\n\n\t//update column visibility\n\tupdateColumnVisibility(column, responsiveToggle){\n\t\tif(!responsiveToggle && column.modules.responsive){\n\t\t\tcolumn.modules.responsive.visible = column.visible;\n\t\t\tthis.initializeResponsivity();\n\t\t}\n\t}\n\n\thideColumn(column){\n\t\tvar colCount = this.hiddenColumns.length;\n\n\t\tcolumn.hide(false, true);\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tthis.hiddenColumns.unshift(column);\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !colCount){\n\t\t\t\tthis.collapseHandleColumn.show();\n\t\t\t}\n\t\t}\n\t}\n\n\tshowColumn(column){\n\t\tvar index;\n\n\t\tcolumn.show(false, true);\n\t\t//set column width to prevent calculation loops on uninitialized columns\n\t\tcolumn.setWidth(column.getWidth());\n\n\t\tif(this.mode === \"collapse\"){\n\t\t\tindex = this.hiddenColumns.indexOf(column);\n\n\t\t\tif(index > -1){\n\t\t\t\tthis.hiddenColumns.splice(index, 1);\n\t\t\t}\n\n\t\t\tthis.generateCollapsedContent();\n\n\t\t\tif(this.collapseHandleColumn && !this.hiddenColumns.length){\n\t\t\t\tthis.collapseHandleColumn.hide();\n\t\t\t}\n\t\t}\n\t}\n\n\t//redraw columns to fit space\n\tupdate(){\n\t\tvar self = this,\n\t\tworking = true;\n\n\t\twhile(working){\n\n\t\t\tlet width = self.table.modules.layout.getMode() == \"fitColumns\" ? self.table.columnManager.getFlexBaseWidth() : self.table.columnManager.getWidth();\n\n\t\t\tlet diff = (self.table.options.headerVisible ? self.table.columnManager.element.clientWidth : self.table.element.clientWidth) - width;\n\n\t\t\tif(diff < 0){\n\t\t\t\t//table is too wide\n\t\t\t\tlet column = self.columns[self.index];\n\n\t\t\t\tif(column){\n\t\t\t\t\tself.hideColumn(column);\n\t\t\t\t\tself.index ++;\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\n\t\t\t}else{\n\n\t\t\t\t//table has spare space\n\t\t\t\tlet column = self.columns[self.index -1];\n\n\t\t\t\tif(column){\n\t\t\t\t\tif(diff > 0){\n\t\t\t\t\t\tif(diff >= column.getWidth()){\n\t\t\t\t\t\t\tself.showColumn(column);\n\t\t\t\t\t\t\tself.index --;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tworking = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tworking = false;\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tworking = false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!self.table.rowManager.activeRowsCount){\n\t\t\t\tself.table.rowManager.renderEmptyScroll();\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedContent(){\n\t\tvar self = this,\n\t\trows = this.table.rowManager.getDisplayRows();\n\n\t\trows.forEach(function(row){\n\t\t\tself.generateCollapsedRowContent(row);\n\t\t});\n\t}\n\n\tgenerateCollapsedRowContent(row){\n\t\tvar el, contents;\n\n\t\tif(row.modules.responsiveLayout){\n\t\t\tel = row.modules.responsiveLayout.element;\n\n\t\t\twhile(el.firstChild) el.removeChild(el.firstChild);\n\n\t\t\tcontents = this.collapseFormatter(this.generateCollapsedRowData(row));\n\t\t\tif(contents){\n\t\t\t\tel.appendChild(contents);\n\t\t\t}\n\t\t}\n\t}\n\n\tgenerateCollapsedRowData(row){\n\t\tvar self = this,\n\t\tdata = row.getData(),\n\t\toutput = [],\n\t\tmockCellComponent;\n\n\t\tthis.hiddenColumns.forEach(function(column){\n\t\t\tvar value = column.getFieldValue(data);\n\n\t\t\tif(column.definition.title && column.field){\n\t\t\t\tif(column.modules.format && self.table.options.responsiveLayoutCollapseUseFormatters){\n\n\t\t\t\t\tmockCellComponent = {\n\t\t\t\t\t\tvalue:false,\n\t\t\t\t\t\tdata:{},\n\t\t\t\t\t\tgetValue:function(){\n\t\t\t\t\t\t\treturn value;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetData:function(){\n\t\t\t\t\t\t\treturn data;\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetElement:function(){\n\t\t\t\t\t\t\treturn document.createElement(\"div\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetRow:function(){\n\t\t\t\t\t\t\treturn row.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tgetColumn:function(){\n\t\t\t\t\t\t\treturn column.getComponent();\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\n\t\t\t\t\tfunction onRendered(callback){\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: column.modules.format.formatter.call(self.table.modules.format, mockCellComponent, column.modules.format.params, onRendered)\n\t\t\t\t\t});\n\t\t\t\t}else{\n\t\t\t\t\toutput.push({\n\t\t\t\t\t\tfield: column.field,\n\t\t\t\t\t\ttitle: column.definition.title,\n\t\t\t\t\t\tvalue: value\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tformatCollapsedData(data){\n\t\tvar list = document.createElement(\"table\");\n\n\t\tdata.forEach(function(item){\n\t\t\tvar row = document.createElement(\"tr\");\n\t\t\tvar titleData = document.createElement(\"td\");\n\t\t\tvar valueData = document.createElement(\"td\");\n\t\t\tvar node_content;\n\n\t\t\tvar titleHighlight = document.createElement(\"strong\");\n\t\t\ttitleData.appendChild(titleHighlight);\n\t\t\tthis.langBind(\"columns|\" + item.field, function(text){\n\t\t\t\ttitleHighlight.innerHTML = text || item.title;\n\t\t\t});\n\n\t\t\tif(item.value instanceof Node){\n\t\t\t\tnode_content = document.createElement(\"div\");\n\t\t\t\tnode_content.appendChild(item.value);\n\t\t\t\tvalueData.appendChild(node_content);\n\t\t\t}else{\n\t\t\t\tvalueData.innerHTML = item.value;\n\t\t\t}\n\n\t\t\trow.appendChild(titleData);\n\t\t\trow.appendChild(valueData);\n\t\t\tlist.appendChild(row);\n\t\t}, this);\n\n\t\treturn Object.keys(data).length ? list : \"\";\n\t}\n}\n\nResponsiveLayout.moduleName = \"responsiveLayout\";\n\nexport default ResponsiveLayout;","import Module from '../../core/Module.js';\n\nclass SelectRow extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.selecting = false; //flag selecting in progress\n\t\tthis.lastClickedRow = false; //last clicked row\n\t\tthis.selectPrev = []; //hold previously selected element for drag drop selection\n\t\tthis.selectedRows = []; //hold selected rows\n\t\tthis.headerCheckboxElement = null; // hold header select element\n\t\t\n\t\tthis.registerTableOption(\"selectable\", \"highlight\"); //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRangeMode\", \"drag\");  //highlight rows on hover\n\t\tthis.registerTableOption(\"selectableRollingSelection\", true); //roll selection once maximum number of selectable rows is reached\n\t\tthis.registerTableOption(\"selectablePersistence\", true); // maintain selection when table view is updated\n\t\tthis.registerTableOption(\"selectableCheck\", function(data, row){return true;}); //check wheather row is selectable\n\t\t\n\t\tthis.registerTableFunction(\"selectRow\", this.selectRows.bind(this));\n\t\tthis.registerTableFunction(\"deselectRow\", this.deselectRows.bind(this));\n\t\tthis.registerTableFunction(\"toggleSelectRow\", this.toggleRow.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedRows\", this.getSelectedRows.bind(this));\n\t\tthis.registerTableFunction(\"getSelectedData\", this.getSelectedData.bind(this));\n\t\t\n\t\t//register component functions\n\t\tthis.registerComponentFunction(\"row\", \"select\", this.selectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"deselect\", this.deselectRows.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"toggleSelect\", this.toggleRow.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"isSelected\", this.isRowSelected.bind(this));\n\t}\n\t\n\tinitialize(){\n\t\tif(this.table.options.selectable !== false){\n\t\t\tthis.subscribe(\"row-init\", this.initializeRow.bind(this));\n\t\t\tthis.subscribe(\"row-deleting\", this.rowDeleted.bind(this));\n\t\t\tthis.subscribe(\"rows-wipe\", this.clearSelectionData.bind(this));\n\t\t\tthis.subscribe(\"rows-retrieve\", this.rowRetrieve.bind(this));\n\t\t\t\n\t\t\tif(this.table.options.selectable && !this.table.options.selectablePersistence){\n\t\t\t\tthis.subscribe(\"data-refreshing\", this.deselectRows.bind(this));\n\t\t\t}\n\t\t}\n\t}\n\t\n\trowRetrieve(type, prevValue){\n\t\treturn type === \"selected\" ? this.selectedRows : prevValue;\n\t}\n\t\n\trowDeleted(row){\n\t\tthis._deselectRow(row, true);\n\t}\n\t\n\tclearSelectionData(silent){\n\t\tthis.selecting = false;\n\t\tthis.lastClickedRow = false;\n\t\tthis.selectPrev = [];\n\t\tthis.selectedRows = [];\n\t\t\n\t\tif(silent !== true){\n\t\t\tthis._rowSelectionChanged();\n\t\t}\n\t}\n\t\n\tinitializeRow(row){\n\t\tvar self = this,\n\t\telement = row.getElement();\n\t\t\n\t\t// trigger end of row selection\n\t\tvar endSelect = function(){\n\t\t\t\n\t\t\tsetTimeout(function(){\n\t\t\t\tself.selecting = false;\n\t\t\t}, 50);\n\t\t\t\n\t\t\tdocument.body.removeEventListener(\"mouseup\", endSelect);\n\t\t};\n\t\t\n\t\trow.modules.select = {selected:false};\n\t\t\n\t\t//set row selection class\n\t\tif(self.table.options.selectableCheck.call(this.table, row.getComponent())){\n\t\t\telement.classList.add(\"tabulator-selectable\");\n\t\t\telement.classList.remove(\"tabulator-unselectable\");\n\t\t\t\n\t\t\tif(self.table.options.selectable && self.table.options.selectable != \"highlight\"){\n\t\t\t\tif(self.table.options.selectableRangeMode === \"click\"){\n\t\t\t\t\telement.addEventListener(\"click\", this.handleComplexRowClick.bind(this, row));\n\t\t\t\t}else{\n\t\t\t\t\telement.addEventListener(\"click\", function(e){\n\t\t\t\t\t\tif(!self.table.modExists(\"edit\") || !self.table.modules.edit.getCurrentCell()){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(!self.selecting){\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mousedown\", function(e){\n\t\t\t\t\t\tif(e.shiftKey){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selecting = true;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.selectPrev = [];\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"mouseup\", endSelect);\n\t\t\t\t\t\t\tdocument.body.addEventListener(\"keyup\", endSelect);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseenter\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.toggleRow(row);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(self.selectPrev[1] == row){\n\t\t\t\t\t\t\t\tself.toggleRow(self.selectPrev[0]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\telement.addEventListener(\"mouseout\", function(e){\n\t\t\t\t\t\tif(self.selecting){\n\t\t\t\t\t\t\tself.table._clearSelection();\n\t\t\t\t\t\t\tself.selectPrev.unshift(row);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\telement.classList.add(\"tabulator-unselectable\");\n\t\t\telement.classList.remove(\"tabulator-selectable\");\n\t\t}\n\t}\n\t\n\thandleComplexRowClick(row, e){\n\t\tif(e.shiftKey){\n\t\t\tthis.table._clearSelection();\n\t\t\tthis.lastClickedRow = this.lastClickedRow || row;\n\t\t\t\n\t\t\tvar lastClickedRowIdx = this.table.rowManager.getDisplayRowIndex(this.lastClickedRow);\n\t\t\tvar rowIdx = this.table.rowManager.getDisplayRowIndex(row);\n\t\t\t\n\t\t\tvar fromRowIdx = lastClickedRowIdx <= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\tvar toRowIdx = lastClickedRowIdx >= rowIdx ? lastClickedRowIdx : rowIdx;\n\t\t\t\n\t\t\tvar rows = this.table.rowManager.getDisplayRows().slice(0);\n\t\t\tvar toggledRows = rows.splice(fromRowIdx, toRowIdx - fromRowIdx + 1);\n\t\t\t\n\t\t\tif(e.ctrlKey || e.metaKey){\n\t\t\t\ttoggledRows.forEach((toggledRow)=>{\n\t\t\t\t\tif(toggledRow !== this.lastClickedRow){\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(this.table.options.selectable !== true && !this.isRowSelected(row)){\n\t\t\t\t\t\t\tif(this.selectedRows.length < this.table.options.selectable){\n\t\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.toggleRow(toggledRow);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.lastClickedRow = row;\n\t\t\t}else{\n\t\t\t\tthis.deselectRows(undefined, true);\n\t\t\t\t\n\t\t\t\tif(this.table.options.selectable !== true){\n\t\t\t\t\tif(toggledRows.length > this.table.options.selectable){\n\t\t\t\t\t\ttoggledRows = toggledRows.slice(0, this.table.options.selectable)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectRows(toggledRows);\n\t\t\t}\n\t\t\tthis.table._clearSelection();\n\t\t}\n\t\telse if(e.ctrlKey || e.metaKey){\n\t\t\tthis.toggleRow(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}else{\n\t\t\tthis.deselectRows(undefined, true);\n\t\t\tthis.selectRows(row);\n\t\t\tthis.lastClickedRow = row;\n\t\t}\n\t}\n\t\n\t//toggle row selection\n\ttoggleRow(row){\n\t\tif(this.table.options.selectableCheck.call(this.table, row.getComponent())){\n\t\t\tif(row.modules.select && row.modules.select.selected){\n\t\t\t\tthis._deselectRow(row);\n\t\t\t}else{\n\t\t\t\tthis._selectRow(row);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//select a number of rows\n\tselectRows(rows){\n\t\tvar rowMatch;\n\t\t\n\t\tswitch(typeof rows){\n\t\t\tcase \"undefined\":\n\t\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t});\n\t\t\t\n\t\t\tthis._rowSelectionChanged();\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"string\":\n\t\t\t\n\t\t\trowMatch = this.table.rowManager.findRow(rows);\n\t\t\t\n\t\t\tif(rowMatch){\n\t\t\t\tthis._selectRow(rowMatch, true, true);\n\t\t\t}else{\n\t\t\t\tthis.table.rowManager.getRows(rows).forEach((row) => {\n\t\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t\t});\n\t\t\t}\n\t\t\t\n\t\t\tthis._rowSelectionChanged();\n\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\tif(Array.isArray(rows)){\n\t\t\t\trows.forEach((row) => {\n\t\t\t\t\tthis._selectRow(row, true, true);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged();\n\t\t\t}else{\n\t\t\t\tthis._selectRow(rows, false, true);\n\t\t\t}\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t//select an individual row\n\t_selectRow(rowInfo, silent, force){\n\t\tvar index;\n\t\t\n\t\t//handle max row count\n\t\tif(!isNaN(this.table.options.selectable) && this.table.options.selectable !== true && !force){\n\t\t\tif(this.selectedRows.length >= this.table.options.selectable){\n\t\t\t\tif(this.table.options.selectableRollingSelection){\n\t\t\t\t\tthis._deselectRow(this.selectedRows[0]);\n\t\t\t\t}else{\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tvar row = this.table.rowManager.findRow(rowInfo);\n\t\t\n\t\tif(row){\n\t\t\tif(this.selectedRows.indexOf(row) == -1){\n\t\t\t\trow.getElement().classList.add(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = true;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.selectedRows.push(row);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, true);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowSelected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tthis._rowSelectionChanged(silent);\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Selection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tisRowSelected(row){\n\t\treturn this.selectedRows.indexOf(row) !== -1;\n\t}\n\t\n\t//deselect a number of rows\n\tdeselectRows(rows, silent){\n\t\tvar self = this,\n\t\trowCount;\n\t\t\n\t\tif(typeof rows == \"undefined\"){\n\t\t\t\n\t\t\trowCount = self.selectedRows.length;\n\t\t\t\n\t\t\tfor(let i = 0; i < rowCount; i++){\n\t\t\t\tself._deselectRow(self.selectedRows[0], true);\n\t\t\t}\n\t\t\t\n\t\t\tif(rowCount){\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t\t\n\t\t}else{\n\t\t\tif(Array.isArray(rows)){\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tself._deselectRow(row, true);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}else{\n\t\t\t\tself._deselectRow(rows, silent);\n\t\t\t}\n\t\t}\n\t}\n\t\n\t//deselect an individual row\n\t_deselectRow(rowInfo, silent){\n\t\tvar self = this,\n\t\trow = self.table.rowManager.findRow(rowInfo),\n\t\tindex;\n\t\t\n\t\tif(row){\n\t\t\tindex = self.selectedRows.findIndex(function(selectedRow){\n\t\t\t\treturn selectedRow == row;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\t\n\t\t\t\trow.getElement().classList.remove(\"tabulator-selected\");\n\t\t\t\tif(!row.modules.select){\n\t\t\t\t\trow.modules.select = {};\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\trow.modules.select.selected = false;\n\t\t\t\tif(row.modules.select.checkboxEl){\n\t\t\t\t\trow.modules.select.checkboxEl.checked = false;\n\t\t\t\t}\n\t\t\t\tself.selectedRows.splice(index, 1);\n\t\t\t\t\n\t\t\t\tif(this.table.options.dataTreeSelectPropagate){\n\t\t\t\t\tthis.childRowSelection(row, false);\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.dispatchExternal(\"rowDeselected\", row.getComponent());\n\t\t\t\t\n\t\t\t\tself._rowSelectionChanged(silent);\n\t\t\t}\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Deselection Error - No such row found, ignoring selection:\" + rowInfo);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tgetSelectedData(){\n\t\tvar data = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\tdata.push(row.getData());\n\t\t});\n\t\t\n\t\treturn data;\n\t}\n\t\n\tgetSelectedRows(){\n\t\t\n\t\tvar rows = [];\n\t\t\n\t\tthis.selectedRows.forEach(function(row){\n\t\t\trows.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t_rowSelectionChanged(silent){\n\t\tif(this.headerCheckboxElement){\n\t\t\tif(this.selectedRows.length === 0){\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else if(this.table.rowManager.rows.length === this.selectedRows.length){\n\t\t\t\tthis.headerCheckboxElement.checked = true;\n\t\t\t\tthis.headerCheckboxElement.indeterminate = false;\n\t\t\t} else {\n\t\t\t\tthis.headerCheckboxElement.indeterminate = true;\n\t\t\t\tthis.headerCheckboxElement.checked = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(!silent){\n\t\t\tthis.dispatchExternal(\"rowSelectionChanged\", this.getSelectedData(), this.getSelectedRows());\n\t\t}\n\t}\n\t\n\tregisterRowSelectCheckbox (row, element) {\n\t\tif(!row._row.modules.select){\n\t\t\trow._row.modules.select = {};\n\t\t}\n\t\t\n\t\trow._row.modules.select.checkboxEl = element;\n\t}\n\t\n\tregisterHeaderSelectCheckbox (element) {\n\t\tthis.headerCheckboxElement = element;\n\t}\n\t\n\tchildRowSelection(row, select){\n\t\tvar children = this.table.modules.dataTree.getChildren(row, true);\n\t\t\n\t\tif(select){\n\t\t\tfor(let child of children){\n\t\t\t\tthis._selectRow(child, true);\n\t\t\t}\n\t\t}else{\n\t\t\tfor(let child of children){\n\t\t\t\tthis._deselectRow(child, true);\n\t\t\t}\n\t\t}\n\t}\n}\n\nSelectRow.moduleName = \"selectRow\";\n\nexport default SelectRow;","//sort datetime\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar DT = window.DateTime || luxon.DateTime;\n\tvar format = params.format || \"dd/MM/yyyy HH:mm:ss\",\n\talignEmptyValues = params.alignEmptyValues,\n\temptyAlign = 0;\n\n\tif(typeof DT != \"undefined\"){\n\t\tif(DT.isDateTime(a)){\n\t\t\t a = a;\n\t\t}else if(format === \"iso\"){\n\t\t\t a = DT.fromISO(String(a));\n\t\t}else{\n\t\t\t a = DT.fromFormat(String(a), format);\n\t\t}\n\n\t\tif(DT.isDateTime(b)){\n\t\t\t b = b;\n\t\t}else if(format === \"iso\"){\n\t\t\t b = DT.fromISO(String(b));\n\t\t}else{\n\t\t\t b = DT.fromFormat(String(b), format);\n\t\t}\n\n\t\tif(!a.isValid){\n\t\t\temptyAlign = !b.isValid ? 0 : -1;\n\t\t}else if(!b.isValid){\n\t\t\temptyAlign =  1;\n\t\t}else{\n\t\t\t//compare valid values\n\t\t\treturn a - b;\n\t\t}\n\n\t\t//fix empty values in position\n\t\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\t\temptyAlign *= -1;\n\t\t}\n\n\t\treturn emptyAlign;\n\n\t}else{\n\t\tconsole.error(\"Sort Error - 'datetime' sorter is dependant on luxon.js\");\n\t}\n};","import number from './sorters/number.js';\nimport string from './sorters/string.js';\nimport date from './sorters/date.js';\nimport time from './sorters/time.js';\nimport datetime from './sorters/datetime.js';\nimport boolean from './sorters/boolean.js';\nimport array from './sorters/array.js';\nimport exists from './sorters/exists.js';\nimport alphanum from './sorters/alphanum.js';\n\nexport default {\n\tnumber:number,\n\tstring:string,\n\tdate:date,\n\ttime:time,\n\tdatetime:datetime,\n\tboolean:boolean,\n\tarray:array,\n\texists:exists,\n\talphanum:alphanum\n};","//sort numbers\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar decimal = params.decimalSeparator;\n\tvar thousand = params.thousandSeparator;\n\tvar emptyAlign = 0;\n\n\ta = String(a);\n\tb = String(b);\n\n\tif(thousand){\n\t\ta = a.split(thousand).join(\"\");\n\t\tb = b.split(thousand).join(\"\");\n\t}\n\n\tif(decimal){\n\t\ta = a.split(decimal).join(\".\");\n\t\tb = b.split(decimal).join(\".\");\n\t}\n\n\ta = parseFloat(a);\n\tb = parseFloat(b);\n\n\t//handle non numeric values\n\tif(isNaN(a)){\n\t\temptyAlign =  isNaN(b) ? 0 : -1;\n\t}else if(isNaN(b)){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\treturn a - b;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n};","//sort strings\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\tvar locale;\n\n\t//handle empty values\n\tif(!a){\n\t\temptyAlign =  !b ? 0 : -1;\n\t}else if(!b){\n\t\temptyAlign =  1;\n\t}else{\n\t\t//compare valid values\n\t\tswitch(typeof params.locale){\n\t\t\tcase \"boolean\":\n\t\t\tif(params.locale){\n\t\t\t\tlocale = this.langLocale();\n\t\t\t}\n\t\t\tbreak;\n\t\t\tcase \"string\":\n\t\t\tlocale = params.locale;\n\t\t\tbreak;\n\t\t}\n\n\t\treturn String(a).toLowerCase().localeCompare(String(b).toLowerCase(), locale);\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n};","import datetime from './datetime.js';\n\n//sort date\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"dd/MM/yyyy\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n};","import datetime from './datetime.js';\n\n//sort times\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tif(!params.format){\n\t\tparams.format = \"HH:mm\";\n\t}\n\n\treturn datetime.call(this, a, b, aRow, bRow, column, dir, params);\n};","//sort booleans\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = a === true || a === \"true\" || a === \"True\" || a === 1 ? 1 : 0;\n\tvar el2 = b === true || b === \"true\" || b === \"True\" || b === 1 ? 1 : 0;\n\n\treturn el1 - el2;\n};","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = 0;\n\tvar el2 = 0;\n\tvar type = params.type || \"length\";\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\tfunction calc(value){\n\n\t\tswitch(type){\n\t\t\tcase \"length\":\n\t\t\treturn value.length;\n\t\t\tbreak;\n\n\t\t\tcase \"sum\":\n\t\t\treturn value.reduce(function(c, d){\n\t\t\t\treturn c + d;\n\t\t\t});\n\t\t\tbreak;\n\n\t\t\tcase \"max\":\n\t\t\treturn Math.max.apply(null, value) ;\n\t\t\tbreak;\n\n\t\t\tcase \"min\":\n\t\t\treturn Math.min.apply(null, value) ;\n\t\t\tbreak;\n\n\t\t\tcase \"avg\":\n\t\t\treturn value.reduce(function(c, d){\n\t\t\t\treturn c + d;\n\t\t\t}) / value.length;\n\t\t\tbreak;\n\t\t}\n\t}\n\n\t//handle non array values\n\tif(!Array.isArray(a)){\n\t\talignEmptyValues = !Array.isArray(b) ? 0 : -1;\n\t}else if(!Array.isArray(b)){\n\t\talignEmptyValues = 1;\n\t}else{\n\n\t\t//compare valid values\n\t\tel1 = a ? calc(a) : 0;\n\t\tel2 = b ? calc(b) : 0;\n\n\t\treturn el1 - el2;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n};","//sort if element contains any data\nexport default function(a, b, aRow, bRow, column, dir, params){\n\tvar el1 = typeof a == \"undefined\" ? 0 : 1;\n\tvar el2 = typeof b == \"undefined\" ? 0 : 1;\n\n\treturn el1 - el2;\n};","//sort alpha numeric strings\nexport default function(as, bs, aRow, bRow, column, dir, params){\n\tvar a, b, a1, b1, i= 0, L, rx = /(\\d+)|(\\D+)/g, rd = /\\d/;\n\tvar alignEmptyValues = params.alignEmptyValues;\n\tvar emptyAlign = 0;\n\n\t//handle empty values\n\tif(!as && as!== 0){\n\t\temptyAlign =  !bs && bs!== 0 ? 0 : -1;\n\t}else if(!bs && bs!== 0){\n\t\temptyAlign =  1;\n\t}else{\n\n\t\tif(isFinite(as) && isFinite(bs)) return as - bs;\n\t\ta = String(as).toLowerCase();\n\t\tb = String(bs).toLowerCase();\n\t\tif(a === b) return 0;\n\t\tif(!(rd.test(a) && rd.test(b))) return a > b ? 1 : -1;\n\t\ta = a.match(rx);\n\t\tb = b.match(rx);\n\t\tL = a.length > b.length ? b.length : a.length;\n\t\twhile(i < L){\n\t\t\ta1= a[i];\n\t\t\tb1= b[i++];\n\t\t\tif(a1 !== b1){\n\t\t\t\tif(isFinite(a1) && isFinite(b1)){\n\t\t\t\t\tif(a1.charAt(0) === \"0\") a1 = \".\" + a1;\n\t\t\t\t\tif(b1.charAt(0) === \"0\") b1 = \".\" + b1;\n\t\t\t\t\treturn a1 - b1;\n\t\t\t\t}\n\t\t\t\telse return a1 > b1 ? 1 : -1;\n\t\t\t}\n\t\t}\n\n\t\treturn a.length > b.length;\n\t}\n\n\t//fix empty values in position\n\tif((alignEmptyValues === \"top\" && dir === \"desc\") || (alignEmptyValues === \"bottom\" && dir === \"asc\")){\n\t\temptyAlign *= -1;\n\t}\n\n\treturn emptyAlign;\n};","import Module from '../../core/Module.js';\n\nimport defaultSorters from './defaults/sorters.js';\n\nclass Sort extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t \tthis.sortList = []; //holder current sort\n\t \tthis.changed = false; //has the sort changed since last render\n\n\t \tthis.registerTableOption(\"sortMode\", \"local\"); //local or remote sorting\n\n\t \tthis.registerTableOption(\"initialSort\", false); //initial sorting criteria\n\t \tthis.registerTableOption(\"columnHeaderSortMulti\", true); //multiple or single column sorting\n\t \tthis.registerTableOption(\"sortOrderReverse\", false); //reverse internal sort ordering\n\t \tthis.registerTableOption(\"headerSortElement\", \"<div class='tabulator-arrow'></div>\"); //header sort element\n\n\t \tthis.registerColumnOption(\"sorter\");\n\t \tthis.registerColumnOption(\"sorterParams\");\n\n\t \tthis.registerColumnOption(\"headerSort\", true);\n\t \tthis.registerColumnOption(\"headerSortStartingDir\");\n\t \tthis.registerColumnOption(\"headerSortTristate\");\n\n\t }\n\n\t initialize(){\n\t \tthis.subscribe(\"column-layout\", this.initializeColumn.bind(this));\n\t \tthis.subscribe(\"table-built\", this.tableBuilt.bind(this));\n\t \tthis.registerDataHandler(this.sort.bind(this), 20);\n\n\t \tthis.registerTableFunction(\"setSort\", this.userSetSort.bind(this));\n\t \tthis.registerTableFunction(\"getSorters\", this.getSort.bind(this));\n\t \tthis.registerTableFunction(\"clearSort\", this.clearSort.bind(this));\n\n\t \tif(this.table.options.sortMode === \"remote\"){\n\t \t\tthis.subscribe(\"data-params\", this.remoteSortParams.bind(this));\n\t \t}\n\t }\n\n\t tableBuilt(){\n\t \tif(this.table.options.initialSort){\n\t \t\tthis.setSort(this.table.options.initialSort);\n\t \t}\n\t }\n\n\t remoteSortParams(data, config, silent, params){\n\t \tvar sorters = this.getSort();\n\n\t \tsorters.forEach((item) => {\n\t \t\tdelete item.column;\n\t \t});\n\n\t \tparams.sort = sorters;\n\n\t \treturn params;\n\t }\n\n\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\n\tuserSetSort(sortList, dir){\n\t\tthis.setSort(sortList, dir);\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\tclearSort(){\n\t\tthis.clear();\n\t\t// this.table.rowManager.sorterRefresh();\n\t\tthis.refreshSort();\n\t}\n\n\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\n\t//initialize column header for sorting\n\tinitializeColumn(column){\n\t\tvar sorter = false,\n\t\tcolEl,\n\t\tarrowEl;\n\n\t\tswitch(typeof column.definition.sorter){\n\t\t\tcase \"string\":\n\t\t\tif(Sort.sorters[column.definition.sorter]){\n\t\t\t\tsorter = Sort.sorters[column.definition.sorter];\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Error - No such sorter found: \", column.definition.sorter);\n\t\t\t}\n\t\t\tbreak;\n\n\t\t\tcase \"function\":\n\t\t\tsorter = column.definition.sorter;\n\t\t\tbreak;\n\t\t}\n\n\t\tcolumn.modules.sort = {\n\t\t\tsorter:sorter, dir:\"none\",\n\t\t\tparams:column.definition.sorterParams || {},\n\t\t\tstartingDir:column.definition.headerSortStartingDir || \"asc\",\n\t\t\ttristate: column.definition.headerSortTristate,\n\t\t};\n\n\t\tif(column.definition.headerSort !== false){\n\n\t\t\tcolEl = column.getElement();\n\n\t\t\tcolEl.classList.add(\"tabulator-sortable\");\n\n\n\t\t\tarrowEl = document.createElement(\"div\");\n\t\t\tarrowEl.classList.add(\"tabulator-col-sorter\");\n\n\t\t\tif(typeof this.table.options.headerSortElement == \"object\"){\n\t\t\t\tarrowEl.appendChild(this.table.options.headerSortElement);\n\t\t\t}else{\n\t\t\t\tarrowEl.innerHTML = this.table.options.headerSortElement;\n\t\t\t}\n\n\t\t\t//create sorter arrow\n\t\t\tcolumn.titleHolderElement.appendChild(arrowEl);\n\n\t\t\tcolumn.modules.sort.element = arrowEl;\n\n\t\t\t//sort on click\n\t\t\tcolEl.addEventListener(\"click\", (e) => {\n\t\t\t\tvar dir = \"\",\n\t\t\t\tsorters=[],\n\t\t\t\tmatch = false;\n\n\t\t\t\tif(column.modules.sort){\n\t\t\t\t\tif(column.modules.sort.tristate){\n\t\t\t\t\t\tif(column.modules.sort.dir == \"none\"){\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(column.modules.sort.dir == column.modules.sort.startingDir){\n\t\t\t\t\t\t\t\tdir = column.modules.sort.dir == \"asc\" ? \"desc\" : \"asc\";\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tdir = \"none\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tswitch(column.modules.sort.dir){\n\t\t\t\t\t\t\tcase \"asc\":\n\t\t\t\t\t\t\tdir = \"desc\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase \"desc\":\n\t\t\t\t\t\t\tdir = \"asc\";\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tdir = column.modules.sort.startingDir;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\tif (this.table.options.columnHeaderSortMulti && (e.shiftKey || e.ctrlKey)) {\n\t\t\t\t\t\tsorters = this.getSort();\n\n\t\t\t\t\t\tmatch = sorters.findIndex((sorter) => {\n\t\t\t\t\t\t\treturn sorter.field === column.getField();\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tif(match > -1){\n\t\t\t\t\t\t\tsorters[match].dir = dir;\n\n\t\t\t\t\t\t\tif(match != sorters.length -1){\n\t\t\t\t\t\t\t\tmatch = sorters.splice(match, 1)[0];\n\t\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\t\tsorters.push(match);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tif(dir != \"none\"){\n\t\t\t\t\t\t\t\tsorters.push({column:column, dir:dir});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t//add to existing sort\n\t\t\t\t\t\tthis.setSort(sorters);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(dir == \"none\"){\n\t\t\t\t\t\t\tthis.clear();\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t//sort by column only\n\t\t\t\t\t\t\tthis.setSort(column, dir);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// this.table.rowManager.sorterRefresh(!this.sortList.length);\n\t\t\t\t\tthis.refreshSort();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\trefreshSort(){\n\t\tif(this.table.options.sortMode === \"remote\"){\n\t\t\tthis.reloadData();\n\t\t}else{\n\t\t\tthis.refreshData(true);\n\t\t}\n\n\t\t//TODO - Persist left position of row manager\n\t\t// left = this.scrollLeft;\n\t\t// this.scrollHorizontal(left);\n\t}\n\n\t//check if the sorters have changed since last use\n\thasChanged(){\n\t\tvar changed = this.changed;\n\t\tthis.changed = false;\n\t\treturn changed;\n\t}\n\n\t//return current sorters\n\tgetSort(){\n\t\tvar self = this,\n\t\tsorters = [];\n\n\t\tself.sortList.forEach(function(item){\n\t\t\tif(item.column){\n\t\t\t\tsorters.push({column:item.column.getComponent(), field:item.column.getField(), dir:item.dir});\n\t\t\t}\n\t\t});\n\n\t\treturn sorters;\n\t}\n\n\t//change sort list and trigger sort\n\tsetSort(sortList, dir){\n\t\tvar self = this,\n\t\tnewSortList = [];\n\n\t\tif(!Array.isArray(sortList)){\n\t\t\tsortList = [{column: sortList, dir:dir}];\n\t\t}\n\n\t\tsortList.forEach(function(item){\n\t\t\tvar column;\n\n\t\t\tcolumn = self.table.columnManager.findColumn(item.column);\n\n\t\t\tif(column){\n\t\t\t\titem.column = column;\n\t\t\t\tnewSortList.push(item);\n\t\t\t\tself.changed = true;\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Sort Warning - Sort field does not exist and is being ignored: \", item.column);\n\t\t\t}\n\n\t\t});\n\n\t\tself.sortList = newSortList;\n\n\t\tthis.dispatch(\"sort-changed\");\n\t}\n\n\t//clear sorters\n\tclear(){\n\t\tthis.setSort([]);\n\t}\n\n\t//find appropriate sorter for column\n\tfindSorter(column){\n\t\tvar row = this.table.rowManager.activeRows[0],\n\t\tsorter = \"string\",\n\t\tfield, value;\n\n\t\tif(row){\n\t\t\trow = row.getData();\n\t\t\tfield = column.getField();\n\n\t\t\tif(field){\n\n\t\t\t\tvalue = column.getFieldValue(row);\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn Sort.sorters[sorter];\n\t}\n\n\t//work through sort list sorting data\n\tsort(data){\n\t\tvar self = this,\n\t\tsortList = this.table.options.sortOrderReverse ? self.sortList.slice().reverse() : self.sortList,\n\t\tsortListActual = [],\n\t\trowComponents = [],\n\t\tlastSort;\n\n\t\tif(this.subscribedExternal(\"dataSorting\")){\n\t\t\tthis.dispatchExternal(\"dataSorting\", self.getSort());\n\t\t}\n\n\t\tself.clearColumnHeaders();\n\n\t\tif(this.table.options.sortMode !== \"remote\"){\n\n\t\t\t//build list of valid sorters and trigger column specific callbacks before sort begins\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tvar sortObj = item.column.modules.sort;\n\n\t\t\t\tif(item.column && sortObj){\n\n\t\t\t\t\t//if no sorter has been defined, take a guess\n\t\t\t\t\tif(!sortObj.sorter){\n\t\t\t\t\t\tsortObj.sorter = self.findSorter(item.column);\n\t\t\t\t\t}\n\n\t\t\t\t\titem.params = typeof sortObj.params === \"function\" ? sortObj.params(item.column.getComponent(), item.dir) : sortObj.params;\n\n\t\t\t\t\tsortListActual.push(item);\n\t\t\t\t}\n\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\n\t\t\t//sort data\n\t\t\tif (sortListActual.length) {\n\t\t\t\tself._sortItems(data, sortListActual);\n\t\t\t}\n\n\t\t}else{\n\t\t\tsortList.forEach(function(item, i){\n\t\t\t\tself.setColumnHeader(item.column, item.dir);\n\t\t\t});\n\t\t}\n\n\t\tif(this.subscribedExternal(\"dataSorted\")){\n\t\t\tdata.forEach((row) => {\n\t\t\t\trowComponents.push(row.getComponent());\n\t\t\t});\n\n\t\t\tthis.dispatchExternal(\"dataSorted\", self.getSort(), rowComponents);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\t//clear sort arrows on columns\n\tclearColumnHeaders(){\n\t\tthis.table.columnManager.getRealColumns().forEach(function(column){\n\t\t\tif(column.modules.sort){\n\t\t\t\tcolumn.modules.sort.dir = \"none\";\n\t\t\t\tcolumn.getElement().setAttribute(\"aria-sort\", \"none\");\n\t\t\t}\n\t\t});\n\t}\n\n\t//set the column header sort direction\n\tsetColumnHeader(column, dir){\n\t\tcolumn.modules.sort.dir = dir;\n\t\tcolumn.getElement().setAttribute(\"aria-sort\", dir);\n\t}\n\n\t//sort each item in sort list\n\t_sortItems(data, sortList){\n\t\tvar sorterCount = sortList.length - 1;\n\n\t\tdata.sort((a, b) => {\n\t\t\tvar result;\n\n\t\t\tfor(var i = sorterCount; i>= 0; i--){\n\t\t\t\tlet sortItem = sortList[i];\n\n\t\t\t\tresult = this._sortRow(a, b, sortItem.column, sortItem.dir, sortItem.params);\n\n\t\t\t\tif(result !== 0){\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn result;\n\t\t});\n\t}\n\n\t//process individual rows for a sort function on active data\n\t_sortRow(a, b, column, dir, params){\n\t\tvar el1Comp, el2Comp, colComp;\n\n\t\t//switch elements depending on search direction\n\t\tvar el1 = dir == \"asc\" ? a : b;\n\t\tvar el2 = dir == \"asc\" ? b : a;\n\n\t\ta = column.getFieldValue(el1.getData());\n\t\tb = column.getFieldValue(el2.getData());\n\n\t\ta = typeof a !== \"undefined\" ? a : \"\";\n\t\tb = typeof b !== \"undefined\" ? b : \"\";\n\n\t\tel1Comp = el1.getComponent();\n\t\tel2Comp = el2.getComponent();\n\n\t\treturn column.modules.sort.sorter.call(this, a, b, el1Comp, el2Comp, column.getComponent(), dir, params);\n\t}\n}\n\nSort.moduleName = \"sort\";\n\n//load defaults\nSort.sorters = defaultSorters;\n\nexport default Sort;","import Module from '../../core/Module.js';\nimport Cell from '../../core/cell/Cell.js';\n\nclass Tooltip extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.tooltipSubscriber = null,\n\t\tthis.headerSubscriber = null,\n\t\t\n\t\tthis.timeout = null;\n\t\tthis.popupInstance = null;\n\t\t\n\t\tthis.registerTableOption(\"tooltipGenerationMode\", undefined);  //deprecated\n\t\tthis.registerTableOption(\"tooltipDelay\", 300); \n\t\t\n\t\tthis.registerColumnOption(\"tooltip\");\n\t\tthis.registerColumnOption(\"headerTooltip\");\n\t}\n\t\n\tinitialize(){\n\t\tthis.deprecationCheck();\n\t\t\n\t\tthis.subscribe(\"column-init\", this.initializeColumn.bind(this));\n\t}\n\t\n\tdeprecationCheck(){\n\t\tif(typeof this.table.options.tooltipGenerationMode !== \"undefined\"){\n\t\t\tconsole.warn(\"Use of the tooltipGenerationMode option is now deprecated. This option is no longer needed as tooltips are always generated on hover now\");\n\t\t}\n\t}\t\n\t\n\tinitializeColumn(column){\n\t\tif(column.definition.headerTooltip && !this.headerSubscriber){\n\t\t\tthis.headerSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"column-mousemove\", this.mousemoveCheck.bind(this, \"headerTooltip\"));\n\t\t\tthis.subscribe(\"column-mouseout\", this.mouseoutCheck.bind(this, \"headerTooltip\"));\n\t\t}\n\t\t\n\t\tif(column.definition.tooltip && !this.tooltipSubscriber){\n\t\t\tthis.tooltipSubscriber = true;\n\t\t\t\n\t\t\tthis.subscribe(\"cell-mousemove\", this.mousemoveCheck.bind(this, \"tooltip\"));\n\t\t\tthis.subscribe(\"cell-mouseout\", this.mouseoutCheck.bind(this, \"tooltip\"));\n\t\t}\n\t}\n\t\n\tmousemoveCheck(action, e, component){\n\t\tvar tooltip = action === \"tooltip\" ? component.column.definition.tooltip : component.definition.headerTooltip;\n\t\t\n\t\tif(tooltip){\n\t\t\tthis.clearPopup();\n\t\t\tthis.timeout = setTimeout(this.loadTooltip.bind(this, e, component, tooltip), this.table.options.tooltipDelay);\n\t\t}\n\t}\n\n\tmouseoutCheck(action, e, component){\n\t\tif(!this.popupInstance){\n\t\t\tthis.clearPopup();\n\t\t}\n\t}\n\t\n\tclearPopup(action, e, component){\n\t\tclearTimeout(this.timeout);\n\t\tthis.timeout = null;\n\t\t\n\t\tif(this.popupInstance){\n\t\t\tthis.popupInstance.hide();\n\t\t}\n\t}\n\t\n\tloadTooltip(e, component, tooltip){\n\t\tvar contentsEl, renderedCallback, coords;\n\n\t\tfunction onRendered(callback){\n\t\t\trenderedCallback = callback;\n\t\t}\n\t\t\n\t\tif(typeof tooltip === \"function\"){\n\t\t\ttooltip = tooltip(e, component.getComponent(), onRendered);\n\t\t}\n\t\t\n\t\tif(tooltip instanceof HTMLElement){\n\t\t\tcontentsEl = tooltip;\n\t\t}else{\n\t\t\tcontentsEl = document.createElement(\"div\");\n\t\t\t\n\t\t\tif(tooltip === true){\n\t\t\t\tif(component instanceof Cell){\n\t\t\t\t\ttooltip = component.value;\n\t\t\t\t}else{\n\t\t\t\t\tif(component.definition.field){\n\t\t\t\t\t\tthis.langBind(\"columns|\" + component.definition.field, (value) => {\n\t\t\t\t\t\t\tcontentsEl.innerHTML = tooltip = value || component.definition.title;\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttooltip = component.definition.title;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcontentsEl.innerHTML = tooltip;\n\t\t}\n\t\t\n\t\tif(tooltip || tooltip === 0 || tooltip === \"0\" || tooltip === false){\n\t\t\tcontentsEl.classList.add(\"tabulator-tooltip\");\n\n\t\t\tcontentsEl.addEventListener(\"mousemove\", e => e.preventDefault())\n\t\t\t\n\t\t\tthis.popupInstance = this.popup(contentsEl);\n\t\t\t\n\t\t\tif(typeof renderedCallback === \"function\"){\n\t\t\t\tthis.popupInstance.renderCallback(renderedCallback);\n\t\t\t}\n\n\t\t\tcoords = this.popupInstance.containerEventCoords(e);\n\t\t\t\n\t\t\tthis.popupInstance.show(coords.x + 15, coords.y + 15).hideOnBlur(() => {\n\t\t\t\tthis.dispatchExternal(\"TooltipClosed\", component.getComponent());\n\t\t\t\tthis.popupInstance = null;\n\t\t\t});\n\t\t\t\n\t\t\tthis.dispatchExternal(\"TooltipOpened\", component.getComponent());\n\t\t}\n\t}\n}\n\nTooltip.moduleName = \"tooltip\";\n\nexport default Tooltip;\n","export default {\n\t//is integer\n\tinteger: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvalue = Number(value);\n\t\treturn typeof value === 'number' && isFinite(value) && Math.floor(value) === value;\n\t},\n\n\t//is float\n\tfloat: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvalue = Number(value);\n\t\treturn typeof value === 'number' && isFinite(value) && value % 1 !== 0;\n\t},\n\n\t//must be a number\n\tnumeric: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn !isNaN(value);\n\t},\n\n\t//must be a string\n\tstring: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn isNaN(value);\n\t},\n\n\t//maximum value\n\tmax: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) <= parameters;\n\t},\n\n\t//minimum value\n\tmin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn parseFloat(value) >= parameters;\n\t},\n\n\t//starts with  value\n\tstarts: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().startsWith(String(parameters).toLowerCase());\n\t},\n\n\t//ends with  value\n\tends: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).toLowerCase().endsWith(String(parameters).toLowerCase());\n\t},\n\n\n\t//minimum string length\n\tminLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length >= parameters;\n\t},\n\n\t//maximum string length\n\tmaxLength: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\treturn String(value).length <= parameters;\n\t},\n\n\t//in provided value list\n\tin: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tif(typeof parameters == \"string\"){\n\t\t\tparameters = parameters.split(\"|\");\n\t\t}\n\n\t\treturn value === \"\" || parameters.indexOf(value) > -1;\n\t},\n\n\t//must match provided regex\n\tregex: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar reg = new RegExp(parameters);\n\n\t\treturn reg.test(value);\n\t},\n\n\t//value must be unique in this column\n\tunique: function(cell, value, parameters){\n\t\tif(value === \"\" || value === null || typeof value === \"undefined\"){\n\t\t\treturn true;\n\t\t}\n\t\tvar unique = true;\n\n\t\tvar cellData = cell.getData();\n\t\tvar column = cell.getColumn()._getSelf();\n\n\t\tthis.table.rowManager.rows.forEach(function(row){\n\t\t\tvar data = row.getData();\n\n\t\t\tif(data !== cellData){\n\t\t\t\tif(value == column.getFieldValue(data)){\n\t\t\t\t\tunique = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn unique;\n\t},\n\n\t//must have a value\n\trequired:function(cell, value, parameters){\n\t\treturn value !== \"\" && value !== null && typeof value !== \"undefined\";\n\t},\n};","import Module from '../../core/Module.js';\n\nimport defaultValidators from './defaults/validators.js';\n\nclass Validate extends Module{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.invalidCells = [];\n\t\t\n\t\tthis.registerTableOption(\"validationMode\", \"blocking\");\n\t\t\n\t\tthis.registerColumnOption(\"validator\");\n\t\t\n\t\tthis.registerTableFunction(\"getInvalidCells\", this.getInvalidCells.bind(this));\n\t\tthis.registerTableFunction(\"clearCellValidation\", this.userClearCellValidation.bind(this));\n\t\tthis.registerTableFunction(\"validate\", this.userValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"cell\", \"isValid\", this.cellIsValid.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"clearValidation\", this.clearValidation.bind(this));\n\t\tthis.registerComponentFunction(\"cell\", \"validate\", this.cellValidate.bind(this));\n\t\t\n\t\tthis.registerComponentFunction(\"column\", \"validate\", this.columnValidate.bind(this));\n\t\tthis.registerComponentFunction(\"row\", \"validate\", this.rowValidate.bind(this));\n\t}\n\t\n\t\n\tinitialize(){\n\t\tthis.subscribe(\"cell-delete\", this.clearValidation.bind(this));\n\t\tthis.subscribe(\"column-layout\", this.initializeColumnCheck.bind(this));\n\t\t\n\t\tthis.subscribe(\"edit-success\", this.editValidate.bind(this));\n\t\tthis.subscribe(\"edit-editor-clear\", this.editorClear.bind(this));\n\t\tthis.subscribe(\"edit-edited-clear\", this.editedClear.bind(this));\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Event Handling //////////\n\t///////////////////////////////////\n\t\n\teditValidate(cell, value, previousValue){\n\t\tvar valid = this.table.options.validationMode !== \"manual\" ? this.validate(cell.column.modules.validate, cell, value) : true;\n\t\t\n\t\t// allow time for editor to make render changes then style cell\n\t\tif(valid !== true){\n\t\t\tsetTimeout(() => {\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t\tthis.dispatchExternal(\"validationFailed\", cell.getComponent(), value, valid);\n\t\t\t});\n\t\t}\n\t\t\n\t\treturn valid;\n\t}\n\t\n\teditorClear(cell, cancelled){\n\t\tif(cancelled){\n\t\t\tif(cell.column.modules.validate){\n\t\t\t\tthis.cellValidate(cell);\n\t\t\t}\n\t\t}\n\n\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t}\n\t\n\teditedClear(cell){\n\t\tif(cell.modules.validate){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t}\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Cell Functions /////////\n\t///////////////////////////////////\n\t\n\tcellIsValid(cell){\n\t\treturn cell.modules.validate ? (cell.modules.validate.invalid || true) : true;\n\t}\n\t\n\tcellValidate(cell){\n\t\treturn this.validate(cell.column.modules.validate, cell, cell.getValue());\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Column Functions ////////\n\t///////////////////////////////////\n\t\n\tcolumnValidate(column){\n\t\tvar invalid = [];\n\t\t\n\t\tcolumn.cells.forEach((cell) => {\n\t\t\tif(!this.cellValidate(cell)){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t////////// Row Functions //////////\n\t///////////////////////////////////\n\t\n\trowValidate(row){\n\t\tvar invalid = [];\n\t\t\n\t\trow.cells.forEach((cell) => {\n\t\t\tif(!this.cellValidate(cell)){\n\t\t\t\tinvalid.push(cell.getComponent());\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn invalid.length ? invalid : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Table Functions /////////\n\t///////////////////////////////////\n\t\n\t\n\tuserClearCellValidation(cells){\n\t\tif(!cells){\n\t\t\tcells = this.getInvalidCells();\n\t\t}\n\t\t\n\t\tif(!Array.isArray(cells)){\n\t\t\tcells = [cells];\n\t\t}\n\t\t\n\t\tcells.forEach((cell) => {\n\t\t\tthis.clearValidation(cell._getSelf());\n\t\t});\n\t}\n\t\n\tuserValidate(cells){\n\t\tvar output = [];\n\t\t\n\t\t//clear row data\n\t\tthis.table.rowManager.rows.forEach((row) => {\n\t\t\trow = row.getComponent();\n\t\t\t\n\t\t\tvar valid = row.validate();\n\t\t\t\n\t\t\tif(valid !== true){\n\t\t\t\toutput = output.concat(valid);\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output.length ? output : true;\n\t}\n\t\n\t///////////////////////////////////\n\t///////// Internal Logic //////////\n\t///////////////////////////////////\n\t\n\tinitializeColumnCheck(column){\n\t\tif(typeof column.definition.validator !== \"undefined\"){\n\t\t\tthis.initializeColumn(column);\n\t\t}\n\t}\n\t\n\t//validate\n\tinitializeColumn(column){\n\t\tvar self = this,\n\t\tconfig = [],\n\t\tvalidator;\n\t\t\n\t\tif(column.definition.validator){\n\t\t\t\n\t\t\tif(Array.isArray(column.definition.validator)){\n\t\t\t\tcolumn.definition.validator.forEach((item) => {\n\t\t\t\t\tvalidator = self._extractValidator(item);\n\t\t\t\t\t\n\t\t\t\t\tif(validator){\n\t\t\t\t\t\tconfig.push(validator);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\t\n\t\t\t}else{\n\t\t\t\tvalidator = this._extractValidator(column.definition.validator);\n\t\t\t\t\n\t\t\t\tif(validator){\n\t\t\t\t\tconfig.push(validator);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.validate = config.length ? config : false;\n\t\t}\n\t}\n\t\n\t_extractValidator(value){\n\t\tvar type, params, pos;\n\t\t\n\t\tswitch(typeof value){\n\t\t\tcase \"string\":\n\t\t\tpos = value.indexOf(':');\n\t\t\t\n\t\t\tif(pos > -1){\n\t\t\t\ttype = value.substring(0,pos);\n\t\t\t\tparams = value.substring(pos+1);\n\t\t\t}else{\n\t\t\t\ttype = value;\n\t\t\t}\n\t\t\t\n\t\t\treturn this._buildValidator(type, params);\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"function\":\n\t\t\treturn this._buildValidator(value);\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"object\":\n\t\t\treturn this._buildValidator(value.type, value.parameters);\n\t\t\tbreak;\n\t\t}\n\t}\n\t\n\t_buildValidator(type, params){\n\t\t\n\t\tvar func = typeof type == \"function\" ? type : Validate.validators[type];\n\t\t\n\t\tif(!func){\n\t\t\tconsole.warn(\"Validator Setup Error - No matching validator found:\", type);\n\t\t\treturn false;\n\t\t}else{\n\t\t\treturn {\n\t\t\t\ttype:typeof type == \"function\" ? \"function\" : type,\n\t\t\t\tfunc:func,\n\t\t\t\tparams:params,\n\t\t\t};\n\t\t}\n\t}\n\t\n\tvalidate(validators, cell, value){\n\t\tvar self = this,\n\t\tfailedValidators = [],\n\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\n\t\tif(validators){\n\t\t\tvalidators.forEach((item) => {\n\t\t\t\tif(!item.func.call(self, cell.getComponent(), value, item.params)){\n\t\t\t\t\tfailedValidators.push({\n\t\t\t\t\t\ttype:item.type,\n\t\t\t\t\t\tparameters:item.params\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t\n\t\tif(!cell.modules.validate){\n\t\t\tcell.modules.validate = {};\n\t\t}\n\t\t\n\t\tif(!failedValidators.length){\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}else{\n\t\t\tcell.modules.validate.invalid = failedValidators;\n\t\t\t\n\t\t\tif(this.table.options.validationMode !== \"manual\"){\n\t\t\t\tcell.getElement().classList.add(\"tabulator-validation-fail\");\n\t\t\t}\n\t\t\t\n\t\t\tif(invalidIndex == -1){\n\t\t\t\tthis.invalidCells.push(cell);\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn failedValidators.length ? failedValidators : true;\n\t}\n\t\n\tgetInvalidCells(){\n\t\tvar output = [];\n\t\t\n\t\tthis.invalidCells.forEach((cell) => {\n\t\t\toutput.push(cell.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tclearValidation(cell){\n\t\tvar invalidIndex;\n\t\t\n\t\tif(cell.modules.validate && cell.modules.validate.invalid){\n\t\t\t\n\t\t\tcell.getElement().classList.remove(\"tabulator-validation-fail\");\n\t\t\tcell.modules.validate.invalid = false;\n\t\t\t\n\t\t\tinvalidIndex = this.invalidCells.indexOf(cell);\n\t\t\t\n\t\t\tif(invalidIndex > -1){\n\t\t\t\tthis.invalidCells.splice(invalidIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n}\n\nValidate.moduleName = \"validate\";\n\n//load defaults\nValidate.validators = defaultValidators;\n\nexport default Validate;","export default class OptionsList {\n\tconstructor(table, msgType, defaults = {}){\n\t\tthis.table = table;\n\t\tthis.msgType = msgType;\n\t\tthis.registeredDefaults = Object.assign({}, defaults)\n\t}\n\n\tregister(option, value){\n\t\tthis.registeredDefaults[option] = value;\n\t}\n\n\tgenerate(defaultOptions, userOptions = {}){\n\t\tvar output = Object.assign({}, this.registeredDefaults);\n\n\t\tObject.assign(output, defaultOptions);\n\n\t\tif(userOptions.debugInvalidOptions !== false || this.table.options.debugInvalidOptions){\n\t\t\tfor (var key in userOptions){\n\t\t\t\tif(!output.hasOwnProperty(key)){\n\t\t\t\t\tconsole.warn(\"Invalid \" + this.msgType + \" option:\", key)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tfor (var key in output){\n\t\t\tif(key in userOptions){\n\t\t\t\toutput[key] = userOptions[key];\n\t\t\t}else{\n\t\t\t\tif(Array.isArray(output[key])){\n\t\t\t\t\toutput[key] = Object.assign([], output[key]);\n\t\t\t\t}else if(typeof output[key] === \"object\" && output[key] !== null){\n\t\t\t\t\toutput[key] = Object.assign({}, output[key]);\n\t\t\t\t}else if (typeof output[key] === \"undefined\"){\n\t\t\t\t\tdelete output[key];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn output;\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from '../tools/Helpers.js';\n\nexport default class Renderer extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.elementVertical = table.rowManager.element;\n\t\tthis.elementHorizontal = table.columnManager.element;\n\t\tthis.tableElement =  table.rowManager.tableElement;\n\n\t\tthis.verticalFillMode = \"fit\"; // used by row manager to determin how to size the render area (\"fit\" - fits container to the contents, \"fill\" - fills the contianer without resizing it)\n\t}\n\n\n\t///////////////////////////////////\n\t/////// Internal Bindings /////////\n\t///////////////////////////////////\n\n\tinitialize(){\n\t\t//initialize core functionality\n\t}\n\n\tclearRows(){\n\t\t//clear down existing rows layout\n\t}\n\n\tclearColumns(){\n\t\t//clear down existing columns layout\n\t}\n\n\n\treinitializeColumnWidths(columns){\n\t\t//resize columns to fit data\n\t}\n\n\n\trenderRows(){\n\t\t//render rows from a clean slate\n\t}\n\n\trenderColumns(){\n\t\t//render columns from a clean slate\n\t}\n\n\trerenderRows(callback){\n\t\t// rerender rows and keep position\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\trerenderColumns(update, blockRedraw){\n\t\t//rerender columns\n\t}\n\n\trenderRowCells(row){\n\t\t//render the cells in a row\n\t}\n\n\trerenderRowCells(row, force){\n\t\t//rerender the cells in a row\n\t}\n\n\tscrollColumns(left, dir){\n\t\t//handle horizontal scrolling\n\t}\n\n\tscrollRows(top, dir){\n\t\t//handle vertical scolling\n\t}\n\n\tresize(){\n\t\t//container has rezied, carry out any needed recalculations (DO NOT RERENDER IN THIS FUNCTION)\n\t}\n\n\tscrollToRow(row){\n\t\t//scroll to a specific row\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\t//determine weather the row is nearest the top or bottom of the table, retur true for top or false for bottom\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\t//return the visible rows\n\t\treturn [];\n\t}\n\n\t///////////////////////////////////\n\t//////// Helper Functions /////////\n\t///////////////////////////////////\n\n\trows(){\n\t\treturn this.table.rowManager.getDisplayRows();\n\t}\n\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\n\t///////////////////////////////////\n\t/////// External Triggers /////////\n\t/////// (DO NOT OVERRIDE) /////////\n\t///////////////////////////////////\n\n\tclear(){\n\t\t//clear down existing layout\n\t\tthis.clearRows();\n\t\tthis.clearColumns();\n\t}\n\n\trender(){\n\t\t//render from a clean slate\n\t\tthis.renderRows();\n\t\tthis.renderColumns();\n\t}\n\n\trerender(callback){\n\t\t// rerender and keep position\n\t\tthis.rerenderRows();\n\t\tthis.rerenderColumns();\n\t}\n\n\tscrollToRowPosition(row, position, ifVisible){\n\t\tvar rowIndex = this.rows().indexOf(row),\n\t\trowEl = row.getElement(),\n\t\toffset = 0;\n\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif(rowIndex > -1){\n\n\t\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\t\tifVisible = this.table.options.scrollToRowIfVisible;\n\t\t\t\t}\n\n\t\t\t\t//check row visibility\n\t\t\t\tif(!ifVisible){\n\t\t\t\t\tif(Helpers.elVisible(rowEl)){\n\t\t\t\t\t\toffset = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top;\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(offset > 0 && offset < this.elementVertical.clientHeight - rowEl.offsetHeight){\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\t\tposition = this.table.options.scrollToRowPosition;\n\t\t\t\t}\n\n\t\t\t\tif(position === \"nearest\"){\n\t\t\t\t\tposition = this.scrollToRowNearestTop(row) ? \"top\" : \"bottom\"\n\t\t\t\t}\n\n\t\t\t\t//scroll to row\n\t\t\t\tthis.scrollToRow(row);\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\n\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop + (rowEl.offsetTop - this.elementVertical.scrollTop) - ((this.elementVertical.scrollHeight - rowEl.offsetTop) / 2);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.clientHeight / 2);\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"bottom\":\n\n\t\t\t\t\tif(this.elementVertical.scrollHeight - this.elementVertical.scrollTop == this.elementVertical.clientHeight){\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - (this.elementVertical.scrollHeight - rowEl.offsetTop) + rowEl.offsetHeight;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.elementVertical.scrollTop = this.elementVertical.scrollTop - this.elementVertical.clientHeight + rowEl.offsetHeight;\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tresolve();\n\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Row not visible\");\n\t\t\t\treject(\"Scroll Error - Row not visible\");\n\t\t\t}\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BaiscHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\trenderRowCells(row){\n\t\trow.cells.forEach((cell) => {\n\t\t\trow.element.appendChild(cell.getElement());\n\t\t\tcell.cellRendered();\n\t\t});\n\t}\n\n\treinitializeColumnWidths(columns){\n\t\tcolumns.forEach(function(column){\n\t\t\tcolumn.reinitializeWidth();\n\t\t});\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomHorizontal extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.leftCol = 0;\n\t\tthis.rightCol = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\t\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t\t\n\t\tthis.fitDataColAvg = 0;\n\t\t\n\t\tthis.windowBuffer = 200; //pixel margin to make column visible before it is shown on screen\n\t\t\n\t\tthis.visibleRows = null;\n\n\t\tthis.initialized = false;\n\t\tthis.isFitData = false;\n\t\t\n\t\tthis.columns = [];\n\t}\n\t\n\tinitialize(){\n\t\tthis.compatibilityCheck();\n\t\tthis.layoutCheck();\n\t\tthis.vertScrollListen();\n\t}\n\t\n\tcompatibilityCheck(){\n\t\tvar columns = this.options(\"columns\"),\n\t\tfrozen = false,\n\t\tok = true;\n\t\t\n\t\tif(this.options(\"layout\") == \"fitDataTable\"){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with fitDataTable layout mode\");\n\t\t\tok = false;\n\t\t}\n\t\t\n\t\tif(this.options(\"responsiveLayout\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with responsive columns\");\n\t\t\tok = false;\n\t\t}\n\t\t\n\t\tif(this.options(\"rtl\")){\n\t\t\tconsole.warn(\"Horizontal Virtual DOM is not currently compatible with RTL text direction\");\n\t\t\tok = false;\n\t\t}\n\t\t\n\t\tif(columns){\n\t\t\tfrozen = columns.find((col) => {\n\t\t\t\treturn col.frozen;\n\t\t\t});\n\t\t\t\n\t\t\tif(frozen){\n\t\t\t\tconsole.warn(\"Horizontal Virtual DOM is not compatible with frozen columns\");\n\t\t\t\tok = false;\n\t\t\t}\n\t\t}\n\t\t\n\t\t// if(!ok){\n\t\t// \toptions.virtualDomHoz = false;\n\t\t// }\n\t\t\n\t\treturn ok;\n\t}\n\t\n\tlayoutCheck(){\n\t\tthis.isFitData = this.options(\"layout\").startsWith('fitData');\n\t}\n\n\tvertScrollListen(){\n\t\tthis.subscribe(\"scroll-vertical\", this.clearVisRowCache.bind(this));\n\t\tthis.subscribe(\"data-refreshed\", this.clearVisRowCache.bind(this));\n\t}\n\n\tclearVisRowCache(){\n\t\tthis.visibleRows = null;\n\t}\n\t\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\t\n\trenderColumns(row, force){\n\t\tthis.dataChange();\n\t}\n\n\t\n\tscrollColumns(left, dir){\n\t\tif(this.scrollLeft != left){\n\t\t\tthis.scrollLeft = left;\n\t\t\t\n\t\t\tthis.scroll(left - (this.vDomScrollPosLeft + this.windowBuffer));\n\t\t}\n\t}\n\t\n\tcalcWindowBuffer(){\n\t\tvar buffer = this.elementVertical.clientWidth;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tif(width > buffer){\n\t\t\t\t\tbuffer = width;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.windowBuffer = buffer * 2;\n\t}\n\t\n\trerenderColumns(update, blockRedraw){\t\t\n\t\tvar old = {\n\t\t\tcols:this.columns,\n\t\t\tleftCol:this.leftCol,\n\t\t\trightCol:this.rightCol,\n\t\t},\n\t\tcolPos = 0;\n\t\t\n\t\t\n\t\tif(update && !this.initialized){\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tthis.clear();\n\t\t\n\t\tthis.calcWindowBuffer();\n\t\t\n\t\tthis.scrollLeft = this.elementVertical.scrollLeft;\n\t\t\n\t\tthis.vDomScrollPosLeft = this.scrollLeft - this.windowBuffer;\n\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\n\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\tvar config = {};\n\t\t\t\n\t\t\tif(column.visible){\n\t\t\t\tvar width = column.getWidth();\n\t\t\t\t\n\t\t\t\tconfig.leftPos = colPos;\n\t\t\t\tconfig.rightPos = colPos + width;\n\t\t\t\t\n\t\t\t\tconfig.width = width;\n\t\t\t\t\n\t\t\t\tif (this.isFitData) {\n\t\t\t\t\tconfig.fitDataCheck = column.modules.vdomHoz ? column.modules.vdomHoz.fitDataCheck : true;\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tif((colPos + width > this.vDomScrollPosLeft) && (colPos < this.vDomScrollPosRight)){\n\t\t\t\t\t//column is visible\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol == -1){\n\t\t\t\t\t\tthis.leftCol = this.columns.length;\n\t\t\t\t\t\tthis.vDomPadLeft = colPos;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol = this.columns.length;\n\t\t\t\t}else{\n\t\t\t\t\t// column is hidden\n\t\t\t\t\tif(this.leftCol !== -1){\n\t\t\t\t\t\tthis.vDomPadRight += width;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tthis.columns.push(column);\n\t\t\t\t\n\t\t\t\tcolumn.modules.vdomHoz = config;\n\t\t\t\t\n\t\t\t\tcolPos += width;\n\t\t\t}\n\t\t});\n\t\t\n\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tif(!update || this.reinitChanged(old)){\n\t\t\t\tthis.reinitializeRows();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.elementVertical.scrollLeft = this.scrollLeft;\n\t}\n\t\n\trenderRowCells(row){\n\t\tif(this.initialized){\n\t\t\tthis.initializeRow(row);\n\t\t}else{\n\t\t\trow.cells.forEach((cell) => {\n\t\t\t\trow.element.appendChild(cell.getElement());\n\t\t\t\tcell.cellRendered();\n\t\t\t});\n\t\t}\n\t}\n\t\n\trerenderRowCells(row, force){\n\t\tthis.reinitializeRow(row, force);\n\t}\n\t\n\treinitializeColumnWidths(columns){\n\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\tthis.columns[i].reinitializeWidth();\n\t\t}\n\t}\n\t\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\t\n\tdeinitialize(){\n\t\tthis.initialized = false;\n\t}\n\t\n\tclear(){\n\t\tthis.columns = [];\n\t\t\n\t\tthis.leftCol = -1;\n\t\tthis.rightCol = 0;\n\t\t\n\t\tthis.vDomScrollPosLeft = 0;\n\t\tthis.vDomScrollPosRight = 0;\n\t\tthis.vDomPadLeft = 0;\n\t\tthis.vDomPadRight = 0;\n\t}\n\t\n\tdataChange(){\n\t\tvar change = false,\n\t\tcollsWidth = 0,\n\t\tcolEnd = 0,\n\t\tgroup, row, rowEl;\n\t\t\n\t\tif(this.isFitData){\n\t\t\tthis.table.columnManager.columnsByIndex.forEach((column) => {\n\t\t\t\tif(!column.definition.width && column.visible){\n\t\t\t\t\tchange = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(change){\n\t\t\t\tif(change && this.table.rowManager.getDisplayRows().length){\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomScrollPosRight = this.scrollLeft + this.elementVertical.clientWidth + this.windowBuffer;\n\t\t\t\t\t\n\t\t\t\t\tvar row = this.chain(\"rows-sample\", [1], [], () => {\n\t\t\t\t\t\treturn this.table.rowManager.getDisplayRows();\n\t\t\t\t\t})[0];\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\t\n\t\t\t\t\t\trowEl = row.getElement();\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.generateCells();\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.tableElement.appendChild(rowEl);\n\t\t\t\t\t\t\n\t\t\t\t\t\tfor(var colEnd = 0; colEnd < row.cells.length; colEnd++){\n\t\t\t\t\t\t\tlet cell = row.cells[colEnd];\n\t\t\t\t\t\t\trowEl.appendChild(cell.getElement());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcell.column.reinitializeWidth();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tcollsWidth += cell.column.getWidth();\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t// if(collsWidth > this.vDomScrollPosRight){\n\t\t\t\t\t\t\t// \tbreak;\n\t\t\t\t\t\t\t// }\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t\t\t\t\n\t\t\t\t\t\t// this.fitDataColAvg = Math.floor(collsWidth / (colEnd + 1));\n\t\t\t\t\t\t\n\t\t\t\t\t\t// for(colEnd; colEnd < this.table.columnManager.columnsByIndex.length; colEnd++){\n\t\t\t\t\t\t// \tthis.table.columnManager.columnsByIndex[colEnd].setWidth(this.fitDataColAvg);\n\t\t\t\t\t\t// }\n\t\t\t\t\t\t\n\t\t\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tif(this.options(\"layout\") === \"fitColumns\"){\n\t\t\t\tthis.layoutRefresh();\n\t\t\t\tthis.rerenderColumns(false, true);\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitChanged(old){\n\t\tvar match = true;\n\t\t\n\t\tif(old.cols.length !== this.columns.length || old.leftCol !== this.leftCol || old.rightCol !== this.rightCol){\n\t\t\treturn true;\n\t\t}\n\t\t\n\t\told.cols.forEach((col, i) => {\n\t\t\tif(col !== this.columns[i]){\n\t\t\t\tmatch = false;\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn !match;\n\t}\n\t\n\treinitializeRows(){\n\t\tvar rows = this.getVisibleRows();\n\t\trows.forEach((row) => {\n\t\t\tthis.reinitializeRow(row, true);\n\t\t});\n\t}\n\t\n\tgetVisibleRows(){\n\t\tif (!this.visibleRows){\n\t\t\tthis.visibleRows = this.table.rowManager.getVisibleRows();\n\t\t}\n\n\t\treturn this.visibleRows;\t\n\t}\n\t\n\tscroll(diff){\n\t\tthis.vDomScrollPosLeft += diff;\n\t\tthis.vDomScrollPosRight += diff;\n\n\t\tif(Math.abs(diff) > (this.windowBuffer / 2)){\n\t\t\tthis.rerenderColumns();\n\t\t}else{\n\t\t\tif(diff > 0){\n\t\t\t\t//scroll right\n\t\t\t\tthis.addColRight();\n\t\t\t\tthis.removeColLeft();\n\t\t\t}else{\n\t\t\t\t//scroll left\n\t\t\t\tthis.addColLeft();\n\t\t\t\tthis.removeColRight();\n\t\t\t}\n\t\t}\n\t}\n\t\n\tcolPositionAdjust (start, end, diff){\n\t\tfor(let i = start; i < end; i++){\n\t\t\tlet column = this.columns[i];\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.leftPos += diff;\n\t\t\tcolumn.modules.vdomHoz.rightPos += diff;\n\t\t}\n\t}\n\t\n\taddColRight(){\n\t\tvar changes = false;\n\t\t\n\t\twhile(true){\n\t\t\t\n\t\t\tlet column = this.columns[this.rightCol + 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos <= this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tthis.rightCol++; // Don't move this below the >= check below\n\t\t\t\t\t\n\t\t\t\t\tif(this.rightCol >= (this.columns.length - 1)){\n\t\t\t\t\t\tthis.vDomPadRight = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadRight -= column.getWidth();\n\t\t\t\t\t}\t\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\taddColLeft(){\n\t\tvar changes = false;\n\t\t\n\t\twhile(true){\n\t\t\tlet column = this.columns[this.leftCol - 1];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos >= this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\trow.getElement().prepend(cell.getElement());\n\t\t\t\t\t\t\tcell.cellRendered();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.leftCol--; // don't move this below the <= check below\n\t\t\t\t\t\n\t\t\t\t\tif(this.leftCol <= 0){ // replicating logic in addColRight\n\t\t\t\t\t\tthis.vDomPadLeft = 0;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomPadLeft -= column.getWidth();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tlet diff = this.fitDataColActualWidthCheck(column);\n\t\t\t\t\t\n\t\t\t\t\tif(diff){\n\t\t\t\t\t\tthis.scrollLeft = this.elementVertical.scrollLeft = this.elementVertical.scrollLeft + diff;\n\t\t\t\t\t\tthis.vDomPadRight -= diff;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColRight(){\n\t\tvar changes = false;\n\t\t\n\t\twhile(true){\n\t\t\tlet column = this.columns[this.rightCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.leftPos > this.vDomScrollPosRight){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColRight\", ex.message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadRight += column.getWidth();\n\t\t\t\t\tthis.rightCol --;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingRight = this.vDomPadRight + \"px\";\n\t\t}\n\t}\n\t\n\tremoveColLeft(){\n\t\tvar changes = false;\n\t\t\n\t\twhile(true){\n\t\t\tlet column = this.columns[this.leftCol];\n\t\t\t\n\t\t\tif(column){\n\t\t\t\tif(column.modules.vdomHoz.rightPos < this.vDomScrollPosLeft){\n\t\t\t\t\tchanges = true;\n\t\t\t\t\t\n\t\t\t\t\tthis.getVisibleRows().forEach((row) => {\t\t\t\t\t\n\t\t\t\t\t\tif(row.type !== \"group\"){\n\t\t\t\t\t\t\tvar cell = row.getCell(column);\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\trow.getElement().removeChild(cell.getElement());\n\t\t\t\t\t\t\t} catch (ex) {\n\t\t\t\t\t\t\t\tconsole.warn(\"Could not removeColLeft\", ex.message)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tthis.vDomPadLeft += column.getWidth();\n\t\t\t\t\tthis.leftCol ++;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(changes){\n\t\t\tthis.tableElement.style.paddingLeft = this.vDomPadLeft + \"px\";\n\t\t}\n\t\t\n\t}\n\t\n\tfitDataColActualWidthCheck(column){\n\t\tvar newWidth, widthDiff;\n\t\t\n\t\tif(column.modules.vdomHoz.fitDataCheck){\n\t\t\tcolumn.reinitializeWidth();\n\t\t\t\n\t\t\tnewWidth = column.getWidth();\n\t\t\twidthDiff = newWidth - column.modules.vdomHoz.width;\n\t\t\t\n\t\t\tif(widthDiff){\n\t\t\t\tcolumn.modules.vdomHoz.rightPos += widthDiff;\n\t\t\t\tcolumn.modules.vdomHoz.width = newWidth;\n\t\t\t\tthis.colPositionAdjust(this.columns.indexOf(column) + 1, this.columns.length, widthDiff);\n\t\t\t}\n\t\t\t\n\t\t\tcolumn.modules.vdomHoz.fitDataCheck = false;\n\t\t}\n\t\t\n\t\treturn widthDiff;\n\t}\n\t\n\tinitializeRow(row){\n\t\tif(row.type !== \"group\"){\n\t\t\trow.modules.vdomHoz = {\n\t\t\t\tleftCol:this.leftCol,\n\t\t\t\trightCol:this.rightCol,\n\t\t\t};\n\t\t\t\n\t\t\tfor(let i = this.leftCol; i <= this.rightCol; i++){\n\t\t\t\tlet column = this.columns[i];\n\t\t\t\t\n\t\t\t\tif(column && column.visible){\n\t\t\t\t\tlet cell = row.getCell(column);\n\t\t\t\t\t\n\t\t\t\t\trow.getElement().appendChild(cell.getElement());\n\t\t\t\t\tcell.cellRendered();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\treinitializeRow(row, force){\n\t\tif(row.type !== \"group\"){\n\t\t\tif(force || !row.modules.vdomHoz || row.modules.vdomHoz.leftCol !== this.leftCol || row.modules.vdomHoz.rightCol !== this.rightCol){\n\t\t\t\tvar rowEl = row.getElement();\n\t\t\t\twhile(rowEl.firstChild) rowEl.removeChild(rowEl.firstChild);\n\t\t\t\t\n\t\t\t\tthis.initializeRow(row);\n\t\t\t}\n\t\t}\n\t}\n}","import CoreFeature from './CoreFeature.js';\nimport Column from './column/Column.js';\nimport ColumnComponent from './column/ColumnComponent.js';\nimport Helpers from './tools/Helpers.js';\nimport OptionsList from './tools/OptionsList.js';\n\nimport RendererBasicHorizontal from './rendering/renderers/BasicHorizontal.js';\nimport RendererVirtualDomHorizontal from './rendering/renderers/VirtualDomHorizontal.js';\n\nimport defaultColumnOptions from './column/defaults/options.js';\n\nexport default class ColumnManager extends CoreFeature {\n\n\tconstructor (table){\n\t\tsuper(table);\n\n\t\tthis.blockHozScrollEvent = false;\n\t\tthis.headersElement = null;\n\t\tthis.element = null ; //containing element\n\t\tthis.columns = []; // column definition object\n\t\tthis.columnsByIndex = []; //columns by index\n\t\tthis.columnsByField = {}; //columns by field\n\t\tthis.scrollLeft = 0;\n\t\tthis.optionsList = new OptionsList(this.table, \"column definition\", defaultColumnOptions);\n\n\t\tthis.renderer = null;\n\t}\n\n\t////////////// Setup Functions /////////////////\n\n\tinitialize(){\n\t\tthis.initializeRenderer();\n\n\t\tthis.headersElement = this.createHeadersElement();\n\t\tthis.element = this.createHeaderElement();\n\n\t\tthis.element.insertBefore(this.headersElement, this.element.firstChild);\n\n\t\tthis.subscribe(\"scroll-horizontal\", this.scrollHorizontal.bind(this));\n\t}\n\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomHorizontal,\n\t\t\t\"basic\": RendererBasicHorizontal,\n\t\t};\n\n\t\tif(typeof this.table.options.renderHorizontal === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderHorizontal];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderHorizontal;\n\t\t}\n\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", table.options.renderHorizontal);\n\t\t}\n\t}\n\n\n\tcreateHeadersElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-headers\");\n\t\tel.setAttribute(\"role\", \"row\");\n\n\t\treturn el;\n\t}\n\n\tcreateHeaderElement (){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-header\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\n\t\tif(!this.table.options.headerVisible){\n\t\t\tel.classList.add(\"tabulator-header-hidden\");\n\t\t}\n\n\t\treturn el;\n\t}\n\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\t//return header containing element\n\tgetHeadersElement(){\n\t\treturn this.headersElement;\n\t}\n\n\t//scroll horizontally to match table body\n\tscrollHorizontal(left){\n\t\tvar hozAdjust = 0,\n\t\tscrollWidth = this.element.scrollWidth - this.table.element.clientWidth;\n\n\t\t// this.tempScrollBlock();\n\t\tthis.element.scrollLeft = left;\n\n\t\t//adjust for vertical scrollbar moving table when present\n\t\tif(left > scrollWidth){\n\t\t\thozAdjust = left - scrollWidth;\n\t\t\tthis.element.style.marginLeft = (-(hozAdjust)) + \"px\";\n\t\t}else{\n\t\t\tthis.element.style.marginLeft = 0;\n\t\t}\n\n\t\tthis.scrollLeft = left;\n\n\t\tthis.renderer.scrollColumns(left);\n\t}\n\n\t///////////// Column Setup Functions /////////////\n\tgenerateColumnsFromRowData(data){\n\t\tvar cols = [],\n\t\tdefinitions = this.table.options.autoColumnsDefinitions,\n\t\trow, sorter;\n\n\t\tif(data && data.length){\n\n\t\t\trow = data[0];\n\n\t\t\tfor(var key in row){\n\t\t\t\tlet col = {\n\t\t\t\t\tfield:key,\n\t\t\t\t\ttitle:key,\n\t\t\t\t};\n\n\t\t\t\tlet value = row[key];\n\n\t\t\t\tswitch(typeof value){\n\t\t\t\t\tcase \"undefined\":\n\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"boolean\":\n\t\t\t\t\tsorter = \"boolean\";\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\tif(Array.isArray(value)){\n\t\t\t\t\t\tsorter = \"array\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\tif(!isNaN(value) && value !== \"\"){\n\t\t\t\t\t\tsorter = \"number\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(value.match(/((^[0-9]+[a-z]+)|(^[a-z]+[0-9]+))+$/i)){\n\t\t\t\t\t\t\tsorter = \"alphanum\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tsorter = \"string\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tcol.sorter = sorter;\n\n\t\t\t\tcols.push(col);\n\t\t\t}\n\n\t\t\tif(definitions){\n\n\t\t\t\tswitch(typeof definitions){\n\t\t\t\t\tcase \"function\":\n\t\t\t\t\tthis.table.options.columns = definitions.call(this.table, cols);\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"object\":\n\t\t\t\t\tif(Array.isArray(definitions)){\n\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\tvar match = definitions.find((def) => {\n\t\t\t\t\t\t\t\treturn def.field === col.field;\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tif(match){\n\t\t\t\t\t\t\t\tObject.assign(col, match);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcols.forEach((col) => {\n\t\t\t\t\t\t\tif(definitions[col.field]){\n\t\t\t\t\t\t\t\tObject.assign(col, definitions[col.field]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.table.options.columns = cols;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.table.options.columns = cols;\n\t\t\t}\n\n\t\t\tthis.setColumns(this.table.options.columns);\n\t\t}\n\t}\n\n\tsetColumns(cols, row){\n\t\twhile(this.headersElement.firstChild) this.headersElement.removeChild(this.headersElement.firstChild);\n\n\t\tthis.columns = [];\n\t\tthis.columnsByIndex = [];\n\t\tthis.columnsByField = {};\n\n\t\tthis.dispatch(\"columns-loading\");\n\n\t\tcols.forEach((def, i) => {\n\t\t\tthis._addColumn(def);\n\t\t});\n\n\t\tthis._reIndexColumns();\n\n\t\tthis.dispatch(\"columns-loaded\");\n\n\t\tthis.renderer.rerenderColumns(false, true);\n\n\t\tthis.redraw(true);\n\t}\n\n\t_addColumn(definition, before, nextToColumn){\n\t\tvar column = new Column(definition, this),\n\t\tcolEl = column.getElement(),\n\t\tindex = nextToColumn ? this.findColumnIndex(nextToColumn) : nextToColumn;\n\n\t\tif(nextToColumn && index > -1){\n\t\t\tvar topColumn = nextToColumn.getTopColumn()\n\t\t\tvar parentIndex = this.columns.indexOf(topColumn);\n\t\t\tvar nextEl = topColumn.getElement();\n\n\t\t\tif(before){\n\t\t\t\tthis.columns.splice(parentIndex, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl);\n\t\t\t}else{\n\t\t\t\tthis.columns.splice(parentIndex + 1, 0, column);\n\t\t\t\tnextEl.parentNode.insertBefore(colEl, nextEl.nextSibling);\n\t\t\t}\n\t\t}else{\n\t\t\tif(before){\n\t\t\t\tthis.columns.unshift(column);\n\t\t\t\tthis.headersElement.insertBefore(column.getElement(), this.headersElement.firstChild);\n\t\t\t}else{\n\t\t\t\tthis.columns.push(column);\n\t\t\t\tthis.headersElement.appendChild(column.getElement());\n\t\t\t}\n\t\t}\n\n\t\tcolumn.columnRendered();\n\n\t\treturn column;\n\t}\n\n\tregisterColumnField(col){\n\t\tif(col.definition.field){\n\t\t\tthis.columnsByField[col.definition.field] = col;\n\t\t}\n\t}\n\n\tregisterColumnPosition(col){\n\t\tthis.columnsByIndex.push(col);\n\t}\n\n\t_reIndexColumns(){\n\t\tthis.columnsByIndex = [];\n\n\t\tthis.columns.forEach(function(column){\n\t\t\tcolumn.reRegisterPosition();\n\t\t});\n\t}\n\n\t//ensure column headers take up the correct amount of space in column groups\n\tverticalAlignHeaders(){\n\t\tvar minHeight = 0;\n\n\t\tthis.columns.forEach((column) => {\n\t\t\tvar height;\n\n\t\t\tcolumn.clearVerticalAlign();\n\n\t\t\theight = column.getHeight();\n\n\t\t\tif(height > minHeight){\n\t\t\t\tminHeight = height;\n\t\t\t}\n\t\t});\n\n\t\tthis.columns.forEach((column) => {\n\t\t\tcolumn.verticalAlign(this.table.options.columnHeaderVertAlign, minHeight);\n\t\t});\n\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\t//////////////// Column Details /////////////////\n\tfindColumn(subject){\n\t\tif(typeof subject == \"object\"){\n\n\t\t\tif(subject instanceof Column){\n\t\t\t\t//subject is column element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof ColumnComponent){\n\t\t\t\t//subject is public column component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the column header\n\t\t\t\tlet match = this.columns.find((column) => {\n\t\t\t\t\treturn column.element === subject;\n\t\t\t\t});\n\n\t\t\t\treturn match || false;\n\t\t\t}\n\n\t\t}else{\n\t\t\t//subject should be treated as the field name of the column\n\t\t\treturn this.columnsByField[subject] || false;\n\t\t}\n\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\n\tgetColumnByField(field){\n\t\treturn this.columnsByField[field];\n\t}\n\n\tgetColumnsByFieldRoot(root){\n\t\tvar matches = [];\n\n\t\tObject.keys(this.columnsByField).forEach((field) => {\n\t\t\tvar fieldRoot = field.split(\".\")[0];\n\t\t\tif(fieldRoot === root){\n\t\t\t\tmatches.push(this.columnsByField[field]);\n\t\t\t}\n\t\t});\n\n\t\treturn matches;\n\t}\n\n\tgetColumnByIndex(index){\n\t\treturn this.columnsByIndex[index];\n\t}\n\n\tgetFirstVisibleColumn(index){\n\t\tvar index = this.columnsByIndex.findIndex((col) => {\n\t\t\treturn col.visible;\n\t\t});\n\n\t\treturn index > -1 ? this.columnsByIndex[index] : false;\n\t}\n\n\tgetColumns(){\n\t\treturn this.columns;\n\t}\n\n\tfindColumnIndex(column){\n\t\treturn this.columnsByIndex.findIndex((col) => {\n\t\t\treturn column === col;\n\t\t});\n\t}\n\n\t//return all columns that are not groups\n\tgetRealColumns(){\n\t\treturn this.columnsByIndex;\n\t}\n\n\t//travers across columns and call action\n\ttraverse(callback){\n\t\tthis.columnsByIndex.forEach((column,i) =>{\n\t\t\tcallback(column, i);\n\t\t});\n\t}\n\n\t//get defintions of actual columns\n\tgetDefinitions(active){\n\t\tvar output = [];\n\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(!active || (active && column.visible)){\n\t\t\t\toutput.push(column.getDefinition());\n\t\t\t}\n\t\t});\n\n\t\treturn output;\n\t}\n\n\t//get full nested definition tree\n\tgetDefinitionTree(){\n\t\tvar output = [];\n\n\t\tthis.columns.forEach((column) => {\n\t\t\toutput.push(column.getDefinition(true));\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetComponents(structured){\n\t\tvar output = [],\n\t\tcolumns = structured ? this.columns : this.columnsByIndex;\n\n\t\tcolumns.forEach((column) => {\n\t\t\toutput.push(column.getComponent());\n\t\t});\n\n\t\treturn output;\n\t}\n\n\tgetWidth(){\n\t\tvar width = 0;\n\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tif(column.visible){\n\t\t\t\twidth += column.getWidth();\n\t\t\t}\n\t\t});\n\n\t\treturn width;\n\t}\n\n\tmoveColumn(from, to, after){\n\t\tthis.moveColumnActual(from, to, after);\n\n\t\tto.element.parentNode.insertBefore(from.element, to.element);\n\n\t\tif(after){\n\t\t\tto.element.parentNode.insertBefore(to.element, from.element);\n\t\t}\n\n\t\tthis.verticalAlignHeaders();\n\n\t\tthis.table.rowManager.reinitialize();\n\t}\n\n\tmoveColumnActual(from, to, after){\n\t\tif(from.parent.isGroup){\n\t\t\tthis._moveColumnInArray(from.parent.columns, from, to, after);\n\t\t}else{\n\t\t\tthis._moveColumnInArray(this.columns, from, to, after);\n\t\t}\n\n\t\tthis._moveColumnInArray(this.columnsByIndex, from, to, after, true);\n\n\t\tthis.renderer.rerenderColumns(true);\n\n\t\tthis.dispatch(\"column-moved\", from, to, after);\n\n\t\tif(this.subscribedExternal(\"columnMoved\")){\n\t\t\tthis.dispatchExternal(\"columnMoved\", from.getComponent(), this.table.columnManager.getComponents());\n\t\t}\n\t}\n\n\t_moveColumnInArray(columns, from, to, after, updateRows){\n\t\tvar\tfromIndex = columns.indexOf(from),\n\t\ttoIndex, rows = [];\n\n\t\tif (fromIndex > -1) {\n\n\t\t\tcolumns.splice(fromIndex, 1);\n\n\t\t\ttoIndex = columns.indexOf(to);\n\n\t\t\tif (toIndex > -1) {\n\n\t\t\t\tif(after){\n\t\t\t\t\ttoIndex = toIndex+1;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\ttoIndex = fromIndex;\n\t\t\t}\n\n\t\t\tcolumns.splice(toIndex, 0, from);\n\n\t\t\tif(updateRows){\n\n\t\t\t\trows = this.chain(\"column-moving-rows\", [from, to, after], null, []) || [];\n\n\t\t\t\trows = rows.concat(this.table.rowManager.rows);\n\n\t\t\t\trows.forEach(function(row){\n\t\t\t\t\tif(row.cells.length){\n\t\t\t\t\t\tvar cell = row.cells.splice(fromIndex, 1)[0];\n\t\t\t\t\t\trow.cells.splice(toIndex, 0, cell);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\t\t}\n\t}\n\n\tscrollToColumn(column, position, ifVisible){\n\t\tvar left = 0,\n\t\toffset = 0,\n\t\tadjust = 0,\n\t\tcolEl = column.getElement();\n\n\t\treturn new Promise((resolve, reject) => {\n\n\t\t\tif(typeof position === \"undefined\"){\n\t\t\t\tposition = this.table.options.scrollToColumnPosition;\n\t\t\t}\n\n\t\t\tif(typeof ifVisible === \"undefined\"){\n\t\t\t\tifVisible = this.table.options.scrollToColumnIfVisible;\n\t\t\t}\n\n\t\t\tif(column.visible){\n\n\t\t\t\t//align to correct position\n\t\t\t\tswitch(position){\n\t\t\t\t\tcase \"middle\":\n\t\t\t\t\tcase \"center\":\n\t\t\t\t\tadjust = -this.element.clientWidth / 2;\n\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase \"right\":\n\t\t\t\t\tadjust = colEl.clientWidth - this.headersElement.clientWidth;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\t//check column visibility\n\t\t\t\tif(!ifVisible){\n\n\t\t\t\t\toffset = colEl.offsetLeft;\n\n\t\t\t\t\tif(offset > 0 && offset + colEl.offsetWidth < this.element.clientWidth){\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t//calculate scroll position\n\t\t\t\tleft = colEl.offsetLeft + adjust;\n\n\t\t\t\tleft = Math.max(Math.min(left, this.table.rowManager.element.scrollWidth - this.table.rowManager.element.clientWidth),0);\n\n\t\t\t\tthis.table.rowManager.scrollHorizontal(left);\n\t\t\t\tthis.scrollHorizontal(left);\n\n\t\t\t\tresolve();\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - Column not visible\");\n\t\t\t\treject(\"Scroll Error - Column not visible\");\n\t\t\t}\n\n\t\t});\n\t}\n\n\t//////////////// Cell Management /////////////////\n\tgenerateCells(row){\n\t\tvar cells = [];\n\n\t\tthis.columnsByIndex.forEach((column) => {\n\t\t\tcells.push(column.generateCell(row));\n\t\t});\n\n\t\treturn cells;\n\t}\n\n\t//////////////// Column Management /////////////////\n\tgetFlexBaseWidth(){\n\t\tvar totalWidth = this.table.element.clientWidth, //table element width\n\t\tfixedWidth = 0;\n\n\t\t//adjust for vertical scrollbar if present\n\t\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t\t}\n\n\t\tthis.columnsByIndex.forEach(function(column){\n\t\t\tvar width, minWidth, colWidth;\n\n\t\t\tif(column.visible){\n\n\t\t\t\twidth = column.definition.width || 0;\n\n\t\t\t\tminWidth = parseInt(column.minWidth);\n\n\t\t\t\tif(typeof(width) == \"string\"){\n\t\t\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width) ;\n\t\t\t\t\t}else{\n\t\t\t\t\t\tcolWidth = parseInt(width);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tcolWidth = width;\n\t\t\t\t}\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t}\n\t\t});\n\n\t\treturn fixedWidth;\n\t}\n\n\taddColumn(definition, before, nextToColumn){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this._addColumn(definition, before, nextToColumn);\n\n\t\t\tthis._reIndexColumns();\n\n\t\t\tthis.dispatch(\"column-add\", definition, before, nextToColumn);\n\n\t\t\tif(this.layoutMode() != \"fitColumns\"){\n\t\t\t\tcolumn.reinitializeWidth();\n\t\t\t}\n\n\t\t\tthis.redraw(true);\n\n\t\t\tthis.table.rowManager.reinitialize();\n\n\t\t\tthis.renderer.rerenderColumns();\n\n\t\t\tresolve(column);\n\t\t});\n\t}\n\n\t//remove column from system\n\tderegisterColumn(column){\n\t\tvar field = column.getField(),\n\t\tindex;\n\n\t\t//remove from field list\n\t\tif(field){\n\t\t\tdelete this.columnsByField[field];\n\t\t}\n\n\t\t//remove from index list\n\t\tindex = this.columnsByIndex.indexOf(column);\n\n\t\tif(index > -1){\n\t\t\tthis.columnsByIndex.splice(index, 1);\n\t\t}\n\n\t\t//remove from column list\n\t\tindex = this.columns.indexOf(column);\n\n\t\tif(index > -1){\n\t\t\tthis.columns.splice(index, 1);\n\t\t}\n\n\t\tthis.verticalAlignHeaders();\n\n\t\tthis.redraw();\n\t}\n\n\t//redraw columns\n\tredraw(force){\n\t\tif(Helpers.elVisible(this.element)){\n\t\t\tthis.verticalAlignHeaders();\n\t\t}\n\n\t\tif(force){\n\t\t\tthis.table.rowManager.resetScroll();\n\t\t\tthis.table.rowManager.reinitialize();\n\t\t}\n\n\t\tif(!this.confirm(\"table-redrawing\", force)){\n\t\t\tthis.layoutRefresh();\n\t\t}\n\n\t\tthis.dispatch(\"table-redraw\", force);\n\n\t\tthis.table.footerManager.redraw();\n\t}\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class BaiscVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t}\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.scrollTop = 0;\n\t\telement.scrollLeft = 0;\n\n\t\telement.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\t}\n\n\trenderRows(){\n\t\tvar element = this.tableElement,\n\t\tonlyGroupHeaders = true;\n\n\t\tthis.rows().forEach((row, index) => {\n\t\t\tthis.styleRow(row, index);\n\t\t\telement.appendChild(row.getElement());\n\t\t\trow.initialize(true);\n\n\t\t\tif(row.type !== \"group\"){\n\t\t\t\tonlyGroupHeaders = false;\n\t\t\t}\n\t\t});\n\n\t\tif(onlyGroupHeaders){\n\t\t\telement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t}else{\n\t\t\telement.style.minWidth = \"\";\n\t\t}\n\t}\n\n\n\trerenderRows(callback){\n\t\tthis.clearRows();\n\t\tthis.renderRows();\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowTop = Helpers.elOffset(row.getElement()).top;\n\n\t\treturn !(Math.abs(this.elementVertical.scrollTop - rowTop) > Math.abs(this.elementVertical.scrollTop + this.elementVertical.clientHeight - rowTop));\n\t}\n\n\tscrollToRow(row){\n\t\tvar rowEl = row.getElement();\n\n\t\tthis.elementVertical.scrollTop = Helpers.elOffset(rowEl).top - Helpers.elOffset(this.elementVertical).top + this.elementVertical.scrollTop;\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\treturn this.rows();\n\t}\n\n}","import Renderer from '../Renderer.js';\nimport Helpers from '../../tools/Helpers.js';\n\nexport default class VirtualDomVertical extends Renderer{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.verticalFillMode = \"fill\";\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomRowHeight = 20; //approximation of row heights for padding\n\n\t\tthis.vDomTop = 0; //hold position for first rendered row in the virtual DOM\n\t\tthis.vDomBottom = 0; //hold possition for last rendered row in the virtual DOM\n\n\t\tthis.vDomScrollPosTop = 0; //last scroll position of the vDom top;\n\t\tthis.vDomScrollPosBottom = 0; //last scroll position of the vDom bottom;\n\n\t\tthis.vDomTopPad = 0; //hold value of padding for top of virtual DOM\n\t\tthis.vDomBottomPad = 0; //hold value of padding for bottom of virtual DOM\n\n\t\tthis.vDomMaxRenderChain = 90; //the maximum number of dom elements that can be rendered in 1 go\n\n\t\tthis.vDomWindowBuffer = 0; //window row buffer before removing elements, to smooth scrolling\n\n\t\tthis.vDomWindowMinTotalRows = 20; //minimum number of rows to be generated in virtual dom (prevent buffering issues on tables with tall rows)\n\t\tthis.vDomWindowMinMarginRows = 5; //minimum number of rows to be generated in virtual dom margin\n\n\t\tthis.vDomTopNewRows = []; //rows to normalize after appending to optimize render speed\n\t\tthis.vDomBottomNewRows = []; //rows to normalize after appending to optimize render speed\n\t}\n\n\t//////////////////////////////////////\n\t///////// Public Functions ///////////\n\t//////////////////////////////////////\n\n\tclearRows(){\n\t\tvar element = this.tableElement;\n\n\t\t// element.children.detach();\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\telement.style.paddingTop = \"\";\n\t\telement.style.paddingBottom = \"\";\n\t\t// element.style.minWidth = \"\";\n\t\telement.style.minHeight = \"\";\n\t\telement.style.display = \"\";\n\t\telement.style.visibility = \"\";\n\n\t\tthis.elementVertical.scrollTop = 0;\n\t\tthis.elementVertical.scrollLeft = 0;\n\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\n\t\tthis.vDomTop = 0;\n\t\tthis.vDomBottom = 0;\n\t\tthis.vDomTopPad = 0;\n\t\tthis.vDomBottomPad = 0;\n\t\tthis.vDomScrollPosTop = 0;\n\t\tthis.vDomScrollPosBottom = 0;\n\t}\n\n\trenderRows(){\n\t\tthis._virtualRenderFill();\n\t}\n\n\trerenderRows(callback){\n\t\tvar scrollTop = this.elementVertical.scrollTop;\n\t\tvar topRow = false;\n\t\tvar topOffset = false;\n\n\t\tvar left = this.table.rowManager.scrollLeft;\n\n\t\tvar rows = this.rows();\n\n\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\n\t\t\tif(rows[i]){\n\t\t\t\tvar diff = scrollTop - rows[i].getElement().offsetTop;\n\n\t\t\t\tif(topOffset === false || Math.abs(diff) < topOffset){\n\t\t\t\t\ttopOffset = diff;\n\t\t\t\t\ttopRow = i;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\trows.forEach((row) => {\n\t\t\trow.deinitializeHeight();\n\t\t});\n\n\t\tif(callback){\n\t\t\tcallback();\n\t\t}\n\n\t\tthis._virtualRenderFill((topRow === false ? this.rows.length - 1 : topRow), true, topOffset || 0);\n\n\t\tthis.scrollColumns(left);\n\t}\n\n\tscrollColumns(left){\n\t\tthis.table.rowManager.scrollHorizontal(left);\n\t}\n\n\tscrollRows(top, dir){\n\t\tvar topDiff = top - this.vDomScrollPosTop;\n\t\tvar bottomDiff = top - this.vDomScrollPosBottom;\n\t\tvar margin = this.vDomWindowBuffer * 2;\n\t\tvar rows = this.rows();\n\n\t\tthis.scrollTop = top;\n\n\t\tif(-topDiff > margin || bottomDiff > margin){\n\t\t\t//if big scroll redraw table;\n\t\t\tvar left = this.table.rowManager.scrollLeft;\n\t\t\tthis._virtualRenderFill(Math.floor((this.elementVertical.scrollTop / this.elementVertical.scrollHeight) * rows.length));\n\t\t\tthis.scrollColumns(left);\n\t\t}else{\n\n\t\t\tif(dir){\n\t\t\t\t//scrolling up\n\t\t\t\tif(topDiff < 0){\n\t\t\t\t\tthis._addTopRow(rows, -topDiff);\n\t\t\t\t}\n\n\t\t\t\tif(bottomDiff < 0){\n\t\t\t\t\t//hide bottom row if needed\n\t\t\t\t\tif(this.vDomScrollHeight - this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeBottomRow(rows, -bottomDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\n\t\t\t\tif(bottomDiff >= 0){\n\t\t\t\t\tthis._addBottomRow(rows, bottomDiff);\n\t\t\t\t}\n\n\t\t\t\t//scrolling down\n\t\t\t\tif(topDiff >= 0){\n\t\t\t\t\t//hide top row if needed\n\t\t\t\t\tif(this.scrollTop > this.vDomWindowBuffer){\n\t\t\t\t\t\tthis._removeTopRow(rows, topDiff);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tresize(){\n\t\tthis.vDomWindowBuffer = this.table.options.renderVerticalBuffer || this.elementVertical.clientHeight;\n\t}\n\n\tscrollToRowNearestTop(row){\n\t\tvar rowIndex = this.rows().indexOf(row);\n\n\t\treturn !(Math.abs(this.vDomTop - rowIndex) > Math.abs(this.vDomBottom - rowIndex));\n\t}\n\n\tscrollToRow(row){\n\t\tvar index = this.rows().indexOf(row);\n\n\t\tif(index > -1){\n\t\t\tthis._virtualRenderFill(index, true);\n\t\t}\n\t}\n\n\tvisibleRows(includingBuffer){\n\t\tvar topEdge = this.elementVertical.scrollTop,\n\t\tbottomEdge = this.elementVertical.clientHeight + topEdge,\n\t\ttopFound = false,\n\t\ttopRow = 0,\n\t\tbottomRow = 0,\n\t\trows = this.rows();\n\n\t\tif(includingBuffer){\n\t\t\ttopRow = this.vDomTop;\n\t\t\tbottomRow = this.vDomBottom;\n\t\t}else{\n\t\t\tfor(var i = this.vDomTop; i <= this.vDomBottom; i++){\n\t\t\t\tif(rows[i]){\n\t\t\t\t\tif(!topFound){\n\t\t\t\t\t\tif((topEdge - rows[i].getElement().offsetTop) >= 0){\n\t\t\t\t\t\t\ttopRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttopFound = true;\n\n\t\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tif(bottomEdge - rows[i].getElement().offsetTop >= 0){\n\t\t\t\t\t\t\tbottomRow = i;\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn rows.slice(topRow, bottomRow + 1);\n\t}\n\n\t//////////////////////////////////////\n\t//////// Internal Rendering //////////\n\t//////////////////////////////////////\n\n\t//full virtual render\n\t_virtualRenderFill(position, forceMove, offset){\n\t\tvar\telement = this.tableElement,\n\t\tholder = this.elementVertical,\n\t\ttopPad = 0,\n\t\trowsHeight = 0,\n\t\theightOccupied = 0,\n\t\ttopPadHeight = 0,\n\t\ti = 0,\n\t\trows = this.rows(),\n\t\trowsCount = rows.length,\n\t\tcontainerHeight = this.elementVertical.clientHeight;\n\n\t\tposition = position || 0;\n\n\t\toffset = offset || 0;\n\n\t\tif(!position){\n\t\t\tthis.clear();\n\t\t}else{\n\t\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\n\t\t\t//check if position is too close to bottom of table\n\t\t\theightOccupied = (rowsCount - position + 1) * this.vDomRowHeight;\n\n\t\t\tif(heightOccupied < containerHeight){\n\t\t\t\tposition -= Math.ceil((containerHeight - heightOccupied) / this.vDomRowHeight);\n\t\t\t\tif(position < 0){\n\t\t\t\t\tposition = 0;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t//calculate initial pad\n\t\t\ttopPad = Math.min(Math.max(Math.floor(this.vDomWindowBuffer / this.vDomRowHeight),  this.vDomWindowMinMarginRows), position);\n\t\t\tposition -= topPad;\n\t\t}\n\n\t\tif(rowsCount && Helpers.elVisible(this.elementVertical)){\n\t\t\tthis.vDomTop = position;\n\n\t\t\tthis.vDomBottom = position -1;\n\n\t\t\twhile (this.vDomBottom < rowsCount -1){\n\t\t\t\tvar index = this.vDomBottom + 1,\n\t\t\t\trow = rows[index],\n\t\t\t\trowHeight = 0;\n\n\t\t\t\tthis.styleRow(row, index);\n\n\t\t\t\telement.appendChild(row.getElement());\n\n\t\t\t\trow.initialize();\n\n\t\t\t\tif(!row.heightInitialized){\n\t\t\t\t\trow.normalizeHeight(true);\n\t\t\t\t}\n\n\t\t\t\trowHeight = row.getHeight();\n\n\t\t\t\tif(i < topPad){\n\t\t\t\t\ttopPadHeight += rowHeight;\n\t\t\t\t}else{\n\t\t\t\t\trowsHeight += rowHeight;\n\t\t\t\t}\n\n\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t}\n\n\t\t\t\tthis.vDomBottom ++;\n\t\t\t\ti++;\n\t\t\t}\n\n\t\t\tif(!position){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t\t//adjust rowheight to match average of rendered elements\n\t\t\t\tthis.vDomRowHeight = Math.floor((rowsHeight + topPadHeight) / i);\n\t\t\t\tthis.vDomBottomPad = this.vDomRowHeight * (rowsCount - this.vDomBottom -1);\n\n\t\t\t\tthis.vDomScrollHeight = topPadHeight + rowsHeight + this.vDomBottomPad - containerHeight;\n\t\t\t}else{\n\t\t\t\tthis.vDomTopPad = !forceMove ? this.scrollTop - topPadHeight : (this.vDomRowHeight * this.vDomTop) + offset;\n\t\t\t\tthis.vDomBottomPad = this.vDomBottom == rowsCount-1 ? 0 : Math.max(this.vDomScrollHeight - this.vDomTopPad - rowsHeight - topPadHeight, 0);\n\t\t\t}\n\n\t\t\telement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\telement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\n\t\t\tif(forceMove){\n\t\t\t\tthis.scrollTop = this.vDomTopPad + (topPadHeight) + offset - (this.elementVertical.scrollWidth > this.elementVertical.clientWidth ? this.elementVertical.offsetHeight - containerHeight : 0);\n\t\t\t}\n\n\t\t\tthis.scrollTop = Math.min(this.scrollTop, this.elementVertical.scrollHeight - containerHeight);\n\n\t\t\t//adjust for horizontal scrollbar if present (and not at top of table)\n\t\t\tif(this.elementVertical.scrollWidth > this.elementVertical.offsetWidth && forceMove){\n\t\t\t\tthis.scrollTop += this.elementVertical.offsetHeight - containerHeight;\n\t\t\t}\n\n\t\t\tthis.vDomScrollPosTop = this.scrollTop;\n\t\t\tthis.vDomScrollPosBottom = this.scrollTop;\n\n\t\t\tholder.scrollTop = this.scrollTop;\n\n\t\t\tthis.dispatch(\"render-virtual-fill\");\n\t\t}\n\t}\n\n\t_addTopRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomTop -1,\n\t\ti = 0;\n\n\t\twhile(true){\n\t\t\tif(this.vDomTop){\n\t\t\t\tlet row = rows[index],\n\t\t\t\trowHeight, initialized;\n\n\t\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\t\ttable.insertBefore(row.getElement(), table.firstChild);\n\n\t\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trow.initialize();\n\n\t\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\t\tthis.vDomTop--;\n\t\t\t\t\t\tindex--;\n\t\t\t\t\t\ti++;\n\n\t\t\t\t\t}else{\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad -= paddingAdjust;\n\n\t\t\tif(this.vDomTopPad < 0){\n\t\t\t\tthis.vDomTopPad = index * this.vDomRowHeight;\n\t\t\t}\n\n\t\t\tif(index < 1){\n\t\t\t\tthis.vDomTopPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop -= paddingAdjust;\n\t\t}\n\t}\n\n\t_removeTopRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0;\n\n\t\twhile(true){\n\t\t\tlet row = rows[this.vDomTop],\n\t\t\trowHeight, diff;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomTop++;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomTopPad += paddingAdjust;\n\t\t\tthis.tableElement.style.paddingTop = this.vDomTopPad + \"px\";\n\t\t\tthis.vDomScrollPosTop += this.vDomTop ? paddingAdjust : paddingAdjust + this.vDomWindowBuffer;\n\t\t}\n\t}\n\n\t_addBottomRow(rows, fillableSpace){\n\t\tvar table = this.tableElement,\n\t\taddedRows = [],\n\t\tpaddingAdjust = 0,\n\t\tindex = this.vDomBottom + 1,\n\t\ti = 0;\n\n\t\twhile(true){\n\t\t\tlet row = rows[index],\n\t\t\trowHeight, initialized;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\t\t\t\tinitialized = row.initialized;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\n\t\t\t\t\tthis.styleRow(row, index);\n\t\t\t\t\ttable.appendChild(row.getElement());\n\n\t\t\t\t\tif(!row.initialized || !row.heightInitialized){\n\t\t\t\t\t\taddedRows.push(row);\n\t\t\t\t\t}\n\n\t\t\t\t\trow.initialize();\n\n\t\t\t\t\tif(!initialized){\n\t\t\t\t\t\trowHeight = row.getElement().offsetHeight;\n\n\t\t\t\t\t\tif(rowHeight > this.vDomWindowBuffer){\n\t\t\t\t\t\t\tthis.vDomWindowBuffer = rowHeight * 2;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tthis.vDomBottom++;\n\t\t\t\t\tindex++;\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of addedRows){\n\t\t\trow.clearCellHeight();\n\t\t}\n\n\t\tthis._quickNormalizeRowHeight(addedRows);\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad -= paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0 || index == rows.length -1){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\ttable.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom += paddingAdjust;\n\t\t}\n\t}\n\n\t_removeBottomRow(rows, fillableSpace){\n\t\tvar removableRows = [],\n\t\tpaddingAdjust = 0,\n\t\ti = 0;\n\n\t\twhile(true){\n\t\t\tlet row = rows[this.vDomBottom],\n\t\t\trowHeight, diff;\n\n\t\t\tif(row && i < this.vDomMaxRenderChain){\n\t\t\t\trowHeight = row.getHeight() || this.vDomRowHeight;\n\n\t\t\t\tif(fillableSpace >= rowHeight){\n\t\t\t\t\tthis.vDomBottom --;\n\n\t\t\t\t\tfillableSpace -= rowHeight;\n\t\t\t\t\tpaddingAdjust += rowHeight;\n\n\t\t\t\t\tremovableRows.push(row);\n\t\t\t\t\ti++;\n\t\t\t\t}else{\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tfor (let row of removableRows){\n\t\t\tlet rowEl = row.getElement();\n\n\t\t\tif(rowEl.parentNode){\n\t\t\t\trowEl.parentNode.removeChild(rowEl);\n\t\t\t}\n\t\t}\n\n\t\tif(paddingAdjust){\n\t\t\tthis.vDomBottomPad += paddingAdjust;\n\n\t\t\tif(this.vDomBottomPad < 0){\n\t\t\t\tthis.vDomBottomPad = 0;\n\t\t\t}\n\n\t\t\tthis.tableElement.style.paddingBottom = this.vDomBottomPad + \"px\";\n\t\t\tthis.vDomScrollPosBottom -= paddingAdjust;\n\t\t}\n\t}\n\n\t_quickNormalizeRowHeight(rows){\n\t\tfor(let row of rows){\n\t\t\trow.calcHeight();\n\t\t}\n\n\t\tfor(let row of rows){\n\t\t\trow.setCellHeight();\n\t\t}\n\t}\n}\n","import CoreFeature from './CoreFeature.js';\nimport Row from './row/Row.js';\nimport RowComponent from './row/RowComponent.js';\nimport Helpers from './tools/Helpers.js';\n\nimport RendererBasicVertical from './rendering/renderers/BasicVertical.js';\nimport RendererVirtualDomVertical from './rendering/renderers/VirtualDomVertical.js';\n\nexport default class RowManager extends CoreFeature{\n\t\n\tconstructor(table){\n\t\tsuper(table);\n\t\t\n\t\tthis.element = this.createHolderElement(); //containing element\n\t\tthis.tableElement = this.createTableElement(); //table element\n\t\tthis.heightFixer = this.createTableElement(); //table element\n\t\tthis.placeholder = null; //placeholder element\n\t\tthis.placeholderContents = null; //placeholder element\n\t\t\n\t\tthis.firstRender = false; //handle first render\n\t\tthis.renderMode = \"virtual\"; //current rendering mode\n\t\tthis.fixedHeight = false; //current rendering mode\n\t\t\n\t\tthis.rows = []; //hold row data objects\n\t\tthis.activeRowsPipeline = []; //hold calculation of active rows\n\t\tthis.activeRows = []; //rows currently available to on display in the table\n\t\tthis.activeRowsCount = 0; //count of active rows\n\t\t\n\t\tthis.displayRows = []; //rows currently on display in the table\n\t\tthis.displayRowsCount = 0; //count of display rows\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.rowNumColumn = false; //hold column component for row number column\n\t\t\n\t\tthis.redrawBlock = false; //prevent redraws to allow multiple data manipulations before continuing\n\t\tthis.redrawBlockRestoreConfig = false; //store latest redraw function calls for when redraw is needed\n\t\tthis.redrawBlockRenderInPosition = false; //store latest redraw function calls for when redraw is needed\n\t\t\n\t\tthis.dataPipeline = []; //hold data pipeline tasks\n\t\tthis.displayPipeline = []; //hold data display pipeline tasks\n\t\t\n\t\tthis.renderer = null;\n\t}\n\t\n\t//////////////// Setup Functions /////////////////\n\t\n\tcreateHolderElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-tableholder\");\n\t\tel.setAttribute(\"tabindex\", 0);\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tcreateTableElement (){\n\t\tvar el = document.createElement(\"div\");\n\t\t\n\t\tel.classList.add(\"tabulator-table\");\n\t\tel.setAttribute(\"role\", \"rowgroup\");\n\t\t\n\t\treturn el;\n\t}\n\t\n\tinitializePlaceholder(){\n\t\t//configure placeholder element\n\t\tif(typeof this.table.options.placeholder == \"string\"){\n\t\t\tlet el = document.createElement(\"div\");\n\t\t\tel.classList.add(\"tabulator-placeholder\");\n\t\t\t\n\t\t\tlet contents = document.createElement(\"div\");\n\t\t\tcontents.classList.add(\"tabulator-placeholder-contents\");\n\t\t\tcontents.innerHTML = this.table.options.placeholder;\n\t\t\t\n\t\t\tel.appendChild(contents);\n\t\t\t\n\t\t\tthis.placeholderContents = contents;\n\t\t\tthis.placeholder = el;\n\t\t}\n\t}\n\t\n\t//return containing element\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\t\n\t//return table element\n\tgetTableElement(){\n\t\treturn this.tableElement;\n\t}\n\t\n\t//return position of row in table\n\tgetRowPosition(row, active){\n\t\tif(active){\n\t\t\treturn this.activeRows.indexOf(row);\n\t\t}else{\n\t\t\treturn this.rows.indexOf(row);\n\t\t}\n\t}\n\t\n\tinitialize(){\n\t\tthis.initializePlaceholder()\n\t\tthis.initializeRenderer();\n\t\t\n\t\t//initialize manager\n\t\tthis.element.appendChild(this.tableElement);\n\t\t\n\t\tthis.firstRender = true;\n\t\t\n\t\t//scroll header along with table body\n\t\tthis.element.addEventListener(\"scroll\", () => {\n\t\t\tvar left = this.element.scrollLeft,\n\t\t\tleftDir = this.scrollLeft > left,\n\t\t\ttop = this.element.scrollTop,\n\t\t\ttopDir = this.scrollTop > top;\n\t\t\t\n\t\t\t//handle horizontal scrolling\n\t\t\tif(this.scrollLeft != left){\n\t\t\t\tthis.scrollLeft = left;\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-horizontal\", left, leftDir);\n\t\t\t\tthis.dispatchExternal(\"scrollHorizontal\", left, leftDir);\n\n\t\t\t\tthis._positionPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\t//handle vertical scrolling\n\t\t\tif(this.scrollTop != top){\n\t\t\t\tthis.scrollTop = top;\n\t\t\t\t\n\t\t\t\tthis.renderer.scrollRows(top, topDir);\n\t\t\t\t\n\t\t\t\tthis.dispatch(\"scroll-vertical\", top, topDir);\n\t\t\t\tthis.dispatchExternal(\"scrollVertical\", top, topDir);\n\t\t\t}\n\t\t});\n\t}\n\t\n\t////////////////// Row Manipulation //////////////////\n\tfindRow(subject){\n\t\tif(typeof subject == \"object\"){\n\t\t\tif(subject instanceof Row){\n\t\t\t\t//subject is row element\n\t\t\t\treturn subject;\n\t\t\t}else if(subject instanceof RowComponent){\n\t\t\t\t//subject is public row component\n\t\t\t\treturn subject._getSelf() || false;\n\t\t\t}else if(typeof HTMLElement !== \"undefined\" && subject instanceof HTMLElement){\n\t\t\t\t//subject is a HTML element of the row\n\t\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\t\treturn row.getElement() === subject;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\treturn match || false;\n\t\t\t}\n\t\t}else if(typeof subject == \"undefined\" || subject === null){\n\t\t\treturn false;\n\t\t}else{\n\t\t\t//subject should be treated as the index of the row\n\t\t\tlet match = this.rows.find((row) => {\n\t\t\t\treturn row.data[this.table.options.index] == subject;\n\t\t\t});\n\t\t\t\n\t\t\treturn match || false;\n\t\t}\n\t\t\n\t\t//catch all for any other type of input\n\t\treturn false;\n\t}\n\t\n\tgetRowFromDataObject(data){\n\t\tvar match = this.rows.find((row) => {\n\t\t\treturn row.data === data;\n\t\t});\n\t\t\n\t\treturn match || false;\n\t}\n\t\n\tgetRowFromPosition(position, active){\n\t\tif(active){\n\t\t\treturn this.activeRows[position];\n\t\t}else{\n\t\t\treturn this.rows[position];\n\t\t}\n\t}\n\t\n\tscrollToRow(row, position, ifVisible){\n\t\treturn this.renderer.scrollToRowPosition(row, position, ifVisible);\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\tsetData(data, renderInPosition, columnsChanged){\n\t\treturn new Promise((resolve, reject)=>{\n\t\t\tif(renderInPosition && this.getDisplayRows().length){\n\t\t\t\tif(this.table.options.pagination){\n\t\t\t\t\tthis._setDataActual(data, true);\n\t\t\t\t}else{\n\t\t\t\t\tthis.reRenderInPosition(() => {\n\t\t\t\t\t\tthis._setDataActual(data);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(this.table.options.autoColumns && columnsChanged && this.table.initialized){\n\t\t\t\t\tthis.table.columnManager.generateColumnsFromRowData(data);\n\t\t\t\t}\n\t\t\t\tthis.resetScroll();\n\t\t\t\t\n\t\t\t\tthis._setDataActual(data);\n\t\t\t}\n\t\t\t\n\t\t\tresolve();\n\t\t});\n\t}\n\t\n\t_setDataActual(data, renderInPosition){\n\t\tthis.dispatchExternal(\"dataProcessing\", data);\n\t\t\n\t\tthis._wipeElements();\n\t\t\n\t\tif(Array.isArray(data)){\n\t\t\tthis.dispatch(\"data-processing\", data);\n\t\t\t\n\t\t\tdata.forEach((def, i) => {\n\t\t\t\tif(def && typeof def === \"object\"){\n\t\t\t\t\tvar row = new Row(def, this);\n\t\t\t\t\tthis.rows.push(row);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Loading Warning - Invalid row data detected and ignored, expecting object but received:\", def);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, renderInPosition);\n\t\t\t\n\t\t\tthis.dispatch(\"data-processed\", data);\n\t\t\tthis.dispatchExternal(\"dataProcessed\", data);\n\t\t}else{\n\t\t\tconsole.error(\"Data Loading Error - Unable to process data due to invalid data type \\nExpecting: array \\nReceived: \", typeof data, \"\\nData:     \", data);\n\t\t}\n\t}\n\t\n\t_wipeElements(){\n\t\tthis.dispatch(\"rows-wipe\");\n\t\t\n\t\tthis.rows.forEach((row) => {\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rows = [];\n\t\tthis.activeRows = [];\n\t\tthis.activeRowsPipeline = [];\n\t\tthis.activeRowsCount = 0;\n\t\tthis.displayRows = [];\n\t\tthis.displayRowsCount = 0;\n\t\t\n\t\tthis.adjustTableSize();\n\t}\n\t\n\tdeleteRow(row, blockRedraw){\n\t\tvar allIndex = this.rows.indexOf(row),\n\t\tactiveIndex = this.activeRows.indexOf(row);\n\t\t\n\t\tif(activeIndex > -1){\n\t\t\tthis.activeRows.splice(activeIndex, 1);\n\t\t}\n\t\t\n\t\tif(allIndex > -1){\n\t\t\tthis.rows.splice(allIndex, 1);\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tvar displayIndex = rows.indexOf(row);\n\t\t\t\n\t\t\tif(displayIndex > -1){\n\t\t\t\trows.splice(displayIndex, 1);\n\t\t\t}\n\t\t});\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\tthis.regenerateRowNumbers();\n\t\t\n\t\tthis.dispatchExternal(\"rowDeleted\", row.getComponent());\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.getData());\n\t\t}\n\t}\n\t\n\taddRow(data, pos, index, blockRedraw){\n\t\tvar row = this.addRowActual(data, pos, index, blockRedraw);\n\t\treturn row;\n\t}\n\t\n\t//add multiple rows\n\taddRows(data, pos, index){\n\t\tvar length = 0,\n\t\trows = [];\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tpos = this.findAddRowPos(pos);\n\t\t\t\n\t\t\tif(!Array.isArray(data)){\n\t\t\t\tdata = [data];\n\t\t\t}\n\t\t\t\n\t\t\tlength = data.length - 1;\n\t\t\t\n\t\t\tif((typeof index == \"undefined\" && pos) || (typeof index !== \"undefined\" && !pos)){\n\t\t\t\tdata.reverse();\n\t\t\t}\n\t\t\t\n\t\t\tdata.forEach((item, i) => {\n\t\t\t\tvar row = this.addRow(item, pos, index, true);\n\t\t\t\trows.push(row);\n\t\t\t\tthis.dispatch(\"row-added\", row, data, pos, index);\n\t\t\t});\n\t\t\t\n\t\t\tthis.refreshActiveData(false, false, true);\n\t\t\t\n\t\t\tthis.regenerateRowNumbers();\n\t\t\t\n\t\t\tif(rows.length){\n\t\t\t\tthis._clearPlaceholder();\n\t\t\t}\n\t\t\t\n\t\t\tresolve(rows);\n\t\t});\n\t}\n\t\n\tfindAddRowPos(pos){\n\t\tif(typeof pos === \"undefined\"){\n\t\t\tpos = this.table.options.addRowPos;\n\t\t}\n\t\t\n\t\tif(pos === \"pos\"){\n\t\t\tpos = true;\n\t\t}\n\t\t\n\t\tif(pos === \"bottom\"){\n\t\t\tpos = false;\n\t\t}\n\t\t\n\t\treturn pos;\n\t}\n\t\n\taddRowActual(data, pos, index, blockRedraw){\n\t\tvar row = data instanceof Row ? data : new Row(data || {}, this),\n\t\ttop = this.findAddRowPos(pos),\n\t\tallIndex = -1,\n\t\tactiveIndex, chainResult;\n\t\t\n\t\tif(!index){\n\t\t\tchainResult = this.chain(\"row-adding-position\", [row, top], null, {index, top});\n\t\t\t\n\t\t\tindex = chainResult.index;\n\t\t\ttop = chainResult.top;\n\t\t}\n\t\t\n\t\tif(typeof index !== \"undefined\"){\n\t\t\tindex = this.findRow(index);\n\t\t}\n\t\t\n\t\tindex = this.chain(\"row-adding-index\", [row, index, top], null, index);\n\t\t\n\t\tif(index){\n\t\t\tallIndex = this.rows.indexOf(index);\n\t\t}\n\t\t\n\t\tif(index && allIndex > -1){\n\t\t\tactiveIndex = this.activeRows.indexOf(index);\n\t\t\t\n\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\tvar displayIndex = rows.indexOf(index);\n\t\t\t\t\n\t\t\t\tif(displayIndex > -1){\n\t\t\t\t\trows.splice((top ? displayIndex : displayIndex + 1), 0, row);\n\t\t\t\t}\n\t\t\t});\n\t\t\t\n\t\t\tif(activeIndex > -1){\n\t\t\t\tthis.activeRows.splice((top ? activeIndex : activeIndex + 1), 0, row);\n\t\t\t}\n\t\t\t\n\t\t\tthis.rows.splice((top ? allIndex : allIndex + 1), 0, row);\n\t\t\t\n\t\t}else{\n\t\t\t\n\t\t\tif(top){\n\t\t\t\t\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.unshift(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.unshift(row);\n\t\t\t\tthis.rows.unshift(row);\n\t\t\t}else{\n\t\t\t\tthis.displayRowIterator(function(rows){\n\t\t\t\t\trows.push(row);\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tthis.activeRows.push(row);\n\t\t\t\tthis.rows.push(row);\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.setActiveRows(this.activeRows);\n\t\t\n\t\tthis.dispatchExternal(\"rowAdded\", row.getComponent());\n\t\t\n\t\tif(this.subscribedExternal(\"dataChanged\")){\n\t\t\tthis.dispatchExternal(\"dataChanged\", this.table.rowManager.getData());\n\t\t}\n\t\t\n\t\tif(!blockRedraw){\n\t\t\tthis.reRenderInPosition();\n\t\t}\n\t\t\n\t\treturn row;\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tthis.dispatch(\"row-move\", from, to, after);\n\t\t\n\t\tthis.moveRowActual(from, to, after);\n\t\t\n\t\tthis.regenerateRowNumbers();\n\t\t\n\t\tthis.dispatch(\"row-moved\", from, to, after);\n\t\tthis.dispatchExternal(\"rowMoved\", from.getComponent());\n\t}\n\t\n\tmoveRowActual(from, to, after){\n\t\tthis.moveRowInArray(this.rows, from, to, after);\n\t\tthis.moveRowInArray(this.activeRows, from, to, after);\n\t\t\n\t\tthis.displayRowIterator((rows) => {\n\t\t\tthis.moveRowInArray(rows, from, to, after);\n\t\t});\n\t\t\n\t\tthis.dispatch(\"row-moving\", from, to, after);\n\t}\n\t\n\tmoveRowInArray(rows, from, to, after){\n\t\tvar\tfromIndex, toIndex, start, end;\n\t\t\n\t\tif(from !== to){\n\t\t\t\n\t\t\tfromIndex = rows.indexOf(from);\n\t\t\t\n\t\t\tif (fromIndex > -1) {\n\t\t\t\t\n\t\t\t\trows.splice(fromIndex, 1);\n\t\t\t\t\n\t\t\t\ttoIndex = rows.indexOf(to);\n\t\t\t\t\n\t\t\t\tif (toIndex > -1) {\n\t\t\t\t\t\n\t\t\t\t\tif(after){\n\t\t\t\t\t\trows.splice(toIndex+1, 0, from);\n\t\t\t\t\t}else{\n\t\t\t\t\t\trows.splice(toIndex, 0, from);\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t}else{\n\t\t\t\t\trows.splice(fromIndex, 0, from);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t//restyle rows\n\t\t\tif(rows === this.getDisplayRows()){\n\t\t\t\t\n\t\t\t\tstart = fromIndex < toIndex ? fromIndex : toIndex;\n\t\t\t\tend = toIndex > fromIndex ? toIndex : fromIndex +1;\n\t\t\t\t\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tif(rows[i]){\n\t\t\t\t\t\tthis.styleRow(rows[i], i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearData(){\n\t\tthis.setData([]);\n\t}\n\t\n\tgetRowIndex(row){\n\t\treturn this.findRowIndex(row, this.rows);\n\t}\n\t\n\tgetDisplayRowIndex(row){\n\t\tvar index = this.getDisplayRows().indexOf(row);\n\t\treturn index > -1 ? index : false;\n\t}\n\t\n\tnextDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tnextRow = false;\n\t\t\n\t\t\n\t\tif(index !== false && index < this.displayRowsCount -1){\n\t\t\tnextRow = this.getDisplayRows()[index+1];\n\t\t}\n\t\t\n\t\tif(nextRow && (!(nextRow instanceof Row) || nextRow.type != \"row\")){\n\t\t\treturn this.nextDisplayRow(nextRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn nextRow;\n\t}\n\t\n\tprevDisplayRow(row, rowOnly){\n\t\tvar index = this.getDisplayRowIndex(row),\n\t\tprevRow = false;\n\t\t\n\t\tif(index){\n\t\t\tprevRow = this.getDisplayRows()[index-1];\n\t\t}\n\t\t\n\t\tif(rowOnly && prevRow && (!(prevRow instanceof Row) || prevRow.type != \"row\")){\n\t\t\treturn this.prevDisplayRow(prevRow, rowOnly);\n\t\t}\n\t\t\n\t\treturn prevRow;\n\t}\n\t\n\tfindRowIndex(row, list){\n\t\tvar rowIndex;\n\t\t\n\t\trow = this.findRow(row);\n\t\t\n\t\tif(row){\n\t\t\trowIndex = list.indexOf(row);\n\t\t\t\n\t\t\tif(rowIndex > -1){\n\t\t\t\treturn rowIndex;\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\t\n\tgetData(active, transform){\n\t\tvar output = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\tif(row.type == \"row\"){\n\t\t\t\toutput.push(row.getData(transform || \"data\"));\n\t\t\t}\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetComponents(active){\n\t\tvar\toutput = [],\n\t\trows = this.getRows(active);\n\t\t\n\t\trows.forEach(function(row){\n\t\t\toutput.push(row.getComponent());\n\t\t});\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDataCount(active){\n\t\tvar rows = this.getRows(active);\n\t\t\n\t\treturn rows.length;\n\t}\n\t\n\tscrollHorizontal(left){\n\t\tthis.scrollLeft = left;\n\t\tthis.element.scrollLeft = left;\n\t\t\n\t\tthis.dispatch(\"scroll-horizontal\", left);\n\t}\n\t\n\tregisterDataPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.dataPipeline.push({handler, priority})\n\t\t\tthis.dataPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Data pipeline handlers must have a priority in order to be registered\")\n\t\t}\n\t}\n\t\n\tregisterDisplayPipelineHandler(handler, priority){\n\t\tif(typeof priority !== \"undefined\"){\n\t\t\tthis.displayPipeline.push({handler, priority})\n\t\t\tthis.displayPipeline.sort((a, b) => {\n\t\t\t\treturn a.priority - b.priority;\n\t\t\t});\n\t\t}else{\n\t\t\tconsole.error(\"Display pipeline handlers must have a priority in order to be registered\")\n\t\t}\n\t}\n\t\n\t//set active data set\n\trefreshActiveData(handler, skipStage, renderInPosition){\n\t\tvar table = this.table,\n\t\tstage = \"\",\n\t\tindex = 0,\n\t\tcascadeOrder = [\"all\", \"dataPipeline\", \"display\", \"displayPipeline\", \"end\"],\n\t\tdisplayIndex;\n\t\t\n\t\t\n\t\tif(typeof handler === \"function\"){\n\t\t\tindex = this.dataPipeline.findIndex((item) => {\n\t\t\t\treturn item.handler === handler;\n\t\t\t});\n\t\t\t\n\t\t\tif(index > -1){\n\t\t\t\tstage = \"dataPipeline\";\n\t\t\t\t\n\t\t\t\tif(skipStage){\n\t\t\t\t\tif(index == this.dataPipeline.length - 1){\n\t\t\t\t\t\tstage = \"display\";\n\t\t\t\t\t}else{\n\t\t\t\t\t\tindex++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tindex = this.displayPipeline.findIndex((item) => {\n\t\t\t\t\treturn item.handler === handler;\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\tif(index > -1){\n\t\t\t\t\tstage = \"displayPipeline\";\n\t\t\t\t\t\n\t\t\t\t\tif(skipStage){\n\t\t\t\t\t\tif(index == this.displayPipeline.length - 1){\n\t\t\t\t\t\t\tstage = \"end\";\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tindex++;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.error(\"Unable to refresh data, invalid handler provided\", handler)\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tstage = handler || \"all\";\n\t\t\tindex = 0;\n\t\t}\n\t\t\n\t\tif(this.redrawBlock){\n\t\t\tif(!this.redrawBlockRestoreConfig || (this.redrawBlockRestoreConfig && ((this.redrawBlockRestoreConfig.stage === stage && index < this.redrawBlockRestoreConfig.index) || (cascadeOrder.indexOf(stage) < cascadeOrder.indexOf(this.redrawBlockRestoreConfig.stage))))){\n\t\t\t\tthis.redrawBlockRestoreConfig = {\n\t\t\t\t\thandler: handler,\n\t\t\t\t\tskipStage: skipStage,\n\t\t\t\t\trenderInPosition: renderInPosition,\n\t\t\t\t\tstage:stage,\n\t\t\t\t\tindex:index,\n\t\t\t\t};\n\t\t\t}\n\t\t\t\n\t\t\treturn;\n\t\t}else{\n\t\t\tif(Helpers.elVisible(this.element)){\n\t\t\t\tif(renderInPosition){\n\t\t\t\t\tthis.reRenderInPosition(this.refreshPipelines.bind(this, handler, stage, index, renderInPosition));\n\t\t\t\t}else{\n\t\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t\t\t\n\t\t\t\t\tif(!handler){\n\t\t\t\t\t\tthis.table.columnManager.renderer.renderColumns();\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\tthis.renderTable();\n\t\t\t\t\t\n\t\t\t\t\tif(table.options.layoutColumnsOnNewData){\n\t\t\t\t\t\tthis.table.columnManager.redraw(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tthis.refreshPipelines(handler, stage, index, renderInPosition);\n\t\t\t}\n\t\t\t\n\t\t\tthis.dispatch(\"data-refreshed\");\n\t\t}\n\t}\n\t\n\trefreshPipelines(handler, stage, index, renderInPosition){\n\t\tthis.dispatch(\"data-refreshing\");\n\t\t\n\t\tif(!handler){\n\t\t\tthis.activeRowsPipeline[0] = this.rows.slice(0);\n\t\t}\n\t\t\n\t\t//cascade through data refresh stages\n\t\tswitch(stage){\n\t\t\tcase \"all\":\n\t\t\t//handle case where alldata needs refreshing\n\t\t\t\n\t\t\tcase \"dataPipeline\":\n\t\t\t\n\t\t\tfor(let i = index; i < this.dataPipeline.length; i++){\n\t\t\t\tlet result = this.dataPipeline[i].handler(this.activeRowsPipeline[i].slice(0));\n\t\t\t\t\n\t\t\t\tthis.activeRowsPipeline[i + 1] = result || this.activeRowsPipeline[i].slice(0);\n\t\t\t}\n\t\t\t\n\t\t\tthis.setActiveRows(this.activeRowsPipeline[this.dataPipeline.length]);\n\t\t\t\n\t\t\tthis.regenerateRowNumbers();\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\tindex = 0;\n\t\t\tthis.resetDisplayRows();\n\t\t\t\n\t\t\tcase \"displayPipeline\":\n\t\t\tfor(let i = index; i < this.displayPipeline.length; i++){\n\t\t\t\tlet result = this.displayPipeline[i].handler((i ? this.getDisplayRows(i - 1) : this.activeRows).slice(0), renderInPosition);\n\t\t\t\t\n\t\t\t\tthis.setDisplayRows(result || this.getDisplayRows(i - 1).slice(0), i);\n\t\t\t}\n\t\t\t\n\t\t\tcase \"end\":\n\t\t\t//case to handle scenario when trying to skip past end stage\n\t\t}\n\t}\n\t\n\t//regenerate row numbers for row number formatter if in use\n\tregenerateRowNumbers(){\n\t\tif(this.rowNumColumn){\n\t\t\tthis.activeRows.forEach((row) => {\n\t\t\t\tvar cell = row.getCell(this.rowNumColumn);\n\t\t\t\t\n\t\t\t\tif(cell){\n\t\t\t\t\tcell._generateContents();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\t\n\tsetActiveRows(activeRows){\n\t\tthis.activeRows = activeRows;\n\t\tthis.activeRowsCount = this.activeRows.length;\n\t}\n\t\n\t//reset display rows array\n\tresetDisplayRows(){\n\t\tthis.displayRows = [];\n\t\t\n\t\tthis.displayRows.push(this.activeRows.slice(0));\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[0].length;\n\t}\n\t\n\tgetNextDisplayIndex(){\n\t\treturn this.displayRows.length;\n\t}\n\t\n\t//set display row pipeline data\n\tsetDisplayRows(displayRows, index){\n\t\t\n\t\tvar output = true;\n\t\t\n\t\tif(index && typeof this.displayRows[index] != \"undefined\"){\n\t\t\tthis.displayRows[index] = displayRows;\n\t\t\toutput = true;\n\t\t}else{\n\t\t\tthis.displayRows.push(displayRows)\n\t\t\toutput = index = this.displayRows.length -1;\n\t\t}\n\t\t\n\t\tif(index == this.displayRows.length -1){\n\t\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t\t}\n\t\t\n\t\treturn output;\n\t}\n\t\n\tgetDisplayRows(index){\n\t\tif(typeof index == \"undefined\"){\n\t\t\treturn this.displayRows.length ? this.displayRows[this.displayRows.length -1] : [];\n\t\t}else{\n\t\t\treturn this.displayRows[index] || [];\n\t\t}\n\t}\n\t\n\tgetVisibleRows(chain, viewable){\n\t\tvar rows =  Object.assign([], this.renderer.visibleRows(!viewable));\n\t\t\n\t\tif(chain){\n\t\t\trows = this.chain(\"rows-visible\", [viewable], rows, rows);\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t//repeat action accross display rows\n\tdisplayRowIterator(callback){\n\t\tthis.activeRowsPipeline.forEach(callback);\n\t\tthis.displayRows.forEach(callback);\n\t\t\n\t\tthis.displayRowsCount = this.displayRows[this.displayRows.length -1].length;\n\t}\n\t\n\t//return only actual rows (not group headers etc)\n\tgetRows(type){\n\t\tvar rows;\n\t\t\n\t\tswitch(type){\n\t\t\tcase \"active\":\n\t\t\trows = this.activeRows;\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"display\":\n\t\t\trows = this.table.rowManager.getDisplayRows();\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"visible\":\n\t\t\trows = this.getVisibleRows(false, true);\n\t\t\tbreak;\n\t\t\t\n\t\t\tdefault:\n\t\t\trows = this.chain(\"rows-retrieve\", type, null, this.rows) || this.rows;\n\t\t}\n\t\t\n\t\treturn rows;\n\t}\n\t\n\t///////////////// Table Rendering /////////////////\n\t//trigger rerender of table in current position\n\treRenderInPosition(callback){\n\t\tif(this.redrawBlock){\n\t\t\tif(callback){\n\t\t\t\tcallback();\n\t\t\t}else{\n\t\t\t\tthis.redrawBlockRenderInPosition = true;\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderer.rerenderRows(callback);\n\t\t}\n\t}\n\t\n\tinitializeRenderer(){\n\t\tvar renderClass;\n\t\t\n\t\tvar renderers = {\n\t\t\t\"virtual\": RendererVirtualDomVertical,\n\t\t\t\"basic\": RendererBasicVertical,\n\t\t};\n\t\t\n\t\tif(typeof this.table.options.renderVertical === \"string\"){\n\t\t\trenderClass = renderers[this.table.options.renderVertical];\n\t\t}else{\n\t\t\trenderClass = this.table.options.renderVertical;\n\t\t}\n\t\t\n\t\tif(renderClass){\n\t\t\tthis.renderer = new renderClass(this.table, this.element, this.tableElement);\n\t\t\tthis.renderer.initialize();\n\t\t\t\n\t\t\tif((this.table.element.clientHeight || this.table.options.height)){\n\t\t\t\tthis.fixedHeight = true;\n\t\t\t}else{\n\t\t\t\tthis.fixedHeight = false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Unable to find matching renderer:\", table.options.renderVertical);\n\t\t}\n\t}\n\t\n\tgetRenderMode(){\n\t\treturn this.renderMode;\n\t}\n\t\n\trenderTable(){\n\t\tthis.dispatchExternal(\"renderStarted\");\n\t\t\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tthis._clearTable();\n\t\t\n\t\tif(this.displayRowsCount){\n\t\t\tthis.renderer.renderRows();\n\t\t\t\n\t\t\tif(this.firstRender){\n\t\t\t\tthis.firstRender = false;\n\t\t\t\tthis.layoutRefresh();\n\t\t\t}\n\t\t}else{\n\t\t\tthis.renderEmptyScroll();\n\t\t}\n\t\t\n\t\tif(!this.fixedHeight){\n\t\t\tthis.adjustTableSize();\n\t\t}\n\t\t\n\t\tthis.dispatch(\"table-layout\");\n\t\t\n\t\tif(!this.displayRowsCount){\n\t\t\tthis._showPlaceholder();\n\t\t}\n\t\t\n\t\tthis.dispatchExternal(\"renderComplete\");\n\t}\n\t\n\t//show scrollbars on empty table div\n\trenderEmptyScroll(){\n\t\tif(this.placeholder){\n\t\t\tthis.tableElement.style.display = \"none\";\n\t\t}else{\n\t\t\tthis.tableElement.style.minWidth = this.table.columnManager.getWidth() + \"px\";\n\t\t\t// this.tableElement.style.minHeight = \"1px\";\n\t\t\t// this.tableElement.style.visibility = \"hidden\";\n\t\t}\n\t}\n\t\n\t_clearTable(){\n\t\tvar element = this.tableElement;\n\t\t\n\t\tthis._clearPlaceholder();\n\t\t\n\t\tthis.scrollTop = 0;\n\t\tthis.scrollLeft = 0;\n\t\t\n\t\tthis.renderer.clearRows();\n\t}\n\t\n\t_showPlaceholder(){\n\t\tif(this.placeholder){\n\t\t\tthis.placeholder.setAttribute(\"tabulator-render-mode\", this.renderMode);\n\t\t\t\n\t\t\tthis.getElement().appendChild(this.placeholder);\n\t\t\tthis._positionPlaceholder();\n\t\t}\n\t}\n\t\n\t_clearPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.parentNode.removeChild(this.placeholder);\n\t\t}\n\t}\n\t\n\t_positionPlaceholder(){\n\t\tif(this.placeholder && this.placeholder.parentNode){\n\t\t\tthis.placeholder.style.width = this.table.columnManager.getWidth() + \"px\";\n\t\t\tthis.placeholderContents.style.width = this.table.rowManager.element.clientWidth + \"px\";\n\t\t\tthis.placeholderContents.style.marginLeft = this.scrollLeft + \"px\";\n\t\t}\n\t}\n\t\n\tstyleRow(row, index){\n\t\tvar rowEl = row.getElement();\n\t\t\n\t\tif(index % 2){\n\t\t\trowEl.classList.add(\"tabulator-row-even\");\n\t\t\trowEl.classList.remove(\"tabulator-row-odd\");\n\t\t}else{\n\t\t\trowEl.classList.add(\"tabulator-row-odd\");\n\t\t\trowEl.classList.remove(\"tabulator-row-even\");\n\t\t}\n\t}\n\t\n\t//normalize height of active rows\n\tnormalizeHeight(){\n\t\tthis.activeRows.forEach(function(row){\n\t\t\trow.normalizeHeight();\n\t\t});\n\t}\n\t\n\t//adjust the height of the table holder to fit in the Tabulator element\n\tadjustTableSize(){\n\t\tvar initialHeight = this.element.clientHeight,\n\t\tmodExists;\n\t\t\n\t\tif(this.renderer.verticalFillMode === \"fill\"){\n\t\t\tlet otherHeight =  Math.floor(this.table.columnManager.getElement().getBoundingClientRect().height + (this.table.footerManager && this.table.footerManager.active && !this.table.footerManager.external ? this.table.footerManager.getElement().getBoundingClientRect().height : 0));\n\t\t\t\n\t\t\tif(this.fixedHeight){\n\t\t\t\tthis.element.style.minHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.height = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t\tthis.element.style.maxHeight = \"calc(100% - \" + otherHeight + \"px)\";\n\t\t\t}else{\n\t\t\t\tthis.element.style.height = \"\";\n\t\t\t\tthis.element.style.height = (this.table.element.clientHeight - otherHeight) + \"px\";\n\t\t\t\tthis.element.scrollTop = this.scrollTop;\n\t\t\t}\n\t\t\t\n\t\t\tthis.renderer.resize();\n\t\t\t\n\t\t\t//check if the table has changed size when dealing with variable height tables\n\t\t\tif(!this.fixedHeight && initialHeight != this.element.clientHeight){\n\t\t\t\tif(this.subscribed(\"table-resize\")){\n\t\t\t\t\tthis.dispatch(\"table-resize\");\n\t\t\t\t}else{\n\t\t\t\t\tthis.redraw();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis._positionPlaceholder();\n\t}\n\t\n\t//renitialize all rows\n\treinitialize(){\n\t\tthis.rows.forEach(function(row){\n\t\t\trow.reinitialize(true);\n\t\t});\n\t}\n\t\n\t//prevent table from being redrawn\n\tblockRedraw (){\n\t\tthis.redrawBlock = true;\n\t\tthis.redrawBlockRestoreConfig = false;\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw (){\n\t\tthis.redrawBlock = false;\n\t\t\n\t\tif(this.redrawBlockRestoreConfig){\n\t\t\tthis.refreshActiveData(this.redrawBlockRestoreConfig.handler, this.redrawBlockRestoreConfig.skipStage, this.redrawBlockRestoreConfig.renderInPosition)\n\t\t\t\n\t\t\tthis.redrawBlockRestoreConfig = false;\n\t\t}else{\n\t\t\tif(this.redrawBlockRenderInPosition){\n\t\t\t\tthis.reRenderInPosition();\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.redrawBlockRenderInPosition = false;\n\t}\n\t\n\t//redraw table\n\tredraw (force){\n\t\tvar pos = 0,\n\t\tleft = this.scrollLeft;\n\t\t\n\t\tthis.adjustTableSize();\n\t\t\n\t\tthis.table.tableWidth = this.table.element.clientWidth;\n\t\t\n\t\tif(!force){\n\t\t\tthis.reRenderInPosition();\n\t\t\tthis.scrollHorizontal(left);\n\t\t}else{\n\t\t\tthis.renderTable();\n\t\t}\n\t}\n\t\n\tresetScroll(){\n\t\tthis.element.scrollLeft = 0;\n\t\tthis.element.scrollTop = 0;\n\t\t\n\t\tif(this.table.browser === \"ie\"){\n\t\t\tvar event = document.createEvent(\"Event\");\n\t\t\tevent.initEvent(\"scroll\", false, true);\n\t\t\tthis.element.dispatchEvent(event);\n\t\t}else{\n\t\t\tthis.element.dispatchEvent(new Event('scroll'));\n\t\t}\n\t}\n}","import CoreFeature from './CoreFeature.js';\n\nexport default class FooterManager extends CoreFeature{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.active = false;\n\t\tthis.element = this.createElement(); //containing element\n\t\tthis.containerElement = this.createContainerElement(); //containing element\n\t\tthis.external = false;\n\t}\n\n\tinitialize(){\n\t\tthis.initializeElement();\n\t}\n\n\tcreateElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer\");\n\n\t\treturn el;\n\t}\n\n\t\n\tcreateContainerElement(){\n\t\tvar el = document.createElement(\"div\");\n\n\t\tel.classList.add(\"tabulator-footer-contents\");\n\n\t\tthis.element.appendChild(el);\n\n\t\treturn el;\n\t}\n\n\tinitializeElement(){\n\t\tif(this.table.options.footerElement){\n\n\t\t\tswitch(typeof this.table.options.footerElement){\n\t\t\t\tcase \"string\":\n\t\t\t\tif(this.table.options.footerElement[0] === \"<\"){\n\t\t\t\t\tthis.containerElement.innerHTML = this.table.options.footerElement;\n\t\t\t\t}else{\n\t\t\t\t\tthis.external = true;\n\t\t\t\t\tthis.containerElement = document.querySelector(this.table.options.footerElement);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\tthis.element = this.table.options.footerElement;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tappend(element){\n\t\tthis.activate();\n\n\t\tthis.containerElement.appendChild(element);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tprepend(element){\n\t\tthis.activate();\n\n\t\tthis.element.insertBefore(element, this.element.firstChild);\n\t\tthis.table.rowManager.adjustTableSize();\n\t}\n\n\tremove(element){\n\t\telement.parentNode.removeChild(element);\n\t\tthis.deactivate();\n\t}\n\n\tdeactivate(force){\n\t\tif(!this.element.firstChild || force){\n\t\t\tif(!this.external){\n\t\t\t\tthis.element.parentNode.removeChild(this.element);\n\t\t\t}\n\t\t\tthis.active = false;\n\t\t}\n\t}\n\n\tactivate(){\n\t\tif(!this.active){\n\t\t\tthis.active = true;\n\t\t\tif(!this.external){\n\t\t\t\tthis.table.element.appendChild(this.getElement());\n\t\t\t\tthis.table.element.style.display = '';\n\t\t\t}\n\t\t}\n\t}\n\n\tredraw(){\n\t\tthis.dispatch(\"footer-redraw\")\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\nimport Row from '../row/Row.js';\n\nexport default class InteractionManager extends CoreFeature {\n\t\n\tconstructor (table){\n\t\tsuper(table);\n\t\t\n\t\tthis.el = null;\n\t\t\n\t\tthis.abortClasses = [\"tabulator-headers\", \"tabulator-table\"];\n\t\t\n\t\tthis.previousTargets = {};\n\t\t\n\t\tthis.listeners = [\n\t\t\t\"click\",\n\t\t\t\"dblclick\",\n\t\t\t\"contextmenu\",\n\t\t\t\"mouseenter\",\n\t\t\t\"mouseleave\",\n\t\t\t\"mouseover\",\n\t\t\t\"mouseout\",\n\t\t\t\"mousemove\",\n\t\t\t\"touchstart\",\n\t\t\t\"touchend\",\n\t\t];\n\t\t\n\t\tthis.componentMap = {\n\t\t\t\"tabulator-cell\":\"cell\",\n\t\t\t\"tabulator-row\":\"row\",\n\t\t\t\"tabulator-group\":\"group\",\n\t\t\t\"tabulator-col\":\"column\",\n\t\t};\n\t\t\n\t\tthis.pseudoTrackers = {\n\t\t\t\"row\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"cell\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"group\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t\t\"column\":{\n\t\t\t\tsubscriber:null,\n\t\t\t\ttarget:null,\n\t\t\t},\n\t\t}\n\t\t\n\t\tthis.pseudoTracking = false;\n\t}\n\t\n\tinitialize(){\n\t\tthis.el = this.table.element;\n\t\t\n\t\tthis.buildListenerMap();\n\t\tthis.bindSubscriptionWatchers();\n\t}\n\t\n\tbuildListenerMap(){\n\t\tvar listenerMap = {};\n\t\t\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistenerMap[listener] = {\n\t\t\t\thandler:null,\n\t\t\t\tcomponents:[],\n\t\t\t}\n\t\t})\n\t\t\n\t\tthis.listeners = listenerMap;\n\t}\n\t\n\tbindPseudoEvents(){\n\t\tObject.keys(this.pseudoTrackers).forEach((key) => {\n\t\t\tthis.pseudoTrackers[key].subscriber = this.pseudoMouseEnter.bind(this, key);\n\t\t\tthis.subscribe(key + \"-mouseover\", this.pseudoTrackers[key].subscriber);\n\t\t});\n\t\t\n\t\tthis.pseudoTracking = true;\n\t}\n\t\n\tpseudoMouseEnter(key, e, target){\n\t\tif(this.pseudoTrackers[key].target !== target){\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, this.pseudoTrackers[key].target);\n\t\t\t}\n\t\t\t\n\t\t\tthis.pseudoMouseLeave(key, e);\n\t\t\t\n\t\t\tthis.pseudoTrackers[key].target = target;\n\t\t\t\n\t\t\tthis.dispatch(key + \"-mouseenter\", e, target);\n\t\t}\n\t}\n\t\n\tpseudoMouseLeave(key, e){\n\t\tvar leaveList = Object.keys(this.pseudoTrackers),\n\t\tlinkedKeys = {\n\t\t\t\"row\":[\"cell\"],\n\t\t\t\"cell\":[\"row\"],\n\t\t};\n\t\t\n\t\tleaveList = leaveList.filter((item) => {\n\t\t\tvar links = linkedKeys[key];\n\t\t\treturn item !== key && (!links || (links && !links.includes(item)));\n\t\t});\n\t\t\n\t\t\n\t\tleaveList.forEach((key) => {\n\t\t\tvar target = this.pseudoTrackers[key].target;\n\t\t\t\n\t\t\tif(this.pseudoTrackers[key].target){\n\t\t\t\tthis.dispatch(key + \"-mouseleave\", e, target);\n\t\t\t\t\n\t\t\t\tthis.pseudoTrackers[key].target = null;\n\t\t\t}\n\t\t});\n\t}\n\t\n\t\n\tbindSubscriptionWatchers(){\n\t\tvar listeners = Object.keys(this.listeners),\n\t\tcomponents = Object.values(this.componentMap);\n\t\t\n\t\tfor(let comp of components){\n\t\t\tfor(let listener of listeners){\n\t\t\t\tlet key = comp + \"-\" + listener;\n\t\t\t\t\n\t\t\t\tthis.subscriptionChange(key, this.subscriptionChanged.bind(this, comp, listener));\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.subscribe(\"table-destroy\", this.clearWatchers.bind(this))\n\t}\n\t\n\tsubscriptionChanged(component, key, added){\n\t\tvar listener = this.listeners[key].components,\n\t\tindex = listener.indexOf(component),\n\t\tchanged = false;\n\t\t\n\t\tif(added){\n\t\t\tif(index === -1){\n\t\t\t\tlistener.push(component);\n\t\t\t\tchanged = true;\n\t\t\t}\n\t\t}else{\n\t\t\tif(!this.subscribed(component + \"-\" + key)){\n\t\t\t\tif(index > -1){\n\t\t\t\t\tlistener.splice(index, 1);\n\t\t\t\t\tchanged = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tif((key === \"mouseenter\" || key === \"mouseleave\") && !this.pseudoTracking){\n\t\t\tthis.bindPseudoEvents();\n\t\t}\n\t\t\n\t\tif(changed){\n\t\t\tthis.updateEventListeners();\n\t\t}\n\t}\n\t\n\tupdateEventListeners(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.components.length){\n\t\t\t\tif(!listener.handler){\n\t\t\t\t\tlistener.handler = this.track.bind(this, key);\n\t\t\t\t\tthis.el.addEventListener(key, listener.handler)\n\t\t\t\t\t// this.el.addEventListener(key, listener.handler, {passive: true})\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tif(listener.handler){\n\t\t\t\t\tthis.el.removeEventListener(key, listener.handler)\n\t\t\t\t\tlistener.handler = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\t\n\ttrack(type, e){\n\t\tvar path = (e.composedPath && e.composedPath()) || e.path;\n\t\t\n\t\tvar targets = this.findTargets(path);\n\t\ttargets = this.bindComponents(type, targets);\n\t\t\n\t\tthis.triggerEvents(type, e, targets);\n\t\t\n\t\tif(this.pseudoTracking && (type == \"mouseover\" || type == \"mouseleave\") && !Object.keys(targets).length){\n\t\t\tthis.pseudoMouseLeave(\"none\", e);\n\t\t}\n\t}\n\t\n\tfindTargets(path){\n\t\tvar targets = {};\n\t\t\n\t\tlet componentMap = Object.keys(this.componentMap);\n\t\t\n\t\tfor (let el of path) {\n\t\t\tlet classList = el.classList ? [...el.classList] : [];\n\t\t\t\n\t\t\tlet abort = classList.filter((item) => {\n\t\t\t\treturn this.abortClasses.includes(item);\n\t\t\t})\n\t\t\t\n\t\t\tif(abort.length){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\t\n\t\t\tlet elTargets = classList.filter((item) => {\n\t\t\t\treturn componentMap.includes(item);\n\t\t\t})\n\t\t\t\n\t\t\tfor (let target of elTargets) {\n\t\t\t\ttargets[this.componentMap[target]] = el;\n\t\t\t}\n\t\t}\n\t\t\n\t\tif(targets.group && targets.group === targets.row){\n\t\t\tdelete targets.row;\n\t\t}\n\t\t\n\t\treturn targets;\n\t}\n\t\n\tbindComponents(type, targets){\n\t\t//ensure row component is looked up before cell\n\t\tvar keys = Object.keys(targets).reverse(),\n\t\tlistener = this.listeners[type],\n\t\ttargetMatches = {};\n\t\t\n\t\tfor(let key of keys){\n\t\t\tlet component;\n\t\t\tlet target = targets[key];\n\t\t\tlet previousTarget = this.previousTargets[key];\n\t\t\t\n\t\t\tif(previousTarget && previousTarget.target === target){\n\t\t\t\tcomponent = previousTarget.component;\n\t\t\t}else{\n\t\t\t\tswitch(key){\n\t\t\t\t\tcase \"row\":\n\t\t\t\t\tcase \"group\":\n\t\t\t\t\tif(listener.components.includes(\"row\") || listener.components.includes(\"cell\") || listener.components.includes(\"group\")){\n\t\t\t\t\t\tlet rows = this.table.rowManager.getVisibleRows(true);\n\t\t\t\t\t\t\n\t\t\t\t\t\tcomponent = rows.find((row) => {\n\t\t\t\t\t\t\treturn row.getElement() === target;\n\t\t\t\t\t\t});\n\t\t\t\t\t\t\n\t\t\t\t\t\tif(targets[\"row\"] && targets[\"row\"].parentNode && targets[\"row\"].parentNode.closest(\".tabulator-row\")){\n\t\t\t\t\t\t\ttargets[key] = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t\t\n\t\t\t\t\tcase \"column\":\n\t\t\t\t\tif(listener.components.includes(\"column\")){\n\t\t\t\t\t\tcomponent = this.table.columnManager.findColumn(target);\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\t\t\n\t\t\t\t\tcase \"cell\":\n\t\t\t\t\tif(listener.components.includes(\"cell\")){\n\t\t\t\t\t\tif(targets[\"row\"] instanceof Row){\n\t\t\t\t\t\t\tcomponent = targets[\"row\"].findCell(target);\n\t\t\t\t\t\t}else{\t\n\t\t\t\t\t\t\tif(targets[\"row\"]){\n\t\t\t\t\t\t\t\tconsole.warn(\"Event Target Lookup Error - The row this cell is attached to cannot be found, has the table been reinitialized without being destroyed first?\")\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tif(component){\n\t\t\t\ttargets[key] = component;\n\t\t\t\ttargetMatches[key] = {\n\t\t\t\t\ttarget:target,\n\t\t\t\t\tcomponent:component,\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t\n\t\tthis.previousTargets = targetMatches;\n\t\t\n\t\treturn targets;\n\t}\n\t\n\ttriggerEvents(type, e, targets){\n\t\tvar listener = this.listeners[type];\n\t\t\n\t\tfor(let key in targets){\n\t\t\tif(targets[key] && listener.components.includes(key)){\n\t\t\t\tthis.dispatch(key + \"-\" + type, e, targets[key]);\n\t\t\t}\n\t\t}\n\t}\n\t\n\tclearWatchers(){\n\t\tfor(let key in this.listeners){\n\t\t\tlet listener = this.listeners[key];\n\t\t\t\n\t\t\tif(listener.handler){\n\t\t\t\tthis.el.removeEventListener(key, listener.handler)\n\t\t\t\tlistener.handler = null;\n\t\t\t}\n\t\t}\n\t}\n}","export default class ComponentFunctionBinder{\n\n\tconstructor(table){\n\t\tthis.table = table;\n\n\t\tthis.bindings = {};\n\t}\n\n\tbind(type, funcName, handler){\n\t\tif(!this.bindings[type]){\n\t\t\tthis.bindings[type] = {};\n\t\t}\n\n\t\tif(this.bindings[type][funcName]){\n\t\t\tconsole.warn(\"Unable to bind component handler, a matching function name is already bound\", type, funcName, handler)\n\t\t}else{\n\t\t\tthis.bindings[type][funcName] = handler;\n\t\t}\n\t}\n\n\thandle(type, component, name){\n\t\tif(this.bindings[type] && this.bindings[type][name] && typeof this.bindings[type][name].bind === 'function'){\n\t\t\treturn this.bindings[type][name].bind(null, component);\n\t\t}else{\n\t\t\tif(name !== \"then\" && typeof name === \"string\" && !name.startsWith(\"_\")){\n\t\t\t\t\tconsole.error(\"The \" + type + \" component does not have a \" + name + \" function, have you checked that you have the correct Tabulator module installed?\")\n\t\t\t}\n\t\t}\n\t}\n}\n","import CoreFeature from '../CoreFeature.js';\n\nexport default class DataLoader extends CoreFeature{\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.requestOrder = 0; //prevent requests coming out of sequence if overridden by another load request\n\t\tthis.loading = false;\n\t}\n\n\tinitialize(){}\n\n\tload(data, params, config, replace, silent){\n\t\tvar requestNo = ++this.requestOrder;\n\n\t\tthis.dispatchExternal(\"dataLoading\", data);\n\n\t\t//parse json data to array\n\t\tif (data && (data.indexOf(\"{\") == 0 || data.indexOf(\"[\") == 0)){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\n\t\tif(this.confirm(\"data-loading\", [data, params, config, silent])){\n\t\t\tthis.loading = true;\n\n\t\t\tif(!silent){\n\t\t\t\tthis.alertLoader();\n\t\t\t}\n\n\t\t\t//get params for request\n\t\t\tparams = this.chain(\"data-params\", [data, config, silent], params || {}, params || {});\n\n\t\t\tparams = this.mapParams(params, this.table.options.dataSendParams);\n\n\t\t\tvar result = this.chain(\"data-load\", [data, params, config, silent], false, Promise.resolve([]));\n\t\t\t\n\t\t\treturn result.then((response) => {\n\t\t\t\tif(!Array.isArray(response) && typeof response == \"object\"){\n\t\t\t\t\tresponse = this.mapParams(response, this.objectInvert(this.table.options.dataReceiveParams));\n\t\t\t\t}\n\n\t\t\t\tvar rowData = this.chain(\"data-loaded\", response, null, response);\n\n\t\t\t\tif(requestNo == this.requestOrder){\n\t\t\t\t\tthis.clearAlert();\n\n\t\t\t\t\tif(rowData !== false){\n\t\t\t\t\t\tthis.dispatchExternal(\"dataLoaded\", rowData);\n\t\t\t\t\t\tthis.table.rowManager.setData(rowData,  replace, !replace);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Data Load Response Blocked - An active data load request was blocked by an attempt to change table data while the request was being made\");\n\t\t\t\t}\n\t\t\t}).catch((error) => {\n\t\t\t\tconsole.error(\"Data Load Error: \", error);\n\t\t\t\tthis.dispatchExternal(\"dataLoadError\", error);\n\n\t\t\t\tif(!silent){\n\t\t\t\t\tthis.alertError();\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tthis.clearAlert();\n\t\t\t\t}, this.table.options.dataLoaderErrorTimeout);\n\t\t\t})\n\t\t\t.finally(() => {\n\t\t\t\tthis.loading = false;\n\t\t\t})\n\t\t}else{\n\t\t\tthis.dispatchExternal(\"dataLoaded\", data);\n\n\t\t\tif(!data){\n\t\t\t\tdata = [];\n\t\t\t}\n\n\t\t\tthis.table.rowManager.setData(data, replace, !replace);\n\t\t\treturn Promise.resolve();\n\t\t}\n\t}\n\n\tmapParams(params, map){\n\t\tvar output = {};\n\n\t\tfor(let key in params){\n\t\t\toutput[map.hasOwnProperty(key) ? map[key] : key] = params[key];\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tobjectInvert(obj){\n\t\tvar output = {};\n\n\t\tfor(let key in obj){\n\t\t\toutput[obj[key]] = key;\n\t\t}\n\n\t\treturn output;\n\t}\n\n\tblockActiveLoad(){\n\t\tthis.requestOrder++;\n\t}\n\n\talertLoader(){\n\t\tvar shouldLoad = typeof this.table.options.dataLoader === \"function\" ? this.table.options.dataLoader() : this.table.options.dataLoader;\n\n\t\tif(shouldLoad){\n\t\t\tthis.table.alertManager.alert(this.table.options.dataLoaderLoading || this.langText(\"data|loading\"));\n\t\t}\n\t}\n\n\talertError(){\n\t\tthis.table.alertManager.alert(this.table.options.dataLoaderError || this.langText(\"data|error\"), \"error\");\n\t}\n\n\tclearAlert(){\n\t\tthis.table.alertManager.clear();\n\t}\n}","export default class ExternalEventBus {\n\n\tconstructor(table, optionsList, debug){\n\t\tthis.table = table;\n\t\tthis.events = {};\n\t\tthis.optionsList = optionsList || {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifiySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push(callback);\n\n\t\tthis._notifiySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tdelete this.events[key];\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifiySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_notifiySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift(),\n\t\tresult;\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((callback, i) => {\n\t\t\t\tlet callResult = callback.apply(this.table, args);\n\n\t\t\t\tif(!i){\n\t\t\t\t\tresult = callResult;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"ExternalEvent:\" + args[0];\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments)\n\t}\n}","export default class InternalEventBus {\n\n\tconstructor(debug){\n\t\tthis.events = {};\n\t\tthis.subscriptionNotifiers = {};\n\n\t\tthis.dispatch = debug ? this._debugDispatch.bind(this) : this._dispatch.bind(this);\n\t\tthis.chain = debug ? this._debugChain.bind(this) : this._chain.bind(this);\n\t\tthis.confirm = debug ? this._debugConfirm.bind(this) : this._confirm.bind(this);\n\t\tthis.debug = debug;\n\t}\n\n\tsubscriptionChange(key, callback){\n\t\tif(!this.subscriptionNotifiers[key]){\n\t\t\tthis.subscriptionNotifiers[key] = [];\n\t\t}\n\n\t\tthis.subscriptionNotifiers[key].push(callback);\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis._notifiySubscriptionChange(key, true);\n\t\t}\n\t}\n\n\tsubscribe(key, callback, priority = 10000){\n\t\tif(!this.events[key]){\n\t\t\tthis.events[key] = [];\n\t\t}\n\n\t\tthis.events[key].push({callback, priority});\n\n\t\tthis.events[key].sort((a, b) => {\n\t\t\treturn a.priority - b.priority;\n\t\t});\n\n\t\tthis._notifiySubscriptionChange(key, true);\n\t}\n\n\tunsubscribe(key, callback){\n\t\tvar index;\n\n\t\tif(this.events[key]){\n\t\t\tif(callback){\n\t\t\t\tindex = this.events[key].findIndex((item) => {\n\t\t\t\t\treturn item.callback === callback;\n\t\t\t\t});\n\n\t\t\t\tif(index > -1){\n\t\t\t\t\tthis.events[key].splice(index, 1);\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Cannot remove event, no matching event found:\", key, callback);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Cannot remove event, no events set on:\", key);\n\t\t\treturn;\n\t\t}\n\n\t\tthis._notifiySubscriptionChange(key, false);\n\t}\n\n\tsubscribed(key){\n\t\treturn this.events[key] && this.events[key].length;\n\t}\n\n\t_chain(key, args, initialValue, fallback){\n\t\tvar value = initialValue;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tvalue = subscriber.callback.apply(this, args.concat([value]));\n\t\t\t});\n\n\t\t\treturn value;\n\t\t}else{\n\t\t\treturn typeof fallback === \"function\" ? fallback() : fallback;\n\t\t}\n\t}\n\n\t_confirm(key, args){\n\t\tvar confirmed = false;\n\n\t\tif(!Array.isArray(args)){\n\t\t\targs = [args];\n\t\t}\n\n\t\tif(this.subscribed(key)){\n\t\t\tthis.events[key].forEach((subscriber, i) => {\n\t\t\t\tif(subscriber.callback.apply(this, args)){\n\t\t\t\t\tconfirmed = true;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn confirmed;\n\t}\n\n\t_notifiySubscriptionChange(key, subscribed){\n\t\tvar notifiers = this.subscriptionNotifiers[key];\n\n\t\tif(notifiers){\n\t\t\tnotifiers.forEach((callback)=>{\n\t\t\t\tcallback(subscribed);\n\t\t\t});\n\t\t}\n\t}\n\n\t_dispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\n\t\tif(this.events[key]){\n\t\t\tthis.events[key].forEach((subscriber) => {\n\t\t\t\tlet callResult = subscriber.callback.apply(this, args);\n\t\t\t});\n\t\t}\n\t}\n\n\t_debugDispatch(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._dispatch(...arguments);\n\t}\n\n\t_debugChain(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._chain(...arguments);\n\t}\n\n\t_debugConfirm(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args[0];\n\n\t\targs[0] = \"InternalEvent:\" + key;\n\n\t\tif(this.debug === true || this.debug.includes(key)){\n\t\t\tconsole.log(...args);\n\t\t}\n\n\t\treturn this._confirm(...arguments);\n\t}\n}","import Tabulator from '../Tabulator.js';\n\nclass TableRegistry {\n\n\tstatic register(table){\n\t\tTableRegistry.tables.push(table);\n\t}\n\n\tstatic deregister(table){\n\t\tvar index = TableRegistry.tables.indexOf(table);\n\n\t\tif(index > -1){\n\t\t\tTableRegistry.tables.splice(index, 1);\n\t\t}\n\t}\n\n\tstatic lookupTable(query, silent){\n\t\tvar results = [],\n\t\tmatches, match;\n\n\t\tif(typeof query === \"string\"){\n\t\t\tmatches = document.querySelectorAll(query);\n\n\t\t\tif(matches.length){\n\t\t\t\tfor(var i = 0; i < matches.length; i++){\n\t\t\t\t\tmatch = TableRegistry.matchElement(matches[i]);\n\n\t\t\t\t\tif(match){\n\t\t\t\t\t\tresults.push(match);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t}else if((typeof HTMLElement !== \"undefined\" && query instanceof HTMLElement) || query instanceof Tabulator){\n\t\t\tmatch = TableRegistry.matchElement(query);\n\n\t\t\tif(match){\n\t\t\t\tresults.push(match);\n\t\t\t}\n\t\t}else if(Array.isArray(query)){\n\t\t\tquery.forEach(function(item){\n\t\t\t\tresults = results.concat(TableRegistry.lookupTable(item));\n\t\t\t});\n\t\t}else{\n\t\t\tif(!silent){\n\t\t\t\tconsole.warn(\"Table Connection Error - Invalid Selector\", query);\n\t\t\t}\n\t\t}\n\n\t\treturn results;\n\t}\n\n\tstatic matchElement(element){\n\t\treturn TableRegistry.tables.find(function(table){\n\t\t\treturn element instanceof Tabulator ? table === element : table.element === element;\n\t\t});\n\t}\n}\n\nTableRegistry.tables = [];\n\nexport default TableRegistry;","//resize columns to fit data they contain and stretch row to fill table, also used for fitDataTable\nexport default function(columns){\n\tcolumns.forEach(function(column){\n\t\tcolumn.reinitializeWidth();\n\t});\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n};","import fitData from './modes/fitData.js';\nimport fitDataGeneral from './modes/fitDataGeneral.js';\nimport fitDataStretch from './modes/fitDataStretch.js';\nimport fitColumns from './modes/fitColumns.js';\n\nexport default {\n\tfitData:fitData,\n\tfitDataFill:fitDataGeneral,\n\tfitDataTable:fitDataGeneral,\n\tfitDataStretch:fitDataStretch,\n\tfitColumns:fitColumns ,\n};","//resize columns to fit data they contain\nexport default function(columns){\n\tthis.table.columnManager.renderer.reinitializeColumnWidths(columns);\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n};","//resize columns to fit data the contain and stretch last column to fill table\nexport default function(columns){\n\tvar colsWidth = 0,\n\ttableWidth = this.table.rowManager.element.clientWidth,\n\tgap = 0,\n\tlastCol = false;\n\n\tcolumns.forEach((column, i) => {\n\t\tif(!column.widthFixed){\n\t\t\tcolumn.reinitializeWidth();\n\t\t}\n\n\t\tif(this.table.options.responsiveLayout ? column.modules.responsive.visible : column.visible){\n\t\t\tlastCol = column;\n\t\t}\n\n\t\tif(column.visible){\n\t\t\tcolsWidth += column.getWidth();\n\t\t}\n\t});\n\n\tif(lastCol){\n\t\tgap = tableWidth - colsWidth + lastCol.getWidth();\n\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tlastCol.setWidth(0);\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\n\t\tif(gap > 0){\n\t\t\tlastCol.setWidth(gap);\n\t\t}else{\n\t\t\tlastCol.reinitializeWidth();\n\t\t}\n\t}else{\n\t\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\t\tthis.table.modules.responsiveLayout.update();\n\t\t}\n\t}\n};","//resize columns to fit\nexport default function(columns){\n\tvar totalWidth = this.table.element.clientWidth; //table element width\n\tvar fixedWidth = 0; //total width of columns with a defined width\n\tvar flexWidth = 0; //total width available to flexible columns\n\tvar flexGrowUnits = 0; //total number of widthGrow blocks accross all columns\n\tvar flexColWidth = 0; //desired width of flexible columns\n\tvar flexColumns = []; //array of flexible width columns\n\tvar fixedShrinkColumns = []; //array of fixed width columns that can shrink\n\tvar flexShrinkUnits = 0; //total number of widthShrink blocks accross all columns\n\tvar overflowWidth = 0; //horizontal overflow width\n\tvar gapFill=0; //number of pixels to be added to final column to close and half pixel gaps\n\n\tfunction calcWidth(width){\n\t\tvar colWidth;\n\n\t\tif(typeof(width) == \"string\"){\n\t\t\tif(width.indexOf(\"%\") > -1){\n\t\t\t\tcolWidth = (totalWidth / 100) * parseInt(width);\n\t\t\t}else{\n\t\t\t\tcolWidth = parseInt(width);\n\t\t\t}\n\t\t}else{\n\t\t\tcolWidth = width;\n\t\t}\n\n\t\treturn colWidth;\n\t}\n\n\t//ensure columns resize to take up the correct amount of space\n\tfunction scaleColumns(columns, freeSpace, colWidth, shrinkCols){\n\n\t\tvar oversizeCols = [],\n\t\toversizeSpace = 0,\n\t\tremainingSpace = 0,\n\t\tnextColWidth = 0,\n\t\tremainingFlexGrowUnits = flexGrowUnits,\n\t\tgap = 0,\n\t\tchangeUnits = 0,\n\t\tundersizeCols = [];\n\n\t\tfunction calcGrow(col){\n\t\t\treturn (colWidth * (col.column.definition.widthGrow || 1));\n\t\t}\n\n\t\tfunction calcShrink(col){\n\t\t\treturn  (calcWidth(col.width) - (colWidth * (col.column.definition.widthShrink || 0)))\n\t\t}\n\n\t\tcolumns.forEach(function(col, i){\n\t\t\tvar width = shrinkCols ? calcShrink(col) : calcGrow(col);\n\t\t\tif(col.column.minWidth >= width){\n\t\t\t\toversizeCols.push(col);\n\t\t\t}else{\n\t\t\t\tif(col.column.maxWidth && col.column.maxWidth < width){\n\t\t\t\t\tcol.width = col.column.maxWidth;\n\t\t\t\t\tfreeSpace -= col.column.maxWidth;\n\n\t\t\t\t\tremainingFlexGrowUnits -= shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\n\t\t\t\t\tif(remainingFlexGrowUnits){\n\t\t\t\t\t\tcolWidth = Math.floor(freeSpace/remainingFlexGrowUnits);\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tundersizeCols.push(col);\n\t\t\t\t\tchangeUnits += shrinkCols ? (col.column.definition.widthShrink || 1) : (col.column.definition.widthGrow || 1);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tif(oversizeCols.length){\n\t\t\toversizeCols.forEach(function(col){\n\t\t\t\toversizeSpace += shrinkCols ?  col.width - col.column.minWidth : col.column.minWidth;\n\t\t\t\tcol.width = col.column.minWidth;\n\t\t\t});\n\n\t\t\tremainingSpace = freeSpace - oversizeSpace;\n\n\t\t\tnextColWidth = changeUnits ? Math.floor(remainingSpace/changeUnits) : remainingSpace;\n\n\t\t\tgap = remainingSpace - (nextColWidth * changeUnits);\n\n\t\t\tgap += scaleColumns(undersizeCols, remainingSpace, nextColWidth, shrinkCols);\n\t\t}else{\n\t\t\tgap = changeUnits ? freeSpace - (Math.floor(freeSpace/changeUnits) * changeUnits) : freeSpace;\n\n\t\t\tundersizeCols.forEach(function(column){\n\t\t\t\tcolumn.width = shrinkCols ? calcShrink(column) : calcGrow(column);\n\t\t\t});\n\t\t}\n\n\t\treturn gap;\n\t}\n\n\tif(this.table.options.responsiveLayout && this.table.modExists(\"responsiveLayout\", true)){\n\t\tthis.table.modules.responsiveLayout.update();\n\t}\n\n\t//adjust for vertical scrollbar if present\n\tif(this.table.rowManager.element.scrollHeight > this.table.rowManager.element.clientHeight){\n\t\ttotalWidth -= this.table.rowManager.element.offsetWidth - this.table.rowManager.element.clientWidth;\n\t}\n\n\tcolumns.forEach(function(column){\n\t\tvar width, minWidth, colWidth;\n\n\t\tif(column.visible){\n\n\t\t\twidth = column.definition.width;\n\t\t\tminWidth =  parseInt(column.minWidth);\n\n\t\t\tif(width){\n\n\t\t\t\tcolWidth = calcWidth(width);\n\n\t\t\t\tfixedWidth += colWidth > minWidth ? colWidth : minWidth;\n\n\t\t\t\tif(column.definition.widthShrink){\n\t\t\t\t\tfixedShrinkColumns.push({\n\t\t\t\t\t\tcolumn:column,\n\t\t\t\t\t\twidth:colWidth > minWidth ? colWidth : minWidth\n\t\t\t\t\t});\n\t\t\t\t\tflexShrinkUnits += column.definition.widthShrink;\n\t\t\t\t}\n\n\t\t\t}else{\n\t\t\t\tflexColumns.push({\n\t\t\t\t\tcolumn:column,\n\t\t\t\t\twidth:0,\n\t\t\t\t});\n\t\t\t\tflexGrowUnits += column.definition.widthGrow || 1;\n\t\t\t}\n\t\t}\n\t});\n\n\t//calculate available space\n\tflexWidth = totalWidth - fixedWidth;\n\n\t//calculate correct column size\n\tflexColWidth = Math.floor(flexWidth / flexGrowUnits)\n\n\t//generate column widths\n\tvar gapFill = scaleColumns(flexColumns, flexWidth, flexColWidth, false);\n\n\t//increase width of last column to account for rounding errors\n\tif(flexColumns.length && gapFill > 0){\n\t\tflexColumns[flexColumns.length-1].width += + gapFill;\n\t}\n\n\t//caculate space for columns to be shrunk into\n\tflexColumns.forEach(function(col){\n\t\tflexWidth -= col.width;\n\t});\n\n\toverflowWidth = Math.abs(gapFill) + flexWidth;\n\n\t//shrink oversize columns if there is no available space\n\tif(overflowWidth > 0 && flexShrinkUnits){\n\t\tgapFill = scaleColumns(fixedShrinkColumns, overflowWidth, Math.floor(overflowWidth / flexShrinkUnits), true);\n\t}\n\n\t//decrease width of last column to account for rounding errors\n\tif(fixedShrinkColumns.length){\n\t\tfixedShrinkColumns[fixedShrinkColumns.length-1].width -= gapFill;\n\t}\n\n\tflexColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n\n\tfixedShrinkColumns.forEach(function(col){\n\t\tcol.column.setWidth(col.width);\n\t});\n};","import Module from '../../core/Module.js';\n\nimport defaultModes from './defaults/modes.js';\n\nclass Layout extends Module{\n\n\tconstructor(table){\n\t\tsuper(table, \"layout\");\n\n\t\tthis.mode = null;\n\n\t\tthis.registerTableOption(\"layout\", \"fitData\"); //layout type\n\t\tthis.registerTableOption(\"layoutColumnsOnNewData\", false); //update column widths on setData\n\n\t\tthis.registerColumnOption(\"widthGrow\");\n\t\tthis.registerColumnOption(\"widthShrink\");\n\t}\n\n\t//initialize layout system\n\tinitialize(){\n\t\tvar layout = this.table.options.layout;\n\n\t\tif(Layout.modes[layout]){\n\t\t\tthis.mode = layout;\n\t\t}else{\n\t\t\tconsole.warn(\"Layout Error - invalid mode set, defaulting to 'fitData' : \" + layout);\n\t\t\tthis.mode = 'fitData';\n\t\t}\n\n\t\tthis.table.element.setAttribute(\"tabulator-layout\", this.mode);\n\t}\n\n\tgetMode(){\n\t\treturn this.mode;\n\t}\n\n\t//trigger table layout\n\tlayout(){\n\t\tthis.dispatch(\"layout-refreshing\")\n\t\tLayout.modes[this.mode].call(this, this.table.columnManager.columnsByIndex);\n\n\t\tthis.dispatch(\"layout-refreshed\")\n\t}\n}\n\nLayout.moduleName = \"layout\";\n\n//load defaults\nLayout.modes = defaultModes;\n\nexport default Layout;","import Module from '../../core/Module.js';\n\nimport Helpers from '../../core/tools/Helpers.js';\n\nimport defaultLangs from './defaults/langs.js';\n\nclass Localize extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\n\t\tthis.locale = \"default\"; //current locale\n\t\tthis.lang = false; //current language\n\t\tthis.bindings = {}; //update events to call when locale is changed\n\t\tthis.langList = {};\n\n\t\tthis.registerTableOption(\"locale\", false); //current system language\n\t\tthis.registerTableOption(\"langs\", {});\n\t}\n\n\tinitialize(){\n\t\tthis.langList = Helpers.deepClone(Localize.langs);\n\n\t\tif(this.table.options.columnDefaults.headerFilterPlaceholder !== false){\n\t\t\tthis.setHeaderFilterPlaceholder(this.table.options.columnDefaults.headerFilterPlaceholder);\n\t\t}\n\n\t\tfor(let locale in this.table.options.langs){\n\t\t\tthis.installLang(locale, this.table.options.langs[locale]);\n\t\t}\n\n\t\tthis.setLocale(this.table.options.locale);\n\n\t\tthis.registerTableFunction(\"setLocale\", this.setLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLocale\", this.getLocale.bind(this));\n\t\tthis.registerTableFunction(\"getLang\", this.getLang.bind(this));\n\t}\n\n\t//set header placehoder\n\tsetHeaderFilterPlaceholder(placeholder){\n\t\tthis.langList.default.headerFilters.default = placeholder;\n\t}\n\n\t//set header filter placeholder by column\n\tsetHeaderFilterColumnPlaceholder(column, placeholder){\n\t\tthis.langList.default.headerFilters.columns[column] = placeholder;\n\n\t\tif(this.lang && !this.lang.headerFilters.columns[column]){\n\t\t\tthis.lang.headerFilters.columns[column] = placeholder;\n\t\t}\n\t}\n\n\t//setup a lang description object\n\tinstallLang(locale, lang){\n\t\tif(this.langList[locale]){\n\t\t\tthis._setLangProp(this.langList[locale], lang);\n\t\t}else{\n\t\t\tthis.langList[locale] = lang;\n\t\t}\n\t}\n\n\t_setLangProp(lang, values){\n\t\tfor(let key in values){\n\t\t\tif(lang[key] && typeof lang[key] == \"object\"){\n\t\t\t\tthis._setLangProp(lang[key], values[key])\n\t\t\t}else{\n\t\t\t\tlang[key] = values[key];\n\t\t\t}\n\t\t}\n\t}\n\n\t//set current locale\n\tsetLocale(desiredLocale){\n\t\tdesiredLocale = desiredLocale || \"default\";\n\n\t\t//fill in any matching languge values\n\t\tfunction traverseLang(trans, path){\n\t\t\tfor(var prop in trans){\n\t\t\t\tif(typeof trans[prop] == \"object\"){\n\t\t\t\t\tif(!path[prop]){\n\t\t\t\t\t\tpath[prop] = {};\n\t\t\t\t\t}\n\t\t\t\t\ttraverseLang(trans[prop], path[prop]);\n\t\t\t\t}else{\n\t\t\t\t\tpath[prop] = trans[prop];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//determing correct locale to load\n\t\tif(desiredLocale === true && navigator.language){\n\t\t\t//get local from system\n\t\t\tdesiredLocale = navigator.language.toLowerCase();\n\t\t}\n\n\t\tif(desiredLocale){\n\t\t\t//if locale is not set, check for matching top level locale else use default\n\t\t\tif(!this.langList[desiredLocale]){\n\t\t\t\tlet prefix = desiredLocale.split(\"-\")[0];\n\n\t\t\t\tif(this.langList[prefix]){\n\t\t\t\t\tconsole.warn(\"Localization Error - Exact matching locale not found, using closest match: \", desiredLocale, prefix);\n\t\t\t\t\tdesiredLocale = prefix;\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Localization Error - Matching locale not found, using default: \", desiredLocale);\n\t\t\t\t\tdesiredLocale = \"default\";\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.locale = desiredLocale;\n\n\t\t//load default lang template\n\t\tthis.lang = Helpers.deepClone(this.langList.default || {});\n\n\t\tif(desiredLocale != \"default\"){\n\t\t\ttraverseLang(this.langList[desiredLocale], this.lang);\n\t\t}\n\n\t\tthis.dispatchExternal(\"localized\", this.locale, this.lang);\n\n\t\tthis._executeBindings();\n\t}\n\n\t//get current locale\n\tgetLocale(locale){\n\t\treturn this.locale;\n\t}\n\n\t//get lang object for given local or current if none provided\n\tgetLang(locale){\n\t\treturn locale ? this.langList[locale] : this.lang;\n\t}\n\n\t//get text for current locale\n\tgetText(path, value){\n\t\tvar path = value ? path + \"|\" + value : path,\n\t\tpathArray = path.split(\"|\"),\n\t\ttext = this._getLangElement(pathArray, this.locale);\n\n\t\t// if(text === false){\n\t\t// \tconsole.warn(\"Localization Error - Matching localized text not found for given path: \", path);\n\t\t// }\n\n\t\treturn text || \"\";\n\t}\n\n\t//traverse langs object and find localized copy\n\t_getLangElement(path, locale){\n\t\tvar root = this.lang;\n\n\t\tpath.forEach(function(level){\n\t\t\tvar rootPath;\n\n\t\t\tif(root){\n\t\t\t\trootPath = root[level];\n\n\t\t\t\tif(typeof rootPath != \"undefined\"){\n\t\t\t\t\troot = rootPath;\n\t\t\t\t}else{\n\t\t\t\t\troot = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn root;\n\t}\n\n\t//set update binding\n\tbind(path, callback){\n\t\tif(!this.bindings[path]){\n\t\t\tthis.bindings[path] = [];\n\t\t}\n\n\t\tthis.bindings[path].push(callback);\n\n\t\tcallback(this.getText(path), this.lang);\n\t}\n\n\t//itterate through bindings and trigger updates\n\t_executeBindings(){\n\t\tfor(let path in this.bindings){\n\t\t\tthis.bindings[path].forEach((binding) => {\n\t\t\t\tbinding(this.getText(path), this.lang);\n\t\t\t});\n\t\t}\n\t}\n}\n\nLocalize.moduleName = \"localize\";\n\n//load defaults\nLocalize.langs = defaultLangs;\n\nexport default Localize;","export default {\n\t\"default\":{ //hold default locale text\n\t\t\"groups\":{\n\t\t\t\"item\":\"item\",\n\t\t\t\"items\":\"items\",\n\t\t},\n\t\t\"columns\":{\n\t\t},\n\t\t\"data\":{\n\t\t\t\"loading\":\"Loading\",\n\t\t\t\"error\":\"Error\",\n\t\t},\n\t\t\"pagination\":{\n\t\t\t\"page_size\":\"Page Size\",\n\t\t\t\"page_title\":\"Show Page\",\n\t\t\t\"first\":\"First\",\n\t\t\t\"first_title\":\"First Page\",\n\t\t\t\"last\":\"Last\",\n\t\t\t\"last_title\":\"Last Page\",\n\t\t\t\"prev\":\"Prev\",\n\t\t\t\"prev_title\":\"Prev Page\",\n\t\t\t\"next\":\"Next\",\n\t\t\t\"next_title\":\"Next Page\",\n\t\t\t\"all\":\"All\",\n\t\t\t\"counter\":{\n\t\t\t\t\"showing\": \"Showing\",\n\t\t\t\t\"of\": \"of\",\n\t\t\t\t\"rows\": \"rows\",\n\t\t\t\t\"pages\": \"pages\",\n\t\t\t}\n\t\t},\n\t\t\"headerFilters\":{\n\t\t\t\"default\":\"filter column...\",\n\t\t\t\"columns\":{}\n\t\t}\n\t},\n};","import Module from '../../core/Module.js';\nimport TableRegistry from '../../core/tools/TableRegistry.js';\n\nclass Comms extends Module{\n\n\tconstructor(table){\n\t\tsuper(table);\n\t}\n\n\tinitialize(){\n\t\tthis.registerTableFunction(\"tableComms\", this.receive.bind(this));\n\t}\n\n\tgetConnections(selectors){\n\t\tvar connections = [],\n\t\tconnection;\n\n\t\tconnection = TableRegistry.lookupTable(selectors);\n\n\t\tconnection.forEach((con) =>{\n\t\t\tif(this.table !== con){\n\t\t\t\tconnections.push(con);\n\t\t\t}\n\t\t});\n\n\t\treturn connections;\n\t}\n\n\tsend(selectors, module, action, data){\n\t\tvar connections = this.getConnections(selectors);\n\n\t\tconnections.forEach((connection) => {\n\t\t\tconnection.tableComms(this.table.element, module, action, data);\n\t\t});\n\n\t\tif(!connections.length && selectors){\n\t\t\tconsole.warn(\"Table Connection Error - No tables matching selector found\", selectors);\n\t\t}\n\t}\n\n\treceive(table, module, action, data){\n\t\tif(this.table.modExists(module)){\n\t\t\treturn this.table.modules[module].commsReceived(table, action, data);\n\t\t}else{\n\t\t\tconsole.warn(\"Inter-table Comms Error - no such module:\", module);\n\t\t}\n\t}\n}\n\nComms.moduleName = \"comms\";\n\nexport default Comms;","import * as coreModules from '../modules/core.js';\nimport TableRegistry from './TableRegistry.js';\n\nexport default class ModuleBinder {\n\t\n\tconstructor(tabulator, modules){\n\t\tthis.bindStaticFuctionality(tabulator);\n\t\tthis.bindModules(tabulator, coreModules, true);\n\t\t\n\t\tif(modules){\n\t\t\tthis.bindModules(tabulator, modules);\n\t\t}\n\t}\n\t\n\tbindStaticFuctionality(tabulator){\n\t\ttabulator.moduleBindings = {};\n\t\t\n\t\ttabulator.extendModule = function(name, property, values){\n\t\t\tif(tabulator.moduleBindings[name]){\n\t\t\t\tvar source = tabulator.moduleBindings[name][property];\n\t\t\t\t\n\t\t\t\tif(source){\n\t\t\t\t\tif(typeof values == \"object\"){\n\t\t\t\t\t\tfor(let key in values){\n\t\t\t\t\t\t\tsource[key] = values[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}else{\n\t\t\t\t\t\tconsole.warn(\"Module Error - Invalid value type, it must be an object\");\n\t\t\t\t\t}\n\t\t\t\t}else{\n\t\t\t\t\tconsole.warn(\"Module Error - property does not exist:\", property);\n\t\t\t\t}\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Module Error - module does not exist:\", name);\n\t\t\t}\n\t\t};\n\t\t\n\t\ttabulator.registerModule = function(modules){\n\t\t\tif(!Array.isArray(modules)){\n\t\t\t\tmodules = [modules];\n\t\t\t}\n\t\t\t\n\t\t\tmodules.forEach((mod) => {\n\t\t\t\ttabulator.registerModuleBinding(mod)\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModuleBinding = function(mod){\n\t\t\ttabulator.moduleBindings[mod.moduleName] = mod;\n\t\t};\n\t\t\n\t\ttabulator.findTable = function(query){\n\t\t\tvar results = TableRegistry.lookupTable(query, true);\n\t\t\treturn Array.isArray(results) && !results.length ? false : results;\n\t\t}\n\t\t\n\t\t//ensure that module are bound to instantiated function\n\t\ttabulator.prototype.bindModules = function(){\n\t\t\tvar orderedStartMods = [],\n\t\t\torderedEndMods = [],\n\t\t\tunOrderedMods = [];\n\t\t\t\n\t\t\tthis.modules = {};\n\t\t\t\n\t\t\tfor(var name in tabulator.moduleBindings){\n\t\t\t\tlet mod = tabulator.moduleBindings[name];\n\t\t\t\tlet module = new mod(this);\n\t\t\t\t\n\t\t\t\tthis.modules[name] = module;\n\t\t\t\t\n\t\t\t\tif(mod.prototype.moduleCore){\n\t\t\t\t\tthis.modulesCore.push(module);\n\t\t\t\t}else{\n\t\t\t\t\tif(mod.moduleInitOrder){\n\t\t\t\t\t\tif(mod.moduleInitOrder < 0){\n\t\t\t\t\t\t\torderedStartMods.push(module);\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\torderedEndMods.push(module);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t}else{\n\t\t\t\t\t\tunOrderedMods.push(module);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\torderedStartMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\torderedEndMods.sort((a, b) => a.moduleInitOrder > b.moduleInitOrder ? 1 : -1);\n\t\t\t\n\t\t\tthis.modulesRegular = orderedStartMods.concat(unOrderedMods.concat(orderedEndMods));\n\t\t}\n\t}\n\t\n\tbindModules(tabulator, modules, core){\n\t\tvar mods = Object.values(modules);\n\t\t\n\t\tif(core){\n\t\t\tmods.forEach((mod) => {\n\t\t\t\tmod.prototype.moduleCore = true;\n\t\t\t});\n\t\t}\n\t\t\n\t\ttabulator.registerModule(mods);\n\t}\n}","import CoreFeature from '../CoreFeature.js';\nimport Helpers from './Helpers.js';\n\nexport default class Alert extends CoreFeature{\n    constructor(table){\n        super(table);\n        \n        this.element = this._createAlertElement();\n        this.msgElement = this._createMsgElement();\n        this.type = null;\n        \n        this.element.appendChild(this.msgElement);\n    }\n    \n    _createAlertElement(){\n        var el = document.createElement(\"div\");\n        el.classList.add(\"tabulator-alert\");\n        return el;\n    }\n    \n    _createMsgElement(){\n        var el = document.createElement(\"div\");\n        el.classList.add(\"tabulator-alert-msg\");\n        el.setAttribute(\"role\", \"alert\");\n        return el;\n    }\n    \n    _typeClass(){\n        return \"tabulator-alert-state-\" + this.type;\n    }\n    \n    alert(content, type = \"msg\"){\n        if(content){\n            this.clear();\n            \n            this.type = type;\n            \n            while(this.msgElement.firstChild) this.msgElement.removeChild(this.msgElement.firstChild);\n            \n            this.msgElement.classList.add(this._typeClass());\n            \n            if(typeof content === \"function\"){\n                content = content();\n            }\n            \n            if(content instanceof HTMLElement){\n                this.msgElement.appendChild(content);\n            }else{\n                this.msgElement.innerHTML = content;\n            }\n            \n            this.table.element.appendChild(this.element);\n        }\n    }\n    \n    clear(){\n        if(this.element.parentNode){\n            this.element.parentNode.removeChild(this.element);\n        }\n        \n        this.msgElement.classList.remove(this._typeClass());\n    }\n}","'use strict';\n\nimport defaultOptions from './defaults/options.js';\n\nimport ColumnManager from './ColumnManager.js';\nimport RowManager from './RowManager.js';\nimport FooterManager from './FooterManager.js';\n\nimport InteractionMonitor from './tools/InteractionMonitor.js';\nimport ComponentFunctionBinder from './tools/ComponentFunctionBinder.js';\nimport DataLoader from './tools/DataLoader.js';\n\nimport ExternalEventBus from './tools/ExternalEventBus.js';\nimport InternalEventBus from './tools/InternalEventBus.js';\n\nimport TableRegistry from './tools/TableRegistry.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nimport OptionsList from './tools/OptionsList.js';\n\nimport Alert from './tools/Alert.js';\n\nclass Tabulator {\n\t\n\tconstructor(element, options){\n\t\t\n\t\tthis.options = {};\n\t\t\n\t\tthis.columnManager = null; // hold Column Manager\n\t\tthis.rowManager = null; //hold Row Manager\n\t\tthis.footerManager = null; //holder Footer Manager\n\t\tthis.alertManager = null; //hold Alert Manager\n\t\tthis.vdomHoz  = null; //holder horizontal virtual dom\n\t\tthis.externalEvents = null; //handle external event messaging\n\t\tthis.eventBus = null; //handle internal event messaging\n\t\tthis.interactionMonitor = false; //track user interaction\n\t\tthis.browser = \"\"; //hold current browser type\n\t\tthis.browserSlow = false; //handle reduced functionality for slower browsers\n\t\tthis.browserMobile = false; //check if running on mobile, prevent resize cancelling edit on keyboard appearance\n\t\tthis.rtl = false; //check if the table is in RTL mode\n\t\tthis.originalElement = null; //hold original table element if it has been replaced\n\t\t\n\t\tthis.componentFunctionBinder = new ComponentFunctionBinder(this); //bind component functions\n\t\tthis.dataLoader = false; //bind component functions\n\t\t\n\t\tthis.modules = {}; //hold all modules bound to this table\n\t\tthis.modulesCore = []; //hold core modules bound to this table (for initialization purposes)\n\t\tthis.modulesRegular = []; //hold regular modules bound to this table (for initialization purposes)\n\t\t\n\t\tthis.optionsList = new OptionsList(this, \"table constructor\");\n\t\t\n\t\tthis.initialized = false;\n\t\t\n\t\tif(this.initializeElement(element)){\n\t\t\t\n\t\t\tthis.initializeCoreSystems(options);\n\t\t\t\n\t\t\t//delay table creation to allow event bindings immediately after the constructor\n\t\t\tsetTimeout(() => {\n\t\t\t\tthis._create();\n\t\t\t})\n\t\t}\n\t\t\n\t\tTableRegistry.register(this); //register table for inter-device communication\n\t}\n\t\n\tinitializeElement(element){\n\t\tif(typeof HTMLElement !== \"undefined\" && element instanceof HTMLElement){\n\t\t\tthis.element = element;\n\t\t\treturn true;\n\t\t}else if(typeof element === \"string\"){\n\t\t\tthis.element = document.querySelector(element);\n\t\t\t\n\t\t\tif(this.element){\n\t\t\t\treturn true;\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Tabulator Creation Error - no element found matching selector: \", element);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.error(\"Tabulator Creation Error - Invalid element provided:\", element);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tinitializeCoreSystems(options){\n\t\tthis.columnManager = new ColumnManager(this);\n\t\tthis.rowManager = new RowManager(this);\n\t\tthis.footerManager = new FooterManager(this);\n\t\tthis.dataLoader = new DataLoader(this);\n\t\tthis.alertManager = new Alert(this);\n\t\t\n\t\tthis.bindModules();\n\t\t\n\t\tthis.options = this.optionsList.generate(Tabulator.defaultOptions, options)\n\t\t\n\t\tthis._clearObjectPointers();\n\t\t\n\t\tthis._mapDeprecatedFunctionality();\n\t\t\n\t\tthis.externalEvents = new ExternalEventBus(this, this.options, this.options.debugEventsExternal);\n\t\tthis.eventBus = new InternalEventBus(this.options.debugEventsInternal);\n\t\t\n\t\tthis.interactionMonitor = new InteractionMonitor(this);\n\t\t\n\t\tthis.dataLoader.initialize();\n\t\t// this.columnManager.initialize();\n\t\t// this.rowManager.initialize();\n\t\tthis.footerManager.initialize();\n\t}\n\t\n\t//convert deprecated functionality to new functions\n\t_mapDeprecatedFunctionality(){\n\t\t//all previously deprecated functionality removed in the 5.0 release\n\t}\n\t\n\t_clearSelection(){\n\t\t\n\t\tthis.element.classList.add(\"tabulator-block-select\");\n\t\t\n\t\tif (window.getSelection) {\n\t\t\tif (window.getSelection().empty) {  // Chrome\n\t\t\t\twindow.getSelection().empty();\n\t\t\t} else if (window.getSelection().removeAllRanges) {  // Firefox\n\t\t\t\twindow.getSelection().removeAllRanges();\n\t\t\t}\n\t\t} else if (document.selection) {  // IE?\n\t\t\tdocument.selection.empty();\n\t\t}\n\t\t\n\t\tthis.element.classList.remove(\"tabulator-block-select\");\n\t}\n\t\n\t//create table\n\t_create(){\n\t\tthis.externalEvents.dispatch(\"tableBuilding\");\n\t\tthis.eventBus.dispatch(\"table-building\");\n\t\t\n\t\tthis._rtlCheck();\n\t\t\n\t\tthis._buildElement();\n\t\t\n\t\tthis._initializeTable();\n\t\t\n\t\tthis._loadInitialData();\n\t\t\n\t\tthis.initialized = true;\n\t\t\n\t\tthis.externalEvents.dispatch(\"tableBuilt\");\n\t}\n\t\n\t_rtlCheck(){\n\t\tvar style = window.getComputedStyle(this.element);\n\t\t\n\t\tswitch(this.options.textDirection){\n\t\t\tcase\"auto\":\n\t\t\tif(style.direction !== \"rtl\"){\n\t\t\t\tbreak;\n\t\t\t};\n\t\t\t\n\t\t\tcase \"rtl\":\n\t\t\tthis.element.classList.add(\"tabulator-rtl\");\n\t\t\tthis.rtl = true;\n\t\t\tbreak;\n\t\t\t\n\t\t\tcase \"ltr\":\n\t\t\tthis.element.classList.add(\"tabulator-ltr\");\n\t\t\t\n\t\t\tdefault:\n\t\t\tthis.rtl = false;\n\t\t}\n\t}\n\t\n\t//clear pointers to objects in default config object\n\t_clearObjectPointers(){\n\t\tthis.options.columns = this.options.columns.slice(0);\n\t\t\n\t\tif(Array.isArray(this.options.data) && !this.options.reactiveData){\n\t\t\tthis.options.data = this.options.data.slice(0);\n\t\t}\n\t}\n\t\n\t//build tabulator element\n\t_buildElement(){\n\t\tvar element = this.element,\n\t\toptions = this.options,\n\t\tnewElement;\n\t\t\n\t\tif(element.tagName === \"TABLE\"){\n\t\t\tthis.originalElement = this.element;\n\t\t\tnewElement = document.createElement(\"div\");\n\t\t\t\n\t\t\t//transfer attributes to new element\n\t\t\tvar attributes = element.attributes;\n\t\t\t\n\t\t\t// loop through attributes and apply them on div\n\t\t\tfor(var i in attributes){\n\t\t\t\tif(typeof attributes[i] == \"object\"){\n\t\t\t\t\tnewElement.setAttribute(attributes[i].name, attributes[i].value);\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\t// replace table with div element\n\t\t\telement.parentNode.replaceChild(newElement, element);\n\t\t\t\n\t\t\tthis.element = element = newElement;\n\t\t}\n\t\t\n\t\telement.classList.add(\"tabulator\");\n\t\telement.setAttribute(\"role\", \"grid\");\n\t\t\n\t\t//empty element\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\t\n\t\t//set table height\n\t\tif(options.height){\n\t\t\toptions.height = isNaN(options.height) ? options.height : options.height + \"px\";\n\t\t\telement.style.height = options.height;\n\t\t}\n\t\t\n\t\t//set table min height\n\t\tif(options.minHeight !== false){\n\t\t\toptions.minHeight = isNaN(options.minHeight) ? options.minHeight : options.minHeight + \"px\";\n\t\t\telement.style.minHeight = options.minHeight;\n\t\t}\n\t\t\n\t\t//set table maxHeight\n\t\tif(options.maxHeight !== false){\n\t\t\toptions.maxHeight = isNaN(options.maxHeight) ? options.maxHeight : options.maxHeight + \"px\";\n\t\t\telement.style.maxHeight = options.maxHeight;\n\t\t}\n\t}\n\t\n\t//initialize core systems and modules\n\t_initializeTable(){\n\t\tvar element = this.element,\n\t\toptions = this.options;\n\t\t\n\t\tthis.interactionMonitor.initialize();\n\t\t\n\t\tthis.columnManager.initialize();\n\t\tthis.rowManager.initialize();\n\t\t\n\t\tthis._detectBrowser();\n\t\t\n\t\t//initialize core modules\n\t\tthis.modulesCore.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t})\n\t\t\n\t\t//build table elements\n\t\telement.appendChild(this.columnManager.getElement());\n\t\telement.appendChild(this.rowManager.getElement());\n\t\t\n\t\tif(options.footerElement){\n\t\t\tthis.footerManager.activate();\n\t\t}\n\t\t\n\t\tif(options.autoColumns && options.data){\n\t\t\t\n\t\t\tthis.columnManager.generateColumnsFromRowData(this.options.data);\n\t\t}\n\t\t\n\t\t//initialize regular modules\n\t\tthis.modulesRegular.forEach((mod) => {\n\t\t\tmod.initialize();\n\t\t});\n\t\t\n\t\tthis.columnManager.setColumns(options.columns);\n\t\t\n\t\tthis.eventBus.dispatch(\"table-built\");\n\t}\n\t\n\t_loadInitialData(){\n\t\tthis.dataLoader.load(this.options.data);\n\t}\n\t\n\t//deconstructor\n\tdestroy(){\n\t\tvar element = this.element;\n\t\t\n\t\tTableRegistry.deregister(this); //deregister table from inter-device communication\n\t\t\n\t\tthis.eventBus.dispatch(\"table-destroy\");\n\t\t\n\t\t//clear row data\n\t\tthis.rowManager.rows.forEach(function(row){\n\t\t\trow.wipe();\n\t\t});\n\t\t\n\t\tthis.rowManager.rows = [];\n\t\tthis.rowManager.activeRows = [];\n\t\tthis.rowManager.displayRows = [];\n\t\t\n\t\t//clear DOM\n\t\twhile(element.firstChild) element.removeChild(element.firstChild);\n\t\telement.classList.remove(\"tabulator\");\n\t}\n\t\n\t_detectBrowser(){\n\t\tvar ua = navigator.userAgent||navigator.vendor||window.opera;\n\t\t\n\t\tif(ua.indexOf(\"Trident\") > -1){\n\t\t\tthis.browser = \"ie\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Edge\") > -1){\n\t\t\tthis.browser = \"edge\";\n\t\t\tthis.browserSlow = true;\n\t\t}else if(ua.indexOf(\"Firefox\") > -1){\n\t\t\tthis.browser = \"firefox\";\n\t\t\tthis.browserSlow = false;\n\t\t}else{\n\t\t\tthis.browser = \"other\";\n\t\t\tthis.browserSlow = false;\n\t\t}\n\t\t\n\t\tthis.browserMobile = /(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(ua)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(ua.slice(0,4));\n\t}\n\t\n\tinitGuard(func, msg){\n\t\tvar stack, line;\n\t\t\n\t\tif(this.options.debugInitialization && !this.initialized){\n\t\t\tif(!func){\n\t\t\t\tstack = new Error().stack.split(\"\\n\");\n\t\t\t\t\n\t\t\t\tline = stack[0] == \"Error\" ? stack[2] : stack[1];\n\t\t\t\t\n\t\t\t\tif(line[0] == \" \"){\n\t\t\t\t\tfunc = line.trim().split(\" \")[1].split(\".\")[1];\n\t\t\t\t}else{\n\t\t\t\t\tfunc = line.trim().split(\"@\")[0];\n\t\t\t\t}\n\t\t\t}\n\t\t\t\n\t\t\tconsole.warn(\"Table Not Initialized - Calling the \" + func + \" function before the table is initialized may result in inconsistent behavior, Please wait for the `tableBuilt` event before calling this function.\" + (msg ? \" \" + msg : \"\"));\n\t\t}\n\t\t\n\t\treturn this.initialized;\n\t}\n\t\n\t////////////////// Data Handling //////////////////\n\t//block table redrawing\n\tblockRedraw(){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.rowManager.blockRedraw();\n\t}\n\t\n\t//restore table redrawing\n\trestoreRedraw(){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.rowManager.restoreRedraw();\n\t}\n\t\n\t//load data\n\tsetData(data, params, config){\n\t\tthis.initGuard(false, \"To set initial data please use the 'data' property in the table constructor.\");\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, false);\n\t}\n\t\n\t//clear data\n\tclearData(){\n\t\tthis.initGuard();\n\t\t\n\t\tthis.dataLoader.blockActiveLoad();\n\t\tthis.rowManager.clearData();\n\t}\n\t\n\t//get table data array\n\tgetData(active){\n\t\treturn this.rowManager.getData(active);\n\t}\n\t\n\t//get table data array count\n\tgetDataCount(active){\n\t\treturn this.rowManager.getDataCount(active);\n\t}\n\t\n\t//replace data, keeping table in position with same sort\n\treplaceData(data, params, config){\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.dataLoader.load(data, params, config, true, true);\n\t}\n\t\n\t//update table data\n\tupdateData(data){\n\t\tvar responses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\tresponses++;\n\t\t\t\t\t\t\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\taddData(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tthis.rowManager.addRows(data, pos, index)\n\t\t\t\t.then((rows) => {\n\t\t\t\t\tvar output = [];\n\t\t\t\t\t\n\t\t\t\t\trows.forEach(function(row){\n\t\t\t\t\t\toutput.push(row.getComponent());\n\t\t\t\t\t});\n\t\t\t\t\t\n\t\t\t\t\tresolve(output);\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//update table data\n\tupdateOrAddData(data){\n\t\tvar rows = [],\n\t\tresponses = 0;\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.dataLoader.blockActiveLoad();\n\t\t\t\n\t\t\tif(typeof data === \"string\"){\n\t\t\t\tdata = JSON.parse(data);\n\t\t\t}\n\t\t\t\n\t\t\tif(data){\n\t\t\t\tdata.forEach((item) => {\n\t\t\t\t\tvar row = this.rowManager.findRow(item[this.options.index]);\n\t\t\t\t\t\n\t\t\t\t\tresponses++;\n\t\t\t\t\t\n\t\t\t\t\tif(row){\n\t\t\t\t\t\trow.updateData(item)\n\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\trows.push(row.getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}else{\n\t\t\t\t\t\tthis.rowManager.addRows(item)\n\t\t\t\t\t\t.then((newRows)=>{\n\t\t\t\t\t\t\tresponses--;\n\t\t\t\t\t\t\trows.push(newRows[0].getComponent());\n\t\t\t\t\t\t\t\n\t\t\t\t\t\t\tif(!responses){\n\t\t\t\t\t\t\t\tresolve(rows);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Update Error - No data provided\");\n\t\t\t\treject(\"Update Error - No data provided\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//get row object\n\tgetRow(index){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//get row object\n\tgetRowFromPosition(position, active){\n\t\tvar row = this.rowManager.getRowFromPosition(position, active);\n\t\t\n\t\tif(row){\n\t\t\treturn row.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching row found:\", position);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t//delete row from table\n\tdeleteRow(index){\n\t\tvar foundRows = [];\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(!Array.isArray(index)){\n\t\t\tindex = [index];\n\t\t}\n\t\t\n\t\t//find matching rows\n\t\tfor(let item of index){\n\t\t\tlet row = this.rowManager.findRow(item, true);\n\t\t\t\n\t\t\tif(row){\n\t\t\t\tfoundRows.push(row);\n\t\t\t}else{\n\t\t\t\tconsole.error(\"Delete Error - No matching row found:\", item);\n\t\t\t\treturn Promise.reject(\"Delete Error - No matching row found\")\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\n\t\t//sort rows into correct order to ensure smooth delete from table\n\t\tfoundRows.sort((a, b) => {\n\t\t\treturn this.rowManager.rows.indexOf(a) > this.rowManager.rows.indexOf(b) ? 1 : -1;\n\t\t});\n\t\t\n\t\t//delete rows\n\t\tfoundRows.forEach((row) =>{\n\t\t\trow.delete()\n\t\t});\n\t\t\n\t\tthis.rowManager.reRenderInPosition();\n\t\t\n\t\treturn Promise.resolve();\n\t}\n\t\n\t//add row to table\n\taddRow(data, pos, index){\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\treturn this.rowManager.addRows(data, pos, index)\n\t\t.then((rows)=>{\n\t\t\treturn rows[0].getComponent();\n\t\t});\n\t}\n\t\n\t//update a row if it exitsts otherwise create it\n\tupdateOrAddRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t.then(()=>{\n\t\t\t\treturn row.getComponent();\n\t\t\t})\n\t\t}else{\n\t\t\treturn this.rowManager.addRows(data)\n\t\t\t.then((rows)=>{\n\t\t\t\treturn rows[0].getComponent();\n\t\t\t})\n\t\t}\n\t}\n\t\n\t//update row data\n\tupdateRow(index, data){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(typeof data === \"string\"){\n\t\t\tdata = JSON.parse(data);\n\t\t}\n\t\t\n\t\tif(row){\n\t\t\treturn row.updateData(data)\n\t\t\t.then(()=>{\n\t\t\t\treturn Promise.resolve(row.getComponent());\n\t\t\t})\n\t\t}else{\n\t\t\tconsole.warn(\"Update Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Update Error - No matching row found\");\n\t\t}\n\t}\n\t\n\t//scroll to row in DOM\n\tscrollToRow(index, position, ifVisible){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.scrollToRow(row, position, ifVisible)\n\t\t}else{\n\t\t\tconsole.warn(\"Scroll Error - No matching row found:\", index);\n\t\t\treturn Promise.reject(\"Scroll Error - No matching row found\");\n\t\t}\n\t}\n\t\n\tmoveRow(from, to, after){\n\t\tvar fromRow = this.rowManager.findRow(from);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromRow){\n\t\t\tfromRow.moveToRow(to, after);\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching row found:\", from);\n\t\t}\n\t}\n\t\n\tgetRows(active){\n\t\treturn this.rowManager.getComponents(active);\t\n\t}\n\t\n\t//get position of row in table\n\tgetRowPosition(index, active){\n\t\tvar row = this.rowManager.findRow(index);\n\t\t\n\t\tif(row){\n\t\t\treturn this.rowManager.getRowPosition(row, active);\n\t\t}else{\n\t\t\tconsole.warn(\"Position Error - No matching row found:\", index);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\t/////////////// Column Functions  ///////////////\n\tsetColumns(definition){\n\t\tthis.initGuard(false, \"To set initial columns please use the 'columns' property in the table constructor\");\n\t\t\n\t\tthis.columnManager.setColumns(definition);\n\t}\n\t\n\tgetColumns(structured){\n\t\treturn this.columnManager.getComponents(structured);\n\t}\n\t\n\tgetColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tif(column){\n\t\t\treturn column.getComponent();\n\t\t}else{\n\t\t\tconsole.warn(\"Find Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tgetColumnDefinitions(){\n\t\treturn this.columnManager.getDefinitionTree();\n\t}\n\t\n\tshowColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.show();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Show Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\thideColumn(field){\n\t\tvar column = this.columnManager.findColumn(field); \n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tcolumn.hide();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Hide Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\ttoggleColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\tif(column.visible){\n\t\t\t\tcolumn.hide();\n\t\t\t}else{\n\t\t\t\tcolumn.show();\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Column Visibility Toggle Error - No matching column found:\", field);\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\taddColumn(definition, before, field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\treturn this.columnManager.addColumn(definition, before, column)\n\t\t.then((column) => {\n\t\t\treturn column.getComponent();\n\t\t});\n\t}\n\t\n\tdeleteColumn(field){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.delete();\n\t\t}else{\n\t\t\tconsole.warn(\"Column Delete Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tupdateColumnDefinition(field, definition){\n\t\tvar column = this.columnManager.findColumn(field);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(column){\n\t\t\treturn column.updateDefinition(definition)\n\t\t}else{\n\t\t\tconsole.warn(\"Column Update Error - No matching column found:\", field);\n\t\t\treturn Promise.reject();\n\t\t}\n\t}\n\t\n\tmoveColumn(from, to, after){\n\t\tvar fromColumn = this.columnManager.findColumn(from),\n\t\ttoColumn = this.columnManager.findColumn(to);\n\t\t\n\t\tthis.initGuard();\n\t\t\n\t\tif(fromColumn){\n\t\t\tif(toColumn){\n\t\t\t\tthis.columnManager.moveColumn(fromColumn, toColumn, after)\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Move Error - No matching column found:\", toColumn);\n\t\t\t}\n\t\t}else{\n\t\t\tconsole.warn(\"Move Error - No matching column found:\", from);\n\t\t}\n\t}\n\t\n\t//scroll to column in DOM\n\tscrollToColumn(field, position, ifVisible){\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tvar column = this.columnManager.findColumn(field);\n\t\t\t\n\t\t\tif(column){\n\t\t\t\treturn this.columnManager.scrollToColumn(column, position, ifVisible)\n\t\t\t}else{\n\t\t\t\tconsole.warn(\"Scroll Error - No matching column found:\", field);\n\t\t\t\treturn Promise.reject(\"Scroll Error - No matching column found\");\n\t\t\t}\n\t\t});\n\t}\n\t\n\t//////////// General Public Functions ////////////\n\t//redraw list without updating data\n\tredraw(force){\n\t\tthis.initGuard();\n\n\t\tthis.columnManager.redraw(force);\n\t\tthis.rowManager.redraw(force);\n\t}\n\t\n\tsetHeight(height){\n\t\tthis.options.height = isNaN(height) ? height : height + \"px\";\n\t\tthis.element.style.height = this.options.height;\n\t\tthis.rowManager.initializeRenderer();\n\t\tthis.rowManager.redraw();\n\t}\n\t\n\t//////////////////// Event Bus ///////////////////\n\t\n\ton(key, callback){\n\t\tthis.externalEvents.subscribe(key, callback);\n\t}\n\t\n\toff(key, callback){\n\t\tthis.externalEvents.unsubscribe(key, callback);\n\t}\n\t\n\tdispatchEvent(){\n\t\tvar args = Array.from(arguments),\n\t\tkey = args.shift();\n\t\t\n\t\tthis.externalEvents.dispatch(...arguments)\n\t}\n\n\t//////////////////// Alerts ///////////////////\n\n\talert(contents, type){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.alert(contents, type);\n\t}\n\n\tclearAlert(){\n\t\tthis.initGuard();\n\n\t\tthis.alertManager.clear();\n\t}\n\t\n\t////////////// Extension Management //////////////\n\tmodExists(plugin, required){\n\t\tif(this.modules[plugin]){\n\t\t\treturn true;\n\t\t}else{\n\t\t\tif(required){\n\t\t\t\tconsole.error(\"Tabulator Module Not Installed: \" + plugin);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\t\n\tmodule(key){\n\t\tvar mod = this.modules[key];\n\t\t\n\t\tif(!mod){\n\t\t\tconsole.error(\"Tabulator module not installed: \" + key);\n\t\t}\n\t\t\n\t\treturn mod;\n\t}\n}\n\n//default setup options\nTabulator.defaultOptions = defaultOptions;\n\n//bind modules and static functionality\nnew ModuleBinder(Tabulator);\n\nexport default Tabulator;\n","export default {\n\n\tdebugEventsExternal:false, //flag to console log events\n\tdebugEventsInternal:false, //flag to console log events\n\tdebugInvalidOptions:true, //allow toggling of invalid option warnings\n\tdebugInitialization:true, //allow toggling of invalid option warnings\n\n\theight:false, //height of tabulator\n\tminHeight:false, //minimum height of tabulator\n\tmaxHeight:false, //maximum height of tabulator\n\n\tcolumnHeaderVertAlign:\"top\", //vertical alignment of column headers\n\n\tpopupContainer:false,\n\n\tcolumns:[],//store for colum header info\n\tcolumnDefaults:{}, //store column default props\n\n\tdata:false, //default starting data\n\n\tautoColumns:false, //build columns from data row structure\n\tautoColumnsDefinitions:false,\n\n\tnestedFieldSeparator:\".\", //separator for nested data\n\n\tfooterElement:false, //hold footer element\n\n\tindex:\"id\", //filed for row index\n\n\ttextDirection:\"auto\",\n\n\taddRowPos:\"bottom\", //position to insert blank rows, top|bottom\n\n\theaderVisible:true, //hide header\n\n\trenderVertical:\"virtual\",\n\trenderHorizontal:\"basic\",\n\trenderVerticalBuffer:0, // set virtual DOM buffer size\n\n\tscrollToRowPosition:\"top\",\n\tscrollToRowIfVisible:true,\n\n\tscrollToColumnPosition:\"left\",\n\tscrollToColumnIfVisible:true,\n\n\trowFormatter:false,\n\trowFormatterPrint:null,\n\trowFormatterClipboard:null,\n\trowFormatterHtmlOutput:null,\n\n\trowHeight:null,\n\n\tplaceholder:false,\n\n\tdataLoader:true,\n\tdataLoaderLoading:false,\n\tdataLoaderError:false,\n\tdataLoaderErrorTimeout:3000,\n\n\tdataSendParams:{},\n\n\tdataReceiveParams:{},\n}\n","//tabulator with all modules installed\nimport {default as Tabulator} from './Tabulator.js';\nimport * as modules from '../core/modules/optional.js';\nimport ModuleBinder from './tools/ModuleBinder.js';\n\nclass TabulatorFull extends Tabulator {};\n\n//bind modules and static functionality\nnew ModuleBinder(TabulatorFull, modules);\n\nexport default TabulatorFull;","export default class PseudoRow {\n\n\tconstructor (type){\n\t\tthis.type = type;\n\t\tthis.element = this._createElement();\n\t}\n\n\t_createElement(){\n\t\tvar el = document.createElement(\"div\");\n\t\tel.classList.add(\"tabulator-row\");\n\t\treturn el;\n\t}\n\n\tgetElement(){\n\t\treturn this.element;\n\t}\n\n\tgetComponent(){\n\t\treturn false;\n\t}\n\n\tgetData(){\n\t\treturn {};\n\t}\n\n\tgetHeight(){\n\t\treturn this.element.outerHeight;\n\t}\n\n\tinitialize(){}\n\n\treinitialize(){}\n\n\tnormalizeHeight(){}\n\n\tgenerateCells(){}\n\n\treinitializeHeight(){}\n\n\tcalcHeight(){}\n\n\tsetCellHeight(){}\n\n\tclearCellHeight(){}\n}"],"names":["CoreFeature","[object Object]","table","this","data","silent","dataLoader","load","undefined","modules","localize","getText","arguments","bind","getLocale","comms","getConnections","send","layout","getMode","eventBus","subscribe","unsubscribe","key","subscribed","subscriptionChange","dispatch","chain","confirm","externalEvents","options","value","module","Helpers","el","offsetWidth","offsetHeight","box","getBoundingClientRect","top","window","pageYOffset","document","documentElement","clientTop","left","pageXOffset","clientLeft","obj","clone","list","objectProto","__proto__","arrayProto","i","Object","assign","Array","isArray","match","copy","subject","findIndex","item","unshift","deepClone","Popup","element","parent","super","container","_lookupContainer","reversedX","childPopup","blurable","blurCallback","renderedCallback","visible","classList","add","blurEvent","hide","escEvent","_escapeCheck","popupContainer","querySelector","console","warn","_checkContainerIsParent","body","parentNode","callback","e","touch","MouseEvent","x","touches","pageX","y","pageY","parentOffset","elOffset","position","containerOffset","offset","origin","parentEl","coords","HTMLElement","elementPositionCoords","containerEventCoords","style","appendChild","_fitToScreen","scrollTop","right","Math","max","scrollHeight","parseInt","setTimeout","rowManager","addEventListener","keyCode","removeEventListener","removeChild","Module","name","_handler","optionsList","register","columnManager","func","args","initGuard","component","handler","componentFunctionBinder","priority","registerDataPipelineHandler","registerDisplayPipelineHandler","renderInPosition","refreshActiveData","footerManager","append","prepend","remove","menuEl","menuContainer","content","type","alertManager","alert","clear","Accessor","allowedTypes","registerColumnOption","initializeColumn","transformRow","column","config","forEach","accessor","charAt","toUpperCase","slice","definition","lookupAccessor","params","accessors","row","rowComponent","getComponent","traverse","colCompnent","getFieldValue","setFieldValue","moduleName","generateParamsList","prefix","output","concat","push","serializeParams","encoded","encodeURIComponent","join","url","keys","length","method","toLowerCase","includes","json","headers","Content-Type","JSON","stringify","form","FormData","Ajax","urlGenerator","loaderPromise","registerTableOption","contentTypeFormatters","ajaxRequestFunc","defaultLoaderPromise","ajaxURLGenerator","defaultURLGenerator","ajaxURL","setUrl","setDefaultConfig","ajaxConfig","registerTableFunction","getUrl","requestDataCheck","requestParams","requestData","ajaxParams","call","previousData","generateConfig","sendRequest","defaultConfig","ajaxRequesting","then","ajaxResponse","Promise","reject","contentType","resolve","ajaxContentType","Accept","mode","location","credentials","fetch","response","ok","catch","error","status","statusText","defaultContentTypeFormatters","Clipboard","pasteParser","pasteAction","customSelection","rowRange","blocked","clipboard","clipboardCopyRowRange","plain","html","preventDefault","clipboardCopyFormatter","export","generateExportList","clipboardCopyConfig","clipboardCopyStyled","genereateHTMLTable","generatePlainContent","clipboardData","setData","originalEvent","dispatchExternal","reset","paste","setPasteParser","clipboardPasteParser","setPasteAction","clipboardPasteAction","rowData","columns","col","getKey","range","internal","sel","textRange","getSelection","createRange","selectNodeContents","toString","removeAllRanges","addRange","selection","createTextRange","moveToElementText","select","execCommand","action","pasteActions","parser","pasteParsers","rows","checkPaseOrigin","getPasteData","modExists","mutateData","mutator","valid","target","tagName","edit","currentCell","getData","replace","update","updateOrAddData","insert","addData","headerFindSuccess","columnMap","split","find","title","trim","field","columnsByIndex","shift","CalcComponent","_row","Proxy","get","receiver","handle","transform","getElement","cells","getCells","cell","getCell","CellComponent","_cell","getValue","getOldValue","initialValue","getField","mutate","setValue","setValueActual","checkHeight","Cell","oldValue","height","width","minWidth","loaded","build","generateElement","setWidth","_configureCell","createElement","className","setAttribute","textAlign","hozAlign","vertAlign","display","alignItems","bottom","middle","justifyContent","center","cssClass","val","innerHTML","Node","firstChild","containerOnly","layoutElement","force","setValueProcessData","cellRendered","cellEdited","subscribedExternal","changed","_generateContents","widthStyled","minWidthStyled","maxWidth","maxWidthStyled","reinitializeHeight","heightStyled","redrawBlock","deleteCell","calcs","getCellIndex","ColumnComponent","_column","getDefinition","getTitleDownload","isGroup","show","delete","Column","scrollToColumn","to","after","toColumn","findColumn","moveColumn","nextCol","nextColumn","prevCol","prevColumn","updates","updateDefinition","getWidth","result","reinitializeWidth","renderer","rerenderColumns","maxInitialWidth","variableHeight","headerVertical","headerHozAlign","editableTitle","def","contentElement","titleHolderElement","titleElement","groupElement","createGroupElement","fieldStructure","titleDownload","titleFormatterRendered","mapDefinitions","setField","widthFixed","newCol","attachColumn","checkColumnVisibility","registerColumnField","_initialize","bindModuleColumns","defaults","columnDefaults","generate","defaultOptionList","indexOf","nestedFieldSeparator","_getNestedData","_getFlatData","_setNestedData","_setFlatData","registerColumnPosition","reRegisterPosition","_bindEvents","_buildColumnHeaderContent","_buildGroupHeader","_buildColumnHeader","dblTap","tapHold","tap","headerClick","headerDblClick","headerContext","passive","headerTap","clearTimeout","headerDblTap","headerTapHold","setMinWidth","setMaxWidth","_buildColumnHeaderTitle","stopPropagation","focus","langBind","text","_formatColumnHeaderTitle","contents","dataObj","structure","columnRendered","alignment","parentHeight","getGroupElement","clientHeight","getHeadersElement","minHeight","paddingTop","verticalAlign","clearVerticalAlign","formatter","rowNumColumn","getFirstColumn","getLastColumn","getTopColumn","updateBranches","colDefs","responsiveToggle","verticalAlignHeaders","matchChildWidths","childWidth","child","index","splice","setWidthActual","isNaN","floor","clientWidth","min","heightInitialized","offsetParent","clearCellHeight","calcHeight","setCellHeight","ceil","cellCount","deregisterColumn","findColumnIndex","_nextVisibleColumn","getColumnByIndex","_prevVisibleColumn","fitToData","clearWidth","setTo","addColumn","defaultOptions","RowComponent","active","getRowPosition","scrollToRow","moveToRow","updateData","normalizeHeight","reinitialize","nextRow","prevRow","Row","manualHeight","outerHeight","initialized","created","create","generateCells","deleteCells","renderRowCells","rowFormatter","rerenderRowCells","children","initialize","maxHeight","rowHeight","resizableRows","getHeight","setHeight","clearHeight","updatedData","newRowData","elVisible","tempData","attrname","parse","getColumnsByFieldRoot","findCell","nextDisplayRow","prevDisplayRow","before","toRow","findRow","moveRowActual","deleteActual","blockRedraw","getRowIndex","detatchModules","deleteRow","group","avg","values","calcParams","precision","reduce","sum","Number","toFixed","parseFloat","String","count","ColumnCalcs","topCalcs","botCalcs","genColumn","topElement","botElement","topRow","botRow","topInitialized","botInitialized","cellValueChanged","initializeColumnCheck","rowsUpdated","scrollHorizontal","recalcActiveRows","recalcActiveRowsRefresh","tableRedraw","visibleRows","getResults","userRecalc","recalc","activeRows","redraw","viewable","groupBy","recalcRowGroup","dataTreeStartExpanded","dataTree","recalcAll","topCalc","bottomCalc","columnCalcs","topCalcParams","botCalcParams","bottomCalcParams","calculations","initializeTopRow","botCalc","initializeBottomRow","footerRemove","adjustTableSize","insertBefore","headersElement","nextSibling","footerPrepend","marginLeft","rowsToData","generateRow","frozenColumns","recalcGroup","groupRows","getRowGroup","getChildGroups","generateRowData","dataTreeChildColumnCalcs","open","getFilteredTreeChildren","pos","disable","enable","format","getFormatter","paramKey","results","getGroups","getGroupResults","groupObj","_getSelf","subGroups","getSubGroups","subGroupResults","subgroup","groups","defaultCalculations","DataTree","indent","collapseEl","expandEl","branchEl","elementField","startOpen","displayIndex","registerComponentFunction","collapseRow","expandRow","toggleRow","getTreeParent","getRowChildren","addTreeChildRow","isRowExpanded","dummyEl","dataTreeChildField","dataTreeChildIndent","dataTreeBranchElement","dataTreeCollapseElement","tabIndex","dataTreeExpandElement","initializeRow","layoutRow","rowDelete","rowDataChanged","columnMoving","initializeElementField","registerDisplayHandler","getRows","firstCol","getFirstVisibleColumn","dataTreeElementColumn","getTreeChildren","redrawNeeded","refreshData","childArray","controlEl","generateControlElement","cloneNode","rtl","marginRight","paddingRight","getComputedStyle","getPropertyValue","paddingLeft","oldControl","replaceChild","getChildren","allChildren","generateChildren","dataTreeFilter","filter","dataTreeSort","sort","sub","childData","childRow","childIndex","findChildIndex","recurse","csv","setFileContents","delimiter","fileContents","depth","bom","jsonLines","pdf","header","autoTableParams","rowGroupStyles","fontStyle","fontSize","cellPadding","fillColor","rowCalcStyles","jsPDFParams","jsPDF","parseRow","styles","colSpan","rowSpan","orientation","unit","doc","jspdf","autoTable","didDrawPage","head","documentProcessing","xlsx","sheetName","workbook","XLSX","utils","book_new","tableFeatures","generateSheet","merges","worksheet","s","c","r","a","b","j","Date","sheet_add_aoa","encode_range","SheetNames","Sheets","sheetOnly","sheets","sheet","commsSend","intercept","buf","ArrayBuffer","view","Uint8Array","charCodeAt","s2ab","write","bookType","bookSST","Download","blob","download","downloadToTab","filename","interceptCallback","downloadFunc","downloaders","mime","triggerDownload","downloadConfig","downloadRowRange","groupHeader","groupHeaderDownload","_group","getRowCount","newTab","Blob","downloadReady","URL","createObjectURL","navigator","msSaveOrOpenBlob","click","maskInput","mask","maskLetter","maskLetterChar","maskNumber","maskNumberChar","maskWildcard","maskWildcardChar","fillSymbols","symbol","char","maskAutoFill","placeholder","defaultDownloaders","Edit","editor","onRendered","success","cancel","editorParams","_initializeParams","displayItems","currentItems","focusedItem","input","_createInputElement","listEl","_createListElement","initialValues","isFilter","filterTimeout","filtered","typing","popup","listIteration","actions","_deprecationCheck","_initializeValue","_onRendered","listItemFormatter","sortValuesList","searchFunc","searchingPlaceholder","defaultValue","multiselect","headerFilterInitialListGen","cellEl","clickStop","preventScroll","_preventBlur","_inputKeyDown","attribs","elementAttributes","clearable","padding","boxSizing","autocomplete","cursor","caretColor","getAttribute","_bindInputEvents","valueCheck","valueKeys","verticalNavigation","placeholderLoading","placeholderEmpty","filterDelay","emptyValue","freetext","filterFunc","filterRemote","allowEmpty","listOnEmpty","valuesLookup","valuesURL","_inputFocus","_inputClick","_inputBlur","_inputSearch","_inputKeyUp","rebuildOptionsList","_filterList","_clearChoices","_keyUp","_keyDown","_keySide","_keyEnter","_keyEsc","_keyHomeEnd","_keySelectLetter","_keyAutoCompLetter","stopImmediatePropagation","_focusItem","_chooseItem","_cancel","_scrollToValue","_filter","character","fromCharCode","filterTerm","label","startsWith","scrollIntoView","behavior","block","inline","_generateOptions","_sortOptions","_buildList","_showList","isInteger","_filterOptions","itteration","_ajaxRequest","_uniqueColumnValues","valuesLookupField","_addPlaceholder","responseValues","_parseList","_clearList","term","urlBuilder","getColumnByField","getColumn","inputValues","entries","map","_parseListItem","option","level","_parseListGroup","itemParams","selected","original","sorter","_defaultSortFunction","_sortGroup","as","bs","a1","b1","L","rx","rd","emptyAlign","isFinite","test","_defaultFilterFunc","_filterItem","matches","_buildItem","itemFormatter","_groupClick","_itemClick","_styleItem","startVis","isVisible","_setListWidth","hideOnBlur","_resolveValue","blur","cellValue","search","onChange","selectContents","textarea","vertNav","whiteSpace","resize","getRow","heightNow","selectionStart","number","step","blurFunc","List","star","self","maxStars","getElementsByTagName","size","stars","starsHolder","createElementNS","starChange","browser","buildStar","starHolder","nextStar","changeValue","overflow","textOverflow","progress","mouseDrag","mouseDragWidth","percent","bar","updateValue","calcVal","round","backgroundColor","screenX","tickCross","tristate","indetermValue","indeterminateValue","indetermState","trueValueSet","falseValueSet","marginTop","checkedValue","checked","trueValue","falseValue","indeterminate","mouseClick","recursionBlock","invalidEdit","editedCells","editors","getEditedCells","clearCellEdited","navigatePrev","navigateNext","navigateLeft","navigateRight","navigateUp","navigateDown","cellisEdited","clearEdited","editCell","cellCancelEdit","bindEditor","columnDeleteCheck","rowDeleteCheck","cancelEdit","keybindingNavigateNext","newRow","addRow","edited","nextCell","findNextEditableCell","getIndex","findPrevEditableCell","allowEdit","check","prevCell","editable","clearEditor","cellEditCancelled","contains","button","forceEdit","focusCellNoEvent","getRenderMode","topEdge","bottomEdge","rowEl","offsetTop","leftEdge","scrollLeft","rightEdge","offsetLeft","leftMargin","rightMargin","renderHorizontal","vDomPadLeft","cellEditor","rendered","focusScrollAdjust","cellClick","cellEditing","validationMode","editIndex","defaultEditors","ExportRow","ExportColumn","Export","cloneTableStyle","colVisProp","getHtml","columnHeaders","headersToExportRows","generateColumnGroupHeaders","bodyToExportRows","rowLookup","genereateTableElement","getVisibleRows","selectRow","selectedRows","pagination","getDisplayRows","displayRows","columnGroups","colData","processColumnGroup","maxDepth","groupData","subGroup","subGroupData","columnVisCheck","headerDepth","exportRows","parseColumnGroup","rowGroups","exportCols","headerEl","bodyEl","lookupTableStyles","setup","treeElementField","mapElementStyles","genereateHeaderElement","genereateGroupElement","genereateCalcElement","genereateRowElement","evenRow","oddRow","calcRow","firstRow","firstGroup","getElementsByClassName","styleCells","firstCell","lastCell","classNames","generator","cellWrapper","formatCells","formatExportValue","align","holder","htmlOutputConfig","from","props","lookup","background-color","color","font-weight","font-family","font-size","text-align","border-top","border-left","border-right","border-bottom","padding-top","padding-left","padding-right","padding-bottom","fromStyle","prop","=","filterVal","rowVal","filterParams","<","<=",">",">=","!=","regex","RegExp","like","keywords","separator","keyword","matchAll","starts","ends","endsWith","in","Filter","filterList","headerFilters","headerFilterColumns","prevHeaderFilterChangeCheck","tableInitialized","searchRows","searchData","userSetFilter","userRefreshFilter","userAddFilter","getFilters","userSetHeaderFilterFocus","userGetHeaderFilterValue","userSetHeaderFilterValue","getHeaderFilters","userRemoveFilter","userClearFilter","userClearHeaderFilter","setHeaderFilterFocus","reloadHeaderFilter","getHeaderFilterValue","setHeaderFilterValue","initializeColumnHeaderFilter","hideHeaderFilterElements","showHeaderFilterElements","tableBuilt","filterMode","remoteFilterParams","registerDataHandler","initialFilter","setFilter","initialHeaderFilter","refreshFilter","addFilter","removeFilter","all","clearFilter","clearHeaderFilter","headerFilter","headerFilterPlaceholder","setHeaderFilterColumnPlaceholder","filterType","tagType","attrType","filterChangeCheck","prevSuccess","emptyFunc","headerFilterFunc","filters","headerFilterFuncParams","fieldVal","colVal","trackChanges","generateHeaderFilterElement","filterElement","editorElement","typingTimer","searchTrigger","headerElement","headerFilterEmptyCheck","headerFilterParams","langText","headerFilterLiveFilterDelay","hasAttribute","headerFilterLiveFilter","reloadData","findFilter","findSubFilters","ajax","filtersToArray","searchType","filterRecurse","rowList","activeRowComponents","filterRow","subFilter","defaultFilters","plaintext","formatterParams","emptyToSpace","sanitizeHTML","money","integer","decimal","rgx","floatVal","sign","decimalSym","thousandSym","thousand","negativeSign","symbolAfter","abs","link","urlPrefix","labelField","labelTraverse","path","urlField","image","src","urlSuffix","empty","truthy","allowTruthy","tick","tickElement","cross","crossElement","datetime","newDatetime","DT","DateTime","luxon","inputFormat","outputFormat","invalid","invalidPlaceholder","isDateTime","fromISO","fromFormat","isValid","timezone","setZone","toFormat","datetimediff","suffix","humanize","date","now","diff","toHuman","traffic","percentValue","colors","legend","legendColor","legendAlign","barEl","barContainer","legendEl","holderEl","buttonTick","buttonCross","rownum","responsiveCollapse","responsiveLayout","toggleList","isOpen","rowSelection","checkbox","selectableRangeMode","toggleSelect","handleComplexRowClick","isSelected","registerRowSelectCheckbox","deselectRow","registerHeaderSelectCheckbox","Format","formatValue","formatHeader","lookupFormatter","formatterPrint","print","formatterClipboard","formatterHtmlOutput","htmlOutput","formatters","mockCell","titleFormatter","titleFormatterParams","entityMap","&","\"","'","/","`","defaultFormatters","FrozenColumns","leftColumns","rightColumns","rightPadding","initializationMode","scrollEndTimer","layoutCell","reinitializeColumns","blockLayout","unblockLayout","margin","edge","frozenCheck","frozen","calcMargins","layoutColumnPosition","layoutCalcRows","scroll","_calcSpace","tableElement","layoutGroupCalcs","groupList","allCells","leftParents","getColGroupParentElement","deinitialize","getTableElement","FrozenRows","freezeRow","unfreezeRow","isRowFrozen","detachRow","styleRows","styleRow","GroupComponent","groupManager","toggleVisibility","Group","oldGroup","hasSubGroups","groupIDLookups","_addRowToGroup","_addRow","old","elementContents","arrowElement","createElements","addBindings","createValueGroups","wipe","arrow","movableRows","moveRow","initializeGroupHeader","allowedValues","_createGroup","groupToggleElement","groupID","groupKey","headerGenerator","conformRowData","toIndex","generateGroupHeaderContents","updateGroupRows","scrollHeader","groupValues","removeGroup","noCalc","_visSet","getHeadersAndRows","hasTopCalcs","detachElement","generateTopRow","hasBottomCalcs","generateBottomRow","groupClosedShowCalcs","setDisplayRows","getDisplayIndex","checkClassicModeGroupHeaderWidth","prev","compoment","getPath","childNodes","GroupRows","displayHandler","setGroupBy","setGroupValues","setGroupStartOpen","setGroupHeader","userGetGroups","userGetGroupedData","rowGetGroup","groupUpdateOnCellEdit","cellUpdated","reassignRowToGroup","configureGroupSetup","rowDeleting","scrollHeaders","rowMoving","rowAddingIndex","rowSample","virtualRenderFill","groupStartOpen","langValue","lang","items","removeCalcs","getRealColumns","lookupFunc","prevValue","assignRowToGroup","moveRowInArray","getGroupedData","toGroup","fromGroup","removeRow","insertRow","generateGroups","groupComponents","groupListData","rowCount","headerContent","pullGroupListData","oldGroups","createGroup","assignRowToExistingGroup","newGroupNeeded","oldRowGroup","oldGroupPath","newGroupPath","getExpectedPath","every","groupPath","groupId","History","history","clearComponentHistory","rowDeleted","rowAdded","rowMoved","undo","redo","getHistoryUndoSize","getHistoryRedoSize","posFrom","posTo","getGroup","newValue","undoers","redoers","oldRow","cellEdit","rowAdd","addRowActual","_rebindRow","rowMove","HtmlTableImport","fieldIndex","hasIndex","tableElementCheck","originalElement","parseTable","_extractOptions","_extractHeaders","_generateBlankHeaders","attributes","optionsArr","attrib","_attribValue","exists","_findCol","textContent","registeredDefaults","inQuote","nextChar","Import","importFromFile","importFormat","loadDataCheck","loadData","importData","lookupImporter","structureData","err","importer","importers","extension","pickFile","extensions","accept","file","files","reader","FileReader","importReader","readAsArrayBuffer","readAsBinaryString","readAsDataURL","readAsText","onload","onerror","parsedData","autoColumns","structureArrayToObject","structureArrayToColumns","getColumns","defaultImporters","Interaction","eventMap","rowClick","rowDblClick","rowContext","rowMouseEnter","rowMouseLeave","rowMouseOver","rowMouseOut","rowMouseMove","rowTap","rowDblTap","rowTapHold","cellDblClick","cellContext","cellMouseEnter","cellMouseLeave","cellMouseOver","cellMouseOut","cellMouseMove","cellTap","cellDblTap","cellTapHold","headerMouseEnter","headerMouseLeave","headerMouseOver","headerMouseOut","headerMouseMove","groupClick","groupDblClick","groupContext","groupMouseEnter","groupMouseLeave","groupMouseOver","groupMouseOut","groupMouseMove","groupTap","groupDblTap","groupTapHold","subscribers","touchSubscribers","columnSubscribers","touchWatchers","tapDbl","initializeExternalEvents","cellContentsSelectionFixer","selectNode","subscriptionChangeExternal","subscriptionChanged","added","subscribeTouchEvents","unsubscribeTouchEvents","handleTouch","notouch","dispatchEvent","watchers","componentObj","Keybindings","watchKeys","pressedKeys","keyupBinding","keydownBinding","bindings","keybindings","mergedBindings","mapBindings","bindEvents","clearBindings","binding","mapBinding","symbolsList","ctrl","meta","code","checkBinding","ctrlKey","shiftKey","metaKey","navPrev","navNext","navUp","navDown","scrollPageUp","scrollPageDown","scrollToStart","scrollToEnd","copyToClipboard","keyBlock","newPos","displayRowsCount","scrollMax","navLeft","navRight","Menu","nestedMenuBlock","currentComponent","rootPopup","deprecationCheck","initializeRowWatchers","initializeGroupWatchers","rowContextMenu","loadMenuEvent","on","rowClickMenu","groupContextMenu","groupClickMenu","headerContextMenu","loadMenuTableColumnEvent","headerClickMenu","headerMenu","initializeColumnHeaderMenu","contextMenu","loadMenuTableCellEvent","clickMenu","headerMenuEl","icon","headerMenuIcon","menu","loadMenu","parentPopup","itemEl","disabled","MoveColumns","placeholderElement","createPlaceholderElement","hoverElement","checkTimeout","checkPeriod","moving","toCol","toColAfter","startX","autoScrollMargin","autoScrollStep","autoScrollTimeout","touchMove","moveHover","endMove","movableColumns","colEl","mousemove","which","startMove","bindTouchEvents","nextColWidth","prevColWidth","nextColWidthLast","prevColWidthLast","startXMove","moveToCol","_bindMouseMove","movingCells","_unbindMouseMove","moveColumnActual","scrollPos","columnHolder","xPos","MoveRows","toRowAfter","hasHandle","startY","tableRowDropEvent","connection","connectionSelectorsTables","connectionSelectorsElements","connectionElements","connections","connectedTable","connectedRow","movableRowsConnectedTables","movableRowsConnectedElements","initializeCell","mouseup","tableRowDrop","previousSibling","rowHandle","nextRowHeight","prevRowHeight","nextRowHeightLast","prevRowHeightLast","startYMove","setStartPosition","connectToTables","pointerEvents","disconnectFromTables","moveHoverConnections","moveHoverTable","rowHolder","yPos","connectionTables","commsConnections","query","prototype","querySelectorAll","dropEvent","elementRowDrop","tabulatorElementDropEvent","sender","movableRowsSender","senders","movableRowsReceiver","receivers","connect","disconnect","dropComplete","fromRow","fromTable","toTable","Mutator","enabled","transformCell","mutateLink","lookupMutator","mutators","mutatorEdit","links","linkCell","pageSize","currentRow","currentPage","totalRows","totalPages","showingEl","valueEl","ofEl","totalEl","rowsEl","pages","Page","progressiveLoad","pageCounterElement","pageCounter","page","remoteRowCountEstimate","initialLoad","dataChanging","pageSizes","setMaxPage","setPage","userSetPageToRow","userSetPageSize","getPageSize","previousPage","nextPage","getPage","getPageMax","setPageToRow","initialLoadComplete","calculatePageSizes","footerRedraw","paginationAddRow","rowAddingPosition","paginationMode","remotePageParams","_parseRemoteData","restOnRenderBefore","initializePageCounter","initializePaginator","initializeProgressive","scrollVertical","dispRows","testElRow","testElCell","paginationSize","visibility","generatePageSizeSelectList","setPageSize","dir","loading","progressiveLoadScrollMargin","pagesElement","firstBut","prevBut","nextBut","lastBut","paginationSizeSelector","pageSizeSelect","counter","paginationCounter","pageCounters","hidden","pageSelectLabel","paginationCounterHolder","paginationElement","paginationCounterElement","footerAppend","paginationInitialPage","paginationButtonCount","trigger","leftSize","rightSize","_generatePageButton","start","end","actualStartRow","actualRowPageSize","actualRows","setMaxRows","_setPageButtons","_setPageCounter","finally","last_page","last_row","addRows","progressiveLoadDelay","footer","containerElement","scrollWidth","defaultPageCounters","local","id","localStorage","getItem","cookie","cookiePos","setItem","expireDate","setDate","getDate","toUTCString","Persistence","defWatcherBlock","readFunc","writeFunc","testKey","removeItem","persistence","retreivedData","persistenceMode","persistenceID","localStorageTest","persistenceReaderFunc","readers","persistenceWriterFunc","writers","retreiveData","save","eventSave","getColumnLayout","setColumnLayout","sorters","initialSort","parseColumns","setColumns","mergeDefinition","getOwnPropertyDescriptor","defineProperty","set","current","oldCols","newCols","_findColumn","validateSorters","getSort","getGroupConfig","getPageConfig","definitions","excludedKeys","defStore","colDef","moduleInitOrder","defaultReaders","defaultWriters","rowContextPopup","loadPopupEvent","rowClickPopup","groupContextPopup","groupClickPopup","headerContextPopup","loadPopupTableColumnEvent","headerClickPopup","headerPopup","initializeColumnHeaderPopup","contextPopup","loadPopupTableCellEvent","clickPopup","headerPopupEl","headerPopupIcon","loadPopup","contentsEl","renderCallback","Print","manualBlock","printAsHtml","replaceTable","cleanup","printFullscreen","genereateTable","printConfig","printStyled","printRowRange","footerContent","scrollX","scrollY","footerEl","tableEl","printHeader","printFooter","printFormatter","scrollTo","ReactiveData","origFuncs","currentVersion","reactiveData","unblock","watchRow","watchData","unwatchData","version","enumerable","configurable","arg","apply","getRowFromDataObject","pop","startRow","newRows","reverse","oldRows","reRenderInPosition","writable","watchKey","watchTreeChildren","childField","rebuildTree","ResizeColumns","startColumn","startWidth","latestX","initialNextColumn","layoutColumnHeader","layoutCellHandles","deInitializeComponent","resizeHandle","columnLayoutUpdated","deInitializeColumn","resizable","initializeEventWatchers","reinitializeColumn","handleEl","nearestColumn","_checkResizability","handleDown","_mouseDown","oldWidth","parentElement","mouseMove","blockedBefore","blockedAfter","startDiff","moveDiff","resizableColumnFit","colWidth","browserSlow","checkCellHeights","mouseUp","ResizeRows","startHeight","prevHandle","prevHandleDown","screenY","ResizeTable","observer","containerObserver","tableHeight","tableWidth","containerHeight","containerWidth","autoResize","tableStyle","ResizeObserver","entry","browserMobile","nodeHeight","contentRect","nodeWidth","observe","fixedHeight","tableResized","unobserve","ResponsiveLayout","hiddenColumns","collapseFormatter","collapseStartOpen","collapseHandleColumn","updateColumnVisibility","initializeResponsivity","layoutMode","responsiveLayoutCollapseFormatter","formatCollapsedData","responsiveLayoutCollapseStartOpen","responsive","order","generateCollapsedContent","generateCollapsedRowContent","colCount","working","getFlexBaseWidth","headerVisible","hideColumn","showColumn","activeRowsCount","renderEmptyScroll","generateCollapsedRowData","mockCellComponent","responsiveLayoutCollapseUseFormatters","node_content","titleData","valueData","titleHighlight","SelectRow","selecting","lastClickedRow","selectPrev","headerCheckboxElement","selectRows","deselectRows","getSelectedRows","getSelectedData","isRowSelected","selectable","clearSelectionData","rowRetrieve","selectablePersistence","_deselectRow","_rowSelectionChanged","endSelect","selectableCheck","getCurrentCell","_clearSelection","lastClickedRowIdx","getDisplayRowIndex","rowIdx","fromRowIdx","toRowIdx","toggledRows","toggledRow","_selectRow","rowMatch","rowInfo","selectableRollingSelection","checkboxEl","dataTreeSelectPropagate","childRowSelection","selectedRow","aRow","bRow","alignEmptyValues","decimalSeparator","thousandSeparator","string","locale","langLocale","localeCompare","time","boolean","array","calc","d","alphanum","Sort","sortList","userSetSort","clearSort","sortMode","remoteSortParams","setSort","refreshSort","arrowEl","sorterParams","startingDir","headerSortStartingDir","headerSortTristate","headerSort","headerSortElement","columnHeaderSortMulti","newSortList","sortOrderReverse","sortListActual","rowComponents","clearColumnHeaders","sortObj","findSorter","setColumnHeader","_sortItems","sorterCount","sortItem","_sortRow","el1Comp","el2Comp","el1","el2","defaultSorters","Tooltip","tooltipSubscriber","headerSubscriber","timeout","popupInstance","tooltipGenerationMode","headerTooltip","mousemoveCheck","mouseoutCheck","tooltip","clearPopup","loadTooltip","tooltipDelay","parameters","float","numeric","minLength","maxLength","unique","cellData","required","Validate","invalidCells","getInvalidCells","userClearCellValidation","userValidate","cellIsValid","clearValidation","cellValidate","columnValidate","rowValidate","editValidate","editorClear","editedClear","previousValue","validate","cancelled","validator","_extractValidator","substring","_buildValidator","validators","failedValidators","invalidIndex","defaultValidators","OptionsList","msgType","userOptions","debugInvalidOptions","hasOwnProperty","Renderer","elementVertical","elementHorizontal","verticalFillMode","includingBuffer","clearRows","clearColumns","renderRows","renderColumns","rerenderRows","ifVisible","rowIndex","scrollToRowIfVisible","scrollToRowPosition","scrollToRowNearestTop","BaiscHorizontal","VirtualDomHorizontal","leftCol","rightCol","vDomScrollPosLeft","vDomScrollPosRight","vDomPadRight","fitDataColAvg","windowBuffer","isFitData","compatibilityCheck","layoutCheck","vertScrollListen","clearVisRowCache","dataChange","buffer","cols","colPos","calcWindowBuffer","leftPos","rightPos","fitDataCheck","vdomHoz","reinitChanged","reinitializeRows","reinitializeRow","change","colEnd","layoutRefresh","addColRight","removeColLeft","addColLeft","removeColRight","changes","fitDataColActualWidthCheck","ex","message","newWidth","widthDiff","colPositionAdjust","ColumnManager","blockHozScrollEvent","columnsByField","defaultColumnOptions","initializeRenderer","createHeadersElement","createHeaderElement","renderClass","renderers","virtual","RendererVirtualDomHorizontal","basic","RendererBasicHorizontal","hozAdjust","scrollColumns","autoColumnsDefinitions","_addColumn","_reIndexColumns","nextToColumn","topColumn","parentIndex","nextEl","columnHeaderVertAlign","root","structured","_moveColumnInArray","getComponents","updateRows","fromIndex","adjust","scrollToColumnPosition","scrollToColumnIfVisible","generateCell","totalWidth","fixedWidth","resetScroll","BaiscVertical","onlyGroupHeaders","rowTop","VirtualDomVertical","vDomRowHeight","vDomTop","vDomBottom","vDomScrollPosTop","vDomScrollPosBottom","vDomTopPad","vDomBottomPad","vDomMaxRenderChain","vDomWindowBuffer","vDomWindowMinTotalRows","vDomWindowMinMarginRows","vDomTopNewRows","vDomBottomNewRows","paddingBottom","_virtualRenderFill","topOffset","deinitializeHeight","topDiff","bottomDiff","_addTopRow","vDomScrollHeight","_removeBottomRow","_addBottomRow","_removeTopRow","renderVerticalBuffer","topFound","bottomRow","forceMove","topPad","rowsHeight","heightOccupied","topPadHeight","rowsCount","fillableSpace","addedRows","paddingAdjust","_quickNormalizeRowHeight","removableRows","RowManager","createHolderElement","createTableElement","heightFixer","placeholderContents","firstRender","renderMode","activeRowsPipeline","redrawBlockRestoreConfig","redrawBlockRenderInPosition","dataPipeline","displayPipeline","initializePlaceholder","leftDir","topDir","_positionPlaceholder","scrollRows","columnsChanged","_setDataActual","generateColumnsFromRowData","_wipeElements","allIndex","activeIndex","setActiveRows","displayRowIterator","regenerateRowNumbers","_showPlaceholder","findAddRowPos","_clearPlaceholder","addRowPos","chainResult","findRowIndex","rowOnly","skipStage","stage","cascadeOrder","refreshPipelines","renderTable","layoutColumnsOnNewData","resetDisplayRows","RendererVirtualDomVertical","RendererBasicVertical","renderVertical","_clearTable","initialHeight","otherHeight","external","event","createEvent","initEvent","Event","FooterManager","createContainerElement","initializeElement","footerElement","activate","deactivate","InteractionManager","abortClasses","previousTargets","listeners","componentMap","tabulator-cell","tabulator-row","tabulator-group","tabulator-col","pseudoTrackers","subscriber","pseudoTracking","buildListenerMap","bindSubscriptionWatchers","listenerMap","listener","components","pseudoMouseEnter","pseudoMouseLeave","leaveList","linkedKeys","comp","clearWatchers","bindPseudoEvents","updateEventListeners","track","composedPath","targets","findTargets","bindComponents","triggerEvents","elTargets","targetMatches","previousTarget","closest","ComponentFunctionBinder","funcName","DataLoader","requestOrder","requestNo","alertLoader","mapParams","dataSendParams","objectInvert","dataReceiveParams","clearAlert","alertError","dataLoaderErrorTimeout","dataLoaderLoading","dataLoaderError","ExternalEventBus","debug","events","subscriptionNotifiers","_debugDispatch","_dispatch","_notifiySubscriptionChange","notifiers","callResult","log","InternalEventBus","_debugChain","_chain","_debugConfirm","_confirm","fallback","confirmed","TableRegistry","tables","matchElement","Tabulator","lookupTable","fitData","reinitializeColumnWidths","fitDataFill","fitDataGeneral","fitDataTable","fitDataStretch","colsWidth","gap","lastCol","fitColumns","flexColWidth","overflowWidth","flexWidth","flexGrowUnits","flexColumns","fixedShrinkColumns","flexShrinkUnits","gapFill","calcWidth","scaleColumns","freeSpace","shrinkCols","oversizeCols","oversizeSpace","remainingSpace","remainingFlexGrowUnits","changeUnits","undersizeCols","calcGrow","widthGrow","calcShrink","widthShrink","Layout","modes","defaultModes","Localize","langList","langs","setHeaderFilterPlaceholder","installLang","setLocale","getLang","default","_setLangProp","desiredLocale","language","traverseLang","trans","_executeBindings","pathArray","_getLangElement","rootPath","page_size","page_title","first","first_title","last","last_title","prev_title","next","next_title","showing","of","Comms","receive","selectors","con","tableComms","commsReceived","ModuleBinder","tabulator","bindStaticFuctionality","bindModules","coreModules","moduleBindings","extendModule","property","source","registerModule","mod","registerModuleBinding","findTable","orderedStartMods","orderedEndMods","unOrderedMods","moduleCore","modulesCore","modulesRegular","core","mods","Alert","_createAlertElement","msgElement","_createMsgElement","_typeClass","interactionMonitor","initializeCoreSystems","_create","_clearObjectPointers","_mapDeprecatedFunctionality","debugEventsExternal","debugEventsInternal","InteractionMonitor","_rtlCheck","_buildElement","_initializeTable","_loadInitialData","textDirection","direction","newElement","_detectBrowser","deregister","ua","userAgent","vendor","opera","msg","stack","line","debugInitialization","Error","restoreRedraw","blockActiveLoad","clearData","getDataCount","responses","getRowFromPosition","foundRows","getDefinitionTree","fromColumn","plugin","rowFormatterPrint","rowFormatterClipboard","rowFormatterHtmlOutput","TabulatorFull","PseudoRow","_createElement"],"mappings":"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"}